{"version":3,"file":"js/about.82ea29c5.js","mappings":"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","sources":["webpack://vue-project/./src/views/game/index.vue","webpack://vue-project/src/views/game/index.vue","webpack://vue-project/./src/views/game/index.vue?c2f7","webpack://vue-project/./src/views/game/index.vue?60b7","webpack://vue-project/./src/views/index/index.vue","webpack://vue-project/src/views/index/index.vue","webpack://vue-project/./src/views/index/index.vue?87ff","webpack://vue-project/./src/views/index/index.vue?049f","webpack://vue-project/./node_modules/earcut/src/earcut.js","webpack://vue-project/./node_modules/parse-svg-path/index.js","webpack://vue-project/./node_modules/pixi.js/node_modules/eventemitter3/index.js","webpack://vue-project/./node_modules/core-js/internals/a-possible-prototype.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-byte-length.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-is-detached.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-not-detached.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-transfer.js","webpack://vue-project/./node_modules/core-js/internals/array-buffer-view-core.js","webpack://vue-project/./node_modules/core-js/internals/array-from-constructor-and-list.js","webpack://vue-project/./node_modules/core-js/internals/array-to-reversed.js","webpack://vue-project/./node_modules/core-js/internals/array-with.js","webpack://vue-project/./node_modules/core-js/internals/classof.js","webpack://vue-project/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://vue-project/./node_modules/core-js/internals/define-built-in-accessor.js","webpack://vue-project/./node_modules/core-js/internals/detach-transferable.js","webpack://vue-project/./node_modules/core-js/internals/get-built-in-node-module.js","webpack://vue-project/./node_modules/core-js/internals/is-big-int-array.js","webpack://vue-project/./node_modules/core-js/internals/is-possible-prototype.js","webpack://vue-project/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://vue-project/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://vue-project/./node_modules/core-js/internals/structured-clone-proper-transfer.js","webpack://vue-project/./node_modules/core-js/internals/to-big-int.js","webpack://vue-project/./node_modules/core-js/internals/to-index.js","webpack://vue-project/./node_modules/core-js/internals/to-string-tag-support.js","webpack://vue-project/./node_modules/core-js/internals/to-string.js","webpack://vue-project/./node_modules/core-js/modules/es.array-buffer.detached.js","webpack://vue-project/./node_modules/core-js/modules/es.array-buffer.transfer-to-fixed-length.js","webpack://vue-project/./node_modules/core-js/modules/es.array-buffer.transfer.js","webpack://vue-project/./node_modules/core-js/modules/es.typed-array.to-reversed.js","webpack://vue-project/./node_modules/core-js/modules/es.typed-array.to-sorted.js","webpack://vue-project/./node_modules/core-js/modules/es.typed-array.with.js","webpack://vue-project/./node_modules/core-js/modules/web.url-search-params.delete.js","webpack://vue-project/./node_modules/core-js/modules/web.url-search-params.has.js","webpack://vue-project/./node_modules/core-js/modules/web.url-search-params.size.js","webpack://vue-project/../../../src/assets/cache/Cache.ts","webpack://vue-project/../../../../src/assets/loader/parsers/LoaderParser.ts","webpack://vue-project/../../../src/assets/utils/createStringVariations.ts","webpack://vue-project/../../../src/assets/resolver/Resolver.ts","webpack://vue-project/../../../src/assets/utils/convertToList.ts","webpack://vue-project/../../../src/assets/utils/copySearchParams.ts","webpack://vue-project/../../../src/assets/utils/isSingleItem.ts","webpack://vue-project/./node_modules/@pixi/colord/index.mjs","webpack://vue-project/./node_modules/@pixi/colord/plugins/names.mjs","webpack://vue-project/../../src/color/Color.ts","webpack://vue-project/../../src/environment-browser/BrowserAdapter.ts","webpack://vue-project/../../src/environment/adapter.ts","webpack://vue-project/../../src/extensions/Extensions.ts","webpack://vue-project/../../src/filters/FilterEffect.ts","webpack://vue-project/../../src/environment-browser/browserExt.ts","webpack://vue-project/../../src/environment-webworker/webworkerExt.ts","webpack://vue-project/../../../src/utils/browser/isWebGLSupported.ts","webpack://vue-project/../../../src/utils/browser/isWebGPUSupported.ts","webpack://vue-project/../../../src/rendering/renderers/autoDetectRenderer.ts","webpack://vue-project/../../src/app/Application.ts","webpack://vue-project/../../../src/scene/text-bitmap/BitmapFont.ts","webpack://vue-project/../../../../src/scene/text-bitmap/asset/bitmapFontTextParser.ts","webpack://vue-project/../../../../src/scene/text-bitmap/asset/bitmapFontXMLParser.ts","webpack://vue-project/../../../../src/scene/text-bitmap/asset/bitmapFontXMLStringParser.ts","webpack://vue-project/../../../../src/scene/text-bitmap/asset/loadBitmapFont.ts","webpack://vue-project/../../src/assets/BackgroundLoader.ts","webpack://vue-project/../../../../src/assets/cache/parsers/cacheTextureArray.ts","webpack://vue-project/../../../../src/assets/detections/utils/testImageFormat.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectAvif.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectDefaults.ts","webpack://vue-project/../../../../src/assets/detections/utils/testVideoFormat.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectMp4.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectOgv.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectWebm.ts","webpack://vue-project/../../../../src/assets/detections/parsers/detectWebp.ts","webpack://vue-project/../../../src/assets/loader/Loader.ts","webpack://vue-project/../../../src/assets/utils/checkDataUrl.ts","webpack://vue-project/../../../src/assets/utils/checkExtension.ts","webpack://vue-project/../../../../src/assets/loader/parsers/loadJson.ts","webpack://vue-project/../../../../src/assets/loader/parsers/loadTxt.ts","webpack://vue-project/../../../../src/assets/loader/parsers/loadWebFont.ts","webpack://vue-project/../../../src/utils/network/getResolutionOfUrl.ts","webpack://vue-project/../../../../src/assets/loader/parsers/textures/utils/createTexture.ts","webpack://vue-project/../../../../src/assets/loader/parsers/textures/loadSVG.ts","webpack://vue-project/../../../../src/assets/loader/workers/WorkerManager.ts","webpack://vue-project/../../../../src/assets/loader/parsers/textures/loadTextures.ts","webpack://vue-project/../../../../src/assets/loader/parsers/textures/loadVideoTextures.ts","webpack://vue-project/../../../../src/assets/resolver/parsers/resolveTextureUrl.ts","webpack://vue-project/../../../../src/assets/resolver/parsers/resolveJsonUrl.ts","webpack://vue-project/../../src/assets/Assets.ts","webpack://vue-project/../src/index.ts","webpack://vue-project/../../../src/maths/matrix/Matrix.ts","webpack://vue-project/../../../src/maths/misc/const.ts","webpack://vue-project/../../../src/maths/misc/pow2.ts","webpack://vue-project/../../../src/maths/point/ObservablePoint.ts","webpack://vue-project/../../../src/maths/point/Point.ts","webpack://vue-project/../../../src/maths/shapes/Rectangle.ts","webpack://vue-project/../../../../src/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.ts","webpack://vue-project/../../../../src/rendering/batcher/gl/utils/maxRecommendedTextures.ts","webpack://vue-project/../../../../src/rendering/batcher/gpu/getTextureBatchBindGroup.ts","webpack://vue-project/../../../../src/rendering/batcher/shared/BatchTextureArray.ts","webpack://vue-project/../../../../src/rendering/batcher/shared/Batcher.ts","webpack://vue-project/../../../../src/rendering/batcher/shared/BatchGeometry.ts","webpack://vue-project/../../../../src/rendering/batcher/shared/DefaultShader.ts","webpack://vue-project/../../../../src/rendering/batcher/shared/DefaultBatcher.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/utils/addBits.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/utils/compileHooks.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/utils/compileInputs.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/utils/compileOutputs.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/utils/injectBits.ts","webpack://vue-project/../../../../src/rendering/high-shader/compiler/compileHighShader.ts","webpack://vue-project/../../../src/rendering/high-shader/defaultProgramTemplate.ts","webpack://vue-project/../../../../src/rendering/high-shader/shader-bits/globalUniformsBit.ts","webpack://vue-project/../../../src/rendering/high-shader/compileHighShaderToProgram.ts","webpack://vue-project/../../../../src/rendering/high-shader/shader-bits/colorBit.ts","webpack://vue-project/../../../../src/rendering/high-shader/shader-bits/generateTextureBatchBit.ts","webpack://vue-project/../../../../src/rendering/high-shader/shader-bits/roundPixelsBit.ts","webpack://vue-project/../../../../src/rendering/mask/utils/addMaskBounds.ts","webpack://vue-project/../../../../src/rendering/mask/utils/addMaskLocalBounds.ts","webpack://vue-project/../../../../src/rendering/mask/alpha/AlphaMask.ts","webpack://vue-project/../../../../src/rendering/mask/color/ColorMask.ts","webpack://vue-project/../../../../src/rendering/mask/stencil/StencilMask.ts","webpack://vue-project/../../src/rendering/init.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/const.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/preprocessors/insertVersion.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/preprocessors/setProgramName.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/preprocessors/stripVersion.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/GlProgram.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.ts","webpack://vue-project/../../../../src/rendering/renderers/gl/shader/program/getTestContext.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/BindGroup.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/utils/extractStructAndGroups.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/shader/const.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/utils/generateLayoutHash.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.ts","webpack://vue-project/../../../../src/rendering/renderers/gpu/shader/GpuProgram.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/buffer/Buffer.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/buffer/const.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/buffer/utils/fastCopy.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/utils/ensureIsBuffer.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/utils/getGeometryBounds.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/Geometry.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/instructions/InstructionSet.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/shader/Shader.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/shader/types.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/shader/utils/getDefaultUniformValue.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/shader/UniformGroup.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/state/const.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/state/getAdjustedBlendModeBlend.ts","webpack://vue-project/../../src/environment/autoDetectEnvironment.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/system/AbstractRenderer.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/system/SystemRunner.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/CanvasPool.ts","webpack://vue-project/../../../src/maths/matrix/groupD8.ts","webpack://vue-project/../../../src/utils/misc/NOOP.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/Texture.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/TextureMatrix.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/TextureStyle.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/sources/BufferImageSource.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/sources/CanvasSource.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/sources/ImageSource.ts","webpack://vue-project/../../../../src/scene/container/utils/definedProps.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/sources/TextureSource.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/sources/VideoSource.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/texture/utils/textureFrom.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/utils/createIdFromString.ts","webpack://vue-project/../../../src/rendering/renderers/types.ts","webpack://vue-project/../../src/culling/cullingMixin.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/childrenHelperMixin.ts","webpack://vue-project/../../../src/rendering/mask/MaskEffectManager.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/effectsMixin.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/findMixin.ts","webpack://vue-project/../../../../src/scene/container/utils/checkChildrenDidChange.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/measureMixin.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/onRenderMixin.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/sortMixin.ts","webpack://vue-project/../../../../src/scene/container/container-mixins/toLocalGlobalMixin.ts","webpack://vue-project/../../../src/scene/container/RenderGroup.ts","webpack://vue-project/../../../../src/scene/container/utils/assignWithIgnore.ts","webpack://vue-project/../../../src/scene/container/Container.ts","webpack://vue-project/../../../../src/scene/container/bounds/Bounds.ts","webpack://vue-project/../../../../src/scene/container/bounds/getGlobalBounds.ts","webpack://vue-project/../../../../src/scene/container/bounds/getLocalBounds.ts","webpack://vue-project/../../../../src/scene/container/bounds/utils/matrixAndBoundsPool.ts","webpack://vue-project/../../../../src/scene/container/utils/multiplyHexColors.ts","webpack://vue-project/../../../../src/scene/graphics/shared/BatchableGraphics.ts","webpack://vue-project/../../../../src/scene/graphics/shared/svg/SVGToGraphicsPath.ts","webpack://vue-project/../../../src/maths/shapes/Circle.ts","webpack://vue-project/../../../src/maths/shapes/Ellipse.ts","webpack://vue-project/../../../src/maths/misc/squaredDistanceToLineSegment.ts","webpack://vue-project/../../../src/maths/shapes/Polygon.ts","webpack://vue-project/../../../src/maths/shapes/RoundedRectangle.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildAdaptiveBezier.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildArc.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildArcTo.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildArcToSvg.ts","webpack://vue-project/../../../../src/scene/graphics/shared/path/roundShape.ts","webpack://vue-project/../../../../src/scene/graphics/shared/path/ShapePath.ts","webpack://vue-project/../../../../src/scene/graphics/shared/path/GraphicsPath.ts","webpack://vue-project/../../../../src/scene/graphics/shared/svg/SVGParser.ts","webpack://vue-project/../../../../src/scene/graphics/shared/GraphicsContext.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/utils/buildUvs.ts","webpack://vue-project/../../../../src/rendering/renderers/shared/geometry/utils/transformVertices.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildCircle.ts","webpack://vue-project/../../../../src/scene/graphics/shared/const.ts","webpack://vue-project/../../../../src/scene/graphics/shared/utils/getOrientationOfPoints.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildLine.ts","webpack://vue-project/../../../../src/scene/graphics/shared/utils/triangulateWithHoles.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildPolygon.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildRectangle.ts","webpack://vue-project/../../../../src/scene/graphics/shared/buildCommands/buildTriangle.ts","webpack://vue-project/../../../../src/scene/graphics/shared/utils/buildContextBatches.ts","webpack://vue-project/../../../../src/scene/graphics/shared/GraphicsContextSystem.ts","webpack://vue-project/../../../../src/scene/graphics/shared/fill/FillGradient.ts","webpack://vue-project/../../../../src/scene/graphics/shared/fill/FillPattern.ts","webpack://vue-project/../../../../src/scene/graphics/shared/utils/convertFillInputToFillStyle.ts","webpack://vue-project/../../../src/scene/sprite/Sprite.ts","webpack://vue-project/../../../src/scene/text-bitmap/AbstractBitmapFont.ts","webpack://vue-project/../../../../src/scene/text-bitmap/utils/resolveCharacters.ts","webpack://vue-project/../../../src/scene/text-bitmap/DynamicBitmapFont.ts","webpack://vue-project/../../../src/scene/text-bitmap/BitmapFontManager.ts","webpack://vue-project/../../../../src/scene/text-bitmap/utils/getBitmapTextLayout.ts","webpack://vue-project/../../../src/scene/text/TextStyle.ts","webpack://vue-project/../../../../src/scene/text/canvas/CanvasTextMetrics.ts","webpack://vue-project/../../../../src/scene/text/canvas/utils/fontStringFromTextStyle.ts","webpack://vue-project/../../../../src/scene/text/canvas/utils/getCanvasFillStyle.ts","webpack://vue-project/../../../../src/scene/text/utils/generateTextStyleKey.ts","webpack://vue-project/../../../src/scene/view/ViewContainer.ts","webpack://vue-project/../../src/spritesheet/Spritesheet.ts","webpack://vue-project/../../src/spritesheet/spritesheetAsset.ts","webpack://vue-project/../../src/spritesheet/init.ts","webpack://vue-project/../../src/ticker/TickerListener.ts","webpack://vue-project/../../src/ticker/Ticker.ts","webpack://vue-project/../../src/ticker/const.ts","webpack://vue-project/../../../src/utils/browser/detectVideoAlphaMode.ts","webpack://vue-project/../../../src/utils/browser/unsafeEvalSupported.ts","webpack://vue-project/../../src/utils/const.ts","webpack://vue-project/../../../src/utils/data/ViewableBuffer.ts","webpack://vue-project/../../../src/utils/data/removeItems.ts","webpack://vue-project/../../../src/utils/data/uid.ts","webpack://vue-project/../../../src/utils/data/updateQuadBounds.ts","webpack://vue-project/../../../src/utils/global/globalHooks.ts","webpack://vue-project/../../../src/utils/logging/deprecation.ts","webpack://vue-project/../../../src/utils/logging/warn.ts","webpack://vue-project/../../src/utils/path.ts","webpack://vue-project/../../../src/utils/pool/Pool.ts","webpack://vue-project/../../../src/utils/pool/PoolGroup.ts","webpack://vue-project/./node_modules/pixi.js/node_modules/eventemitter3/index.mjs"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"container\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div ref=\"container\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Application, Sprite, Assets } from 'pixi.js';\r\nexport default {\r\n  mounted() {\r\n    this.$nextTick(() => this.init())\r\n  },  \r\n  methods: {\r\n    async init() {\r\n      const app = new Application();\r\n\r\n      await app.init()\r\n\r\n      this.$refs.container.appendChild(app.canvas)\r\n\r\n      const texture = await Assets.load(require('@/assets/images/test.jpg'))\r\n\r\n      const bunny = new Sprite(texture)\r\n\r\n      bunny.x = app.renderer.width / 2\r\n      bunny.y = app.renderer.height / 2\r\n\r\n      bunny.anchor.x = 0.5\r\n      bunny.anchor.y = 0.5\r\n\r\n      app.stage.addChild(bunny)\r\n\r\n      app.ticker.add(() => {\r\n        bunny.rotation += 0.01\r\n      })\r\n\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=59b9a40a\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{ref:\"container\"})])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <div ref=\"container\"></div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Application, Sprite, Assets } from 'pixi.js';\r\nexport default {\r\n  mounted() {\r\n    this.$nextTick(() => this.init())\r\n  },  \r\n  methods: {\r\n    async init() {\r\n      const app = new Application();\r\n\r\n      await app.init()\r\n\r\n      this.$refs.container.appendChild(app.canvas)\r\n\r\n      const texture = await Assets.load(require('@/assets/images/test.jpg'))\r\n\r\n      const bunny = new Sprite(texture)\r\n\r\n      bunny.x = app.renderer.width / 2\r\n      bunny.y = app.renderer.height / 2\r\n\r\n      bunny.anchor.x = 0.5\r\n      bunny.anchor.y = 0.5\r\n\r\n      app.stage.addChild(bunny)\r\n\r\n      app.ticker.add(() => {\r\n        bunny.rotation += 0.01\r\n      })\r\n\r\n    }\r\n  }\r\n}\r\n</script>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=3c24e25f\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim | 0);\n            triangles.push(ear.i / dim | 0);\n            triangles.push(next.i / dim | 0);\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    var p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    var ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox; min & max are calculated like this for speed\n    var x0 = ax < bx ? (ax < cx ? ax : cx) : (bx < cx ? bx : cx),\n        y0 = ay < by ? (ay < cy ? ay : cy) : (by < cy ? by : cy),\n        x1 = ax > bx ? (ax > cx ? ax : cx) : (bx > cx ? bx : cx),\n        y1 = ay > by ? (ay > cy ? ay : cy) : (by > cy ? by : cy);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangle(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim | 0);\n            triangles.push(p.i / dim | 0);\n            triangles.push(b.i / dim | 0);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    var bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    var bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // dones't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    var o1 = sign(area(p1, q1, p2));\n    var o2 = sign(area(p1, q1, q2));\n    var o3 = sign(area(p2, q2, p1));\n    var o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertex index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertex nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = 0;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","'use strict';\nvar isPossiblePrototype = require('../internals/is-possible-prototype');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (isPossiblePrototype(argument)) return argument;\n  throw new $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","'use strict';\n// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar classof = require('../internals/classof-raw');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar TypeError = globalThis.TypeError;\n\n// Includes\n// - Perform ? RequireInternalSlot(O, [[ArrayBufferData]]).\n// - If IsSharedArrayBuffer(O) is true, throw a TypeError exception.\nmodule.exports = ArrayBuffer && uncurryThisAccessor(ArrayBuffer.prototype, 'byteLength', 'get') || function (O) {\n  if (classof(O) !== 'ArrayBuffer') throw new TypeError('ArrayBuffer expected');\n  return O.byteLength;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this-clause');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\n\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar ArrayBufferPrototype = ArrayBuffer && ArrayBuffer.prototype;\nvar slice = ArrayBufferPrototype && uncurryThis(ArrayBufferPrototype.slice);\n\nmodule.exports = function (O) {\n  if (arrayBufferByteLength(O) !== 0) return false;\n  if (!slice) return false;\n  try {\n    slice(O, 0, 0);\n    return false;\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (it) {\n  if (isDetached(it)) throw new $TypeError('ArrayBuffer is detached');\n  return it;\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar toIndex = require('../internals/to-index');\nvar notDetached = require('../internals/array-buffer-not-detached');\nvar arrayBufferByteLength = require('../internals/array-buffer-byte-length');\nvar detachTransferable = require('../internals/detach-transferable');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar ArrayBuffer = globalThis.ArrayBuffer;\nvar DataView = globalThis.DataView;\nvar min = Math.min;\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\nvar DataViewPrototype = DataView.prototype;\nvar slice = uncurryThis(ArrayBufferPrototype.slice);\nvar isResizable = uncurryThisAccessor(ArrayBufferPrototype, 'resizable', 'get');\nvar maxByteLength = uncurryThisAccessor(ArrayBufferPrototype, 'maxByteLength', 'get');\nvar getInt8 = uncurryThis(DataViewPrototype.getInt8);\nvar setInt8 = uncurryThis(DataViewPrototype.setInt8);\n\nmodule.exports = (PROPER_STRUCTURED_CLONE_TRANSFER || detachTransferable) && function (arrayBuffer, newLength, preserveResizability) {\n  var byteLength = arrayBufferByteLength(arrayBuffer);\n  var newByteLength = newLength === undefined ? byteLength : toIndex(newLength);\n  var fixedLength = !isResizable || !isResizable(arrayBuffer);\n  var newBuffer;\n  notDetached(arrayBuffer);\n  if (PROPER_STRUCTURED_CLONE_TRANSFER) {\n    arrayBuffer = structuredClone(arrayBuffer, { transfer: [arrayBuffer] });\n    if (byteLength === newByteLength && (preserveResizability || fixedLength)) return arrayBuffer;\n  }\n  if (byteLength >= newByteLength && (!preserveResizability || fixedLength)) {\n    newBuffer = slice(arrayBuffer, 0, newByteLength);\n  } else {\n    var options = preserveResizability && !fixedLength && maxByteLength ? { maxByteLength: maxByteLength(arrayBuffer) } : undefined;\n    newBuffer = new ArrayBuffer(newByteLength, options);\n    var a = new DataView(arrayBuffer);\n    var b = new DataView(newBuffer);\n    var copyLength = min(newByteLength, byteLength);\n    for (var i = 0; i < copyLength; i++) setInt8(b, i, getInt8(a, i));\n  }\n  if (!PROPER_STRUCTURED_CLONE_TRANSFER) detachTransferable(arrayBuffer);\n  return newBuffer;\n};\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar globalThis = require('../internals/global-this');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = globalThis.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = globalThis.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = globalThis.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(globalThis.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw new TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw new TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = globalThis[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = globalThis[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = globalThis[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw new TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (globalThis[NAME]) setPrototypeOf(globalThis[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineBuiltInAccessor(TypedArrayPrototype, TO_STRING_TAG, {\n    configurable: true,\n    get: function () {\n      return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n    }\n  });\n  for (NAME in TypedArrayConstructorsList) if (globalThis[NAME]) {\n    createNonEnumerableProperty(globalThis[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\nmodule.exports = function (Constructor, list, $length) {\n  var index = 0;\n  var length = arguments.length > 2 ? $length : lengthOfArrayLike(list);\n  var result = new Constructor(length);\n  while (length > index) result[index] = list[index++];\n  return result;\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.toReversed\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.toReversed\nmodule.exports = function (O, C) {\n  var len = lengthOfArrayLike(O);\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = O[len - k - 1];\n  return A;\n};\n","'use strict';\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\n\nvar $RangeError = RangeError;\n\n// https://tc39.es/proposal-change-array-by-copy/#sec-array.prototype.with\n// https://tc39.es/proposal-change-array-by-copy/#sec-%typedarray%.prototype.with\nmodule.exports = function (O, C, index, value) {\n  var len = lengthOfArrayLike(O);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualIndex = relativeIndex < 0 ? len + relativeIndex : relativeIndex;\n  if (actualIndex >= len || actualIndex < 0) throw new $RangeError('Incorrect index');\n  var A = new C(len);\n  var k = 0;\n  for (; k < len; k++) A[k] = k === actualIndex ? value : O[k];\n  return A;\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar makeBuiltIn = require('../internals/make-built-in');\nvar defineProperty = require('../internals/object-define-property');\n\nmodule.exports = function (target, name, descriptor) {\n  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });\n  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });\n  return defineProperty.f(target, name, descriptor);\n};\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar getBuiltInNodeModule = require('../internals/get-built-in-node-module');\nvar PROPER_STRUCTURED_CLONE_TRANSFER = require('../internals/structured-clone-proper-transfer');\n\nvar structuredClone = globalThis.structuredClone;\nvar $ArrayBuffer = globalThis.ArrayBuffer;\nvar $MessageChannel = globalThis.MessageChannel;\nvar detach = false;\nvar WorkerThreads, channel, buffer, $detach;\n\nif (PROPER_STRUCTURED_CLONE_TRANSFER) {\n  detach = function (transferable) {\n    structuredClone(transferable, { transfer: [transferable] });\n  };\n} else if ($ArrayBuffer) try {\n  if (!$MessageChannel) {\n    WorkerThreads = getBuiltInNodeModule('worker_threads');\n    if (WorkerThreads) $MessageChannel = WorkerThreads.MessageChannel;\n  }\n\n  if ($MessageChannel) {\n    channel = new $MessageChannel();\n    buffer = new $ArrayBuffer(2);\n\n    $detach = function (transferable) {\n      channel.port1.postMessage(null, [transferable]);\n    };\n\n    if (buffer.byteLength === 2) {\n      $detach(buffer);\n      if (buffer.byteLength === 0) detach = $detach;\n    }\n  }\n} catch (error) { /* empty */ }\n\nmodule.exports = detach;\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar IS_NODE = require('../internals/environment-is-node');\n\nmodule.exports = function (name) {\n  if (IS_NODE) {\n    try {\n      return globalThis.process.getBuiltinModule(name);\n    } catch (error) { /* empty */ }\n    try {\n      // eslint-disable-next-line no-new-func -- safe\n      return Function('return require(\"' + name + '\")')();\n    } catch (error) { /* empty */ }\n  }\n};\n","'use strict';\nvar classof = require('../internals/classof');\n\nmodule.exports = function (it) {\n  var klass = classof(it);\n  return klass === 'BigInt64Array' || klass === 'BigUint64Array';\n};\n","'use strict';\nvar isObject = require('../internals/is-object');\n\nmodule.exports = function (argument) {\n  return isObject(argument) || argument === null;\n};\n","'use strict';\nvar hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","'use strict';\n/* eslint-disable no-proto -- safe */\nvar uncurryThisAccessor = require('../internals/function-uncurry-this-accessor');\nvar isObject = require('../internals/is-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    requireObjectCoercible(O);\n    aPossiblePrototype(proto);\n    if (!isObject(O)) return O;\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","'use strict';\nvar globalThis = require('../internals/global-this');\nvar fails = require('../internals/fails');\nvar V8 = require('../internals/environment-v8-version');\nvar ENVIRONMENT = require('../internals/environment');\n\nvar structuredClone = globalThis.structuredClone;\n\nmodule.exports = !!structuredClone && !fails(function () {\n  // prevent V8 ArrayBufferDetaching protector cell invalidation and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if ((ENVIRONMENT === 'DENO' && V8 > 92) || (ENVIRONMENT === 'NODE' && V8 > 94) || (ENVIRONMENT === 'BROWSER' && V8 > 97)) return false;\n  var buffer = new ArrayBuffer(8);\n  var clone = structuredClone(buffer, { transfer: [buffer] });\n  return buffer.byteLength !== 0 || clone.byteLength !== 8;\n});\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\n\nvar $TypeError = TypeError;\n\n// `ToBigInt` abstract operation\n// https://tc39.es/ecma262/#sec-tobigint\nmodule.exports = function (argument) {\n  var prim = toPrimitive(argument, 'number');\n  if (typeof prim == 'number') throw new $TypeError(\"Can't convert number to bigint\");\n  // eslint-disable-next-line es/no-bigint -- safe\n  return BigInt(prim);\n};\n","'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toLength = require('../internals/to-length');\n\nvar $RangeError = RangeError;\n\n// `ToIndex` abstract operation\n// https://tc39.es/ecma262/#sec-toindex\nmodule.exports = function (it) {\n  if (it === undefined) return 0;\n  var number = toIntegerOrInfinity(it);\n  var length = toLength(number);\n  if (number !== length) throw new $RangeError('Wrong length or index');\n  return length;\n};\n","'use strict';\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar classof = require('../internals/classof');\n\nvar $String = String;\n\nmodule.exports = function (argument) {\n  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');\n  return $String(argument);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\nvar isDetached = require('../internals/array-buffer-is-detached');\n\nvar ArrayBufferPrototype = ArrayBuffer.prototype;\n\nif (DESCRIPTORS && !('detached' in ArrayBufferPrototype)) {\n  defineBuiltInAccessor(ArrayBufferPrototype, 'detached', {\n    configurable: true,\n    get: function detached() {\n      return isDetached(this);\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transferToFixedLength` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfertofixedlength\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transferToFixedLength: function transferToFixedLength() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, false);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $transfer = require('../internals/array-buffer-transfer');\n\n// `ArrayBuffer.prototype.transfer` method\n// https://tc39.es/proposal-arraybuffer-transfer/#sec-arraybuffer.prototype.transfer\nif ($transfer) $({ target: 'ArrayBuffer', proto: true }, {\n  transfer: function transfer() {\n    return $transfer(this, arguments.length ? arguments[0] : undefined, true);\n  }\n});\n","'use strict';\nvar arrayToReversed = require('../internals/array-to-reversed');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\n\n// `%TypedArray%.prototype.toReversed` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.toreversed\nexportTypedArrayMethod('toReversed', function toReversed() {\n  return arrayToReversed(aTypedArray(this), getTypedArrayConstructor(this));\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar arrayFromConstructorAndList = require('../internals/array-from-constructor-and-list');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\nvar sort = uncurryThis(ArrayBufferViewCore.TypedArrayPrototype.sort);\n\n// `%TypedArray%.prototype.toSorted` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.tosorted\nexportTypedArrayMethod('toSorted', function toSorted(compareFn) {\n  if (compareFn !== undefined) aCallable(compareFn);\n  var O = aTypedArray(this);\n  var A = arrayFromConstructorAndList(getTypedArrayConstructor(O), O);\n  return sort(A, compareFn);\n});\n","'use strict';\nvar arrayWith = require('../internals/array-with');\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar isBigIntArray = require('../internals/is-big-int-array');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toBigInt = require('../internals/to-big-int');\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar getTypedArrayConstructor = ArrayBufferViewCore.getTypedArrayConstructor;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\nvar PROPER_ORDER = !!function () {\n  try {\n    // eslint-disable-next-line no-throw-literal, es/no-typed-arrays, es/no-array-prototype-with -- required for testing\n    new Int8Array(1)['with'](2, { valueOf: function () { throw 8; } });\n  } catch (error) {\n    // some early implementations, like WebKit, does not follow the final semantic\n    // https://github.com/tc39/proposal-change-array-by-copy/pull/86\n    return error === 8;\n  }\n}();\n\n// `%TypedArray%.prototype.with` method\n// https://tc39.es/ecma262/#sec-%typedarray%.prototype.with\nexportTypedArrayMethod('with', { 'with': function (index, value) {\n  var O = aTypedArray(this);\n  var relativeIndex = toIntegerOrInfinity(index);\n  var actualValue = isBigIntArray(O) ? toBigInt(value) : +value;\n  return arrayWith(O, getTypedArrayConstructor(O), relativeIndex, actualValue);\n} }['with'], !PROPER_ORDER);\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar append = uncurryThis(URLSearchParamsPrototype.append);\nvar $delete = uncurryThis(URLSearchParamsPrototype['delete']);\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\nvar push = uncurryThis([].push);\nvar params = new $URLSearchParams('a=1&a=2&b=3');\n\nparams['delete']('a', 1);\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nparams['delete']('b', undefined);\n\nif (params + '' !== 'a=2') {\n  defineBuiltIn(URLSearchParamsPrototype, 'delete', function (name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $delete(this, name);\n    var entries = [];\n    forEach(this, function (v, k) { // also validates `this`\n      push(entries, { key: k, value: v });\n    });\n    validateArgumentsLength(length, 1);\n    var key = toString(name);\n    var value = toString($value);\n    var index = 0;\n    var dindex = 0;\n    var found = false;\n    var entriesLength = entries.length;\n    var entry;\n    while (index < entriesLength) {\n      entry = entries[index++];\n      if (found || entry.key === key) {\n        found = true;\n        $delete(this, entry.key);\n      } else dindex++;\n    }\n    while (dindex < entriesLength) {\n      entry = entries[dindex++];\n      if (!(entry.key === key && entry.value === value)) append(this, entry.key, entry.value);\n    }\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar defineBuiltIn = require('../internals/define-built-in');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toString = require('../internals/to-string');\nvar validateArgumentsLength = require('../internals/validate-arguments-length');\n\nvar $URLSearchParams = URLSearchParams;\nvar URLSearchParamsPrototype = $URLSearchParams.prototype;\nvar getAll = uncurryThis(URLSearchParamsPrototype.getAll);\nvar $has = uncurryThis(URLSearchParamsPrototype.has);\nvar params = new $URLSearchParams('a=1');\n\n// `undefined` case is a Chromium 117 bug\n// https://bugs.chromium.org/p/v8/issues/detail?id=14222\nif (params.has('a', 2) || !params.has('a', undefined)) {\n  defineBuiltIn(URLSearchParamsPrototype, 'has', function has(name /* , value */) {\n    var length = arguments.length;\n    var $value = length < 2 ? undefined : arguments[1];\n    if (length && $value === undefined) return $has(this, name);\n    var values = getAll(this, name); // also validates `this`\n    validateArgumentsLength(length, 1);\n    var value = toString($value);\n    var index = 0;\n    while (index < values.length) {\n      if (values[index++] === value) return true;\n    } return false;\n  }, { enumerable: true, unsafe: true });\n}\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar defineBuiltInAccessor = require('../internals/define-built-in-accessor');\n\nvar URLSearchParamsPrototype = URLSearchParams.prototype;\nvar forEach = uncurryThis(URLSearchParamsPrototype.forEach);\n\n// `URLSearchParams.prototype.size` getter\n// https://github.com/whatwg/url/pull/734\nif (DESCRIPTORS && !('size' in URLSearchParamsPrototype)) {\n  defineBuiltInAccessor(URLSearchParamsPrototype, 'size', {\n    get: function size() {\n      var count = 0;\n      forEach(this, function () { count++; });\n      return count;\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\n","import { warn } from '../../utils/logging/warn';\nimport { convertToList } from '../utils/convertToList';\n\nimport type { CacheParser } from './CacheParser';\n\n/**\n * A single Cache for all assets.\n *\n * When assets are added to the cache via set they normally are added to the cache as key-value pairs.\n *\n * With this cache, you can add parsers that will take the object and convert it to a list of assets that can be cached.\n * for example a cacheSpritesheet parser will add all of the textures found within its sprite sheet directly to the cache.\n *\n * This gives devs the flexibility to cache any type of object however we want.\n *\n * It is not intended that this class is created by developers - it is part of the Asset package.\n * This is the first major system of PixiJS' main Assets class.\n * @example\n * import { Cache } from 'pixi.js';\n *\n * Cache.set('bunny', bunnyTexture);\n * @class Cache\n * @memberof assets\n */\nclass CacheClass\n{\n    private readonly _parsers: CacheParser[] = [];\n\n    private readonly _cache: Map<any, any> = new Map();\n    private readonly _cacheMap: Map<string, {\n        keys: string[],\n        cacheKeys: string[],\n    }> = new Map();\n\n    /** Clear all entries. */\n    public reset(): void\n    {\n        this._cacheMap.clear();\n        this._cache.clear();\n    }\n\n    /**\n     * Check if the key exists\n     * @param key - The key to check\n     */\n    public has(key: any): boolean\n    {\n        return this._cache.has(key);\n    }\n\n    /**\n     * Fetch entry by key\n     * @param key - The key of the entry to get\n     */\n    public get<T = any>(key: any): T\n    {\n        const result = this._cache.get(key);\n\n        if (!result)\n        {\n            // #if _DEBUG\n            warn(`[Assets] Asset id ${key} was not found in the Cache`);\n            // #endif\n        }\n\n        return result as T;\n    }\n\n    /**\n     * Set a value by key or keys name\n     * @param key - The key or keys to set\n     * @param value - The value to store in the cache or from which cacheable assets will be derived.\n     */\n    public set(key: any | any[], value: unknown): void\n    {\n        const keys = convertToList<string>(key);\n\n        let cacheableAssets: Record<string, any>;\n\n        for (let i = 0; i < this.parsers.length; i++)\n        {\n            const parser = this.parsers[i];\n\n            if (parser.test(value))\n            {\n                cacheableAssets = parser.getCacheableAssets(keys, value);\n\n                break;\n            }\n        }\n\n        // convert cacheable assets to a map of key-value pairs\n        const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n\n        if (!cacheableAssets)\n        {\n            keys.forEach((key) =>\n            {\n                cacheableMap.set(key, value);\n            });\n        }\n\n        const cacheKeys = [...cacheableMap.keys()];\n\n        const cachedAssets = {\n            cacheKeys,\n            keys\n        };\n\n        // this is so we can remove them later..\n        keys.forEach((key) =>\n        {\n            this._cacheMap.set(key, cachedAssets as any);\n        });\n\n        cacheKeys.forEach((key) =>\n        {\n            const val = cacheableAssets ? cacheableAssets[key] : value;\n\n            if (this._cache.has(key) && this._cache.get(key) !== val)\n            {\n                // #if _DEBUG\n                warn('[Cache] already has key:', key);\n                // #endif\n            }\n\n            this._cache.set(key, cacheableMap.get(key));\n        });\n    }\n\n    /**\n     * Remove entry by key\n     *\n     * This function will also remove any associated alias from the cache also.\n     * @param key - The key of the entry to remove\n     */\n    public remove(key: any): void\n    {\n        if (!this._cacheMap.has(key))\n        {\n            // #if _DEBUG\n            warn(`[Assets] Asset id ${key} was not found in the Cache`);\n            // #endif\n\n            return;\n        }\n\n        const cacheMap = this._cacheMap.get(key);\n\n        const cacheKeys = cacheMap.cacheKeys;\n\n        cacheKeys.forEach((key) =>\n        {\n            this._cache.delete(key);\n        });\n\n        cacheMap.keys.forEach((key: string) =>\n        {\n            this._cacheMap.delete(key);\n        });\n    }\n\n    /** All loader parsers registered */\n    public get parsers(): CacheParser[]\n    {\n        return this._parsers;\n    }\n}\n\nexport const Cache = new CacheClass();\n","import type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { ResolvedAsset } from '../../types';\nimport type { Loader } from '../Loader';\n\n/**\n * The extension priority for loader parsers.\n * Helpful when managing multiple parsers that share the same extension test.\n * The higher priority parsers will be checked first.\n * @enum {number}\n */\nexport enum LoaderParserPriority\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /** Generic parsers: txt, json, webfonts */\n    Low = 0,\n    /** PixiJS assets with generic extensions: spritesheets, bitmapfonts  */\n    Normal = 1,\n    /** Specific texture types: svg, png, ktx, dds, basis */\n    High = 2,\n}\n\n/** A more verbose version of the LoaderParser, allowing you to set the loaded, parsed, and unloaded asset separately */\nexport interface LoaderParserAdvanced<\n    ASSET = any,\n    PARSED_ASSET = ASSET,\n    UNLOAD_ASSET = ASSET,\n    META_DATA = any,\n    CONFIG = Record<string, any>\n>\n{\n    /** Should be ExtensionType.LoaderParser */\n    extension?: ExtensionMetadata;\n\n    /** A config to adjust the parser */\n    config?: CONFIG;\n\n    /** The name of the parser (this can be used when specifying loadParser in a ResolvedAsset) */\n    name: string;\n\n    /**\n     * Each URL to load will be tested here,\n     * if the test is passed the assets are loaded using the load function below.\n     * Good place to test for things like file extensions!\n     * @param url - The URL to test\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    test?: (url: string, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => boolean;\n\n    /**\n     * This is the promise that loads the URL provided\n     * resolves with a loaded asset if returned by the parser.\n     * @param url - The URL to load\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    load?: <T>(url: string, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<ASSET | T>;\n\n    /**\n     * This function is used to test if the parse function should be run on the asset\n     * If this returns true then parse is called with the asset\n     * @param asset - The loaded asset data\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    testParse?: (asset: ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<boolean>;\n\n    /**\n     * Gets called on the asset it testParse passes. Useful to convert a raw asset into something more useful\n     * @param asset - The loaded asset data\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    parse?: <T>(asset: ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<PARSED_ASSET | T>;\n\n    /**\n     * If an asset is parsed using this parser, the unload function will be called when the user requests an asset\n     * to be unloaded. This is useful for things like sounds or textures that can be unloaded from memory\n     * @param asset - The asset to unload/destroy\n     * @param resolvedAsset - Any custom additional information relevant to the asset being loaded\n     * @param loader - The loader instance\n     */\n    unload?: (asset: UNLOAD_ASSET, resolvedAsset?: ResolvedAsset<META_DATA>, loader?: Loader) => Promise<void> | void;\n}\n\n/**\n * The interface to define a loader parser *(all functions are optional)*.\n *\n * When you create a `parser` object, the flow for every asset loaded is:\n *\n * 1. `parser.test()` - Each URL to load will be tested here, if the test is passed the assets are\n * loaded using the load function below. Good place to test for things like file extensions!\n * 2. `parser.load()` - This is the promise that loads the URL provided resolves with a loaded asset\n * if returned by the parser.\n * 3. `parser.testParse()` - This function is used to test if the parse function should be run on the\n *  asset If this returns true then parse is called with the asset\n * 4. `parse.parse()` - Gets called on the asset it testParse passes. Useful to convert a raw asset\n *  into something more useful\n *\n * <br/>\n * Some loaders may only be used for parsing, some only for loading, and some for both!\n * @memberof assets\n */\nexport interface LoaderParser<ASSET = any, META_DATA = any, CONFIG = Record<string, any>>\n    extends LoaderParserAdvanced<ASSET, ASSET, ASSET, META_DATA, CONFIG> {}\n","function processX(base: string, ids: string[][], depth: number, result: string[], tags: string[])\n{\n    const id = ids[depth];\n\n    for (let i = 0; i < id.length; i++)\n    {\n        const value = id[i];\n\n        if (depth < ids.length - 1)\n        {\n            processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n        }\n        else\n        {\n            tags.push(base.replace(result[depth], value));\n        }\n    }\n}\n\n/**\n * Creates a list of all possible combinations of the given strings.\n * @example\n * const out2 = createStringVariations('name is {chicken,wolf,sheep}');\n * console.log(out2); // [ 'name is chicken', 'name is wolf', 'name is sheep' ]\n * @param string - The string to process\n */\nexport function createStringVariations(string: string): string[]\n{\n    const regex = /\\{(.*?)\\}/g;\n\n    const result = string.match(regex);\n\n    const tags: string[] = [];\n\n    if (result)\n    {\n        const ids: string[][] = [];\n\n        result.forEach((vars) =>\n        {\n            // first remove the brackets...\n            const split = vars.substring(1, vars.length - 1).split(',');\n\n            ids.push(split);\n        });\n\n        processX(string, ids, 0, result, tags);\n    }\n    else\n    {\n        tags.push(string);\n    }\n\n    return tags;\n}\n","import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { convertToList } from '../utils/convertToList';\nimport { createStringVariations } from '../utils/createStringVariations';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type {\n    ArrayOr,\n    AssetsBundle,\n    AssetsManifest,\n    AssetSrc,\n    ResolvedAsset,\n    ResolvedSrc,\n    UnresolvedAsset,\n} from '../types';\nimport type { PreferOrder, ResolveURLParser } from './types';\n\n/**\n * Options for how the resolver deals with generating bundle ids\n * @memberof assets\n */\nexport interface BundleIdentifierOptions\n{\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    connector?: string;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    createBundleAssetId?: (bundleId: string, assetId: string) => string;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    extractAssetIdFromBundle?: (bundleId: string, assetBundleId: string) => string;\n}\n\n/**\n * A class that is responsible for resolving mapping asset URLs to keys.\n * At its most basic it can be used for Aliases:\n *\n * ```js\n * resolver.add('foo', 'bar');\n * resolver.resolveUrl('foo') // => 'bar'\n * ```\n *\n * It can also be used to resolve the most appropriate asset for a given URL:\n *\n * ```js\n * resolver.prefer({\n *     params: {\n *         format: 'webp',\n *         resolution: 2,\n *     }\n * });\n *\n * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n *\n * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n * ```\n * Other features include:\n * - Ability to process a manifest file to get the correct understanding of how to resolve all assets\n * - Ability to add custom parsers for specific file types\n * - Ability to add custom prefer rules\n *\n * This class only cares about the URL, not the loading of the asset itself.\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the third major system of PixiJS' main Assets class\n * @memberof assets\n */\nexport class Resolver\n{\n    /**\n     * The prefix that denotes a URL is for a retina asset.\n     * @static\n     * @name RETINA_PREFIX\n     * @type {RegExp}\n     * @default /@([0-9\\.]+)x/\n     * @example `@2x`\n     */\n    public static RETINA_PREFIX = /@([0-9\\.]+)x/;\n\n    private readonly _defaultBundleIdentifierOptions: Required<BundleIdentifierOptions> = {\n        connector: '-',\n        createBundleAssetId: (bundleId, assetId) =>\n            `${bundleId}${this._bundleIdConnector}${assetId}`,\n        extractAssetIdFromBundle: (bundleId, assetBundleId) =>\n            assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, ''),\n    };\n\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    private _bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    private _createBundleAssetId: (\n        bundleId: string,\n        assetId: string\n    ) => string = this._defaultBundleIdentifierOptions.createBundleAssetId;\n\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    private _extractAssetIdFromBundle: (\n        bundleId: string,\n        assetBundleId: string\n    ) => string = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n\n    private _assetMap: Record<string, ResolvedAsset[]> = {};\n    private _preferredOrder: PreferOrder[] = [];\n    private readonly _parsers: ResolveURLParser[] = [];\n\n    private _resolverHash: Record<string, ResolvedAsset> = {};\n    private _rootPath: string;\n    private _basePath: string;\n    private _manifest: AssetsManifest;\n    private _bundles: Record<string, string[]> = {};\n    private _defaultSearchParams: string;\n\n    /**\n     * Override how the resolver deals with generating bundle ids.\n     * must be called before any bundles are added\n     * @param bundleIdentifier - the bundle identifier options\n     */\n    public setBundleIdentifier(bundleIdentifier: BundleIdentifierOptions): void\n    {\n        this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n        this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n        this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n\n        if (this._extractAssetIdFromBundle('foo', this._createBundleAssetId('foo', 'bar')) !== 'bar')\n        {\n            throw new Error('[Resolver] GenerateBundleAssetId are not working correctly');\n        }\n    }\n\n    /**\n     * Let the resolver know which assets you prefer to use when resolving assets.\n     * Multiple prefer user defined rules can be added.\n     * @example\n     * resolver.prefer({\n     *     // first look for something with the correct format, and then then correct resolution\n     *     priority: ['format', 'resolution'],\n     *     params:{\n     *         format:'webp', // prefer webp images\n     *         resolution: 2, // prefer a resolution of 2\n     *     }\n     * })\n     * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n     * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n     * @param preferOrders - the prefer options\n     */\n    public prefer(...preferOrders: PreferOrder[]): void\n    {\n        preferOrders.forEach((prefer) =>\n        {\n            this._preferredOrder.push(prefer);\n\n            if (!prefer.priority)\n            {\n                // generate the priority based on the order of the object\n                prefer.priority = Object.keys(prefer.params);\n            }\n        });\n\n        this._resolverHash = {};\n    }\n\n    /**\n     * Set the base path to prepend to all urls when resolving\n     * @example\n     * resolver.basePath = 'https://home.com/';\n     * resolver.add('foo', 'bar.ong');\n     * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n     * @param basePath - the base path to use\n     */\n    public set basePath(basePath: string)\n    {\n        this._basePath = basePath;\n    }\n\n    public get basePath(): string\n    {\n        return this._basePath;\n    }\n\n    /**\n     * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n     * default value for browsers is `window.location.origin`\n     * @example\n     * // Application hosted on https://home.com/some-path/index.html\n     * resolver.basePath = 'https://home.com/some-path/';\n     * resolver.rootPath = 'https://home.com/';\n     * resolver.add('foo', '/bar.png');\n     * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n     * @param rootPath - the root path to use\n     */\n    public set rootPath(rootPath: string)\n    {\n        this._rootPath = rootPath;\n    }\n\n    public get rootPath(): string\n    {\n        return this._rootPath;\n    }\n\n    /**\n     * All the active URL parsers that help the parser to extract information and create\n     * an asset object-based on parsing the URL itself.\n     *\n     * Can be added using the extensions API\n     * @example\n     * resolver.add('foo', [\n     *     {\n     *         resolution: 2,\n     *         format: 'png',\n     *         src: 'image@2x.png',\n     *     },\n     *     {\n     *         resolution:1,\n     *         format:'png',\n     *         src: 'image.png',\n     *     },\n     * ]);\n     *\n     * // With a url parser the information such as resolution and file format could extracted from the url itself:\n     * extensions.add({\n     *     extension: ExtensionType.ResolveParser,\n     *     test: loadTextures.test, // test if url ends in an image\n     *     parse: (value: string) =>\n     *     ({\n     *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n     *         format: value.split('.').pop(),\n     *         src: value,\n     *     }),\n     * });\n     *\n     * // Now resolution and format can be extracted from the url\n     * resolver.add('foo', [\n     *     'image@2x.png',\n     *     'image.png',\n     * ]);\n     */\n    public get parsers(): ResolveURLParser[]\n    {\n        return this._parsers;\n    }\n\n    /** Used for testing, this resets the resolver to its initial state */\n    public reset(): void\n    {\n        this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n\n        this._assetMap = {};\n        this._preferredOrder = [];\n        // Do not reset this._parsers\n\n        this._resolverHash = {};\n        this._rootPath = null;\n        this._basePath = null;\n        this._manifest = null;\n        this._bundles = {};\n        this._defaultSearchParams = null;\n    }\n\n    /**\n     * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n     * @param searchParams - the default url parameters to append when resolving urls\n     */\n    public setDefaultSearchParams(searchParams: string | Record<string, unknown>): void\n    {\n        if (typeof searchParams === 'string')\n        {\n            this._defaultSearchParams = searchParams;\n        }\n        else\n        {\n            const queryValues = searchParams as Record<string, any>;\n\n            this._defaultSearchParams = Object.keys(queryValues)\n                .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`)\n                .join('&');\n        }\n    }\n\n    /**\n     * Returns the aliases for a given asset\n     * @param asset - the asset to get the aliases for\n     */\n    public getAlias(asset: UnresolvedAsset): string[]\n    {\n        const { alias, src } = asset;\n        const aliasesToUse = convertToList<ArrayOr<string | AssetSrc>>(\n            alias || src, (value: string | AssetSrc) =>\n            {\n                if (typeof value === 'string') return value;\n\n                if (Array.isArray(value)) return value.map((v) => (v as ResolvedSrc)?.src ?? v);\n\n                if (value?.src) return value.src;\n\n                return value;\n            }, true) as string[];\n\n        return aliasesToUse;\n    }\n\n    /**\n     * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n     * generally a manifest would be built using a tool.\n     * @param manifest - the manifest to add to the resolver\n     */\n    public addManifest(manifest: AssetsManifest): void\n    {\n        if (this._manifest)\n        {\n            // #if _DEBUG\n            warn('[Resolver] Manifest already exists, this will be overwritten');\n            // #endif\n        }\n\n        this._manifest = manifest;\n\n        manifest.bundles.forEach((bundle) =>\n        {\n            this.addBundle(bundle.name, bundle.assets);\n        });\n    }\n\n    /**\n     * This adds a bundle of assets in one go so that you can resolve them as a group.\n     * For example you could add a bundle for each screen in you pixi app\n     * @example\n     * resolver.addBundle('animals', [\n     *  { alias: 'bunny', src: 'bunny.png' },\n     *  { alias: 'chicken', src: 'chicken.png' },\n     *  { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     * // or\n     * resolver.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * const resolvedAssets = await resolver.resolveBundle('animals');\n     * @param bundleId - The id of the bundle to add\n     * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        const assetNames: string[] = [];\n        let convertedAssets: UnresolvedAsset[] = assets as UnresolvedAsset[];\n\n        if (!Array.isArray(assets))\n        {\n            // convert to array...\n            convertedAssets = Object.entries(assets).map(([alias, src]) =>\n            {\n                if (typeof src === 'string' || Array.isArray(src))\n                {\n                    return { alias, src };\n                }\n\n                return { alias, ...src };\n            });\n        }\n\n        // when storing keys against a bundle we prepend the bundleId to each asset key\n        // and pass it through as an additional alias for the asset\n        // this keeps clashing ids separate on a per-bundle basis\n        // you can also resolve a file using the bundleId-assetId syntax\n\n        convertedAssets.forEach((asset) =>\n        {\n            const srcs = asset.src;\n            const aliases = asset.alias;\n            let ids: string[];\n\n            if (typeof aliases === 'string')\n            {\n                const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n\n                assetNames.push(bundleAssetId);\n                ids = [aliases, bundleAssetId];\n            }\n            else\n            {\n                const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n\n                assetNames.push(...bundleIds);\n                ids = [...aliases, ...bundleIds];\n            }\n\n            this.add({\n                ...asset,\n                ...{\n                    alias: ids,\n                    src: srcs,\n                }\n            });\n        });\n\n        this._bundles[bundleId] = assetNames;\n    }\n\n    /**\n     * Tells the resolver what keys are associated with witch asset.\n     * The most important thing the resolver does\n     * @example\n     * // Single key, single asset:\n     * resolver.add({alias: 'foo', src: 'bar.png');\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     *\n     * // Multiple keys, single asset:\n     * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     * resolver.resolveUrl('boo') // => 'bar.png'\n     *\n     * // Multiple keys, multiple assets:\n     * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n     * resolver.resolveUrl('foo') // => 'bar.png'\n     *\n     * // Add custom data attached to the resolver\n     * Resolver.add({\n     *     alias: 'bunnyBooBooSmooth',\n     *     src: 'bunny{png,webp}',\n     *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n     * });\n     *\n     * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n     * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n     */\n    public add(\n        aliases: ArrayOr<UnresolvedAsset>,\n    ): void\n    {\n        const assets: UnresolvedAsset[] = [];\n\n        if (Array.isArray(aliases))\n        {\n            assets.push(...(aliases as UnresolvedAsset[]));\n        }\n        else\n        {\n            assets.push(aliases as UnresolvedAsset);\n        }\n\n        let keyCheck: (key: string) => void;\n\n        // #if _DEBUG\n        // eslint-disable-next-line prefer-const\n        keyCheck = (key: string) =>\n        {\n            if (this.hasKey(key))\n            {\n                // #if _DEBUG\n                warn(`[Resolver] already has key: ${key} overwriting`);\n                // #endif\n            }\n        };\n        // #endif\n\n        const assetArray = convertToList(assets);\n\n        // loop through all the assets and generate a resolve asset for each src\n        assetArray.forEach((asset) =>\n        {\n            const { src } = asset;\n            let { data, format, loadParser } = asset;\n\n            // src can contain an unresolved asset itself\n            // so we need to merge that data with the current asset\n            // we dont need to create string variations for the src if it is a ResolvedAsset\n            const srcsToUse: (string | ResolvedSrc)[][] = convertToList<AssetSrc>(src).map((src) =>\n            {\n                if (typeof src === 'string')\n                { return createStringVariations(src); }\n\n                return Array.isArray(src) ? src : [src];\n            });\n\n            const aliasesToUse = this.getAlias(asset);\n\n            // #if _DEBUG\n            Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n            // #endif\n\n            // loop through all the srcs and generate a resolve asset for each src\n            const resolvedAssets: ResolvedAsset[] = [];\n\n            srcsToUse.forEach((srcs) =>\n            {\n                srcs.forEach((src) =>\n                {\n                    let formattedAsset = {} as ResolvedAsset;\n\n                    if (typeof src !== 'object')\n                    {\n                        formattedAsset.src = src;\n                        // first see if it contains any {} tags...\n                        for (let i = 0; i < this._parsers.length; i++)\n                        {\n                            const parser = this._parsers[i];\n\n                            if (parser.test(src))\n                            {\n                                formattedAsset = parser.parse(src);\n                                break;\n                            }\n                        }\n                    }\n                    else\n                    {\n                        data = src.data ?? data;\n                        format = src.format ?? format;\n                        loadParser = src.loadParser ?? loadParser;\n                        formattedAsset = {\n                            ...formattedAsset,\n                            ...src,\n                        };\n                    }\n\n                    // check if aliases is undefined\n                    if (!aliasesToUse)\n                    {\n                        throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n                    }\n\n                    formattedAsset = this._buildResolvedAsset(formattedAsset, {\n                        aliases: aliasesToUse,\n                        data,\n                        format,\n                        loadParser,\n                    });\n\n                    resolvedAssets.push(formattedAsset);\n                });\n            });\n\n            aliasesToUse.forEach((alias) =>\n            {\n                this._assetMap[alias] = resolvedAssets;\n            });\n        });\n    }\n\n    // TODO: this needs an overload like load did in Assets\n    /**\n     * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n     * a given bundleId or bundleIds.\n     * @example\n     * // Manifest Example\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * resolver.setManifest(manifest);\n     * const resolved = resolver.resolveBundle('load-screen');\n     * @param bundleIds - The bundle ids to resolve\n     * @returns All the bundles assets or a hash of assets for each bundle specified\n     */\n    public resolveBundle(bundleIds: ArrayOr<string>):\n    Record<string, ResolvedAsset> | Record<string, Record<string, ResolvedAsset>>\n    {\n        const singleAsset = isSingleItem(bundleIds);\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const out: Record<string, Record<string, ResolvedAsset>> = {};\n\n        bundleIds.forEach((bundleId) =>\n        {\n            const assetNames = this._bundles[bundleId];\n\n            if (assetNames)\n            {\n                const results = this.resolve(assetNames) as Record<string, ResolvedAsset>;\n\n                const assets: Record<string, ResolvedAsset> = {};\n\n                for (const key in results)\n                {\n                    const asset = results[key];\n\n                    assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n                }\n\n                out[bundleId] = assets;\n            }\n        });\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n     * @param key - The key or keys to resolve\n     * @returns - The URLs associated with the key(s)\n     */\n    public resolveUrl(key: ArrayOr<string>): string | Record<string, string>\n    {\n        const result = this.resolve(key as string) as ResolvedAsset | Record<string, ResolvedAsset>;\n\n        if (typeof key !== 'string')\n        {\n            const out: Record<string, string> = {};\n\n            for (const i in result)\n            {\n                out[i] = (result as Record<string, ResolvedAsset>)[i].src;\n            }\n\n            return out;\n        }\n\n        return (result as ResolvedAsset).src;\n    }\n\n    /**\n     * Resolves each key in the list to an asset object.\n     * Another key function of the resolver! After adding all the various key/asset pairs. this will run the logic\n     * of finding which asset to return based on any preferences set using the `prefer` function\n     * by default the same key passed in will be returned if nothing is matched by the resolver.\n     * @example\n     * resolver.add('boo', 'bunny.png');\n     *\n     * resolver.resolve('boo') // => { src: 'bunny.png' }\n     *\n     * // Will return the same string as no key was added for this value..\n     * resolver.resolve('another-thing.png') // => { src: 'another-thing.png' }\n     * @param keys - key or keys to resolve\n     * @returns - the resolve asset or a hash of resolve assets for each key specified\n     */\n    public resolve(keys: string): ResolvedAsset;\n    public resolve(keys: string[]): Record<string, ResolvedAsset>;\n    public resolve(keys: ArrayOr<string>): ResolvedAsset | Record<string, ResolvedAsset>\n    {\n        const singleAsset = isSingleItem(keys);\n\n        keys = convertToList<string>(keys);\n\n        const result: Record<string, ResolvedAsset> = {};\n\n        keys.forEach((key) =>\n        {\n            if (!this._resolverHash[key])\n            {\n                if (this._assetMap[key])\n                {\n                    let assets = this._assetMap[key];\n                    const preferredOrder = this._getPreferredOrder(assets);\n\n                    preferredOrder?.priority.forEach((priorityKey) =>\n                    {\n                        preferredOrder.params[priorityKey].forEach((value: unknown) =>\n                        {\n                            const filteredAssets = assets.filter((asset) =>\n                            {\n                                if (asset[priorityKey as keyof ResolvedAsset])\n                                {\n                                    return asset[priorityKey as keyof ResolvedAsset] === value;\n                                }\n\n                                return false;\n                            });\n\n                            if (filteredAssets.length)\n                            {\n                                assets = filteredAssets;\n                            }\n                        });\n                    });\n\n                    this._resolverHash[key] = assets[0];\n                }\n                else\n                {\n                    this._resolverHash[key] = this._buildResolvedAsset({\n                        alias: [key],\n                        src: key,\n                    }, {});\n                }\n            }\n\n            result[key] = this._resolverHash[key];\n        });\n\n        return singleAsset ? result[keys[0]] : result;\n    }\n\n    /**\n     * Checks if an asset with a given key exists in the resolver\n     * @param key - The key of the asset\n     */\n    public hasKey(key: string): boolean\n    {\n        return !!this._assetMap[key];\n    }\n\n    /**\n     * Checks if a bundle with the given key exists in the resolver\n     * @param key - The key of the bundle\n     */\n    public hasBundle(key: string): boolean\n    {\n        return !!this._bundles[key];\n    }\n\n    /**\n     * Internal function for figuring out what prefer criteria an asset should use.\n     * @param assets\n     */\n    private _getPreferredOrder(assets: ResolvedAsset[]): PreferOrder\n    {\n        for (let i = 0; i < assets.length; i++)\n        {\n            const asset = assets[0];\n\n            const preferred = this._preferredOrder.find((preference: PreferOrder) =>\n                preference.params.format.includes(asset.format));\n\n            if (preferred)\n            {\n                return preferred;\n            }\n        }\n\n        return this._preferredOrder[0];\n    }\n\n    /**\n     * Appends the default url parameters to the url\n     * @param url - The url to append the default parameters to\n     * @returns - The url with the default parameters appended\n     */\n    private _appendDefaultSearchParams(url: string): string\n    {\n        if (!this._defaultSearchParams) return url;\n\n        const paramConnector = (/\\?/).test(url) ? '&' : '?';\n\n        return `${url}${paramConnector}${this._defaultSearchParams}`;\n    }\n\n    private _buildResolvedAsset(formattedAsset: ResolvedAsset, data?: {\n        aliases?: string[],\n        data?: Record<string, unknown>\n        loadParser?: string,\n        format?: string,\n    }): ResolvedAsset\n    {\n        const { aliases, data: assetData, loadParser, format } = data;\n\n        if (this._basePath || this._rootPath)\n        {\n            formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n        }\n\n        formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n        formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n        formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n        formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n        formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n\n        return formattedAsset;\n    }\n}\n\nexport function getUrlExtension(url: string)\n{\n    return url.split('.').pop().split('?').shift()\n        .split('#')\n        .shift();\n}\n","export const convertToList = <T>(\n    input: string | T | (string | T)[],\n    transform?: (input: string) => T,\n    forceTransform = false\n): T[] =>\n{\n    if (!Array.isArray(input))\n    {\n        input = [input as T];\n    }\n\n    if (!transform)\n    {\n        return input as T[];\n    }\n\n    return (input as (string | T)[]).map((item): T =>\n    {\n        if (typeof item === 'string' || forceTransform)\n        {\n            return transform(item as string);\n        }\n\n        return item as T;\n    });\n};\n","/**\n * Copies the search params from one url to another\n * @param targetUrl - the url to copy the search params to\n * @param sourceUrl - the url container the search params we want to copy\n * @returns the url with the search params copied\n */\nexport const copySearchParams = (targetUrl: string, sourceUrl: string) =>\n{\n    const searchParams = sourceUrl.split('?')[1];\n\n    if (searchParams)\n    {\n        targetUrl += `?${searchParams}`;\n    }\n\n    return targetUrl;\n};\n","/**\n * Checks if the given value is an array.\n * @param item - The item to test\n */\nexport const isSingleItem = (item: unknown): boolean => (!Array.isArray(item));\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { colord, extend } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\nimport type { AnyColor, HslaColor, HslColor, HsvaColor, HsvColor, RgbaColor, RgbColor } from '@pixi/colord';\n\nextend([namesPlugin]);\n\n/**\n * Pixi supports multiple color formats, including CSS color strings, hex, numbers, and arrays.\n *\n * When providing values for any of the color properties, you can use any of the {@link color.ColorSource} formats.\n * ```typescript\n * import { Color } from 'pixi.js';\n *\n * // All of these are valid:\n * sprite.tint = 'red';\n * sprite.tint = 0xff0000;\n * sprite.tint = '#ff0000';\n * sprite.tint = new Color('red');\n *\n * // Same for graphics fill/stroke colors and other  color values:\n * graphics.fill({ color: 'red' });\n * graphics.fill({ color: 0xff0000 });\n * graphics.stroke({ color: '#ff0000' });\n * graphics.stroke({ color: new Color('red')};\n * ```\n * @namespace color\n */\n\n/**\n * RGBA color array.\n *\n * `[number, number, number, number]`\n * @memberof color\n */\nexport type RgbaArray = [number, number, number, number];\n\n/**\n * Valid formats to use when defining any color properties, also valid for the {@link color.Color} constructor.\n *\n * These types are extended from [colord](https://www.npmjs.com/package/colord) with some PixiJS-specific extensions.\n *\n * Possible value types are:\n * - [Color names](https://www.w3.org/TR/css-color-4/#named-colors):\n *   `'red'`, `'green'`, `'blue'`, `'white'`, etc.\n * - RGB hex integers (`0xRRGGBB`):\n *   `0xff0000`, `0x00ff00`, `0x0000ff`, etc.\n * - [RGB(A) hex strings](https://www.w3.org/TR/css-color-4/#hex-notation):\n *   - 6 digits (`RRGGBB`): `'ff0000'`, `'#00ff00'`, `'0x0000ff'`, etc.\n *   - 3 digits (`RGB`): `'f00'`, `'#0f0'`, `'0x00f'`, etc.\n *   - 8 digits (`RRGGBBAA`): `'ff000080'`, `'#00ff0080'`, `'0x0000ff80'`, etc.\n *   - 4 digits (`RGBA`): `'f008'`, `'#0f08'`, `'0x00f8'`, etc.\n * - RGB(A) objects:\n *   `{ r: 255, g: 0, b: 0 }`, `{ r: 255, g: 0, b: 0, a: 0.5 }`, etc.\n * - [RGB(A) strings](https://www.w3.org/TR/css-color-4/#rgb-functions):\n *   `'rgb(255, 0, 0)'`, `'rgb(100% 0% 0%)'`, `'rgba(255, 0, 0, 0.5)'`, `'rgba(100% 0% 0% / 50%)'`, etc.\n * - RGB(A) arrays:\n *   `[1, 0, 0]`, `[1, 0, 0, 0.5]`, etc.\n * - RGB(A) Float32Array:\n *   `new Float32Array([1, 0, 0])`, `new Float32Array([1, 0, 0, 0.5])`, etc.\n * - RGB(A) Uint8Array:\n *   `new Uint8Array([255, 0, 0])`, `new Uint8Array([255, 0, 0, 128])`, etc.\n * - RGB(A) Uint8ClampedArray:\n *   `new Uint8ClampedArray([255, 0, 0])`, `new Uint8ClampedArray([255, 0, 0, 128])`, etc.\n * - HSL(A) objects:\n *   `{ h: 0, s: 100, l: 50 }`, `{ h: 0, s: 100, l: 50, a: 0.5 }`, etc.\n * - [HSL(A) strings](https://www.w3.org/TR/css-color-4/#the-hsl-notation):\n *   `'hsl(0, 100%, 50%)'`, `'hsl(0deg 100% 50%)'`, `'hsla(0, 100%, 50%, 0.5)'`, `'hsla(0deg 100% 50% / 50%)'`, etc.\n * - HSV(A) objects:\n *   `{ h: 0, s: 100, v: 100 }`, `{ h: 0, s: 100, v: 100, a: 0.5 }`, etc.\n * - {@link color.Color} objects.\n * @since 7.2.0\n * @memberof color\n */\nexport type ColorSource =\n    | string\n    | number\n    | number[]\n    | Float32Array\n    | Uint8Array\n    | Uint8ClampedArray\n    | HslColor\n    | HslaColor\n    | HsvColor\n    | HsvaColor\n    | RgbColor\n    | RgbaColor\n    | Color\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    | Number;\n\ntype ColorSourceTypedArray = Float32Array | Uint8Array | Uint8ClampedArray;\n\n/**\n * Color utility class. Can accept any {@link color.ColorSource} format in its constructor.\n * ```js\n * import { Color } from 'pixi.js';\n *\n * new Color('red').toArray(); // [1, 0, 0, 1]\n * new Color(0xff0000).toArray(); // [1, 0, 0, 1]\n * new Color('ff0000').toArray(); // [1, 0, 0, 1]\n * new Color('#f00').toArray(); // [1, 0, 0, 1]\n * new Color('0xff0000ff').toArray(); // [1, 0, 0, 1]\n * new Color('#f00f').toArray(); // [1, 0, 0, 1]\n * new Color({ r: 255, g: 0, b: 0, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * new Color('rgb(255, 0, 0, 0.5)').toArray(); // [1, 0, 0, 0.5]\n * new Color([1, 1, 1]).toArray(); // [1, 1, 1, 1]\n * new Color([1, 0, 0, 0.5]).toArray(); // [1, 0, 0, 0.5]\n * new Color(new Float32Array([1, 0, 0, 0.5])).toArray(); // [1, 0, 0, 0.5]\n * new Color(new Uint8Array([255, 0, 0, 255])).toArray(); // [1, 0, 0, 1]\n * new Color(new Uint8ClampedArray([255, 0, 0, 255])).toArray(); // [1, 0, 0, 1]\n * new Color({ h: 0, s: 100, l: 50, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * new Color('hsl(0, 100%, 50%, 50%)').toArray(); // [1, 0, 0, 0.5]\n * new Color({ h: 0, s: 100, v: 100, a: 0.5 }).toArray(); // [1, 0, 0, 0.5]\n * ```\n * @since 7.2.0\n * @memberof color\n */\nexport class Color\n{\n    /**\n     * Default Color object for static uses\n     * @example\n     * import { Color } from 'pixi.js';\n     * Color.shared.setValue(0xffffff).toHex(); // '#ffffff'\n     */\n    public static readonly shared = new Color();\n\n    /**\n     * Temporary Color object for static uses internally.\n     * As to not conflict with Color.shared.\n     * @ignore\n     */\n    private static readonly _temp = new Color();\n\n    /** Pattern for hex strings */\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static readonly HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\n\n    /** Internal color source, from constructor or set value */\n    private _value: Exclude<ColorSource, Color> | null;\n\n    /** Normalized rgba component, floats from 0-1 */\n    private _components: Float32Array;\n\n    /** Cache color as number */\n    private _int: number;\n\n    /** An array of the current Color. Only populated when `toArray` functions are called */\n    private _arrayRgba: number[] | null;\n    private _arrayRgb: number[] | null;\n\n    /**\n     * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n     */\n    constructor(value: ColorSource = 0xffffff)\n    {\n        this._value = null;\n        this._components = new Float32Array(4);\n        this._components.fill(1);\n        this._int = 0xffffff;\n        this.value = value;\n    }\n\n    /** Get red component (0 - 1) */\n    get red(): number\n    {\n        return this._components[0];\n    }\n\n    /** Get green component (0 - 1) */\n    get green(): number\n    {\n        return this._components[1];\n    }\n\n    /** Get blue component (0 - 1) */\n    get blue(): number\n    {\n        return this._components[2];\n    }\n\n    /** Get alpha component (0 - 1) */\n    get alpha(): number\n    {\n        return this._components[3];\n    }\n\n    /**\n     * Set the value, suitable for chaining\n     * @param value\n     * @see Color.value\n     */\n    public setValue(value: ColorSource): this\n    {\n        this.value = value;\n\n        return this;\n    }\n\n    /**\n     * The current color source.\n     *\n     * When setting:\n     * - Setting to an instance of `Color` will copy its color source and components.\n     * - Otherwise, `Color` will try to normalize the color source and set the components.\n     *   If the color source is invalid, an `Error` will be thrown and the `Color` will left unchanged.\n     *\n     * Note: The `null` in the setter's parameter type is added to match the TypeScript rule: return type of getter\n     * must be assignable to its setter's parameter type. Setting `value` to `null` will throw an `Error`.\n     *\n     * When getting:\n     * - A return value of `null` means the previous value was overridden (e.g., {@link Color.multiply multiply},\n     *   {@link Color.premultiply premultiply} or {@link Color.round round}).\n     * - Otherwise, the color source used when setting is returned.\n     */\n    set value(value: ColorSource | null)\n    {\n        // Support copying from other Color objects\n        if (value instanceof Color)\n        {\n            this._value = this._cloneSource(value._value);\n            this._int = value._int;\n            this._components.set(value._components);\n        }\n        else if (value === null)\n        {\n            throw new Error('Cannot set Color#value to null');\n        }\n        else if (this._value === null || !this._isSourceEqual(this._value, value))\n        {\n            this._value = this._cloneSource(value);\n            this._normalize(this._value);\n        }\n    }\n    get value(): Exclude<ColorSource, Color> | null\n    {\n        return this._value;\n    }\n\n    /**\n     * Copy a color source internally.\n     * @param value - Color source\n     */\n    private _cloneSource(value: Exclude<ColorSource, Color> | null): Exclude<ColorSource, Color> | null\n    {\n        if (typeof value === 'string' || typeof value === 'number' || value instanceof Number || value === null)\n        {\n            return value;\n        }\n        else if (Array.isArray(value) || ArrayBuffer.isView(value))\n        {\n            return value.slice(0);\n        }\n        else if (typeof value === 'object' && value !== null)\n        {\n            return { ...value };\n        }\n\n        return value;\n    }\n\n    /**\n     * Equality check for color sources.\n     * @param value1 - First color source\n     * @param value2 - Second color source\n     * @returns `true` if the color sources are equal, `false` otherwise.\n     */\n    private _isSourceEqual(value1: Exclude<ColorSource, Color>, value2: Exclude<ColorSource, Color>): boolean\n    {\n        const type1 = typeof value1;\n        const type2 = typeof value2;\n\n        // Mismatched types\n        if (type1 !== type2)\n        {\n            return false;\n        }\n        // Handle numbers/strings and things that extend Number\n        // important to do the instanceof Number first, as this is \"object\" type\n        else if (type1 === 'number' || type1 === 'string' || value1 instanceof Number)\n        {\n            return value1 === value2;\n        }\n        // Handle Arrays and TypedArrays\n        else if (\n            (Array.isArray(value1) && Array.isArray(value2))\n            || (ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2))\n        )\n        {\n            if (value1.length !== value2.length)\n            {\n                return false;\n            }\n\n            return value1.every((v, i) => v === value2[i]);\n        }\n        // Handle Objects\n        else if (value1 !== null && value2 !== null)\n        {\n            const keys1 = Object.keys(value1) as (keyof typeof value1)[];\n            const keys2 = Object.keys(value2) as (keyof typeof value2)[];\n\n            if (keys1.length !== keys2.length)\n            {\n                return false;\n            }\n\n            return keys1.every((key) => value1[key] === value2[key]);\n        }\n\n        return value1 === value2;\n    }\n\n    /**\n     * Convert to a RGBA color object.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1, a: 1 }\n     */\n    public toRgba(): RgbaColor\n    {\n        const [r, g, b, a] = this._components;\n\n        return { r, g, b, a };\n    }\n\n    /**\n     * Convert to a RGB color object.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgb(); // returns { r: 1, g: 1, b: 1 }\n     */\n    public toRgb(): RgbColor\n    {\n        const [r, g, b] = this._components;\n\n        return { r, g, b };\n    }\n\n    /** Convert to a CSS-style rgba string: `rgba(255,255,255,1.0)`. */\n    public toRgbaString(): string\n    {\n        const [r, g, b] = this.toUint8RgbArray();\n\n        return `rgba(${r},${g},${b},${this.alpha})`;\n    }\n\n    /**\n     * Convert to an [R, G, B] array of clamped uint8 values (0 to 255).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toUint8RgbArray(); // returns [255, 255, 255]\n     * @param {number[]|Uint8Array|Uint8ClampedArray} [out] - Output array\n     */\n    public toUint8RgbArray(): number[];\n    public toUint8RgbArray<T extends number[] | Uint8Array | Uint8ClampedArray>(out: T): T;\n    public toUint8RgbArray<T extends number[] | Uint8Array | Uint8ClampedArray>(out?: T): T\n    {\n        const [r, g, b] = this._components;\n\n        if (!this._arrayRgb)\n        {\n            this._arrayRgb = [];\n        }\n\n        out = out || this._arrayRgb as T;\n\n        out[0] = Math.round(r * 255);\n        out[1] = Math.round(g * 255);\n        out[2] = Math.round(b * 255);\n\n        return out;\n    }\n\n    /**\n     * Convert to an [R, G, B, A] array of normalized floats (numbers from 0.0 to 1.0).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toArray(); // returns [1, 1, 1, 1]\n     * @param {number[]|Float32Array} [out] - Output array\n     */\n    public toArray(): number[];\n    public toArray<T extends number[] | Float32Array>(out: T): T;\n    public toArray<T extends number[] | Float32Array>(out?: T): T\n    {\n        if (!this._arrayRgba)\n        {\n            this._arrayRgba = [];\n        }\n\n        out = out || this._arrayRgba as T;\n        const [r, g, b, a] = this._components;\n\n        out[0] = r;\n        out[1] = g;\n        out[2] = b;\n        out[3] = a;\n\n        return out;\n    }\n\n    /**\n     * Convert to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toRgbArray(); // returns [1, 1, 1]\n     * @param {number[]|Float32Array} [out] - Output array\n     */\n    public toRgbArray(): number[];\n    public toRgbArray<T extends number[] | Float32Array>(out: T): T;\n    public toRgbArray<T extends number[] | Float32Array>(out?: T): T\n    {\n        if (!this._arrayRgb)\n        {\n            this._arrayRgb = [];\n        }\n\n        out = out || this._arrayRgb as T;\n        const [r, g, b] = this._components;\n\n        out[0] = r;\n        out[1] = g;\n        out[2] = b;\n\n        return out;\n    }\n\n    /**\n     * Convert to a hexadecimal number.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toNumber(); // returns 16777215\n     */\n    public toNumber(): number\n    {\n        return this._int;\n    }\n\n    /**\n     * Convert to a BGR number\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n     */\n    public toBgrNumber(): number\n    {\n        const [r, g, b] = this.toUint8RgbArray();\n\n        return (b << 16) + (g << 8) + r;\n    }\n\n    /**\n     * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n     * @returns {number} - The color as a number in little endian format.\n     */\n    public toLittleEndianNumber(): number\n    {\n        const value = this._int;\n\n        return (value >> 16) + (value & 0xff00) + ((value & 0xff) << 16);\n    }\n\n    /**\n     * Multiply with another color. This action is destructive, and will\n     * override the previous `value` property to be `null`.\n     * @param {ColorSource} value - The color to multiply by.\n     */\n    public multiply(value: ColorSource): this\n    {\n        const [r, g, b, a] = Color._temp.setValue(value)._components;\n\n        this._components[0] *= r;\n        this._components[1] *= g;\n        this._components[2] *= b;\n        this._components[3] *= a;\n\n        this._refreshInt();\n        this._value = null;\n\n        return this;\n    }\n\n    /**\n     * Converts color to a premultiplied alpha format. This action is destructive, and will\n     * override the previous `value` property to be `null`.\n     * @param alpha - The alpha to multiply by.\n     * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n     * @returns {Color} - Itself.\n     */\n    public premultiply(alpha: number, applyToRGB = true): this\n    {\n        if (applyToRGB)\n        {\n            this._components[0] *= alpha;\n            this._components[1] *= alpha;\n            this._components[2] *= alpha;\n        }\n        this._components[3] = alpha;\n\n        this._refreshInt();\n        this._value = null;\n\n        return this;\n    }\n\n    /**\n     * Premultiplies alpha with current color.\n     * @param {number} alpha - The alpha to multiply by.\n     * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels.\n     * @returns {number} tint multiplied by alpha\n     */\n    public toPremultiplied(alpha: number, applyToRGB = true): number\n    {\n        if (alpha === 1.0)\n        {\n            return (0xff << 24) + this._int;\n        }\n        if (alpha === 0.0)\n        {\n            return applyToRGB ? 0 : this._int;\n        }\n        let r = (this._int >> 16) & 0xff;\n        let g = (this._int >> 8) & 0xff;\n        let b = this._int & 0xff;\n\n        if (applyToRGB)\n        {\n            r = ((r * alpha) + 0.5) | 0;\n            g = ((g * alpha) + 0.5) | 0;\n            b = ((b * alpha) + 0.5) | 0;\n        }\n\n        return ((alpha * 255) << 24) + (r << 16) + (g << 8) + b;\n    }\n\n    /**\n     * Convert to a hexadecimal string.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toHex(); // returns \"#ffffff\"\n     */\n    public toHex(): string\n    {\n        const hexString = this._int.toString(16);\n\n        return `#${'000000'.substring(0, 6 - hexString.length) + hexString}`;\n    }\n\n    /**\n     * Convert to a hexadecimal string with alpha.\n     * @example\n     * import { Color } from 'pixi.js';\n     * new Color('white').toHexa(); // returns \"#ffffffff\"\n     */\n    public toHexa(): string\n    {\n        const alphaValue = Math.round(this._components[3] * 255);\n        const alphaString = alphaValue.toString(16);\n\n        return this.toHex() + '00'.substring(0, 2 - alphaString.length) + alphaString;\n    }\n\n    /**\n     * Set alpha, suitable for chaining.\n     * @param alpha\n     */\n    public setAlpha(alpha: number): this\n    {\n        this._components[3] = this._clamp(alpha);\n\n        return this;\n    }\n\n    /**\n     * Normalize the input value into rgba\n     * @param value - Input value\n     */\n    private _normalize(value: Exclude<ColorSource, Color>): void\n    {\n        let r: number | undefined;\n        let g: number | undefined;\n        let b: number | undefined;\n        let a: number | undefined;\n\n        // Number is a primitive so typeof works fine, but in the case\n        // that someone creates a class that extends Number, we also\n        // need to check for instanceof Number\n        if (\n            (typeof value === 'number' || value instanceof Number)\n            && (value as number) >= 0\n            && (value as number) <= 0xffffff\n        )\n        {\n            const int = value as number; // cast required because instanceof Number is ambiguous for TS\n\n            r = ((int >> 16) & 0xff) / 255;\n            g = ((int >> 8) & 0xff) / 255;\n            b = (int & 0xff) / 255;\n            a = 1.0;\n        }\n        else if (\n            (Array.isArray(value) || value instanceof Float32Array)\n            // Can be rgb or rgba\n            && value.length >= 3\n            && value.length <= 4\n        )\n        {\n            // make sure all values are 0 - 1\n            value = this._clamp(value);\n            [r, g, b, a = 1.0] = value;\n        }\n        else if (\n            (value instanceof Uint8Array || value instanceof Uint8ClampedArray)\n            // Can be rgb or rgba\n            && value.length >= 3\n            && value.length <= 4\n        )\n        {\n            // make sure all values are 0 - 255\n            value = this._clamp(value, 0, 255);\n            [r, g, b, a = 255] = value;\n            r /= 255;\n            g /= 255;\n            b /= 255;\n            a /= 255;\n        }\n        else if (typeof value === 'string' || typeof value === 'object')\n        {\n            if (typeof value === 'string')\n            {\n                const match = Color.HEX_PATTERN.exec(value);\n\n                if (match)\n                {\n                    // Normalize hex string, remove 0x or # prefix\n                    value = `#${match[2]}`;\n                }\n            }\n\n            const color = colord(value as AnyColor);\n\n            if (color.isValid())\n            {\n                ({ r, g, b, a } = color.rgba);\n                r /= 255;\n                g /= 255;\n                b /= 255;\n            }\n        }\n\n        // Cache normalized values for rgba and hex integer\n        if (r !== undefined)\n        {\n            this._components[0] = r as number;\n            this._components[1] = g as number;\n            this._components[2] = b as number;\n            this._components[3] = a as number;\n            this._refreshInt();\n        }\n        else\n        {\n            throw new Error(`Unable to convert color ${value}`);\n        }\n    }\n\n    /** Refresh the internal color rgb number */\n    private _refreshInt(): void\n    {\n        // Clamp values to 0 - 1\n        this._clamp(this._components);\n\n        const [r, g, b] = this._components;\n\n        this._int = ((r * 255) << 16) + ((g * 255) << 8) + ((b * 255) | 0);\n    }\n\n    /**\n     * Clamps values to a range. Will override original values\n     * @param value - Value(s) to clamp\n     * @param min - Minimum value\n     * @param max - Maximum value\n     */\n    private _clamp<T extends number | number[] | ColorSourceTypedArray>(value: T, min = 0, max = 1): T\n    {\n        if (typeof value === 'number')\n        {\n            return Math.min(Math.max(value, min), max) as T;\n        }\n\n        value.forEach((v, i) =>\n        {\n            value[i] = Math.min(Math.max(v, min), max);\n        });\n\n        return value;\n    }\n\n    /**\n     * Check if the value is a color-like object\n     * @param value - Value to check\n     * @returns True if the value is a color-like object\n     * @static\n     * @example\n     * import { Color } from 'pixi.js';\n     * Color.isColorLike('white'); // returns true\n     * Color.isColorLike(0xffffff); // returns true\n     * Color.isColorLike([1, 1, 1]); // returns true\n     */\n    public static isColorLike(value: unknown): value is ColorSource\n    {\n        return (\n            typeof value === 'number'\n            || typeof value === 'string'\n            || value instanceof Number\n            || value instanceof Color\n            || Array.isArray(value)\n            || value instanceof Uint8Array\n            || value instanceof Uint8ClampedArray\n            || value instanceof Float32Array\n            || ((value as RgbColor).r !== undefined\n                && (value as RgbColor).g !== undefined\n                && (value as RgbColor).b !== undefined)\n            || ((value as RgbaColor).r !== undefined\n                && (value as RgbaColor).g !== undefined\n                && (value as RgbaColor).b !== undefined\n                && (value as RgbaColor).a !== undefined)\n            || ((value as HslColor).h !== undefined\n                && (value as HslColor).s !== undefined\n                && (value as HslColor).l !== undefined)\n            || ((value as HslaColor).h !== undefined\n                && (value as HslaColor).s !== undefined\n                && (value as HslaColor).l !== undefined\n                && (value as HslaColor).a !== undefined)\n            || ((value as HsvColor).h !== undefined\n                && (value as HsvColor).s !== undefined\n                && (value as HsvColor).v !== undefined)\n            || ((value as HsvaColor).h !== undefined\n                && (value as HsvaColor).s !== undefined\n                && (value as HsvaColor).v !== undefined\n                && (value as HsvaColor).a !== undefined)\n        );\n    }\n}\n","import { type Adapter } from '../environment/adapter';\n\n/**\n * This is an implementation of the {@link environment.Adapter} interface.\n * It can be used to make Pixi work in the browser.\n * @memberof environment\n * @property {Function} createCanvas - Creates a canvas element of the given size.\n * This canvas is created using the browser's native canvas element.\n * @property {Function} getCanvasRenderingContext2D - Returns a 2D rendering context.\n * @property {Function} getWebGLRenderingContext - Returns a WebGL rendering context.\n * @property {Function} getNavigator - Returns browsers window.navigator\n * @property {Function} getBaseUrl - Returns the current base URL for browser environments this is either\n * the document.baseURI or window.location.href\n * @property {Function} getFontFaceSet - Return the font face set if available\n * @property {Function} fetch - Returns a Response object that has been fetched from the given URL.\n * @property {Function} parseXML - Returns Document object that has been parsed from the given XML string.\n */\nexport const BrowserAdapter = {\n    createCanvas: (width: number, height: number): HTMLCanvasElement =>\n    {\n        const canvas = document.createElement('canvas');\n\n        canvas.width = width;\n        canvas.height = height;\n\n        return canvas;\n    },\n    getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n    getWebGLRenderingContext: () => WebGLRenderingContext,\n    getNavigator: () => navigator,\n    getBaseUrl: () => (document.baseURI ?? window.location.href),\n    getFontFaceSet: () => document.fonts,\n    fetch: (url: RequestInfo, options?: RequestInit) => fetch(url, options),\n    parseXML: (xml: string) =>\n    {\n        const parser = new DOMParser();\n\n        return parser.parseFromString(xml, 'text/xml');\n    },\n} as Adapter;\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter';\n\nimport type { ICanvas } from './canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from './canvas/ICanvasRenderingContext2D';\n\n/**\n * PixiJS supports multiple environments including browsers, Web Workers, and Node.js.\n * The environment is auto-detected by default using the {@link environment.autoDetectEnvironment} function.\n *\n * The {@link environment.Adapter} interface provides a way to abstract away the differences between\n * these environments. PixiJS uses the {@link environment.BrowserAdapter} by default.\n *\n * However you can manually set the environment using the {@link environment.DOMAdapter} singleton, for example to\n * use Pixi within a WebWorker.\n * ```js\n * import { DOMAdapter, WebWorkerAdapter } from 'pixi.js';\n *\n * // WebWorkerAdapter is an implementation of the Adapter interface\n * DOMAdapter.set(WebWorkerAdapter);\n *\n * // use the adapter to create a canvas (in this case an OffscreenCanvas)\n * DOMAdapter.get().createCanvas(800, 600);\n * ```\n * @namespace environment\n */\n\n/**\n * This interface describes all the DOM dependent calls that Pixi makes throughout its codebase.\n * Implementations of this interface can be used to make sure Pixi will work in any environment,\n * such as browser, Web Workers, and Node.js.\n * @memberof environment\n */\nexport interface Adapter\n{\n    /** Returns a canvas object that can be used to create a webgl context. */\n    createCanvas: (width?: number, height?: number) => ICanvas;\n    /** Returns a 2D rendering context. */\n    getCanvasRenderingContext2D: () => { prototype: ICanvasRenderingContext2D; };\n    /** Returns a WebGL rendering context. */\n    getWebGLRenderingContext: () => typeof WebGLRenderingContext;\n    /** Returns a partial implementation of the browsers window.navigator */\n    getNavigator: () => { userAgent: string, gpu: GPU | null };\n    /** Returns the current base URL For browser environments this is either the document.baseURI or window.location.href */\n    getBaseUrl: () => string;\n    /** Return the font face set if available */\n    getFontFaceSet: () => FontFaceSet | null;\n    /** Returns a Response object that has been fetched from the given URL. */\n    fetch: (url: RequestInfo, options?: RequestInit) => Promise<Response>;\n    /** Returns Document object that has been parsed from the given XML string. */\n    parseXML: (xml: string) => Document;\n}\n\nlet currentAdapter: Adapter = BrowserAdapter;\n\n/**\n * The DOMAdapter is a singleton that allows PixiJS to perform DOM operations, such as creating a canvas.\n * This allows PixiJS to be used in any environment, such as a web browser, Web Worker, or Node.js.\n * It uses the {@link environment.Adapter} interface to abstract away the differences between these environments\n * and uses the {@link environment.BrowserAdapter} by default.\n *\n * It has two methods: `get():Adapter` and `set(adapter: Adapter)`.\n *\n * Defaults to the {@link environment.BrowserAdapter}.\n * @example\n * import { DOMAdapter, WebWorkerAdapter } from 'pixi.js';\n *\n * // WebWorkerAdapter is an implementation of the Adapter interface\n * DOMAdapter.set(WebWorkerAdapter);\n *\n * // use the adapter to create a canvas (in this case an OffscreenCanvas)\n * DOMAdapter.get().createCanvas(800, 600);\n * @memberof environment\n */\nexport const DOMAdapter = {\n    /**\n     * Returns the current adapter.\n     * @returns {environment.Adapter} The current adapter.\n     */\n    get(): Adapter\n    {\n        return currentAdapter;\n    },\n    /**\n     * Sets the current adapter.\n     * @param adapter - The new adapter.\n     */\n    set(adapter: Adapter): void\n    {\n        currentAdapter = adapter;\n    },\n};\n","/**\n * `extensions` is a global object that holds all the extensions registered with PixiJS.\n * PixiJS uses a this extensions architecture a lot to make the library more modular and\n * flexible.\n *\n * For example, if you want to add load a new type of asset, you can register a new\n * {@link assets.LoaderParser} with the `extensions` object.\n *\n * ```js\n * import { extensions, ExtensionType } from 'pixi.js';\n *\n * // create a custom asset loader\n * const customAssetLoader = {\n *    extension: {\n *        type: ExtensionType.LoadParser,\n *        name: 'custom-asset-loader',\n *    },\n *    test(url) {\n *       // check if this new loader should be used...\n *    },\n *    load(url) {\n *        // load the asset...\n *    },\n * };\n *\n * // add the custom asset loader to pixi\n * extensions.add(customAssetLoader);\n * ```\n *\n * This would add the `customAssetLoader` to the list of available loaders that PixiJS can use.\n *\n * There are many different types of extensions, which are listed in {@link extensions.ExtensionType}.\n * @namespace extensions\n */\n\n/**\n * Collection of valid extension types.\n * @memberof extensions\n */\nenum ExtensionType\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /** extensions that are registered as Application plugins */\n    Application = 'application',\n\n    /** extensions that are registered as WebGL render pipes */\n    WebGLPipes = 'webgl-pipes',\n    /** extensions that are registered as WebGL render pipes adaptors */\n    WebGLPipesAdaptor = 'webgl-pipes-adaptor',\n    /** extensions that are registered as WebGL render systems */\n    WebGLSystem = 'webgl-system',\n\n    /** extensions that are registered as WebGPU render pipes */\n    WebGPUPipes = 'webgpu-pipes',\n    /** extensions that are registered as WebGPU render pipes adaptors */\n    WebGPUPipesAdaptor = 'webgpu-pipes-adaptor',\n    /** extensions that are registered as WebGPU render systems */\n    WebGPUSystem = 'webgpu-system',\n\n    /** extensions that are registered as Canvas render pipes */\n    CanvasSystem = 'canvas-system',\n    /** extensions that are registered as Canvas render pipes adaptors */\n    CanvasPipesAdaptor = 'canvas-pipes-adaptor',\n    /** extensions that are registered as Canvas render systems */\n    CanvasPipes = 'canvas-pipes',\n\n    /** extensions that combine the other Asset extensions */\n    Asset = 'asset',\n    /** extensions that are used to load assets through Assets */\n    LoadParser = 'load-parser',\n    /** extensions that are used to resolve asset urls through Assets */\n    ResolveParser = 'resolve-parser',\n    /** extensions that are used to handle how urls are cached by Assets */\n    CacheParser = 'cache-parser',\n    /** extensions that are used to add/remove available resources from Assets */\n    DetectionParser = 'detection-parser',\n\n    /** extensions that are registered with the MaskEffectManager */\n    MaskEffect = 'mask-effect',\n\n    /** A type of extension for creating a new advanced blend mode */\n    BlendMode = 'blend-mode',\n\n    /** A type of extension that will be used to auto detect a resource type */\n    TextureSource = 'texture-source',\n\n    /** A type of extension that will be used to auto detect an environment */\n    Environment = 'environment',\n\n    /** A type of extension for building and triangulating custom shapes used in graphics. */\n    ShapeBuilder = 'shape-builder',\n\n    /** A type of extension for creating custom batchers used in rendering. */\n    Batcher = 'batcher',\n}\n\n/**\n * The metadata for an extension.\n * @memberof extensions\n * @ignore\n */\ninterface ExtensionMetadataDetails\n{\n    /** The extension type, can be multiple types */\n    type: ExtensionType | ExtensionType[];\n    /** Optional. Some plugins provide an API name/property, to make them more easily accessible */\n    name?: string;\n    /** Optional, used for sorting the plugins in a particular order */\n    priority?: number;\n}\n\n/**\n * The metadata for an extension.\n * @memberof extensions\n */\ntype ExtensionMetadata = ExtensionType | ExtensionMetadataDetails;\n\n/**\n * Format when registering an extension. Generally, the extension\n * should have these values as `extension` static property,\n * but you can override name or type by providing an object.\n * @memberof extensions\n */\ninterface ExtensionFormat\n{\n    /** The extension type, can be multiple types */\n    type: ExtensionType | ExtensionType[];\n    /** Optional. Some plugins provide an API name/property, such as Renderer plugins */\n    name?: string;\n    /** Optional, used for sorting the plugins in a particular order */\n    priority?: number;\n    /** Reference to the plugin object/class */\n    ref: any;\n}\n\n/**\n * Extension format that is used internally for registrations.\n * @memberof extensions\n * @ignore\n */\ninterface StrictExtensionFormat extends ExtensionFormat\n{\n    /** The extension type, always expressed as multiple, even if a single */\n    type: ExtensionType[];\n}\n\ntype ExtensionHandler = (extension: StrictExtensionFormat) => void;\n\n/**\n * Convert input into extension format data.\n * @ignore\n */\nconst normalizeExtension = (ext: ExtensionFormat | any): StrictExtensionFormat =>\n{\n    // Class/Object submission, use extension object\n    if (typeof ext === 'function' || (typeof ext === 'object' && ext.extension))\n    {\n        // #if _DEBUG\n        if (!ext.extension)\n        {\n            throw new Error('Extension class must have an extension object');\n        }\n        // #endif\n        const metadata: ExtensionMetadataDetails = (typeof ext.extension !== 'object')\n            ? { type: ext.extension }\n            : ext.extension;\n\n        ext = { ...metadata, ref: ext };\n    }\n    if (typeof ext === 'object')\n    {\n        ext = { ...ext };\n    }\n    else\n    {\n        throw new Error('Invalid extension type');\n    }\n\n    if (typeof ext.type === 'string')\n    {\n        ext.type = [ext.type];\n    }\n\n    return ext;\n};\n\n/**\n * Get the priority for an extension.\n * @ignore\n * @param ext - Any extension\n * @param defaultPriority - Fallback priority if none is defined.\n * @returns The priority for the extension.\n * @memberof extensions\n */\nexport const normalizeExtensionPriority = (ext: ExtensionFormat | any, defaultPriority: number): number =>\n    normalizeExtension(ext).priority ?? defaultPriority;\n\n/**\n * Global registration of all PixiJS extensions. One-stop-shop for extensibility.\n *\n * Import the `extensions` object and use it to register new functionality via the described methods below.\n * ```js\n * import { extensions } from 'pixi.js';\n *\n * // register a new extension\n * extensions.add(myExtension);\n * ```\n * @property {Function} remove - Remove extensions from PixiJS.\n * @property {Function} add - Register new extensions with PixiJS.\n * @property {Function} handle - Internal method to handle extensions by name.\n * @property {Function} handleByMap - Handle a type, but using a map by `name` property.\n * @property {Function} handleByNamedList - Handle a type, but using a list of extensions with a `name` property.\n * @property {Function} handleByList - Handle a type, but using a list of extensions.\n * @memberof extensions\n */\nconst extensions = {\n\n    /** @ignore */\n    _addHandlers: {} as Partial<Record<ExtensionType, ExtensionHandler>>,\n\n    /** @ignore */\n    _removeHandlers: {} as Partial<Record<ExtensionType, ExtensionHandler>>,\n\n    /** @ignore */\n    _queue: {} as Partial<Record<ExtensionType, StrictExtensionFormat[]>>,\n\n    /**\n     * Remove extensions from PixiJS.\n     * @param extensions - Extensions to be removed.\n     * @returns {extensions} For chaining.\n     */\n    remove(...extensions: Array<ExtensionFormat | any>)\n    {\n        extensions.map(normalizeExtension).forEach((ext) =>\n        {\n            ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n        });\n\n        return this;\n    },\n\n    /**\n     * Register new extensions with PixiJS.\n     * @param extensions - The spread of extensions to add to PixiJS.\n     * @returns {extensions} For chaining.\n     */\n    add(...extensions: Array<ExtensionFormat | any>)\n    {\n        // Handle any extensions either passed as class w/ data or as data\n        extensions.map(normalizeExtension).forEach((ext) =>\n        {\n            ext.type.forEach((type) =>\n            {\n                const handlers = this._addHandlers;\n                const queue = this._queue;\n\n                if (!handlers[type])\n                {\n                    queue[type] = queue[type] || [];\n                    queue[type]?.push(ext);\n                }\n                else\n                {\n                    handlers[type]?.(ext);\n                }\n            });\n        });\n\n        return this;\n    },\n\n    /**\n     * Internal method to handle extensions by name.\n     * @param type - The extension type.\n     * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n     * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n     * @returns {extensions} For chaining.\n     */\n    handle(type: ExtensionType, onAdd: ExtensionHandler, onRemove: ExtensionHandler)\n    {\n        const addHandlers = this._addHandlers;\n        const removeHandlers = this._removeHandlers;\n\n        // #if _DEBUG\n        if (addHandlers[type] || removeHandlers[type])\n        {\n            throw new Error(`Extension type ${type} already has a handler`);\n        }\n        // #endif\n\n        addHandlers[type] = onAdd;\n        removeHandlers[type] = onRemove;\n\n        // Process the queue\n        const queue = this._queue;\n\n        // Process any plugins that have been registered before the handler\n        if (queue[type])\n        {\n            queue[type]?.forEach((ext) => onAdd(ext));\n            delete queue[type];\n        }\n\n        return this;\n    },\n\n    /**\n     * Handle a type, but using a map by `name` property.\n     * @param type - Type of extension to handle.\n     * @param map - The object map of named extensions.\n     * @returns {extensions} For chaining.\n     */\n    handleByMap(type: ExtensionType, map: Record<string, any>)\n    {\n        return this.handle(type,\n            (extension) =>\n            {\n                if (extension.name)\n                {\n                    map[extension.name] = extension.ref;\n                }\n            },\n            (extension) =>\n            {\n                if (extension.name)\n                {\n                    delete map[extension.name];\n                }\n            }\n        );\n    },\n\n    /**\n     * Handle a type, but using a list of extensions with a `name` property.\n     * @param type - Type of extension to handle.\n     * @param map - The array of named extensions.\n     * @param defaultPriority - Fallback priority if none is defined.\n     * @returns {extensions} For chaining.\n     */\n    handleByNamedList(type: ExtensionType, map: {name: string, value: any}[], defaultPriority = -1)\n    {\n        return this.handle(\n            type,\n            (extension) =>\n            {\n                const index = map.findIndex((item) => item.name === extension.name);\n\n                if (index >= 0) return;\n\n                map.push({ name: extension.name, value: extension.ref });\n                map.sort((a, b) =>\n                    normalizeExtensionPriority(b.value, defaultPriority)\n                    - normalizeExtensionPriority(a.value, defaultPriority));\n            },\n            (extension) =>\n            {\n                const index = map.findIndex((item) => item.name === extension.name);\n\n                if (index !== -1)\n                {\n                    map.splice(index, 1);\n                }\n            }\n        );\n    },\n\n    /**\n     * Handle a type, but using a list of extensions.\n     * @param type - Type of extension to handle.\n     * @param list - The list of extensions.\n     * @param defaultPriority - The default priority to use if none is specified.\n     * @returns {extensions} For chaining.\n     */\n    handleByList(type: ExtensionType, list: any[], defaultPriority = -1)\n    {\n        return this.handle(\n            type,\n            (extension) =>\n            {\n                if (list.includes(extension.ref))\n                {\n                    return;\n                }\n\n                list.push(extension.ref);\n                list.sort((a, b) =>\n                    normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n            },\n            (extension) =>\n            {\n                const index = list.indexOf(extension.ref);\n\n                if (index !== -1)\n                {\n                    list.splice(index, 1);\n                }\n            }\n        );\n    },\n};\n\nexport {\n    extensions,\n    ExtensionType,\n};\nexport type {\n    StrictExtensionFormat as ExtensionFormat,\n    ExtensionFormat as ExtensionFormatLoose,\n    ExtensionHandler,\n    ExtensionMetadata,\n    ExtensionMetadataDetails\n};\n","import type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { Effect } from '../scene/container/Effect';\nimport type { Filter } from './Filter';\n\n/**\n * A filter effect is an effect that can be applied to a container that involves applying special pixel effects\n * to that container as it is rendered. Used internally when the filters property is modified on a container\n */\nexport class FilterEffect implements Effect\n{\n    /** read only filters array - to modify, set it again! */\n    public filters: readonly Filter[];\n    /**\n     * If specified, rather than calculating the bounds of the container that the filter\n     * will apply to, we use this rect instead. This is a local rect - so will have the containers transform\n     * applied to it\n     */\n    public filterArea?: Rectangle;\n\n    /** the pipe that knows how to handle this effect */\n    public pipe = 'filter';\n    /** the priority of this effect */\n    public priority = 1;\n\n    public destroy(): void\n    {\n        for (let i = 0; i < this.filters.length; i++)\n        {\n            this.filters[i].destroy();\n        }\n\n        this.filters = null;\n        this.filterArea = null;\n    }\n}\n","import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the browser environment.\n * @memberof environment\n */\nexport const browserExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'browser',\n        priority: -1,\n    },\n    test: () => true,\n    load: async () =>\n    {\n        await import('./browserAll');\n    },\n};\n","import { ExtensionType } from '../extensions/Extensions';\n\n/**\n * Extension for the webworker environment.\n * @memberof environment\n */\nexport const webworkerExt = {\n    extension: {\n        type: ExtensionType.Environment,\n        name: 'webworker',\n        priority: 0,\n    },\n    test: () => typeof self !== 'undefined' && self.WorkerGlobalScope !== undefined,\n    load: async () =>\n    {\n        await import('./webworkerAll');\n    },\n};\n","import { DOMAdapter } from '../../environment/adapter';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer';\n\nlet _isWebGLSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGL support.\n * @param failIfMajorPerformanceCaveat - whether to fail if there is a major performance caveat, defaults to false\n * @memberof utils\n * @function isWebGLSupported\n * @returns {boolean} Is WebGL supported.\n */\nexport function isWebGLSupported(\n    failIfMajorPerformanceCaveat?: boolean\n): boolean\n{\n    if (_isWebGLSupported !== undefined) return _isWebGLSupported;\n\n    _isWebGLSupported = ((): boolean =>\n    {\n        const contextOptions = {\n            stencil: true,\n            failIfMajorPerformanceCaveat:\n                failIfMajorPerformanceCaveat\n                ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat,\n        };\n\n        try\n        {\n            if (!DOMAdapter.get().getWebGLRenderingContext())\n            {\n                return false;\n            }\n\n            const canvas = DOMAdapter.get().createCanvas();\n            let gl = canvas.getContext('webgl', contextOptions);\n\n            const success = !!gl?.getContextAttributes()?.stencil;\n\n            if (gl)\n            {\n                const loseContext = gl.getExtension('WEBGL_lose_context');\n\n                if (loseContext)\n                {\n                    loseContext.loseContext();\n                }\n            }\n\n            gl = null;\n\n            return success;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGLSupported;\n}\n","import { DOMAdapter } from '../../environment/adapter';\n\nlet _isWebGPUSupported: boolean | undefined;\n\n/**\n * Helper for checking for WebGPU support.\n * @param options - The options for requesting a GPU adapter.\n * @memberof utils\n * @function isWebGPUSupported\n * @returns Is WebGPU supported.\n */\nexport async function isWebGPUSupported(options: GPURequestAdapterOptions = {}): Promise<boolean>\n{\n    if (_isWebGPUSupported !== undefined) return _isWebGPUSupported;\n\n    _isWebGPUSupported = await (async (): Promise<boolean> =>\n    {\n        const gpu = DOMAdapter.get().getNavigator().gpu;\n\n        if (!gpu)\n        {\n            return false;\n        }\n\n        try\n        {\n            const adapter = await gpu.requestAdapter(options) as GPUAdapter;\n\n            // TODO and one of these!\n            await adapter.requestDevice();\n\n            return true;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    })();\n\n    return _isWebGPUSupported;\n}\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer';\n\nimport type { WebGLOptions } from './gl/WebGLRenderer';\nimport type { WebGPUOptions } from './gpu/WebGPURenderer';\nimport type { Renderer, RendererOptions } from './types';\n\n/**\n * Options for {@link rendering.autoDetectRenderer}.\n * @memberof rendering\n */\nexport interface AutoDetectOptions extends RendererOptions\n{\n    /** The preferred renderer type. WebGPU is recommended as its generally faster than WebGL. */\n    preference?: 'webgl' | 'webgpu'// | 'canvas';\n    /** Optional WebGPUOptions to pass only to WebGPU renderer. */\n    webgpu?: Partial<WebGPUOptions>;\n    /** Optional WebGLOptions to pass only to the WebGL renderer */\n    webgl?: Partial<WebGLOptions>;\n}\n\nconst renderPriority = ['webgl', 'webgpu', 'canvas'];\n\n/**\n * Automatically determines the most appropriate renderer for the current environment.\n *\n * The function will prioritize the WebGL renderer as it is the most tested safe API to use.\n * In the near future as WebGPU becomes more stable and ubiquitous, it will be prioritized over WebGL.\n *\n * The selected renderer's code is then dynamically imported to optimize\n * performance and minimize the initial bundle size.\n *\n * To maximize the benefits of dynamic imports, it's recommended to use a modern bundler\n * that supports code splitting. This will place the renderer code in a separate chunk,\n * which is loaded only when needed.\n * @example\n *\n * // create a renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   antialias: true,\n * });\n *\n * // custom for each renderer\n * const renderer = await autoDetectRenderer({\n *   width: 800,\n *   height: 600,\n *   webgpu:{\n *     antialias: true,\n *     backgroundColor: 'red'\n *   },\n *   webgl:{\n *     antialias: true,\n *     backgroundColor: 'green'\n *   }\n *  });\n * @param options - A partial configuration object based on the `AutoDetectOptions` type.\n * @returns A Promise that resolves to an instance of the selected renderer.\n * @memberof rendering\n */\nexport async function autoDetectRenderer(options: Partial<AutoDetectOptions>): Promise<Renderer>\n{\n    let preferredOrder: string[] = [];\n\n    if (options.preference)\n    {\n        preferredOrder.push(options.preference);\n\n        renderPriority.forEach((item) =>\n        {\n            if (item !== options.preference)\n            {\n                preferredOrder.push(item);\n            }\n        });\n    }\n    else\n    {\n        preferredOrder = renderPriority.slice();\n    }\n\n    let RendererClass: new () => Renderer;\n    let finalOptions: Partial<AutoDetectOptions> = {};\n\n    for (let i = 0; i < preferredOrder.length; i++)\n    {\n        const rendererType = preferredOrder[i];\n\n        if (rendererType === 'webgpu' && (await isWebGPUSupported()))\n        {\n            const { WebGPURenderer } = await import('./gpu/WebGPURenderer');\n\n            RendererClass = WebGPURenderer;\n\n            finalOptions = { ...options, ...options.webgpu };\n\n            break;\n        }\n        else if (\n            rendererType === 'webgl'\n            && isWebGLSupported(\n                options.failIfMajorPerformanceCaveat\n                    ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n            )\n        )\n        {\n            const { WebGLRenderer } = await import('./gl/WebGLRenderer');\n\n            RendererClass = WebGLRenderer;\n\n            finalOptions = { ...options, ...options.webgl };\n\n            break;\n        }\n        else if (rendererType === 'canvas')\n        {\n            finalOptions = { ...options };\n\n            throw new Error('CanvasRenderer is not yet implemented');\n        }\n    }\n\n    delete finalOptions.webgpu;\n    delete finalOptions.webgl;\n\n    if (!RendererClass)\n    {\n        throw new Error('No available renderer for the current environment');\n    }\n\n    const renderer = new RendererClass();\n\n    await renderer.init(finalOptions);\n\n    return renderer;\n}\n","import { extensions, ExtensionType } from '../extensions/Extensions';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer';\nimport { Container } from '../scene/container/Container';\nimport { ApplicationInitHook } from '../utils/global/globalHooks';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation';\n\nimport type { Rectangle } from '../maths/shapes/Rectangle';\nimport type { AutoDetectOptions } from '../rendering/renderers/autoDetectRenderer';\nimport type { RendererDestroyOptions } from '../rendering/renderers/shared/system/AbstractRenderer';\nimport type { Renderer } from '../rendering/renderers/types';\nimport type { DestroyOptions } from '../scene/container/destroyTypes';\n\n/**\n * The app module provides a set of classes to use as a starting point when building applications.\n *\n * <aside>This module has a mixin for <code>TickerPlugin</code> and <code>ResizePlugin</code>.\n * These will need to be imported if you are managing your own renderer.</aside>\n *\n * ```js\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init();\n *\n * // don't forget to add the canvas to the DOM\n * document.body.appendChild(app.canvas);\n * ```\n * @namespace app\n */\n\n/**\n * Any plugin that's usable for Application should contain these methods.\n * @example\n * import { ApplicationPlugin } from 'pixi.js';\n *\n * const plugin: ApplicationPlugin = {\n *    init: (options: Partial<ApplicationOptions>) =>\n *    {\n *       // handle init here, use app options if needed\n *    },\n *    destroy: () =>\n *    {\n *       // handle destruction code here\n *    }\n * }\n * @memberof app\n * @see {@link app.ApplicationOptions}\n * @ignore\n */\nexport interface ApplicationPlugin\n{\n    /**\n     * Called when Application is constructed, scoped to Application instance.\n     * Passes in `options` as the only argument, which are Application `init()` options.\n     * @param {object} options - Application options.\n     */\n    init(options: Partial<ApplicationOptions>): void;\n    /** Called when destroying Application, scoped to Application instance. */\n    destroy(): void;\n}\n\n/**\n * Application options supplied to the {@link app.Application#init} method.\n * @memberof app\n * @example\n * import { Application } from 'pixi.js';\n *\n * const app = new Application();\n *\n * await app.init({\n *    autoStart: false,\n *    resizeTo: window,\n *    sharedTicker: true,\n * });\n */\nexport interface ApplicationOptions extends AutoDetectOptions, PixiMixins.ApplicationOptions { }\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Application extends PixiMixins.Application { }\n\n/**\n * Convenience class to create a new PixiJS application.\n *\n * This class automatically creates the renderer, ticker and root container.\n * @example\n * import { Application, Sprite } from 'pixi.js';\n *\n * // Create the application\n * const app = new Application();\n *\n * await app.init({ width: 800, height: 600 });\n *\n * // Add the view to the DOM\n * document.body.appendChild(app.canvas);\n *\n * // ex, add display objects\n * app.stage.addChild(Sprite.from('something.png'));\n * @memberof app\n */\nexport class Application<R extends Renderer = Renderer>\n{\n    /**\n     * Collection of installed plugins.\n     * @alias _plugins\n     */\n    public static _plugins: ApplicationPlugin[] = [];\n\n    /** The root display container that's rendered. */\n    public stage: Container = new Container();\n\n    /**\n     * WebGL renderer if available, otherwise CanvasRenderer.\n     * @member {rendering.Renderer}\n     */\n    public renderer: R;\n\n    /** Create new Application instance */\n    constructor();\n\n    /** @deprecated since 8.0.0 */\n    constructor(options?: Partial<ApplicationOptions>);\n\n    /** @ignore */\n    constructor(...args: [Partial<ApplicationOptions>] | [])\n    {\n        // #if _DEBUG\n        if (args[0] !== undefined)\n        {\n            deprecation(v8_0_0, 'Application constructor options are deprecated, please use Application.init() instead.');\n        }\n        // #endif\n    }\n\n    /**\n     * @param options - The optional application and renderer parameters.\n     */\n    public async init(options?: Partial<ApplicationOptions>)\n    {\n        // The default options\n        options = { ...options };\n\n        this.renderer = await autoDetectRenderer(options as ApplicationOptions) as R;\n\n        // install plugins here\n        Application._plugins.forEach((plugin) =>\n        {\n            plugin.init.call(this, options);\n        });\n    }\n\n    /** Render the current stage. */\n    public render(): void\n    {\n        this.renderer.render({ container: this.stage });\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @readonly\n     * @member {HTMLCanvasElement}\n     */\n    get canvas(): R['canvas']\n    {\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's canvas element.\n     * @member {HTMLCanvasElement}\n     * @deprecated since 8.0.0\n     */\n    get view(): R['canvas']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Application.view is deprecated, please use Application.canvas instead.');\n        // #endif\n\n        return this.renderer.canvas as R['canvas'];\n    }\n\n    /**\n     * Reference to the renderer's screen rectangle. Its safe to use as `filterArea` or `hitArea` for the whole screen.\n     * @readonly\n     */\n    get screen(): Rectangle\n    {\n        return this.renderer.screen;\n    }\n\n    /**\n     * Destroys the application and all of its resources.\n     * @param {object|boolean}[rendererDestroyOptions=false] - The options for destroying the renderer.\n     * @param {boolean}[rendererDestroyOptions.removeView=false] - Removes the Canvas element from the DOM.\n     * @param {object|boolean} [options=false] - The options for destroying the stage.\n     * @param {boolean} [options.children=false] - If set to true, all the children will have their destroy method\n     * called as well. `options` will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites.\n     * If options.children is set to true,\n     * it should destroy the texture of the child sprite.\n     * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n     *  If options.children is set to true,\n     * it should destroy the texture source of the child sprite.\n     * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n     * If options.children is set to true,\n     * it should destroy the context of the child graphics.\n     */\n    public destroy(rendererDestroyOptions: RendererDestroyOptions = false, options: DestroyOptions = false): void\n    {\n        // Destroy plugins in the opposite order\n        // which they were constructed\n        const plugins = Application._plugins.slice(0);\n\n        plugins.reverse();\n        plugins.forEach((plugin) =>\n        {\n            plugin.destroy.call(this);\n        });\n\n        this.stage.destroy(options);\n        this.stage = null;\n\n        this.renderer.destroy(rendererDestroyOptions);\n        this.renderer = null;\n    }\n}\n\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n","import { Rectangle } from '../../maths/shapes/Rectangle';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { AbstractBitmapFont } from './AbstractBitmapFont';\nimport { BitmapFontManager } from './BitmapFontManager';\n\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\nimport type { BitmapFontData } from './AbstractBitmapFont';\nimport type { BitmapFontInstallOptions } from './BitmapFontManager';\n\n/**\n * Options for creating a BitmapFont.\n * @memberof text\n */\nexport interface BitmapFontOptions\n{\n    data: BitmapFontData\n    textures: Texture[]\n}\n\n/**\n * A BitmapFont object represents a particular font face, size, and style.\n * @memberof text\n */\nexport class BitmapFont extends AbstractBitmapFont<BitmapFont>\n{\n    /** the url of the font */\n    public url?: string;\n\n    constructor(options: BitmapFontOptions, url?: string)\n    {\n        super();\n\n        const { textures, data } = options;\n\n        Object.keys(data.pages).forEach((key: string) =>\n        {\n            const pageData = data.pages[parseInt(key, 10)];\n\n            const texture = textures[pageData.id];\n\n            this.pages.push({ texture });\n        });\n\n        Object.keys(data.chars).forEach((key: string) =>\n        {\n            const charData = data.chars[key];\n            const {\n                frame: textureFrame,\n                source: textureSource,\n            } = textures[charData.page];\n\n            const frameReal = new Rectangle(\n                charData.x + textureFrame.x,\n                charData.y + textureFrame.y,\n                charData.width,\n                charData.height,\n            );\n\n            const texture = new Texture({\n                source: textureSource,\n                frame: frameReal\n            });\n\n            this.chars[key] = {\n                id: key.codePointAt(0),\n                xOffset: charData.xOffset,\n                yOffset: charData.yOffset,\n                xAdvance: charData.xAdvance,\n                kerning: charData.kerning ?? {},\n                texture,\n            };\n        });\n\n        this.baseRenderedFontSize = data.fontSize;\n\n        (this.baseMeasurementFontSize as number) = data.fontSize;\n        (this.fontMetrics as FontMetrics) = {\n            ascent: 0,\n            descent: 0,\n            fontSize: data.fontSize,\n        };\n        (this.baseLineOffset as number) = data.baseLineOffset;\n        (this.lineHeight as number) = data.lineHeight;\n        (this.fontFamily as string) = data.fontFamily;\n        (this.distanceField as { type: string, range: number }) = data.distanceField ?? {\n            type: 'none',\n            range: 0,\n        };\n\n        this.url = url;\n    }\n\n    /** Destroys the BitmapFont object. */\n    public override destroy(): void\n    {\n        super.destroy();\n\n        for (let i = 0; i < this.pages.length; i++)\n        {\n            const { texture } = this.pages[i];\n\n            texture.destroy(true);\n        }\n\n        (this.pages as null) = null;\n    }\n\n    /**\n     * Generates a bitmap-font for the given style and character set\n     * @param options - Setup options for font generation.\n     * @returns Font generated by style options.\n     * @example\n     * import { BitmapFont, BitmapText } from 'pixi.js';\n     *\n     * BitmapFont.install('TitleFont', {\n     *     fontFamily: 'Arial',\n     *     fontSize: 12,\n     *     strokeThickness: 2,\n     *     fill: 'purple',\n     * });\n     *\n     * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n     */\n    public static install(options: BitmapFontInstallOptions)\n    {\n        BitmapFontManager.install(options);\n    }\n    /**\n     * Uninstalls a bitmap font from the cache.\n     * @param {string} name - The name of the bitmap font to uninstall.\n     */\n    public static uninstall(name: string)\n    {\n        BitmapFontManager.uninstall(name);\n    }\n}\n","import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\n/**\n * Internal data format used to convert to BitmapFontData.\n * @private\n */\nexport interface BitmapFontRawData\n{\n    info: {\n        face: string;\n        size: string;\n    }[];\n    common: { lineHeight: string, base: string }[];\n    page: {\n        id: string;\n        file: string;\n    }[];\n    chars: {\n        count: number;\n    }[];\n    char: {\n        id: string\n        page: string\n        xoffset: string\n        yoffset: string\n        xadvance: string,\n        x: string\n        y: string\n        width: string\n        height: string\n        letter?: string\n        char?: string\n    }[];\n    kernings?: {\n        count: number;\n    }[];\n    kerning?: {\n        first: string;\n        second: string;\n        amount: string;\n    }[];\n    distanceField?: {\n        fieldType: 'sdf' | 'msdf' | 'none';\n        distanceRange: string;\n    }[]\n}\n\nexport const bitmapFontTextParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        return typeof data === 'string' && data.startsWith('info face=');\n    },\n\n    parse(txt: string): BitmapFontData\n    {\n        // Retrieve data item\n        const items = txt.match(/^[a-z]+\\s+.+$/gm);\n        const rawData: BitmapFontRawData = {\n            info: [],\n            common: [],\n            page: [],\n            char: [],\n            chars: [],\n            kerning: [],\n            kernings: [],\n            distanceField: [],\n        };\n\n        for (const i in items)\n        {\n            // Extract item name\n            const name = items[i].match(/^[a-z]+/gm)[0] as keyof BitmapFontRawData;\n\n            // Extract item attribute list as string ex.: \"width=10\"\n            const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n\n            // Convert attribute list into an object\n            const itemData: any = {};\n\n            for (const i in attributeList)\n            {\n                // Split key-value pairs\n                const split = attributeList[i].split('=');\n                const key = split[0];\n\n                // Remove eventual quotes from value\n                const strValue = split[1].replace(/\"/gm, '');\n\n                // Try to convert value into float\n                const floatValue = parseFloat(strValue);\n\n                // Use string value case float value is NaN\n                const value = isNaN(floatValue) ? strValue : floatValue;\n\n                itemData[key] = value;\n            }\n\n            // Push current item to the resulting data\n            rawData[name].push(itemData);\n        }\n\n        const font: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const [info] = rawData.info;\n        const [common] = rawData.common;\n        const [distanceField] = rawData.distanceField ?? [];\n\n        if (distanceField)\n        {\n            font.distanceField = {\n                range: parseInt(distanceField.distanceRange, 10),\n                type: distanceField.fieldType\n            };\n        }\n\n        font.fontSize = parseInt(info.size, 10);\n        font.fontFamily = info.face;\n        font.lineHeight = parseInt(common.lineHeight, 10);\n\n        const page = rawData.page;\n\n        for (let i = 0; i < page.length; i++)\n        {\n            font.pages.push({\n                id: parseInt(page[i].id, 10) || 0,\n                file: page[i].file,\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n\n        const char = rawData.char;\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.id, 10);\n\n            let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            font.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.page, 10) || 0,\n                x: parseInt(charNode.x, 10),\n                y: parseInt(charNode.y, 10),\n                width: parseInt(charNode.width, 10),\n                height: parseInt(charNode.height, 10),\n                xOffset: parseInt(charNode.xoffset, 10),\n                yOffset: parseInt(charNode.yoffset, 10),\n                xAdvance: parseInt(charNode.xadvance, 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        const kerning = rawData.kerning || [];\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].first, 10);\n            const second = parseInt(kerning[i].second, 10);\n            const amount = parseInt(kerning[i].amount, 10);\n\n            font.chars[map[second]].kerning[map[first]] = amount;\n        }\n\n        return font;\n    }\n};\n","import type { BitmapFontData, RawCharData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        const xml = data as Document;\n\n        return typeof xml !== 'string'\n            && 'getElementsByTagName' in xml\n            && xml.getElementsByTagName('page').length\n            && xml.getElementsByTagName('info')[0].getAttribute('face') !== null;\n    },\n\n    parse(xml: Document): BitmapFontData\n    {\n        const data: BitmapFontData = {\n            chars: {},\n            pages: [],\n            lineHeight: 0,\n            fontSize: 0,\n            fontFamily: '',\n            distanceField: null,\n            baseLineOffset: 0,\n        };\n\n        const info = xml.getElementsByTagName('info')[0];\n        const common = xml.getElementsByTagName('common')[0];\n        const distanceField = xml.getElementsByTagName('distanceField')[0];\n\n        if (distanceField)\n        {\n            data.distanceField = {\n                type: distanceField.getAttribute('fieldType') as 'sdf' | 'msdf' | 'none',\n                range: parseInt(distanceField.getAttribute('distanceRange'), 10),\n            };\n        }\n\n        // pages and chars:\n        const page = xml.getElementsByTagName('page');\n        const char = xml.getElementsByTagName('char');\n        const kerning = xml.getElementsByTagName('kerning');\n\n        data.fontSize = parseInt(info.getAttribute('size'), 10);\n        data.fontFamily = info.getAttribute('face');\n        data.lineHeight = parseInt(common.getAttribute('lineHeight'), 10);\n\n        for (let i = 0; i < page.length; i++)\n        {\n            data.pages.push({\n                id: parseInt(page[i].getAttribute('id'), 10) || 0,\n                file: page[i].getAttribute('file'),\n            });\n        }\n\n        const map: Record<string, string> = {};\n\n        data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute('base'), 10);\n\n        for (let i = 0; i < char.length; i++)\n        {\n            const charNode = char[i];\n            const id = parseInt(charNode.getAttribute('id'), 10);\n\n            let letter = charNode.getAttribute('letter') ?? charNode.getAttribute('char') ?? String.fromCharCode(id);\n\n            if (letter === 'space')letter = ' ';\n\n            map[id] = letter;\n\n            data.chars[letter] = {\n                id,\n                // texture deets..\n                page: parseInt(charNode.getAttribute('page'), 10) || 0,\n                x: parseInt(charNode.getAttribute('x'), 10),\n                y: parseInt(charNode.getAttribute('y'), 10),\n                width: parseInt(charNode.getAttribute('width'), 10),\n                height: parseInt(charNode.getAttribute('height'), 10),\n\n                // render deets..\n                xOffset: parseInt(charNode.getAttribute('xoffset'), 10),\n                yOffset: parseInt(charNode.getAttribute('yoffset'), 10), // + baseLineOffset,\n                xAdvance: parseInt(charNode.getAttribute('xadvance'), 10),\n                kerning: {},\n            } as RawCharData;\n        }\n\n        for (let i = 0; i < kerning.length; i++)\n        {\n            const first = parseInt(kerning[i].getAttribute('first'), 10);\n            const second = parseInt(kerning[i].getAttribute('second'), 10);\n            const amount = parseInt(kerning[i].getAttribute('amount'), 10);\n\n            data.chars[map[second]].kerning[map[first]] = amount;// * 10000;\n        }\n\n        return data;\n    }\n};\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser';\n\nimport type { BitmapFontData } from '../AbstractBitmapFont';\n\nexport const bitmapFontXMLStringParser = {\n    test(data: string | XMLDocument | BitmapFontData): boolean\n    {\n        if (typeof data === 'string' && data.includes('<font>'))\n        {\n            return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n        }\n\n        return false;\n    },\n\n    parse(data: string): BitmapFontData\n    {\n        return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n    }\n};\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams';\nimport { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { path } from '../../../utils/path';\nimport { BitmapFont } from '../BitmapFont';\nimport { bitmapFontTextParser } from './bitmapFontTextParser';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser';\n\nimport type { CacheParser } from '../../../assets/cache/CacheParser';\nimport type { Loader } from '../../../assets/loader/Loader';\nimport type { LoaderParserAdvanced } from '../../../assets/loader/parsers/LoaderParser';\nimport type { ResolvedAsset } from '../../../assets/types';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nconst validExtensions = ['.xml', '.fnt'];\n\n/** simple loader plugin for loading in bitmap fonts! */\nexport const bitmapFontCachePlugin = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheBitmapFont',\n    },\n    test: (asset: BitmapFont) => asset instanceof BitmapFont,\n    getCacheableAssets(keys: string[], asset: BitmapFont)\n    {\n        const out: Record<string, BitmapFont> = {};\n\n        keys.forEach((key) =>\n        {\n            out[key] = asset;\n            out[`${key}-bitmap`] = asset;\n        });\n\n        out[`${asset.fontFamily}-bitmap`] = asset;\n\n        return out;\n    }\n} satisfies CacheParser<BitmapFont>;\n\nexport const loadBitmapFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Normal,\n    },\n\n    name: 'loadBitmapFont',\n\n    test(url: string): boolean\n    {\n        return validExtensions.includes(path.extname(url).toLowerCase());\n    },\n\n    async testParse(data: string): Promise<boolean>\n    {\n        return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n    },\n\n    async parse(asset: string, data: ResolvedAsset, loader: Loader): Promise<BitmapFont>\n    {\n        const bitmapFontData = bitmapFontTextParser.test(asset)\n            ? bitmapFontTextParser.parse(asset)\n            : bitmapFontXMLStringParser.parse(asset);\n\n        const { src } = data;\n        const { pages } = bitmapFontData;\n        const textureUrls = [];\n\n        // if we have a distance field - we can assume this is a signed distance field font\n        // and we should use force linear filtering and no alpha premultiply\n        const textureOptions = (bitmapFontData.distanceField) ? {\n            scaleMode: 'linear',\n            alphaMode: 'premultiply-alpha-on-upload',\n            autoGenerateMipmaps: false,\n            resolution: 1,\n        } : {};\n\n        for (let i = 0; i < pages.length; ++i)\n        {\n            const pageFile = pages[i].file;\n            let imagePath = path.join(path.dirname(src), pageFile);\n\n            imagePath = copySearchParams(imagePath, src);\n\n            textureUrls.push({\n                src: imagePath,\n                data: textureOptions\n            });\n        }\n\n        const loadedTextures = await loader.load<Texture>(textureUrls);\n        const textures = textureUrls.map((url) => loadedTextures[url.src]);\n\n        const bitmapFont = new BitmapFont({\n            data: bitmapFontData,\n            textures\n        }, src);\n\n        return bitmapFont;\n    },\n\n    async load(url: string, _options: ResolvedAsset): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        return await response.text();\n    },\n\n    async unload(bitmapFont: BitmapFont, _resolvedAsset, loader): Promise<void>\n    {\n        await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n\n        bitmapFont.destroy();\n    }\n} satisfies LoaderParserAdvanced<string, BitmapFont, BitmapFont>;\n","import type { Loader } from './loader/Loader';\nimport type { ResolvedAsset } from './types';\n\n/**\n * Quietly Loads assets in the background.\n * @memberof assets\n */\nexport class BackgroundLoader\n{\n    /** Whether or not the loader should continue loading. */\n    private _isActive: boolean;\n\n    /** Assets to load. */\n    private readonly _assetList: ResolvedAsset[];\n\n    /** Whether or not the loader is loading. */\n    private _isLoading: boolean;\n\n    /** Number of assets to load at a time. */\n    private readonly _maxConcurrent: number;\n\n    /** Should the loader log to the console. */\n    public verbose: boolean;\n    private readonly _loader: Loader;\n\n    /**\n     * @param loader\n     * @param verbose - should the loader log to the console\n     */\n    constructor(loader: Loader, verbose = false)\n    {\n        this._loader = loader;\n        this._assetList = [];\n        this._isLoading = false;\n        this._maxConcurrent = 1;\n        this.verbose = verbose;\n    }\n\n    /**\n     * Adds an array of assets to load.\n     * @param assetUrls - assets to load\n     */\n    public add(assetUrls: ResolvedAsset[]): void\n    {\n        assetUrls.forEach((a) =>\n        {\n            this._assetList.push(a);\n        });\n\n        if (this.verbose)\n        {\n            // eslint-disable-next-line no-console\n            console.log('[BackgroundLoader] assets: ', this._assetList);\n        }\n\n        if (this._isActive && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n\n    /**\n     * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n     *\n     * The max assets it will try to load at one time will be 4.\n     */\n    private async _next(): Promise<void>\n    {\n        if (this._assetList.length && this._isActive)\n        {\n            this._isLoading = true;\n\n            const toLoad = [];\n\n            const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n\n            for (let i = 0; i < toLoadAmount; i++)\n            {\n                toLoad.push(this._assetList.pop());\n            }\n\n            await this._loader.load(toLoad);\n\n            this._isLoading = false;\n\n            void this._next();\n        }\n    }\n\n    /**\n     * Activate/Deactivate the loading. If set to true then it will immediately continue to load the next asset.\n     * @returns whether the class is active\n     */\n    get active(): boolean\n    {\n        return this._isActive;\n    }\n\n    set active(value: boolean)\n    {\n        if (this._isActive === value) return;\n\n        this._isActive = value;\n\n        if (value && !this._isLoading)\n        {\n            void this._next();\n        }\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\n\nimport type { CacheParser } from '../CacheParser';\n\n/**\n * Returns an object of textures from an array of textures to be cached\n * @memberof assets\n */\nexport const cacheTextureArray: CacheParser<Texture[]> = {\n    extension: {\n        type: ExtensionType.CacheParser,\n        name: 'cacheTextureArray',\n    },\n\n    test: (asset: any[]) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n\n    getCacheableAssets: (keys: string[], asset: Texture[]) =>\n    {\n        const out: Record<string, Texture> = {};\n\n        keys.forEach((key: string) =>\n        {\n            asset.forEach((item: Texture, i: number) =>\n            {\n                out[key + (i === 0 ? '' : i + 1)] = item;\n            });\n        });\n\n        return out;\n    }\n};\n","export async function testImageFormat(imageData: string): Promise<boolean>\n{\n    // Some browsers currently do not support createImageBitmap with Blob, so new Image() is preferred when exist.\n    // See https://caniuse.com/createimagebitmap for more information.\n\n    if ('Image' in globalThis)\n    {\n        return new Promise<boolean>((resolve) =>\n        {\n            const image = new Image();\n\n            image.onload = () =>\n            {\n                resolve(true);\n            };\n            image.onerror = () =>\n            {\n                resolve(false);\n            };\n            image.src = imageData;\n        });\n    }\n\n    if ('createImageBitmap' in globalThis && 'fetch' in globalThis)\n    {\n        try\n        {\n            const blob = await (await fetch(imageData)).blob();\n\n            await createImageBitmap(blob);\n        }\n        catch (e)\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    return false;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the AVIF image format.\n * @memberof assets\n */\nexport const detectAvif: FormatDetectionParser = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 1,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        // eslint-disable-next-line max-len\n        'data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A='\n    ),\n    add: async (formats) => [...formats, 'avif'],\n    remove: async (formats) => formats.filter((f) => f !== 'avif'),\n};\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { FormatDetectionParser } from '../types';\n\nconst imageFormats = ['png', 'jpg', 'jpeg'];\n\n/**\n * Adds some default image formats to the detection parser\n * @memberof assets\n */\nexport const detectDefaults = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: -1,\n    },\n    test: (): Promise<boolean> => Promise.resolve(true),\n    add: async (formats) => [...formats, ...imageFormats],\n    remove: async (formats) => formats.filter((f) => !imageFormats.includes(f)),\n} as FormatDetectionParser;\n","const inWorker = 'WorkerGlobalScope' in globalThis\n    && globalThis instanceof (globalThis as any).WorkerGlobalScope;\n\nexport function testVideoFormat(mimeType: string): boolean\n{\n    if (inWorker)\n    {\n        return false;\n    }\n\n    const video = document.createElement('video');\n\n    return video.canPlayType(mimeType) !== '';\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the MP4 video format.\n * @memberof assets\n */\nexport const detectMp4 = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/mp4'),\n    add: async (formats) => [...formats, 'mp4', 'm4v'],\n    remove: async (formats) => formats.filter((f) => f !== 'mp4' && f !== 'm4v'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the OGV video format.\n * @memberof assets\n */\nexport const detectOgv = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/ogg'),\n    add: async (formats) => [...formats, 'ogv'],\n    remove: async (formats) => formats.filter((f) => f !== 'ogv'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testVideoFormat } from '../utils/testVideoFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebM video format.\n * @memberof assets\n */\nexport const detectWebm = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testVideoFormat('video/webm'),\n    add: async (formats) => [...formats, 'webm'],\n    remove: async (formats) => formats.filter((f) => f !== 'webm'),\n} as FormatDetectionParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { testImageFormat } from '../utils/testImageFormat';\n\nimport type { FormatDetectionParser } from '../types';\n\n/**\n * Detects if the browser supports the WebP image format.\n * @memberof assets\n */\nexport const detectWebp = {\n    extension: {\n        type: ExtensionType.DetectionParser,\n        priority: 0,\n    },\n    test: async (): Promise<boolean> => testImageFormat(\n        'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA='\n    ),\n    add: async (formats) => [...formats, 'webp'],\n    remove: async (formats) => formats.filter((f) => f !== 'webp'),\n} as FormatDetectionParser;\n","import { warn } from '../../utils/logging/warn';\nimport { path } from '../../utils/path';\nimport { convertToList } from '../utils/convertToList';\nimport { isSingleItem } from '../utils/isSingleItem';\n\nimport type { ResolvedAsset } from '../types';\nimport type { LoaderParser } from './parsers/LoaderParser';\nimport type { PromiseAndParser } from './types';\n\n/**\n * The Loader is responsible for loading all assets, such as images, spritesheets, audio files, etc.\n * It does not do anything clever with URLs - it just loads stuff!\n * Behind the scenes all things are cached using promises. This means it's impossible to load an asset more than once.\n * Through the use of LoaderParsers, the loader can understand how to load any kind of file!\n *\n * It is not intended that this class is created by developers - its part of the Asset class\n * This is the second major system of PixiJS' main Assets class\n * @memberof assets\n */\nexport class Loader\n{\n    private readonly _parsers: LoaderParser[] = [];\n    private _parserHash: Record<string, LoaderParser>;\n\n    private _parsersValidated = false;\n\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    public parsers = new Proxy(this._parsers, {\n        set: (target, key, value) =>\n        {\n            this._parsersValidated = false;\n\n            target[key as any as number] = value;\n\n            return true;\n        }\n    });\n\n    /** Cache loading promises that ae currently active */\n    public promiseCache: Record<string, PromiseAndParser> = {};\n\n    /** function used for testing */\n    public reset(): void\n    {\n        this._parsersValidated = false;\n        this.promiseCache = {};\n    }\n\n    /**\n     * Used internally to generate a promise for the asset to be loaded.\n     * @param url - The URL to be loaded\n     * @param data - any custom additional information relevant to the asset being loaded\n     * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n     */\n    private _getLoadPromiseAndParser(url: string, data?: ResolvedAsset): PromiseAndParser\n    {\n        const result: PromiseAndParser = {\n            promise: null,\n            parser: null\n        };\n\n        result.promise = (async () =>\n        {\n            let asset = null;\n\n            let parser: LoaderParser = null;\n\n            // first check to see if the user has specified a parser\n            if (data.loadParser)\n            {\n                // they have? lovely, lets use it\n                parser = this._parserHash[data.loadParser];\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] specified load parser \"${data.loadParser}\" not found while loading ${url}`);\n                    // #endif\n                }\n            }\n\n            // no parser specified, so lets try and find one using the tests\n            if (!parser)\n            {\n                for (let i = 0; i < this.parsers.length; i++)\n                {\n                    const parserX = this.parsers[i];\n\n                    if (parserX.load && parserX.test?.(url, data, this))\n                    {\n                        parser = parserX;\n                        break;\n                    }\n                }\n\n                if (!parser)\n                {\n                    // #if _DEBUG\n                    // eslint-disable-next-line max-len\n                    warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n                    // #endif\n\n                    return null;\n                }\n            }\n\n            asset = await parser.load(url, data, this);\n            result.parser = parser;\n\n            for (let i = 0; i < this.parsers.length; i++)\n            {\n                const parser = this.parsers[i];\n\n                if (parser.parse)\n                {\n                    if (parser.parse && await parser.testParse?.(asset, data, this))\n                    {\n                        // transform the asset..\n                        asset = await parser.parse(asset, data, this) || asset;\n\n                        result.parser = parser;\n                    }\n                }\n            }\n\n            return asset;\n        })();\n\n        return result;\n    }\n\n    /**\n     * Loads one or more assets using the parsers added to the Loader.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     * console.log(asset);\n     *\n     * // Multiple assets:\n     * const assets = await Loader.load(['cool.png', 'cooler.png']);\n     * console.log(assets);\n     * @param assetsToLoadIn - urls that you want to load, or a single one!\n     * @param onProgress - For multiple asset loading only, an optional function that is called\n     * when progress on asset loading is made. The function is passed a single parameter, `progress`,\n     * which represents the percentage (0.0 - 1.0) of the assets loaded. Do not use this function\n     * to detect when assets are complete and available, instead use the Promise returned by this function.\n     */\n    public async load<T = any>(\n        assetsToLoadIn: string | ResolvedAsset,\n        onProgress?: (progress: number) => void,\n    ): Promise<T>;\n    public async load<T = any>(\n        assetsToLoadIn: string[] | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        assetsToLoadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n        onProgress?: (progress: number) => void,\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._parsersValidated)\n        {\n            this._validateParsers();\n        }\n\n        let count = 0;\n\n        const assets: Record<string, Promise<any>> = {};\n\n        const singleAsset = isSingleItem(assetsToLoadIn);\n\n        const assetsToLoad = convertToList<ResolvedAsset>(assetsToLoadIn, (item) => ({\n            alias: [item],\n            src: item,\n            data: {}\n        }));\n\n        const total = assetsToLoad.length;\n\n        const promises: Promise<void>[] = assetsToLoad.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            if (!assets[asset.src])\n            {\n                try\n                {\n                    if (!this.promiseCache[url])\n                    {\n                        this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n                    }\n\n                    assets[asset.src] = await this.promiseCache[url].promise;\n\n                    // Only progress if nothing goes wrong\n                    if (onProgress) onProgress(++count / total);\n                }\n                catch (e)\n                {\n                    // Delete eventually registered file and promises from internal cache\n                    // so they can be eligible for another loading attempt\n                    delete this.promiseCache[url];\n                    delete assets[asset.src];\n\n                    // Stop further execution\n                    throw new Error(`[Loader.load] Failed to load ${url}.\\n${e}`);\n                }\n            }\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? assets[assetsToLoad[0].src] : assets;\n    }\n\n    /**\n     * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n     * The parser that created the asset, will be the one that unloads it.\n     * @example\n     * // Single asset:\n     * const asset = await Loader.load('cool.png');\n     *\n     * await Loader.unload('cool.png');\n     *\n     * console.log(asset.destroyed); // true\n     * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n     */\n    public async unload(\n        assetsToUnloadIn: string | string[] | ResolvedAsset | ResolvedAsset[],\n    ): Promise<void>\n    {\n        const assetsToUnload = convertToList<ResolvedAsset>(assetsToUnloadIn, (item) => ({\n            alias: [item],\n            src: item,\n        }));\n\n        const promises: Promise<void>[] = assetsToUnload.map(async (asset: ResolvedAsset) =>\n        {\n            const url = path.toAbsolute(asset.src);\n\n            const loadPromise = this.promiseCache[url];\n\n            if (loadPromise)\n            {\n                const loadedAsset = await loadPromise.promise;\n\n                delete this.promiseCache[url];\n\n                await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n            }\n        });\n\n        await Promise.all(promises);\n    }\n\n    /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n    private _validateParsers()\n    {\n        this._parsersValidated = true;\n\n        this._parserHash = this._parsers\n            .filter((parser) => parser.name)\n            .reduce((hash, parser) =>\n            {\n                if (!parser.name)\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser should have a name`);\n                    // #endif\n                }\n                else if (hash[parser.name])\n                {\n                    // #if _DEBUG\n                    warn(`[Assets] loadParser name conflict \"${parser.name}\"`);\n                    // #endif\n                }\n\n                return { ...hash, [parser.name]: parser };\n            }, {} as Record<string, LoaderParser>);\n    }\n}\n","export function checkDataUrl(url: string, mimes: string | string[]): boolean\n{\n    if (Array.isArray(mimes))\n    {\n        for (const mime of mimes)\n        {\n            if (url.startsWith(`data:${mime}`)) return true;\n        }\n\n        return false;\n    }\n\n    return url.startsWith(`data:${mimes}`);\n}\n","import { path } from '../../utils/path';\n\nexport function checkExtension(url: string, extension: string | string[]): boolean\n{\n    const tempURL = url.split('?')[0];\n    const ext = path.extname(tempURL).toLowerCase();\n\n    if (Array.isArray(extension))\n    {\n        return extension.includes(ext);\n    }\n\n    return ext === extension;\n}\n\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validJSONExtension = '.json';\nconst validJSONMIME = 'application/json';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadJson = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadJson',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n    },\n\n    async load<T>(url: string): Promise<T>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const json = await response.json();\n\n        return json as T;\n    },\n} satisfies LoaderParser<string>;\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { LoaderParser } from './LoaderParser';\n\nconst validTXTExtension = '.txt';\nconst validTXTMIME = 'text/plain';\n\n/**\n * A simple loader plugin for loading text data\n * @memberof assets\n */\nexport const loadTxt = {\n\n    name: 'loadTxt',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadTxt',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n    },\n\n    async load(url: string): Promise<string>\n    {\n        const response = await DOMAdapter.get().fetch(url);\n\n        const txt = await response.text();\n\n        return txt;\n    },\n} satisfies LoaderParser<string>;\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { ExtensionType } from '../../../extensions/Extensions';\nimport { warn } from '../../../utils/logging/warn';\nimport { path } from '../../../utils/path';\nimport { Cache } from '../../cache/Cache';\nimport { checkDataUrl } from '../../utils/checkDataUrl';\nimport { checkExtension } from '../../utils/checkExtension';\nimport { LoaderParserPriority } from './LoaderParser';\n\nimport type { ResolvedAsset } from '../../types';\nimport type { LoaderParser } from './LoaderParser';\n\nconst validWeights = [\n    'normal', 'bold',\n    '100', '200', '300', '400', '500', '600', '700', '800', '900',\n];\nconst validFontExtensions = ['.ttf', '.otf', '.woff', '.woff2'];\nconst validFontMIMEs = [\n    'font/ttf',\n    'font/otf',\n    'font/woff',\n    'font/woff2',\n];\n\n/**\n * Data for loading a font\n * @memberof assets\n */\nexport type LoadFontData = {\n    /** Font family name */\n    family: string;\n    /** A set of optional descriptors passed as an object. It can contain any of the descriptors available for @font-face: */\n    display: string;\n    /**\n     * The featureSettings property of the FontFace interface retrieves or sets infrequently used\n     * font features that are not available from a font's variant properties.\n     */\n    featureSettings: string;\n    /** The stretch property of the FontFace interface retrieves or sets how the font stretches. */\n    stretch: string;\n    /** The style property of the FontFace interface retrieves or sets the font's style. */\n    style: string;\n    /**\n     * The unicodeRange property of the FontFace interface retrieves or sets the range of\n     * unicode code points encompassing the font.\n     */\n    unicodeRange: string;\n    /** The variant property of the FontFace interface programmatically retrieves or sets font variant values. */\n    variant: string;\n    /** The weight property of the FontFace interface retrieves or sets the weight of the font. */\n    weights: string[];\n};\n\n/**\n * RegExp for matching CSS <ident-token>. It doesn't consider escape and non-ASCII characters, but enough for us.\n * @see {@link https://www.w3.org/TR/css-syntax-3/#ident-token-diagram}\n */\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\n\n/**\n * Return font face name from a file name\n * Ex.: 'fonts/titan-one.woff' turns into 'Titan One'\n * @param url - File url\n * @memberof assets\n */\nexport function getFontFamilyName(url: string): string\n{\n    const ext = path.extname(url);\n    const name = path.basename(url, ext);\n\n    // Replace dashes by white spaces\n    const nameWithSpaces = name.replace(/(-|_)/g, ' ');\n\n    // Upper case first character of each word\n    const nameTokens = nameWithSpaces.toLowerCase()\n        .split(' ')\n        .map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n\n    let valid = nameTokens.length > 0;\n\n    for (const token of nameTokens)\n    {\n        if (!token.match(CSS_IDENT_TOKEN_REGEX))\n        {\n            valid = false;\n            break;\n        }\n    }\n\n    let fontFamilyName = nameTokens.join(' ');\n\n    if (!valid)\n    {\n        fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, '\\\\$&')}\"`;\n    }\n\n    return fontFamilyName;\n}\n\n// See RFC 3986 Chapter 2. Characters\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\n\n/**\n * Encode URI only when it contains invalid characters.\n * @param uri - URI to encode.\n */\nfunction encodeURIWhenNeeded(uri: string)\n{\n    if (validURICharactersRegex.test(uri))\n    {\n        return uri;\n    }\n\n    return encodeURI(uri);\n}\n\n/**\n * A loader plugin for handling web fonts\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *   alias: 'font',\n *   src: 'fonts/titan-one.woff',\n *   data: {\n *     family: 'Titan One',\n *     weights: ['normal', 'bold'],\n *   }\n * })\n * @memberof assets\n */\nexport const loadWebFont = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n    },\n\n    name: 'loadWebFont',\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n    },\n\n    async load(url: string, options?: ResolvedAsset<LoadFontData>): Promise<FontFace | FontFace[]>\n    {\n        const fonts = DOMAdapter.get().getFontFaceSet();\n\n        if (fonts)\n        {\n            const fontFaces: FontFace[] = [];\n            const name = options.data?.family ?? getFontFamilyName(url);\n            const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? ['normal'];\n            const data = options.data ?? {};\n\n            for (let i = 0; i < weights.length; i++)\n            {\n                const weight = weights[i];\n\n                const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n                    ...data,\n                    weight,\n                });\n\n                await font.load();\n\n                fonts.add(font);\n\n                fontFaces.push(font);\n            }\n\n            Cache.set(`${name}-and-url`, {\n                url,\n                fontFaces,\n            });\n\n            return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n        }\n\n        // #if _DEBUG\n        warn('[loadWebFont] FontFace API is not supported. Skipping loading font');\n        // #endif\n\n        return null;\n    },\n\n    unload(font: FontFace | FontFace[]): void\n    {\n        (Array.isArray(font) ? font : [font])\n            .forEach((t) =>\n            {\n                Cache.remove(t.family);\n                DOMAdapter.get().getFontFaceSet().delete(t);\n            });\n    }\n} satisfies LoaderParser<FontFace | FontFace[]>;\n","import { Resolver } from '../../assets/resolver/Resolver';\n\n/**\n * get the resolution / device pixel ratio of an asset by looking for the prefix\n * used by spritesheets and image urls\n * @memberof utils\n * @function getResolutionOfUrl\n * @param {string} url - the image path\n * @param {number} [defaultValue=1] - the defaultValue if no filename prefix is set.\n * @returns {number} resolution / device pixel ratio of an asset\n */\nexport function getResolutionOfUrl(url: string, defaultValue = 1): number\n{\n    const resolution = Resolver.RETINA_PREFIX?.exec(url);\n\n    if (resolution)\n    {\n        return parseFloat(resolution[1]);\n    }\n\n    return defaultValue;\n}\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { Cache } from '../../../../cache/Cache';\n\nimport type { TextureSource } from '../../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Loader } from '../../../Loader';\n\n/**\n * Creates a texture from a source and adds it to the cache.\n * @param source - source of the texture\n * @param loader - loader\n * @param url - url of the texture\n * @ignore\n */\nexport function createTexture(source: TextureSource, loader: Loader, url: string)\n{\n    source.label = url;\n    source._sourceOrigin = url;\n\n    const texture = new Texture({\n        source,\n        label: url,\n    });\n\n    const unload = () =>\n    {\n        delete loader.promiseCache[url];\n\n        if (Cache.has(url))\n        {\n            Cache.remove(url);\n        }\n    };\n\n    // remove the promise from the loader and the url from the cache when the texture is destroyed\n    texture.source.once('destroy', () =>\n    {\n        if (loader.promiseCache[url])\n        {\n            // #if _DEBUG\n            warn('[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! '\n           + 'Use Assets.unload() instead of destroying the TextureSource.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    texture.once('destroy', () =>\n    {\n        if (!source.destroyed)\n        {\n            // #if _DEBUG\n            warn('[Assets] A Texture managed by Assets was destroyed instead of unloaded! '\n             + 'Use Assets.unload() instead of destroying the Texture.');\n            // #endif\n\n            unload();\n        }\n    });\n\n    return texture;\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { type LoaderParser, LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\n\n/**\n * Configuration for the [loadSVG]{@link assets.loadSVG} plugin.\n * @see assets.loadSVG\n * @memberof assets\n */\nexport interface LoadSVGConfig\n{\n    /**\n     * The crossOrigin value to use for loading the SVG as an image.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n    /**\n     * When set to `true`, loading and decoding images will happen with `new Image()`,\n     * @default false\n     */\n    parseAsGraphicsContext: boolean;\n}\n\n/**\n * Regular expression for SVG XML document.\n * @example &lt;?xml version=\"1.0\" encoding=\"utf-8\" ?&gt;&lt;!-- image/svg --&gt;&lt;svg\n * @readonly\n */\nconst validSVGExtension = '.svg';\nconst validSVGMIME = 'image/svg+xml';\n\n/**\n * A simple loader plugin for loading json data\n * @memberof assets\n */\nexport const loadSvg: LoaderParser<Texture | GraphicsContext, TextureSourceOptions & LoadSVGConfig, LoadSVGConfig> = {\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.Low,\n        name: 'loadSVG',\n    },\n\n    name: 'loadSVG',\n\n    config: {\n        crossOrigin: 'anonymous',\n        parseAsGraphicsContext: false,\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n    },\n\n    async load(\n        url: string,\n        asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n        loader: Loader\n    ): Promise<Texture | GraphicsContext>\n    {\n        if (asset.data.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext)\n        {\n            return loadAsGraphics(url);\n        }\n\n        return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n    },\n\n    unload(asset: Texture | GraphicsContext): void\n    {\n        asset.destroy(true);\n    }\n\n};\n\nasync function loadAsTexture(\n    url: string,\n    asset: ResolvedAsset<TextureSourceOptions & LoadSVGConfig>,\n    loader: Loader,\n    crossOrigin: HTMLImageElement['crossOrigin']\n): Promise<Texture>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    const blob = await response.blob();\n\n    const blobUrl = URL.createObjectURL(blob);\n\n    const image = new Image();\n\n    image.src = blobUrl;\n    image.crossOrigin = crossOrigin;\n    await image.decode();\n\n    URL.revokeObjectURL(blobUrl);\n\n    // convert to canvas...\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n\n    const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n\n    const width = asset.data?.width ?? image.width;\n    const height = asset.data?.height ?? image.height;\n\n    canvas.width = width * resolution;\n    canvas.height = height * resolution;\n\n    context.drawImage(image, 0, 0, width * resolution, height * resolution);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { parseAsGraphicsContext: _p, ...rest } = asset.data;\n    const base = new ImageSource({\n        resource: canvas,\n        alphaMode: 'premultiply-alpha-on-upload',\n        resolution,\n        ...rest,\n    });\n\n    return createTexture(base, loader, url);\n}\n\nasync function loadAsGraphics(url: string): Promise<GraphicsContext>\n{\n    const response = await DOMAdapter.get().fetch(url);\n    const svgSource = await response.text();\n\n    const context = new GraphicsContext();\n\n    context.svg(svgSource);\n\n    return context;\n}\n","import CheckImageBitmapWorker from 'worker:./checkImageBitmap.worker.ts';\nimport LoadImageBitmapWorker from 'worker:./loadImageBitmap.worker.ts';\n\nimport type { TextureSourceOptions } from '../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { ResolvedAsset } from '../../types';\n\nlet UUID = 0;\nlet MAX_WORKERS: number;\n\ntype LoadImageBitmapResult = {\n    data?: ImageBitmap,\n    error?: Error,\n    uuid: number,\n    id: string,\n};\n\nclass WorkerManagerClass\n{\n    public worker: Worker;\n    private _resolveHash: {\n        [key: string]: {\n            resolve: (...param: any[]) => void;\n            reject: (...param: any[]) => void;\n        }\n    };\n    private readonly _workerPool: Worker[];\n    private readonly _queue: {\n        id: string;\n        arguments: any[];\n        resolve: (...param: any[]) => void;\n        reject: (...param: any[]) => void;\n    }[];\n    private _initialized = false;\n    private _createdWorkers = 0;\n    private _isImageBitmapSupported?: Promise<boolean>;\n\n    constructor()\n    {\n        this._workerPool = [];\n        this._queue = [];\n\n        this._resolveHash = {};\n    }\n\n    public isImageBitmapSupported(): Promise<boolean>\n    {\n        if (this._isImageBitmapSupported !== undefined) return this._isImageBitmapSupported;\n\n        this._isImageBitmapSupported = new Promise((resolve) =>\n        {\n            const { worker } = new CheckImageBitmapWorker();\n\n            worker.addEventListener('message', (event: MessageEvent<boolean>) =>\n            {\n                worker.terminate();\n                CheckImageBitmapWorker.revokeObjectURL();\n                resolve(event.data);\n            });\n        });\n\n        return this._isImageBitmapSupported;\n    }\n\n    public loadImageBitmap(src: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n    {\n        return this._run('loadImageBitmap', [src, asset?.data?.alphaMode]) as Promise<ImageBitmap>;\n    }\n\n    private async _initWorkers()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n    }\n\n    private _getWorker(): Worker\n    {\n        if (MAX_WORKERS === undefined)\n        {\n            MAX_WORKERS = navigator.hardwareConcurrency || 4;\n        }\n        let worker = this._workerPool.pop();\n\n        if (!worker && this._createdWorkers < MAX_WORKERS)\n        {\n            // only create as many as MAX_WORKERS allows..\n            this._createdWorkers++;\n            worker = new LoadImageBitmapWorker().worker;\n\n            worker.addEventListener('message', (event: MessageEvent) =>\n            {\n                this._complete(event.data);\n\n                this._returnWorker(event.target as Worker);\n                this._next();\n            });\n        }\n\n        return worker;\n    }\n\n    private _returnWorker(worker: Worker)\n    {\n        this._workerPool.push(worker);\n    }\n\n    private _complete(data: LoadImageBitmapResult): void\n    {\n        if (data.error !== undefined)\n        {\n            this._resolveHash[data.uuid].reject(data.error);\n        }\n        else\n        {\n            this._resolveHash[data.uuid].resolve(data.data);\n        }\n\n        this._resolveHash[data.uuid] = null;\n    }\n\n    private async _run(id: string, args: any[]): Promise<any>\n    {\n        await this._initWorkers();\n        // push into the queue...\n\n        const promise = new Promise((resolve, reject) =>\n        {\n            this._queue.push({ id, arguments: args, resolve, reject });\n        });\n\n        this._next();\n\n        return promise;\n    }\n\n    private _next(): void\n    {\n        // nothing to do\n        if (!this._queue.length) return;\n\n        const worker = this._getWorker();\n\n        // no workers available...\n        if (!worker)\n        {\n            return;\n        }\n\n        const toDo = this._queue.pop();\n\n        const id = toDo.id;\n\n        this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n\n        worker.postMessage({\n            data: toDo.arguments,\n            uuid: UUID++,\n            id,\n        });\n    }\n}\n\nconst WorkerManager = new WorkerManagerClass();\n\nexport {\n    WorkerManager,\n};\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { ExtensionType } from '../../../../extensions/Extensions';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { WorkerManager } from '../../workers/WorkerManager';\nimport { LoaderParserPriority } from '../LoaderParser';\nimport { createTexture } from './utils/createTexture';\n\nimport type { TextureSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validImageExtensions = ['.jpeg', '.jpg', '.png', '.webp', '.avif'];\nconst validImageMIMEs = [\n    'image/jpeg',\n    'image/png',\n    'image/webp',\n    'image/avif',\n];\n\n/**\n * Configuration for the [loadTextures]{@link assets.loadTextures} plugin.\n * @see assets.loadTextures\n * @memberof assets\n */\nexport interface LoadTextureConfig\n{\n    /**\n     * When set to `true`, loading and decoding images will happen with Worker thread,\n     * if available on the browser. This is much more performant as network requests\n     * and decoding can be expensive on the CPU. However, not all environments support\n     * Workers, in some cases it can be helpful to disable by setting to `false`.\n     * @default true\n     */\n    preferWorkers: boolean;\n    /**\n     * When set to `true`, loading and decoding images will happen with `createImageBitmap`,\n     * otherwise it will use `new Image()`.\n     * @default true\n     */\n    preferCreateImageBitmap: boolean;\n    /**\n     * The crossOrigin value to use for images when `preferCreateImageBitmap` is `false`.\n     * @default 'anonymous'\n     */\n    crossOrigin: HTMLImageElement['crossOrigin'];\n}\n\n/**\n * Returns a promise that resolves an ImageBitmaps.\n * This function is designed to be used by a worker.\n * Part of WorkerManager!\n * @param url - The image to load an image bitmap for\n * @ignore\n */\nexport async function loadImageBitmap(url: string, asset?: ResolvedAsset<TextureSourceOptions<any>>): Promise<ImageBitmap>\n{\n    const response = await DOMAdapter.get().fetch(url);\n\n    if (!response.ok)\n    {\n        throw new Error(`[loadImageBitmap] Failed to fetch ${url}: `\n            + `${response.status} ${response.statusText}`);\n    }\n\n    const imageBlob = await response.blob();\n\n    return asset?.data?.alphaMode === 'premultiplied-alpha'\n        ? createImageBitmap(imageBlob, { premultiplyAlpha: 'none' })\n        : createImageBitmap(imageBlob);\n}\n\n/**\n * A simple plugin to load our textures!\n * This makes use of imageBitmaps where available.\n * We load the `ImageBitmap` on a different thread using workers if possible.\n * We can then use the `ImageBitmap` as a source for a Pixi texture\n *\n * You can customize the behavior of this loader by setting the `config` property.\n * Which can be found [here]{@link assets.LoadTextureConfig}\n * ```js\n * // Set the config\n * import { loadTextures } from 'pixi.js';\n *\n * loadTextures.config = {\n *    // If true we will use a worker to load the ImageBitmap\n *    preferWorkers: true,\n *    // If false we will use new Image() instead of createImageBitmap,\n *    // we'll also disable the use of workers as it requires createImageBitmap\n *    preferCreateImageBitmap: true,\n *    crossOrigin: 'anonymous',\n * };\n * ```\n * @memberof assets\n */\nexport const loadTextures: LoaderParser<Texture, TextureSourceOptions, LoadTextureConfig> = {\n\n    name: 'loadTextures',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        priority: LoaderParserPriority.High,\n        name: 'loadTextures',\n    },\n\n    config: {\n        preferWorkers: true,\n        preferCreateImageBitmap: true,\n        crossOrigin: 'anonymous',\n    },\n\n    test(url: string): boolean\n    {\n        return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n    },\n\n    async load(url: string, asset: ResolvedAsset<TextureSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        let src: any = null;\n\n        if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap)\n        {\n            if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported())\n            {\n                src = await WorkerManager.loadImageBitmap(url, asset);\n            }\n            else\n            {\n                src = await loadImageBitmap(url, asset);\n            }\n        }\n        else\n        {\n            src = await new Promise((resolve) =>\n            {\n                src = new Image();\n                src.crossOrigin = this.config.crossOrigin;\n\n                src.src = url;\n                if (src.complete)\n                {\n                    resolve(src);\n                }\n                else\n                {\n                    src.onload = (): void =>\n                    {\n                        resolve(src);\n                    };\n                }\n            });\n        }\n\n        const base = new ImageSource({\n            resource: src,\n            alphaMode: 'premultiply-alpha-on-upload',\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            ...asset.data,\n        });\n\n        return createTexture(base, loader, url);\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n};\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl';\nimport { checkDataUrl } from '../../../utils/checkDataUrl';\nimport { checkExtension } from '../../../utils/checkExtension';\nimport { createTexture } from './utils/createTexture';\n\nimport type { VideoSourceOptions } from '../../../../rendering/renderers/shared/texture/sources/VideoSource';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport type { ResolvedAsset } from '../../../types';\nimport type { Loader } from '../../Loader';\nimport type { LoaderParser } from '../LoaderParser';\n\nconst validVideoExtensions = ['.mp4', '.m4v', '.webm', '.ogg', '.ogv', '.h264', '.avi', '.mov'];\nconst validVideoMIMEs = validVideoExtensions.map((ext) => `video/${ext.substring(1)}`);\n\n/**\n * Set cross origin based detecting the url and the crossorigin\n * @param element - Element to apply crossOrigin\n * @param url - URL to check\n * @param crossorigin - Cross origin value to use\n * @memberof assets\n */\nexport function crossOrigin(element: HTMLImageElement | HTMLVideoElement, url: string, crossorigin?: boolean | string): void\n{\n    if (crossorigin === undefined && !url.startsWith('data:'))\n    {\n        element.crossOrigin = determineCrossOrigin(url);\n    }\n    else if (crossorigin !== false)\n    {\n        element.crossOrigin = typeof crossorigin === 'string' ? crossorigin : 'anonymous';\n    }\n}\n\n/**\n * Preload a video element\n * @param element - Video element to preload\n */\nexport function preloadVideo(element: HTMLVideoElement): Promise<void>\n{\n    return new Promise((resolve, reject) =>\n    {\n        element.addEventListener('canplaythrough', loaded);\n        element.addEventListener('error', error);\n\n        element.load();\n\n        function loaded(): void\n        {\n            cleanup();\n            resolve();\n        }\n\n        function error(err: ErrorEvent): void\n        {\n            cleanup();\n            reject(err);\n        }\n\n        function cleanup(): void\n        {\n            element.removeEventListener('canplaythrough', loaded);\n            element.removeEventListener('error', error);\n        }\n    });\n}\n\n/**\n * Sets the `crossOrigin` property for this resource based on if the url\n * for this resource is cross-origin. If crossOrigin was manually set, this\n * function does nothing.\n * Nipped from the resource loader!\n * @ignore\n * @param url - The url to test.\n * @param {object} [loc=window.location] - The location object to test against.\n * @returns The crossOrigin value to use (or empty string for none).\n * @memberof assets\n */\nexport function determineCrossOrigin(url: string, loc: Location = globalThis.location): string\n{\n    // data: and javascript: urls are considered same-origin\n    if (url.startsWith('data:'))\n    {\n        return '';\n    }\n\n    // default is window.location\n    loc = loc || globalThis.location;\n\n    const parsedUrl = new URL(url, document.baseURI);\n\n    // if cross origin\n    if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol)\n    {\n        return 'anonymous';\n    }\n\n    return '';\n}\n\n/**\n * A simple plugin to load video textures.\n *\n * You can pass VideoSource options to the loader via the .data property of the asset descriptor\n * when using Asset.load().\n * ```js\n * // Set the data\n * const texture = await Assets.load({\n *     src: './assets/city.mp4',\n *     data: {\n *         preload: true,\n *         autoPlay: true,\n *     },\n * });\n * ```\n * @memberof assets\n */\nexport const loadVideoTextures = {\n\n    name: 'loadVideo',\n\n    extension: {\n        type: ExtensionType.LoadParser,\n        name: 'loadVideo',\n    },\n\n    test(url: string): boolean\n    {\n        const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n        const isValidExtension = checkExtension(url, validVideoExtensions);\n\n        return isValidDataUrl || isValidExtension;\n    },\n\n    async load(url: string, asset: ResolvedAsset<VideoSourceOptions>, loader: Loader): Promise<Texture>\n    {\n        // --- Merge default and provided options ---\n        const options: VideoSourceOptions = {\n            ...VideoSource.defaultOptions,\n            resolution: asset.data?.resolution || getResolutionOfUrl(url),\n            alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n            ...asset.data,\n        };\n\n        // --- Create and configure HTMLVideoElement ---\n        const videoElement = document.createElement('video');\n\n        // Set attributes based on options\n        const attributeMap = {\n            preload: options.autoLoad !== false ? 'auto' : undefined,\n            'webkit-playsinline': options.playsinline !== false ? '' : undefined,\n            playsinline: options.playsinline !== false ? '' : undefined,\n            muted: options.muted === true ? '' : undefined,\n            loop: options.loop === true ? '' : undefined,\n            autoplay: options.autoPlay !== false ? '' : undefined\n        };\n\n        Object.keys(attributeMap).forEach((key) =>\n        {\n            const value = attributeMap[key as keyof typeof attributeMap];\n\n            if (value !== undefined) videoElement.setAttribute(key, value);\n        });\n\n        if (options.muted === true)\n        {\n            videoElement.muted = true;\n        }\n\n        crossOrigin(videoElement, url, options.crossorigin); // Assume crossOrigin is globally available\n\n        // --- Set up source and MIME type ---\n        const sourceElement = document.createElement('source');\n\n        // Determine MIME type\n        let mime: string | undefined;\n\n        if (url.startsWith('data:'))\n        {\n            mime = url.slice(5, url.indexOf(';'));\n        }\n        else if (!url.startsWith('blob:'))\n        {\n            const ext = url.split('?')[0].slice(url.lastIndexOf('.') + 1).toLowerCase();\n\n            mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n        }\n\n        sourceElement.src = url;\n\n        if (mime)\n        {\n            sourceElement.type = mime;\n        }\n\n        // this promise will make sure that video is ready to play - as in we have a valid width, height and it can be\n        // uploaded to the GPU. Our textures are kind of dumb now, and don't want to handle resizing right now.\n        return new Promise((resolve) =>\n        {\n            const onCanPlay = async () =>\n            {\n                const base = new VideoSource({ ...options, resource: videoElement });\n\n                videoElement.removeEventListener('canplay', onCanPlay);\n\n                if (asset.data.preload)\n                {\n                    await preloadVideo(videoElement);\n                }\n\n                resolve(createTexture(base, loader, url));\n            };\n\n            videoElement.addEventListener('canplay', onCanPlay);\n            videoElement.appendChild(sourceElement);\n        });\n    },\n\n    unload(texture: Texture): void\n    {\n        texture.destroy(true);\n    }\n} satisfies LoaderParser<Texture, VideoSourceOptions>;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures';\nimport { Resolver } from '../Resolver';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a texture url\n * @memberof assets\n */\nexport const resolveTextureUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        name: 'resolveTexture',\n    },\n    test: loadTextures.test,\n    parse: (value: string) =>\n        ({\n            resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n            format: value.split('.').pop(),\n            src: value,\n        }),\n} satisfies ResolveURLParser;\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Resolver } from '../Resolver';\nimport { resolveTextureUrl } from './resolveTextureUrl';\n\nimport type { ResolveURLParser } from '../types';\n\n/**\n * A parser that will resolve a json urls resolution for spritesheets\n * e.g. `assets/spritesheet@1x.json`\n * @memberof assets\n */\nexport const resolveJsonUrl = {\n    extension: {\n        type: ExtensionType.ResolveParser,\n        priority: -2,\n        name: 'resolveJson',\n    },\n    test: (value: string): boolean =>\n        Resolver.RETINA_PREFIX.test(value) && value.endsWith('.json'),\n    parse: resolveTextureUrl.parse,\n} satisfies ResolveURLParser;\n","/* eslint-disable max-len */\nimport { extensions, ExtensionType } from '../extensions/Extensions';\nimport { bitmapFontCachePlugin, loadBitmapFont } from '../scene/text-bitmap/asset/loadBitmapFont';\nimport { warn } from '../utils/logging/warn';\nimport { BackgroundLoader } from './BackgroundLoader';\nimport { Cache } from './cache/Cache';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray';\nimport { detectAvif } from './detections/parsers/detectAvif';\nimport { detectDefaults } from './detections/parsers/detectDefaults';\nimport { detectMp4 } from './detections/parsers/detectMp4';\nimport { detectOgv } from './detections/parsers/detectOgv';\nimport { detectWebm } from './detections/parsers/detectWebm';\nimport { detectWebp } from './detections/parsers/detectWebp';\nimport { Loader } from './loader/Loader';\nimport { loadJson } from './loader/parsers/loadJson';\nimport { loadTxt } from './loader/parsers/loadTxt';\nimport { loadWebFont } from './loader/parsers/loadWebFont';\nimport { loadSvg } from './loader/parsers/textures/loadSVG';\nimport { type LoadTextureConfig, loadTextures } from './loader/parsers/textures/loadTextures';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl';\nimport { Resolver } from './resolver/Resolver';\nimport { convertToList } from './utils/convertToList';\nimport { isSingleItem } from './utils/isSingleItem';\n\nimport type { AssetExtension } from './AssetExtension';\nimport type { FormatDetectionParser } from './detections/types';\nimport type { LoadSVGConfig } from './loader/parsers/textures/loadSVG';\nimport type { BundleIdentifierOptions } from './resolver/Resolver';\nimport type { ArrayOr, AssetsBundle, AssetsManifest, ResolvedAsset, UnresolvedAsset } from './types';\n\n/**\n * Callback for when progress on asset loading is made.\n * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n * of the assets loaded.\n * @memberof assets\n * @callback ProgressCallback\n * @param {number} progress - The percentage (0.0 - 1.0) of the assets loaded.\n * @returns {void}\n * @example\n * (progress) => console.log(progress * 100 + '%')\n */\nexport type ProgressCallback = (progress: number) => void;\n\n/**\n * Extensible preferences that can be used, for instance, when configuring loaders.\n * @since 7.2.0\n * @memberof assets\n */\nexport interface AssetsPreferences extends LoadTextureConfig, LoadSVGConfig, PixiMixins.AssetsPreferences {}\n\n/**\n * Initialization options object for the Assets Class.\n * @memberof assets\n */\nexport interface AssetInitOptions\n{\n    // basic...\n    /** a base path for any assets loaded */\n    basePath?: string;\n\n    /** a default URL parameter string to append to all assets loaded */\n    defaultSearchParams?: string | Record<string, any>;\n\n    /**\n     * a manifest to tell the asset loader upfront what all your assets are\n     * this can be the manifest object itself, or a URL to the manifest.\n     */\n    manifest?: string | AssetsManifest;\n    /**\n     * optional preferences for which textures preferences you have when resolving assets\n     * for example you might set the resolution to 0.5 if the user is on a rubbish old phone\n     * or you might set the resolution to 2 if the user is on a retina display\n     */\n    texturePreference?: {\n        /** the resolution order you prefer, can be an array (priority order - first is preferred) or a single resolutions  */\n        resolution?: number | number[];\n        /**\n         * the formats you prefer, by default this will be:\n         * ['avif', 'webp', 'png', 'jpg', 'jpeg', 'webm', 'mp4', 'm4v', 'ogv']\n         */\n        format?: ArrayOr<string>;\n    };\n\n    /**\n     * If true, don't attempt to detect whether browser has preferred formats available.\n     * May result in increased performance as it skips detection step.\n     */\n    skipDetections?: boolean;\n\n    /** advanced - override how bundlesIds are generated */\n    bundleIdentifier?: BundleIdentifierOptions;\n\n    /** Optional loader preferences */\n    preferences?: Partial<AssetsPreferences>;\n}\n\n/**\n * A one stop shop for all Pixi resource management!\n * Super modern and easy to use, with enough flexibility to customize and do what you need!\n * @namespace assets\n *\n * Use the singleton class [Assets]{@link assets.Assets} to easily load and manage all your assets.\n *\n * ```typescript\n * import { Assets, Texture } from 'pixi.js';\n *\n * const bunnyTexture = await Assets.load<Texture>('bunny.png');\n * const sprite = new Sprite(bunnyTexture);\n * ```\n *\n * Check out the sections below for more information on how to deal with assets.\n *\n * <details id=\"assets-loading\">\n *\n * <summary>Asset Loading</summary>\n *\n * Do not be afraid to load things multiple times - under the hood, it will **NEVER** load anything more than once.\n *\n * *For example:*\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * promise1 = Assets.load('bunny.png')\n * promise2 = Assets.load('bunny.png')\n *\n * // promise1 === promise2\n * ```\n *\n * Here both promises will be the same. Once resolved... Forever resolved! It makes for really easy resource management!\n *\n * Out of the box Pixi supports the following files:\n * - Textures (**_avif_**, **_webp_**, **_png_**, **_jpg_**, **_gif_**, **_svg_**) via {@link assets.loadTextures}, {@link assets.loadSvg}\n * - Video Textures (**_mp4_**, **_m4v_**, **_webm_**, **_ogg_**, **_ogv_**, **_h264_**, **_avi_**, **_mov_**) via {@link assets.loadVideoTextures}\n * - Sprite sheets (**_json_**) via {@link assets.spritesheetAsset}\n * - Bitmap fonts (**_xml_**, **_fnt_**, **_txt_**) via {@link assets.loadBitmapFont}\n * - Web fonts (**_ttf_**, **_woff_**, **_woff2_**) via {@link assets.loadWebFont}\n * - JSON files (**_json_**) via {@link assets.loadJson}\n * - Text Files (**_txt_**) via {@link assets.loadTxt}\n * <br/>\n * More types can be added fairly easily by creating additional {@link assets.LoaderParser LoaderParsers}.\n * </details>\n *\n * <details id=\"textures\">\n *\n * <summary>Textures</summary>\n *\n * - Textures are loaded as ImageBitmap on a worker thread where possible. Leading to much less janky load + parse times.\n * - By default, we will prefer to load AVIF and WebP image files if you specify them.\n * But if the browser doesn't support AVIF or WebP we will fall back to png and jpg.\n * - Textures can also be accessed via `Texture.from()` (see {@link core.from|Texture.from})\n * and now use this asset manager under the hood!\n * - Don't worry if you set preferences for textures that don't exist\n * (for example you prefer 2x resolutions images but only 1x is available for that texture,\n * the Assets manager will pick that up as a fallback automatically)\n *\n * #### Sprite sheets\n * - It's hard to know what resolution a sprite sheet is without loading it first, to address this\n * there is a naming convention we have added that will let Pixi understand the image format and resolution\n * of the spritesheet via its file name: `my-spritesheet{resolution}.{imageFormat}.json`\n * <br><br>For example:\n *   - `my-spritesheet@2x.webp.json`* // 2x resolution, WebP sprite sheet*\n *   - `my-spritesheet@0.5x.png.json`* // 0.5x resolution, png sprite sheet*\n * - This is optional! You can just load a sprite sheet as normal.\n * This is only useful if you have a bunch of different res / formatted spritesheets.\n * </details>\n *\n * <details id=\"fonts\">\n *\n * <summary>Fonts</summary>\n *\n * Web fonts will be loaded with all weights.\n * It is possible to load only specific weights by doing the following:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Load specific weights..\n * await Assets.load({\n *     data: {\n *         weights: ['normal'], // Only loads the weight\n *     },\n *     src: `outfit.woff2`,\n * });\n *\n * // Load everything...\n * await Assets.load(`outfit.woff2`);\n * ```\n * </details>\n *\n * <details id=\"background-loading\">\n *\n * <summary>Background Loading</summary>\n *\n * Background loading will load stuff for you passively behind the scenes. To minimize jank,\n * it will only load one asset at a time. As soon as a developer calls `Assets.load(...)` the\n * background loader is paused and requested assets are loaded as a priority.\n * Don't worry if something is in there that's already loaded, it will just get skipped!\n *\n * You still need to call `Assets.load(...)` to get an asset that has been loaded in the background.\n * It's just that this promise will resolve instantly if the asset\n * has already been loaded.\n * </details>\n *\n * <details id=\"manifests-and-bundles\">\n *\n * <summary>Manifest and Bundles</summary>\n *\n * - {@link assets.AssetsManifest Manifest} is a descriptor that contains a list of all assets and their properties.\n * - {@link assets.AssetsBundle Bundles} are a way to group assets together.\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * // Manifest Example\n * const manifest = {\n *     bundles: [\n *         {\n *             name: 'load-screen',\n *             assets: [\n *                 {\n *                     alias: 'background',\n *                     src: 'sunset.png',\n *                 },\n *                 {\n *                     alias: 'bar',\n *                     src: 'load-bar.{png,webp}',\n *                 },\n *             ],\n *         },\n *         {\n *             name: 'game-screen',\n *             assets: [\n *                 {\n *                     alias: 'character',\n *                     src: 'robot.png',\n *                 },\n *                 {\n *                     alias: 'enemy',\n *                     src: 'bad-guy.png',\n *                 },\n *             ],\n *         },\n *     ]\n * };\n *\n * await Assets.init({ manifest });\n *\n * // Load a bundle...\n * loadScreenAssets = await Assets.loadBundle('load-screen');\n * // Load another bundle...\n * gameScreenAssets = await Assets.loadBundle('game-screen');\n * ```\n * </details>\n */\n\n/**\n * The global Assets class, it's a singleton so you don't need to instantiate it.\n *\n * **The `Assets` class has four main responsibilities:**\n * 1. Allows users to map URLs to keys and resolve them according to the user's browser capabilities\n * 2. Loads the resources and transforms them into assets that developers understand.\n * 3. Caches the assets and provides a way to access them.\n * 4. Allow developers to unload assets and clear the cache.\n *\n *\n * **It also has a few advanced features:**\n * 1. Allows developers to provide a {@link assets.Manifest} upfront of all assets and help manage\n * them via {@link assets.AssetsBundles Bundles}.\n * 2. Allows users to background load assets. Shortening (or eliminating) load times and improving UX. With this feature,\n * in-game loading bars can be a thing of the past!\n * @example\n * import { Assets } from 'pixi.js';\n *\n * const bunny = await Assets.load('bunny.png');\n * @memberof assets\n * @class Assets\n */\nexport class AssetsClass\n{\n    /** the resolver to map various urls */\n    public resolver: Resolver;\n    /** The loader, loads stuff! */\n    public loader: Loader;\n    /**\n     * The global cache of all assets within PixiJS\n     * @type {assets.Cache}\n     */\n    public cache: typeof Cache;\n\n    /** takes care of loading assets in the background */\n    private readonly _backgroundLoader: BackgroundLoader;\n\n    private readonly _detections: FormatDetectionParser[] = [];\n\n    private _initialized = false;\n\n    constructor()\n    {\n        this.resolver = new Resolver();\n        this.loader = new Loader();\n        this.cache = Cache;\n\n        this._backgroundLoader = new BackgroundLoader(this.loader);\n        this._backgroundLoader.active = true;\n\n        this.reset();\n    }\n\n    /**\n     * Best practice is to call this function before any loading commences\n     * Initiating is the best time to add any customization to the way things are loaded.\n     *\n     * you do not need to call this for the Assets class to work, only if you want to set any initial properties\n     * @param options - options to initialize the Assets manager with\n     */\n    public async init(options: AssetInitOptions = {}): Promise<void>\n    {\n        if (this._initialized)\n        {\n            // #if _DEBUG\n            warn('[Assets]AssetManager already initialized, did you load before calling this Assets.init()?');\n            // #endif\n\n            return;\n        }\n\n        this._initialized = true;\n\n        if (options.defaultSearchParams)\n        {\n            this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n        }\n\n        if (options.basePath)\n        {\n            this.resolver.basePath = options.basePath;\n        }\n\n        if (options.bundleIdentifier)\n        {\n            this.resolver.setBundleIdentifier(options.bundleIdentifier);\n        }\n\n        if (options.manifest)\n        {\n            let manifest = options.manifest;\n\n            if (typeof manifest === 'string')\n            {\n                manifest = await this.load<AssetsManifest>(manifest);\n            }\n\n            this.resolver.addManifest(manifest);\n        }\n\n        const resolutionPref = options.texturePreference?.resolution ?? 1;\n        const resolution = (typeof resolutionPref === 'number') ? [resolutionPref] : resolutionPref;\n\n        const formats = await this._detectFormats({\n            preferredFormats: options.texturePreference?.format,\n            skipDetections: options.skipDetections,\n            detections: this._detections\n        });\n\n        this.resolver.prefer({\n            params: {\n                format: formats,\n                resolution,\n            },\n        });\n\n        if (options.preferences)\n        {\n            this.setPreferences(options.preferences);\n        }\n    }\n\n    /**\n     * Allows you to specify how to resolve any assets load requests.\n     * There are a few ways to add things here as shown below:\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Simple\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny.png'});\n     * const bunny = await Assets.load('bunnyBooBoo');\n     *\n     * // Multiple keys:\n     * Assets.add({alias: ['burger', 'chicken'], src: 'bunny.png'});\n     *\n     * const bunny = await Assets.load('burger');\n     * const bunny2 = await Assets.load('chicken');\n     *\n     * // passing options to to the object\n     * Assets.add({\n     *     alias: 'bunnyBooBooSmooth',\n     *     src: 'bunny{png,webp}',\n     *     data: { scaleMode: SCALE_MODES.NEAREST }, // Base texture options\n     * });\n     *\n     * // Multiple assets\n     *\n     * // The following all do the same thing:\n     *\n     * Assets.add({alias: 'bunnyBooBoo', src: 'bunny{png,webp}'});\n     *\n     * Assets.add({\n     *     alias: 'bunnyBooBoo',\n     *     src: [\n     *         'bunny.png',\n     *         'bunny.webp',\n     *    ],\n     * });\n     *\n     * const bunny = await Assets.load('bunnyBooBoo'); // Will try to load WebP if available\n     * @param assets - the unresolved assets to add to the resolver\n     */\n    public add(assets: (ArrayOr<UnresolvedAsset>)): void\n    {\n        this.resolver.add(assets);\n    }\n\n    /**\n     * Loads your assets! You pass in a key or URL and it will return a promise that\n     * resolves to the loaded asset. If multiple assets a requested, it will return a hash of assets.\n     *\n     * Don't worry about loading things multiple times, behind the scenes assets are only ever loaded\n     * once and the same promise reused behind the scenes so you can safely call this function multiple\n     * times with the same key and it will always return the same asset.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * Assets.add('thumper', 'bunny.png');\n     * Assets.add('chicko', 'chicken.png');\n     *\n     * // Load multiple assets:\n     * const textures = await Assets.load(['thumper', 'chicko']); // => {thumper: Texture, chicko: Texture}\n     * @param urls - the urls to load\n     * @param onProgress - optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage\n     * (0.0 - 1.0) of the assets loaded.\n     * @returns - the assets that were loaded, either a single asset or a hash of assets\n     */\n    public async load<T = any>(\n        urls: string | UnresolvedAsset,\n        onProgress?: ProgressCallback,\n    ): Promise<T>;\n    public async load<T = any>(\n        urls: string[] | UnresolvedAsset[],\n        onProgress?: ProgressCallback,\n    ): Promise<Record<string, T>>;\n    public async load<T = any>(\n        urls: ArrayOr<string> | ArrayOr<UnresolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<T | Record<string, T>>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const singleAsset = isSingleItem(urls);\n\n        const urlArray: string[] = convertToList<UnresolvedAsset | string>(urls)\n            .map((url) =>\n            {\n                if (typeof url !== 'string')\n                {\n                    const aliases = this.resolver.getAlias(url);\n\n                    if (aliases.some((alias) => !this.resolver.hasKey(alias)))\n                    {\n                        this.add(url);\n                    }\n\n                    return Array.isArray(aliases) ? aliases[0] : aliases;\n                }\n\n                // if it hasn't been added, add it now\n                if (!this.resolver.hasKey(url)) this.add({ alias: url, src: url });\n\n                return url;\n            }) as string[];\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        // remap to the keys used..\n        const out: Record<string, T> = await this._mapLoadToResolve<T>(resolveResults, onProgress);\n\n        return singleAsset ? out[urlArray[0] as string] : out;\n    }\n\n    /**\n     * This adds a bundle of assets in one go so that you can load them as a group.\n     * For example you could add a bundle for each screen in you pixi app\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle('animals', [\n     *  { alias: 'bunny', src: 'bunny.png' },\n     *  { alias: 'chicken', src: 'chicken.png' },\n     *  { alias: 'thumper', src: 'thumper.png' },\n     * ]);\n     * // or\n     * Assets.addBundle('animals', {\n     *     bunny: 'bunny.png',\n     *     chicken: 'chicken.png',\n     *     thumper: 'thumper.png',\n     * });\n     *\n     * const assets = await Assets.loadBundle('animals');\n     * @param bundleId - the id of the bundle to add\n     * @param assets - a record of the asset or assets that will be chosen from when loading via the specified key\n     */\n    public addBundle(bundleId: string, assets: AssetsBundle['assets']): void\n    {\n        this.resolver.addBundle(bundleId, assets);\n    }\n\n    /**\n     * Bundles are a way to load multiple assets at once.\n     * If a manifest has been provided to the init function then you can load a bundle, or bundles.\n     * you can also add bundles via `addBundle`\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Manifest Example\n     * const manifest = {\n     *     bundles: [\n     *         {\n     *             name: 'load-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'background',\n     *                     src: 'sunset.png',\n     *                 },\n     *                 {\n     *                     alias: 'bar',\n     *                     src: 'load-bar.{png,webp}',\n     *                 },\n     *             ],\n     *         },\n     *         {\n     *             name: 'game-screen',\n     *             assets: [\n     *                 {\n     *                     alias: 'character',\n     *                     src: 'robot.png',\n     *                 },\n     *                 {\n     *                     alias: 'enemy',\n     *                     src: 'bad-guy.png',\n     *                 },\n     *             ],\n     *         },\n     *     ]\n     * };\n     *\n     * await Assets.init({ manifest });\n     *\n     * // Load a bundle...\n     * loadScreenAssets = await Assets.loadBundle('load-screen');\n     * // Load another bundle...\n     * gameScreenAssets = await Assets.loadBundle('game-screen');\n     * @param bundleIds - the bundle id or ids to load\n     * @param onProgress - Optional function that is called when progress on asset loading is made.\n     * The function is passed a single parameter, `progress`, which represents the percentage (0.0 - 1.0)\n     * of the assets loaded. Do not use this function to detect when assets are complete and available,\n     * instead use the Promise returned by this function.\n     * @returns all the bundles assets or a hash of assets for each bundle specified\n     */\n    public async loadBundle(bundleIds: ArrayOr<string>, onProgress?: ProgressCallback): Promise<any>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        let singleAsset = false;\n\n        if (typeof bundleIds === 'string')\n        {\n            singleAsset = true;\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const out: Record<string, Record<string, any>> = {};\n\n        const keys = Object.keys(resolveResults);\n        let count = 0;\n        let total = 0;\n        const _onProgress = () =>\n        {\n            onProgress?.(++count / total);\n        };\n        const promises = keys.map((bundleId) =>\n        {\n            const resolveResult = resolveResults[bundleId];\n\n            total += Object.keys(resolveResult).length;\n\n            return this._mapLoadToResolve(resolveResult, _onProgress)\n                .then((resolveResult) =>\n                {\n                    out[bundleId] = resolveResult;\n                });\n        });\n\n        await Promise.all(promises);\n\n        return singleAsset ? out[bundleIds[0]] : out;\n    }\n\n    /**\n     * Initiate a background load of some assets. It will passively begin to load these assets in the background.\n     * So when you actually come to loading them you will get a promise that resolves to the loaded assets immediately\n     *\n     * An example of this might be that you would background load game assets after your initial load.\n     * then when you got to actually load your game screen assets when a player goes to the game - the loading\n     * would already have stared or may even be complete, saving you having to show an interim load bar.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.backgroundLoad('bunny.png');\n     *\n     * // later on in your app...\n     * await Assets.loadBundle('bunny.png'); // Will resolve quicker as loading may have completed!\n     * @param urls - the url / urls you want to background load\n     */\n    public async backgroundLoad(urls: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof urls === 'string')\n        {\n            urls = [urls];\n        }\n\n        const resolveResults = this.resolver.resolve(urls);\n\n        this._backgroundLoader.add(Object.values(resolveResults));\n    }\n\n    /**\n     * Initiate a background of a bundle, works exactly like backgroundLoad but for bundles.\n     * this can only be used if the loader has been initiated with a manifest\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * await Assets.init({\n     *     manifest: {\n     *         bundles: [\n     *             {\n     *                 name: 'load-screen',\n     *                 assets: [...],\n     *             },\n     *             ...\n     *         ],\n     *     },\n     * });\n     *\n     * Assets.backgroundLoadBundle('load-screen');\n     *\n     * // Later on in your app...\n     * await Assets.loadBundle('load-screen'); // Will resolve quicker as loading may have completed!\n     * @param bundleIds - the bundleId / bundleIds you want to background load\n     */\n    public async backgroundLoadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        if (typeof bundleIds === 'string')\n        {\n            bundleIds = [bundleIds];\n        }\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        Object.values(resolveResults).forEach((resolveResult) =>\n        {\n            this._backgroundLoader.add(Object.values(resolveResult));\n        });\n    }\n\n    /**\n     * Only intended for development purposes.\n     * This will wipe the resolver and caches.\n     * You will need to reinitialize the Asset\n     */\n    public reset(): void\n    {\n        this.resolver.reset();\n        this.loader.reset();\n        this.cache.reset();\n\n        this._initialized = false;\n    }\n\n    /**\n     * Instantly gets an asset already loaded from the cache. If the asset has not yet been loaded,\n     * it will return undefined. So it's on you! When in doubt just use `Assets.load` instead.\n     * (Remember, the loader will never load things more than once!)\n     * @param keys - The key or keys for the assets that you want to access\n     * @returns - The assets or hash of assets requested\n     */\n    public get<T = any>(keys: string): T;\n    public get<T = any>(keys: string[]): Record<string, T>;\n    public get<T = any>(keys: ArrayOr<string>): T | Record<string, T>\n    {\n        if (typeof keys === 'string')\n        {\n            return Cache.get(keys);\n        }\n\n        const assets: Record<string, T> = {};\n\n        for (let i = 0; i < keys.length; i++)\n        {\n            assets[i] = Cache.get(keys[i]);\n        }\n\n        return assets;\n    }\n\n    /**\n     * helper function to map resolved assets back to loaded assets\n     * @param resolveResults - the resolve results from the resolver\n     * @param onProgress - the progress callback\n     */\n    private async _mapLoadToResolve<T>(\n        resolveResults: ResolvedAsset | Record<string, ResolvedAsset>,\n        onProgress?: ProgressCallback\n    ): Promise<Record<string, T>>\n    {\n        const resolveArray = [...new Set(Object.values(resolveResults))] as ResolvedAsset[];\n\n        // pause background loader...\n        this._backgroundLoader.active = false;\n\n        const loadedAssets = await this.loader.load<T>(resolveArray, onProgress);\n\n        // resume background loader...\n        this._backgroundLoader.active = true;\n\n        // remap to the keys used..\n\n        const out: Record<string, T> = {};\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            const asset = loadedAssets[resolveResult.src];\n\n            const keys = [resolveResult.src];\n\n            if (resolveResult.alias)\n            {\n                keys.push(...resolveResult.alias);\n            }\n\n            keys.forEach((key) =>\n            {\n                out[key] = asset;\n            });\n\n            Cache.set(keys, asset);\n        });\n\n        return out;\n    }\n\n    /**\n     * Unload an asset or assets. As the Assets class is responsible for creating the assets via the `load` function\n     * this will make sure to destroy any assets and release them from memory.\n     * Once unloaded, you will need to load the asset again.\n     *\n     * Use this to help manage assets if you find that you have a large app and you want to free up memory.\n     *\n     * - it's up to you as the developer to make sure that textures are not actively being used when you unload them,\n     * Pixi won't break but you will end up with missing assets. Not a good look for the user!\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * // Load a URL:\n     * const myImageTexture = await Assets.load('http://some.url.com/image.png'); // => returns a texture\n     *\n     * await Assets.unload('http://some.url.com/image.png')\n     *\n     * // myImageTexture will be destroyed now.\n     *\n     * // Unload multiple assets:\n     * const textures = await Assets.unload(['thumper', 'chicko']);\n     * @param urls - the urls to unload\n     */\n    public async unload(\n        urls: ArrayOr<string> | ResolvedAsset | ResolvedAsset[]\n    ): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        const urlArray = convertToList<string | ResolvedAsset>(urls)\n            .map((url) =>\n                ((typeof url !== 'string') ? url.src : url));\n\n        // check cache first...\n        const resolveResults = this.resolver.resolve(urlArray);\n\n        await this._unloadFromResolved(resolveResults);\n    }\n\n    /**\n     * Bundles are a way to manage multiple assets at once.\n     * this will unload all files in a bundle.\n     *\n     * once a bundle has been unloaded, you need to load it again to have access to the assets.\n     * @example\n     * import { Assets } from 'pixi.js';\n     *\n     * Assets.addBundle({\n     *     'thumper': 'http://some.url.com/thumper.png',\n     * })\n     *\n     * const assets = await Assets.loadBundle('thumper');\n     *\n     * // Now to unload...\n     *\n     * await Assets.unloadBundle('thumper');\n     *\n     * // All assets in the assets object will now have been destroyed and purged from the cache\n     * @param bundleIds - the bundle id or ids to unload\n     */\n    public async unloadBundle(bundleIds: ArrayOr<string>): Promise<void>\n    {\n        if (!this._initialized)\n        {\n            await this.init();\n        }\n\n        bundleIds = convertToList<string>(bundleIds);\n\n        const resolveResults = this.resolver.resolveBundle(bundleIds);\n\n        const promises = Object.keys(resolveResults).map((bundleId) =>\n            this._unloadFromResolved(resolveResults[bundleId]));\n\n        await Promise.all(promises);\n    }\n\n    private async _unloadFromResolved(resolveResult: ResolvedAsset | Record<string, ResolvedAsset>)\n    {\n        const resolveArray = Object.values(resolveResult);\n\n        resolveArray.forEach((resolveResult) =>\n        {\n            Cache.remove(resolveResult.src);\n        });\n\n        await this.loader.unload(resolveArray);\n    }\n\n    /**\n     * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n     * the users preferred formats order.\n     * @param options - the options to use when detecting formats\n     * @param options.preferredFormats - the preferred formats to use\n     * @param options.skipDetections - if we should skip the detections altogether\n     * @param options.detections - the detections to use\n     * @returns - the detected formats\n     */\n    private async _detectFormats(options: {\n        preferredFormats: string | string[],\n        skipDetections: boolean,\n        detections: FormatDetectionParser[]\n    }): Promise<string[]>\n    {\n        let formats: string[] = [];\n\n        // set preferred formats\n        if (options.preferredFormats)\n        {\n            formats = Array.isArray(options.preferredFormats)\n                ? options.preferredFormats : [options.preferredFormats];\n        }\n\n        // we should add any formats that are supported by the browser\n        for (const detection of options.detections)\n        {\n            if (options.skipDetections || await detection.test())\n            {\n                formats = await detection.add(formats);\n            }\n            else if (!options.skipDetections)\n            {\n                formats = await detection.remove(formats);\n            }\n        }\n\n        // remove any duplicates\n        formats = formats.filter((format, index) => formats.indexOf(format) === index);\n\n        return formats;\n    }\n\n    /** All the detection parsers currently added to the Assets class. */\n    public get detections(): FormatDetectionParser[]\n    {\n        return this._detections;\n    }\n\n    /**\n     * General setter for preferences. This is a helper function to set preferences on all parsers.\n     * @param preferences - the preferences to set\n     */\n    public setPreferences(preferences: Partial<AssetsPreferences>): void\n    {\n        // Find matching config keys in loaders with preferences\n        // and set the values\n        this.loader.parsers.forEach((parser) =>\n        {\n            if (!parser.config) return;\n\n            (Object.keys(parser.config) as (keyof AssetsPreferences)[])\n                .filter((key) => key in preferences)\n                .forEach((key) =>\n                {\n                    parser.config[key] = preferences[key];\n                });\n        });\n    }\n}\n\nexport const Assets = new AssetsClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.LoadParser, Assets.loader.parsers)\n    .handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers)\n    .handleByList(ExtensionType.CacheParser, Assets.cache.parsers)\n    .handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n    cacheTextureArray,\n\n    detectDefaults,\n    detectAvif,\n    detectWebp,\n    detectMp4,\n    detectOgv,\n    detectWebm,\n\n    loadJson,\n    loadTxt,\n    loadWebFont,\n    loadSvg,\n    loadTextures,\n    loadVideoTextures,\n    loadBitmapFont,\n\n    bitmapFontCachePlugin,\n\n    resolveTextureUrl,\n    resolveJsonUrl\n);\n\nconst assetKeyMap = {\n    loader: ExtensionType.LoadParser,\n    resolver: ExtensionType.ResolveParser,\n    cache: ExtensionType.CacheParser,\n    detection: ExtensionType.DetectionParser,\n};\n\ntype AssetType = keyof typeof assetKeyMap;\n\n// Split the Asset extension into it's various parts\n// these are handled in the Assets.ts file\nextensions.handle(ExtensionType.Asset, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.entries(assetKeyMap)\n        .filter(([key]) => !!ref[key as AssetType])\n        .forEach(([key, type]) => extensions.add(Object.assign(\n            ref[key as AssetType],\n            // Allow the function to optionally define it's own\n            // ExtensionMetadata, the use cases here is priority for LoaderParsers\n            { extension: ref[key as AssetType].extension ?? type },\n        )));\n}, (extension) =>\n{\n    const ref = extension.ref as AssetExtension;\n\n    Object.keys(assetKeyMap)\n        .filter((key) => !!ref[key as AssetType])\n        .forEach((key) => extensions.remove(ref[key as AssetType]));\n});\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck - we dynamically create the other index files, so these will throw errors if we don't ignore them\n\nimport { browserExt } from './environment-browser/browserExt';\nimport { webworkerExt } from './environment-webworker/webworkerExt';\nimport { extensions } from './extensions/Extensions';\nimport './rendering/init';\nimport './spritesheet/init';\n\nexport * from './accessibility';\nexport * from './advanced-blend-modes';\nexport * from './app';\nexport * from './assets';\nexport * from './color';\nexport * from './compressed-textures';\nexport * from './culling';\nexport * from './environment';\nexport * from './environment-browser';\nexport * from './environment-webworker';\nexport * from './events';\nexport * from './extensions';\nexport * from './filters';\nexport * from './maths';\nexport * from './prepare';\nexport * from './rendering';\nexport * from './scene';\nexport * from './spritesheet';\nexport * from './ticker';\nexport * from './utils';\n\nextensions.add(browserExt, webworkerExt);\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport { PI_2 } from '../misc/const';\nimport { Point } from '../point/Point';\n\nimport type { PointData } from '../point/PointData';\n\ninterface TransformableObject\n{\n    position: PointData;\n    scale: PointData;\n    pivot: PointData;\n    skew: PointData;\n    rotation: number;\n}\n\n/**\n * A fast matrix for 2D transformations.\n * ```js\n * | a | c | tx|\n * | b | d | ty|\n * | 0 | 0 | 1 |\n * ```\n * @memberof maths\n */\nexport class Matrix\n{\n    /** @default 1 */\n    public a: number;\n\n    /** @default 0 */\n    public b: number;\n\n    /** @default 0 */\n    public c: number;\n\n    /** @default 1 */\n    public d: number;\n\n    /** @default 0 */\n    public tx: number;\n\n    /** @default 0 */\n    public ty: number;\n\n    /** An array of the current matrix. Only populated when `toArray` is called */\n    public array: Float32Array | null = null;\n\n    /**\n     * @param a - x scale\n     * @param b - y skew\n     * @param c - x skew\n     * @param d - y scale\n     * @param tx - x translation\n     * @param ty - y translation\n     */\n    constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0)\n    {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.tx = tx;\n        this.ty = ty;\n    }\n\n    /**\n     * Creates a Matrix object based on the given array. The Element to Matrix mapping order is as follows:\n     *\n     * a = array[0]\n     * b = array[1]\n     * c = array[3]\n     * d = array[4]\n     * tx = array[2]\n     * ty = array[5]\n     * @param array - The array that the matrix will be populated from.\n     */\n    public fromArray(array: number[]): void\n    {\n        this.a = array[0];\n        this.b = array[1];\n        this.c = array[3];\n        this.d = array[4];\n        this.tx = array[2];\n        this.ty = array[5];\n    }\n\n    /**\n     * Sets the matrix properties.\n     * @param a - Matrix component\n     * @param b - Matrix component\n     * @param c - Matrix component\n     * @param d - Matrix component\n     * @param tx - Matrix component\n     * @param ty - Matrix component\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public set(a: number, b: number, c: number, d: number, tx: number, ty: number): this\n    {\n        this.a = a;\n        this.b = b;\n        this.c = c;\n        this.d = d;\n        this.tx = tx;\n        this.ty = ty;\n\n        return this;\n    }\n\n    /**\n     * Creates an array from the current Matrix object.\n     * @param transpose - Whether we need to transpose the matrix or not\n     * @param [out=new Float32Array(9)] - If provided the array will be assigned to out\n     * @returns The newly created array which contains the matrix\n     */\n    public toArray(transpose?: boolean, out?: Float32Array): Float32Array\n    {\n        if (!this.array)\n        {\n            this.array = new Float32Array(9);\n        }\n\n        const array = out || this.array;\n\n        if (transpose)\n        {\n            array[0] = this.a;\n            array[1] = this.b;\n            array[2] = 0;\n            array[3] = this.c;\n            array[4] = this.d;\n            array[5] = 0;\n            array[6] = this.tx;\n            array[7] = this.ty;\n            array[8] = 1;\n        }\n        else\n        {\n            array[0] = this.a;\n            array[1] = this.c;\n            array[2] = this.tx;\n            array[3] = this.b;\n            array[4] = this.d;\n            array[5] = this.ty;\n            array[6] = 0;\n            array[7] = 0;\n            array[8] = 1;\n        }\n\n        return array;\n    }\n\n    /**\n     * Get a new position with the current transformation applied.\n     * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n     * @param pos - The origin\n     * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @returns {Point} The new point, transformed through this matrix\n     */\n    public apply<P extends PointData = Point>(pos: PointData, newPos?: P): P\n    {\n        newPos = (newPos || new Point()) as P;\n\n        const x = pos.x;\n        const y = pos.y;\n\n        newPos.x = (this.a * x) + (this.c * y) + this.tx;\n        newPos.y = (this.b * x) + (this.d * y) + this.ty;\n\n        return newPos;\n    }\n\n    /**\n     * Get a new position with the inverse of the current transformation applied.\n     * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n     * @param pos - The origin\n     * @param {Point} [newPos] - The point that the new position is assigned to (allowed to be same as input)\n     * @returns {Point} The new point, inverse-transformed through this matrix\n     */\n    public applyInverse<P extends PointData = Point>(pos: PointData, newPos?: P): P\n    {\n        newPos = (newPos || new Point()) as P;\n\n        const a = this.a;\n        const b = this.b;\n        const c = this.c;\n        const d = this.d;\n        const tx = this.tx;\n        const ty = this.ty;\n\n        const id = 1 / ((a * d) + (c * -b));\n\n        const x = pos.x;\n        const y = pos.y;\n\n        newPos.x = (d * id * x) + (-c * id * y) + (((ty * c) - (tx * d)) * id);\n        newPos.y = (a * id * y) + (-b * id * x) + (((-ty * a) + (tx * b)) * id);\n\n        return newPos;\n    }\n\n    /**\n     * Translates the matrix on the x and y.\n     * @param x - How much to translate x by\n     * @param y - How much to translate y by\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public translate(x: number, y: number): this\n    {\n        this.tx += x;\n        this.ty += y;\n\n        return this;\n    }\n\n    /**\n     * Applies a scale transformation to the matrix.\n     * @param x - The amount to scale horizontally\n     * @param y - The amount to scale vertically\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public scale(x: number, y: number): this\n    {\n        this.a *= x;\n        this.d *= y;\n        this.c *= x;\n        this.b *= y;\n        this.tx *= x;\n        this.ty *= y;\n\n        return this;\n    }\n\n    /**\n     * Applies a rotation transformation to the matrix.\n     * @param angle - The angle in radians.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public rotate(angle: number): this\n    {\n        const cos = Math.cos(angle);\n        const sin = Math.sin(angle);\n\n        const a1 = this.a;\n        const c1 = this.c;\n        const tx1 = this.tx;\n\n        this.a = (a1 * cos) - (this.b * sin);\n        this.b = (a1 * sin) + (this.b * cos);\n        this.c = (c1 * cos) - (this.d * sin);\n        this.d = (c1 * sin) + (this.d * cos);\n        this.tx = (tx1 * cos) - (this.ty * sin);\n        this.ty = (tx1 * sin) + (this.ty * cos);\n\n        return this;\n    }\n\n    /**\n     * Appends the given Matrix to this Matrix.\n     * @param matrix - The matrix to append.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public append(matrix: Matrix): this\n    {\n        const a1 = this.a;\n        const b1 = this.b;\n        const c1 = this.c;\n        const d1 = this.d;\n\n        this.a = (matrix.a * a1) + (matrix.b * c1);\n        this.b = (matrix.a * b1) + (matrix.b * d1);\n        this.c = (matrix.c * a1) + (matrix.d * c1);\n        this.d = (matrix.c * b1) + (matrix.d * d1);\n\n        this.tx = (matrix.tx * a1) + (matrix.ty * c1) + this.tx;\n        this.ty = (matrix.tx * b1) + (matrix.ty * d1) + this.ty;\n\n        return this;\n    }\n\n    /**\n     * Appends two matrix's and sets the result to this matrix. AB = A * B\n     * @param a - The matrix to append.\n     * @param b - The matrix to append.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public appendFrom(a: Matrix, b: Matrix): this\n    {\n        const a1 = a.a;\n        const b1 = a.b;\n        const c1 = a.c;\n        const d1 = a.d;\n        const tx = a.tx;\n        const ty = a.ty;\n\n        const a2 = b.a;\n        const b2 = b.b;\n        const c2 = b.c;\n        const d2 = b.d;\n\n        this.a = (a1 * a2) + (b1 * c2);\n        this.b = (a1 * b2) + (b1 * d2);\n        this.c = (c1 * a2) + (d1 * c2);\n        this.d = (c1 * b2) + (d1 * d2);\n        this.tx = (tx * a2) + (ty * c2) + b.tx;\n        this.ty = (tx * b2) + (ty * d2) + b.ty;\n\n        return this;\n    }\n\n    /**\n     * Sets the matrix based on all the available properties\n     * @param x - Position on the x axis\n     * @param y - Position on the y axis\n     * @param pivotX - Pivot on the x axis\n     * @param pivotY - Pivot on the y axis\n     * @param scaleX - Scale on the x axis\n     * @param scaleY - Scale on the y axis\n     * @param rotation - Rotation in radians\n     * @param skewX - Skew on the x axis\n     * @param skewY - Skew on the y axis\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public setTransform(x: number, y: number, pivotX: number, pivotY: number, scaleX: number,\n        scaleY: number, rotation: number, skewX: number, skewY: number): this\n    {\n        this.a = Math.cos(rotation + skewY) * scaleX;\n        this.b = Math.sin(rotation + skewY) * scaleX;\n        this.c = -Math.sin(rotation - skewX) * scaleY;\n        this.d = Math.cos(rotation - skewX) * scaleY;\n\n        this.tx = x - ((pivotX * this.a) + (pivotY * this.c));\n        this.ty = y - ((pivotX * this.b) + (pivotY * this.d));\n\n        return this;\n    }\n\n    /**\n     * Prepends the given Matrix to this Matrix.\n     * @param matrix - The matrix to prepend\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public prepend(matrix: Matrix): this\n    {\n        const tx1 = this.tx;\n\n        if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1)\n        {\n            const a1 = this.a;\n            const c1 = this.c;\n\n            this.a = (a1 * matrix.a) + (this.b * matrix.c);\n            this.b = (a1 * matrix.b) + (this.b * matrix.d);\n            this.c = (c1 * matrix.a) + (this.d * matrix.c);\n            this.d = (c1 * matrix.b) + (this.d * matrix.d);\n        }\n\n        this.tx = (tx1 * matrix.a) + (this.ty * matrix.c) + matrix.tx;\n        this.ty = (tx1 * matrix.b) + (this.ty * matrix.d) + matrix.ty;\n\n        return this;\n    }\n\n    /**\n     * Decomposes the matrix (x, y, scaleX, scaleY, and rotation) and sets the properties on to a transform.\n     * @param transform - The transform to apply the properties to.\n     * @returns The transform with the newly applied properties\n     */\n    public decompose(transform: TransformableObject): TransformableObject\n    {\n        // sort out rotation / skew..\n        const a = this.a;\n        const b = this.b;\n        const c = this.c;\n        const d = this.d;\n        const pivot = transform.pivot;\n\n        const skewX = -Math.atan2(-c, d);\n        const skewY = Math.atan2(b, a);\n\n        const delta = Math.abs(skewX + skewY);\n\n        if (delta < 0.00001 || Math.abs(PI_2 - delta) < 0.00001)\n        {\n            transform.rotation = skewY;\n            transform.skew.x = transform.skew.y = 0;\n        }\n        else\n        {\n            transform.rotation = 0;\n            transform.skew.x = skewX;\n            transform.skew.y = skewY;\n        }\n\n        // next set scale\n        transform.scale.x = Math.sqrt((a * a) + (b * b));\n        transform.scale.y = Math.sqrt((c * c) + (d * d));\n\n        // next set position\n        transform.position.x = this.tx + ((pivot.x * a) + (pivot.y * c));\n        transform.position.y = this.ty + ((pivot.x * b) + (pivot.y * d));\n\n        return transform;\n    }\n\n    /**\n     * Inverts this matrix\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public invert(): this\n    {\n        const a1 = this.a;\n        const b1 = this.b;\n        const c1 = this.c;\n        const d1 = this.d;\n        const tx1 = this.tx;\n        const n = (a1 * d1) - (b1 * c1);\n\n        this.a = d1 / n;\n        this.b = -b1 / n;\n        this.c = -c1 / n;\n        this.d = a1 / n;\n        this.tx = ((c1 * this.ty) - (d1 * tx1)) / n;\n        this.ty = -((a1 * this.ty) - (b1 * tx1)) / n;\n\n        return this;\n    }\n\n    /** Checks if this matrix is an identity matrix */\n    public isIdentity(): boolean\n    {\n        return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n    }\n\n    /**\n     * Resets this Matrix to an identity (default) matrix.\n     * @returns This matrix. Good for chaining method calls.\n     */\n    public identity(): this\n    {\n        this.a = 1;\n        this.b = 0;\n        this.c = 0;\n        this.d = 1;\n        this.tx = 0;\n        this.ty = 0;\n\n        return this;\n    }\n\n    /**\n     * Creates a new Matrix object with the same values as this one.\n     * @returns A copy of this matrix. Good for chaining method calls.\n     */\n    public clone(): Matrix\n    {\n        const matrix = new Matrix();\n\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n\n        return matrix;\n    }\n\n    /**\n     * Changes the values of the given matrix to be the same as the ones in this matrix\n     * @param matrix - The matrix to copy to.\n     * @returns The matrix given in parameter with its values updated.\n     */\n    public copyTo(matrix: Matrix): Matrix\n    {\n        matrix.a = this.a;\n        matrix.b = this.b;\n        matrix.c = this.c;\n        matrix.d = this.d;\n        matrix.tx = this.tx;\n        matrix.ty = this.ty;\n\n        return matrix;\n    }\n\n    /**\n     * Changes the values of the matrix to be the same as the ones in given matrix\n     * @param matrix - The matrix to copy from.\n     * @returns this\n     */\n    public copyFrom(matrix: Matrix): this\n    {\n        this.a = matrix.a;\n        this.b = matrix.b;\n        this.c = matrix.c;\n        this.d = matrix.d;\n        this.tx = matrix.tx;\n        this.ty = matrix.ty;\n\n        return this;\n    }\n\n    /**\n     * check to see if two matrices are the same\n     * @param matrix - The matrix to compare to.\n     */\n    public equals(matrix: Matrix)\n    {\n        return matrix.a === this.a && matrix.b === this.b\n            && matrix.c === this.c && matrix.d === this.d\n            && matrix.tx === this.tx && matrix.ty === this.ty;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n    }\n    // #endif\n\n    /**\n     * A default (identity) matrix.\n     *\n     * This is a shared object, if you want to modify it consider creating a new `Matrix`\n     * @readonly\n     */\n    static get IDENTITY(): Readonly<Matrix>\n    {\n        return identityMatrix.identity();\n    }\n\n    /**\n     * A static Matrix that can be used to avoid creating new objects.\n     * Will always ensure the matrix is reset to identity when requested.\n     * Use this object for fast but temporary calculations, as it may be mutated later on.\n     * This is a different object to the `IDENTITY` object and so can be modified without changing `IDENTITY`.\n     * @readonly\n     */\n    static get shared(): Matrix\n    {\n        return tempMatrix.identity();\n    }\n}\n\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n","/**\n * Two Pi.\n * @static\n * @member {number}\n * @memberof maths\n */\nexport const PI_2 = Math.PI * 2;\n\n/**\n * Conversion factor for converting radians to degrees.\n * @static\n * @member {number} RAD_TO_DEG\n * @memberof maths\n */\nexport const RAD_TO_DEG = 180 / Math.PI;\n\n/**\n * Conversion factor for converting degrees to radians.\n * @static\n * @member {number}\n * @memberof maths\n */\nexport const DEG_TO_RAD = Math.PI / 180;\n\n/**\n * Constants that identify shapes, mainly to prevent `instanceof` calls.\n * @memberof maths\n */\nexport type SHAPE_PRIMITIVE =\n    | 'polygon'\n    | 'rectangle'\n    | 'circle'\n    | 'ellipse'\n    | 'triangle'\n    | 'roundedRectangle';\n\n/**\n * The `maths` folder contains utility classes and functions for mathematical operations used throughout the project.\n * This includes constants such as conversion factors for radians and degrees, as well as shapes such as polygons,\n * rectangles, circles, ellipses, triangles, and rounded rectangles.\n * ```js\n * import { RAD_TO_DEG, Circle } from 'pixi.js';\n *\n * // Convert 180 degrees to radians\n * const radians = 180 * RAD_TO_DEG;\n *\n * // test if a point is inside a circle\n * const isPointInCircle = new Circle(0, 0, 10).contains(0, 0); // true\n * ```\n * @namespace maths\n */\n","// Taken from the bit-twiddle package\n\n/**\n * Rounds to next power of two.\n * @function nextPow2\n * @param {number} v - input value\n * @returns {number} - next rounded power of two\n * @memberof maths\n */\nexport function nextPow2(v: number): number\n{\n    v += v === 0 ? 1 : 0;\n    --v;\n    v |= v >>> 1;\n    v |= v >>> 2;\n    v |= v >>> 4;\n    v |= v >>> 8;\n    v |= v >>> 16;\n\n    return v + 1;\n}\n\n/**\n * Checks if a number is a power of two.\n * @function isPow2\n * @param {number} v - input value\n * @returns {boolean} `true` if value is power of two\n * @memberof maths\n */\nexport function isPow2(v: number): boolean\n{\n    return !(v & (v - 1)) && (!!v);\n}\n\n/**\n * Computes ceil of log base 2\n * @function log2\n * @param {number} v - input value\n * @returns {number} logarithm base 2\n * @memberof maths\n */\nexport function log2(v: number): number\n{\n    let r = (v > 0xFFFF ? 1 : 0) << 4;\n\n    v >>>= r;\n\n    let shift = (v > 0xFF ? 1 : 0) << 3;\n\n    v >>>= shift; r |= shift;\n    shift = (v > 0xF ? 1 : 0) << 2;\n    v >>>= shift; r |= shift;\n    shift = (v > 0x3 ? 1 : 0) << 1;\n    v >>>= shift; r |= shift;\n\n    return r | (v >> 1);\n}\n","import type { PointData } from './PointData';\nimport type { PointLike } from './PointLike';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface ObservablePoint extends PixiMixins.ObservablePoint { }\n\n/**\n * Observer used to listen for observable point changes.\n * @memberof maths\n */\nexport interface Observer<T>\n{\n    /** Callback to call when the point has updated. */\n    _onUpdate: (point?: T) => void;\n}\n\n/**\n * The ObservablePoint object represents a location in a two-dimensional coordinate system, where `x` represents\n * the position on the horizontal axis and `y` represents the position on the vertical axis.\n *\n * An `ObservablePoint` is a point that triggers the `onUpdate` method on an observer when the point's position is changed.\n * @memberof maths\n */\nexport class ObservablePoint implements PointLike\n{\n    /** @ignore */\n    public _x: number;\n    /** @ignore */\n    public _y: number;\n\n    /** This object used to call the `onUpdate` callback when the point changes. */\n    private readonly _observer: Observer<ObservablePoint>;\n\n    /**\n     * Creates a new `ObservablePoint`\n     * @param observer - Observer to pass to listen for change events.\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    constructor(observer: Observer<ObservablePoint>, x?: number, y?: number)\n    {\n        this._x = x || 0;\n        this._y = y || 0;\n\n        this._observer = observer;\n    }\n\n    /**\n     * Creates a clone of this point.\n     * @param observer - Optional observer to pass to the new observable point.\n     * @returns a copy of this observable point\n     */\n    public clone(observer?: Observer<ObservablePoint>): ObservablePoint\n    {\n        return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n    }\n\n    /**\n     * Sets the point to a new `x` and `y` position.\n     * If `y` is omitted, both `x` and `y` will be set to `x`.\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=x] - position of the point on the y axis\n     * @returns The observable point instance itself\n     */\n    public set(x = 0, y = x): this\n    {\n        if (this._x !== x || this._y !== y)\n        {\n            this._x = x;\n            this._y = y;\n            this._observer._onUpdate(this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Copies x and y from the given point (`p`)\n     * @param p - The point to copy from. Can be any of type that is or extends `PointData`\n     * @returns The observable point instance itself\n     */\n    public copyFrom(p: PointData): this\n    {\n        if (this._x !== p.x || this._y !== p.y)\n        {\n            this._x = p.x;\n            this._y = p.y;\n            this._observer._onUpdate(this);\n        }\n\n        return this;\n    }\n\n    /**\n     * Copies this point's x and y into that of the given point (`p`)\n     * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n     * @returns The point (`p`) with values updated\n     */\n    public copyTo<T extends PointLike>(p: T): T\n    {\n        p.set(this._x, this._y);\n\n        return p;\n    }\n\n    /**\n     * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n     * @param p - The point to check\n     * @returns Returns `true` if both `x` and `y` are equal\n     */\n    public equals(p: PointData): boolean\n    {\n        return (p.x === this._x) && (p.y === this._y);\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:ObservablePoint x=${0} y=${0} scope=${this._observer}]`;\n    }\n    // #endif\n\n    /** Position of the observable point on the x axis. */\n    get x(): number\n    {\n        return this._x;\n    }\n\n    set x(value: number)\n    {\n        if (this._x !== value)\n        {\n            this._x = value;\n            this._observer._onUpdate(this);\n        }\n    }\n\n    /** Position of the observable point on the y axis. */\n    get y(): number\n    {\n        return this._y;\n    }\n\n    set y(value: number)\n    {\n        if (this._y !== value)\n        {\n            this._y = value;\n            this._observer._onUpdate(this);\n        }\n    }\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type { PointData } from './PointData';\nimport type { PointLike } from './PointLike';\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Point extends PixiMixins.Point { }\n\n/**\n * The Point object represents a location in a two-dimensional coordinate system, where `x` represents\n * the position on the horizontal axis and `y` represents the position on the vertical axis.\n * <br/>\n * Many Pixi functions accept the `PointData` type as an alternative to `Point`,\n * which only requires `x` and `y` properties.\n * @class\n * @implements {PointLike}\n * @memberof maths\n */\nexport class Point implements PointLike\n{\n    /** Position of the point on the x axis */\n    public x = 0;\n    /** Position of the point on the y axis */\n    public y = 0;\n\n    /**\n     * Creates a new `Point`\n     * @param {number} [x=0] - position of the point on the x axis\n     * @param {number} [y=0] - position of the point on the y axis\n     */\n    constructor(x = 0, y = 0)\n    {\n        this.x = x;\n        this.y = y;\n    }\n\n    /**\n     * Creates a clone of this point\n     * @returns A clone of this point\n     */\n    public clone(): Point\n    {\n        return new Point(this.x, this.y);\n    }\n\n    /**\n     * Copies `x` and `y` from the given point into this point\n     * @param p - The point to copy from\n     * @returns The point instance itself\n     */\n    public copyFrom(p: PointData): this\n    {\n        this.set(p.x, p.y);\n\n        return this;\n    }\n\n    /**\n     * Copies this point's x and y into the given point (`p`).\n     * @param p - The point to copy to. Can be any of type that is or extends `PointData`\n     * @returns The point (`p`) with values updated\n     */\n    public copyTo<T extends PointLike>(p: T): T\n    {\n        p.set(this.x, this.y);\n\n        return p;\n    }\n\n    /**\n     * Accepts another point (`p`) and returns `true` if the given point is equal to this point\n     * @param p - The point to check\n     * @returns Returns `true` if both `x` and `y` are equal\n     */\n    public equals(p: PointData): boolean\n    {\n        return (p.x === this.x) && (p.y === this.y);\n    }\n\n    /**\n     * Sets the point to a new `x` and `y` position.\n     * If `y` is omitted, both `x` and `y` will be set to `x`.\n     * @param {number} [x=0] - position of the point on the `x` axis\n     * @param {number} [y=x] - position of the point on the `y` axis\n     * @returns The point instance itself\n     */\n    public set(x = 0, y: number = x): this\n    {\n        this.x = x;\n        this.y = y;\n\n        return this;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n    }\n    // #endif\n\n    /**\n     * A static Point object with `x` and `y` values of `0`. Can be used to avoid creating new objects multiple times.\n     * @readonly\n     */\n    static get shared(): Point\n    {\n        tempPoint.x = 0;\n        tempPoint.y = 0;\n\n        return tempPoint;\n    }\n}\n\nconst tempPoint = new Point();\n","// import { SHAPES } from '../const';\nimport { Point } from '../point/Point';\n\nimport type { Bounds } from '../../scene/container/bounds/Bounds';\nimport type { Matrix } from '../matrix/Matrix';\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\n\n// eslint-disable-next-line @typescript-eslint/no-empty-interface\nexport interface Rectangle extends PixiMixins.Rectangle { }\n\n/**\n * The `Rectangle` object is an area defined by its position, as indicated by its top-left corner\n * point (`x`, `y`) and by its `width` and its `height`.\n *\n * It also provides convenience methods to get and set the position and size of the rectangle such as\n * {@link maths.Rectangle#bottom|bottom}, {@link maths.Rectangle#right|right} and {@link maths.Rectangle#isEmpty|isEmpty}.\n * @memberof maths\n */\nexport class Rectangle implements ShapePrimitive\n{\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'rectangle'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'rectangle';\n\n    /**\n     * The X coordinate of the upper-left corner of the rectangle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the upper-left corner of the rectangle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The overall width of this rectangle\n     *  @default 0\n     */\n    public width: number;\n\n    /**\n     * The overall height of this rectangle\n     * @default 0\n     */\n    public height: number;\n\n    /**\n     * @param x - The X coordinate of the upper-left corner of the rectangle\n     * @param y - The Y coordinate of the upper-left corner of the rectangle\n     * @param width - The overall width of the rectangle\n     * @param height - The overall height of the rectangle\n     */\n    constructor(x: string | number = 0, y: string | number = 0, width: string | number = 0, height: string | number = 0)\n    {\n        this.x = Number(x);\n        this.y = Number(y);\n        this.width = Number(width);\n        this.height = Number(height);\n    }\n\n    /** Returns the left edge of the rectangle. */\n    get left(): number\n    {\n        return this.x;\n    }\n\n    /** Returns the right edge of the rectangle. */\n    get right(): number\n    {\n        return this.x + this.width;\n    }\n\n    /** Returns the top edge of the rectangle. */\n    get top(): number\n    {\n        return this.y;\n    }\n\n    /** Returns the bottom edge of the rectangle. */\n    get bottom(): number\n    {\n        return this.y + this.height;\n    }\n\n    /** Determines whether the Rectangle is empty. */\n    public isEmpty(): boolean\n    {\n        return this.left === this.right || this.top === this.bottom;\n    }\n\n    /** A constant empty rectangle. This is a new object every time the property is accessed */\n    static get EMPTY(): Rectangle\n    {\n        return new Rectangle(0, 0, 0, 0);\n    }\n\n    /**\n     * Creates a clone of this Rectangle\n     * @returns a copy of the rectangle\n     */\n    public clone(): Rectangle\n    {\n        return new Rectangle(this.x, this.y, this.width, this.height);\n    }\n\n    /**\n     * Converts a Bounds object to a Rectangle object.\n     * @param bounds - The bounds to copy and convert to a rectangle.\n     * @returns Returns itself.\n     */\n    public copyFromBounds(bounds: Bounds): this\n    {\n        this.x = bounds.minX;\n        this.y = bounds.minY;\n        this.width = bounds.maxX - bounds.minX;\n        this.height = bounds.maxY - bounds.minY;\n\n        return this;\n    }\n\n    /**\n     * Copies another rectangle to this one.\n     * @param rectangle - The rectangle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(rectangle: Rectangle): Rectangle\n    {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n\n        return this;\n    }\n\n    /**\n     * Copies this rectangle to another one.\n     * @param rectangle - The rectangle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(rectangle: Rectangle): Rectangle\n    {\n        rectangle.copyFrom(this);\n\n        return rectangle;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rectangle\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coordinates are within this Rectangle\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n\n        if (x >= this.x && x < this.x + this.width)\n        {\n            if (y >= this.y && y < this.y + this.height)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this rectangle\n     */\n    public strokeContains(x: number, y: number, strokeWidth: number): boolean\n    {\n        const { width, height } = this;\n\n        if (width <= 0 || height <= 0) return false;\n\n        const _x = this.x;\n        const _y = this.y;\n\n        const outerLeft = _x - (strokeWidth / 2);\n        const outerRight = _x + width + (strokeWidth / 2);\n        const outerTop = _y - (strokeWidth / 2);\n        const outerBottom = _y + height + (strokeWidth / 2);\n        const innerLeft = _x + (strokeWidth / 2);\n        const innerRight = _x + width - (strokeWidth / 2);\n        const innerTop = _y + (strokeWidth / 2);\n        const innerBottom = _y + height - (strokeWidth / 2);\n\n        return (x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom)\n        && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n    }\n    /**\n     * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n     * Returns true only if the area of the intersection is >0, this means that Rectangles\n     * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n     * (width or height equal to zero) can't intersect any other rectangle.\n     * @param {Rectangle} other - The Rectangle to intersect with `this`.\n     * @param {Matrix} transform - The transformation matrix of `other`.\n     * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n     */\n    public intersects(other: Rectangle, transform?: Matrix): boolean\n    {\n        if (!transform)\n        {\n            const x0 = this.x < other.x ? other.x : this.x;\n            const x1 = this.right > other.right ? other.right : this.right;\n\n            if (x1 <= x0)\n            {\n                return false;\n            }\n\n            const y0 = this.y < other.y ? other.y : this.y;\n            const y1 = this.bottom > other.bottom ? other.bottom : this.bottom;\n\n            return y1 > y0;\n        }\n\n        const x0 = this.left;\n        const x1 = this.right;\n        const y0 = this.top;\n        const y1 = this.bottom;\n\n        if (x1 <= x0 || y1 <= y0)\n        {\n            return false;\n        }\n\n        const lt = tempPoints[0].set(other.left, other.top);\n        const lb = tempPoints[1].set(other.left, other.bottom);\n        const rt = tempPoints[2].set(other.right, other.top);\n        const rb = tempPoints[3].set(other.right, other.bottom);\n\n        if (rt.x <= lt.x || lb.y <= lt.y)\n        {\n            return false;\n        }\n\n        const s = Math.sign((transform.a * transform.d) - (transform.b * transform.c));\n\n        if (s === 0)\n        {\n            return false;\n        }\n\n        transform.apply(lt, lt);\n        transform.apply(lb, lb);\n        transform.apply(rt, rt);\n        transform.apply(rb, rb);\n\n        if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0\n            || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1\n            || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0\n            || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1)\n        {\n            return false;\n        }\n\n        const nx = s * (lb.y - lt.y);\n        const ny = s * (lt.x - lb.x);\n        const n00 = (nx * x0) + (ny * y0);\n        const n10 = (nx * x1) + (ny * y0);\n        const n01 = (nx * x0) + (ny * y1);\n        const n11 = (nx * x1) + (ny * y1);\n\n        if (Math.max(n00, n10, n01, n11) <= (nx * lt.x) + (ny * lt.y)\n            || Math.min(n00, n10, n01, n11) >= (nx * rb.x) + (ny * rb.y))\n        {\n            return false;\n        }\n\n        const mx = s * (lt.y - rt.y);\n        const my = s * (rt.x - lt.x);\n        const m00 = (mx * x0) + (my * y0);\n        const m10 = (mx * x1) + (my * y0);\n        const m01 = (mx * x0) + (my * y1);\n        const m11 = (mx * x1) + (my * y1);\n\n        if (Math.max(m00, m10, m01, m11) <= (mx * lt.x) + (my * lt.y)\n            || Math.min(m00, m10, m01, m11) >= (mx * rb.x) + (my * rb.y))\n        {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Pads the rectangle making it grow in all directions.\n     * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n     * @param paddingX - The horizontal padding amount.\n     * @param paddingY - The vertical padding amount.\n     * @returns Returns itself.\n     */\n    public pad(paddingX = 0, paddingY = paddingX): this\n    {\n        this.x -= paddingX;\n        this.y -= paddingY;\n\n        this.width += paddingX * 2;\n        this.height += paddingY * 2;\n\n        return this;\n    }\n\n    /**\n     * Fits this rectangle around the passed one.\n     * @param rectangle - The rectangle to fit.\n     * @returns Returns itself.\n     */\n    public fit(rectangle: Rectangle): this\n    {\n        const x1 = Math.max(this.x, rectangle.x);\n        const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n        const y1 = Math.max(this.y, rectangle.y);\n        const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n\n        this.x = x1;\n        this.width = Math.max(x2 - x1, 0);\n        this.y = y1;\n        this.height = Math.max(y2 - y1, 0);\n\n        return this;\n    }\n\n    /**\n     * Enlarges rectangle that way its corners lie on grid\n     * @param resolution - resolution\n     * @param eps - precision\n     * @returns Returns itself.\n     */\n    public ceil(resolution = 1, eps = 0.001): this\n    {\n        const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n        const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n\n        this.x = Math.floor((this.x + eps) * resolution) / resolution;\n        this.y = Math.floor((this.y + eps) * resolution) / resolution;\n\n        this.width = x2 - this.x;\n        this.height = y2 - this.y;\n\n        return this;\n    }\n\n    /**\n     * Enlarges this rectangle to include the passed rectangle.\n     * @param rectangle - The rectangle to include.\n     * @returns Returns itself.\n     */\n    public enlarge(rectangle: Rectangle): this\n    {\n        const x1 = Math.min(this.x, rectangle.x);\n        const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n        const y1 = Math.min(this.y, rectangle.y);\n        const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n\n        this.x = x1;\n        this.width = x2 - x1;\n        this.y = y1;\n        this.height = y2 - y1;\n\n        return this;\n    }\n\n    /**\n     * Returns the framing rectangle of the rectangle as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n        out.copyFrom(this);\n\n        return out;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n    }\n    // #endif\n}\n","import type { GlRenderingContext } from '../../../renderers/gl/context/GlRenderingContext';\n\nconst fragTemplate = [\n    'precision mediump float;',\n    'void main(void){',\n    'float test = 0.1;',\n    '%forloop%',\n    'gl_FragColor = vec4(0.0);',\n    '}',\n].join('\\n');\n\nfunction generateIfTestSrc(maxIfs: number): string\n{\n    let src = '';\n\n    for (let i = 0; i < maxIfs; ++i)\n    {\n        if (i > 0)\n        {\n            src += '\\nelse ';\n        }\n\n        if (i < maxIfs - 1)\n        {\n            src += `if(test == ${i}.0){}`;\n        }\n    }\n\n    return src;\n}\n\nexport function checkMaxIfStatementsInShader(maxIfs: number, gl: GlRenderingContext): number\n{\n    if (maxIfs === 0)\n    {\n        throw new Error('Invalid value of `0` passed to `checkMaxIfStatementsInShader`');\n    }\n\n    const shader = gl.createShader(gl.FRAGMENT_SHADER);\n\n    try\n    {\n        while (true) // eslint-disable-line no-constant-condition\n        {\n            const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n\n            gl.shaderSource(shader, fragmentSrc);\n            gl.compileShader(shader);\n\n            if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS))\n            {\n                maxIfs = (maxIfs / 2) | 0;\n            }\n            else\n            {\n                // valid!\n                break;\n            }\n        }\n    }\n    finally\n    {\n        gl.deleteShader(shader);\n    }\n\n    return maxIfs;\n}\n","import { getTestContext } from '../../../renderers/gl/shader/program/getTestContext';\nimport { checkMaxIfStatementsInShader } from './checkMaxIfStatementsInShader';\n\nlet maxTexturesPerBatchCache: number | null = null;\n\n/**\n * Returns the maximum number of textures that can be batched. This uses WebGL1's `MAX_TEXTURE_IMAGE_UNITS`.\n * The response for this is that to get this info via WebGPU, we would need to make a context, which\n * would make this function async, and we want to avoid that.\n * @private\n * @returns {number} The maximum number of textures that can be batched\n */\nexport function getMaxTexturesPerBatch(): number\n{\n    if (maxTexturesPerBatchCache) return maxTexturesPerBatchCache;\n\n    const gl = getTestContext();\n\n    // step 1: first check max textures the GPU can handle.\n    maxTexturesPerBatchCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\n    // step 2: check the maximum number of if statements the shader can have too..\n    maxTexturesPerBatchCache = checkMaxIfStatementsInShader(\n        maxTexturesPerBatchCache, gl);\n\n    gl.getExtension('WEBGL_lose_context')?.loseContext();\n\n    return maxTexturesPerBatchCache;\n}\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport { Texture } from '../../renderers/shared/texture/Texture';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures';\n\nimport type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\nconst cachedGroups: Record<number, BindGroup> = {};\n\nexport function getTextureBatchBindGroup(textures: TextureSource[], size: number)\n{\n    let uid = 2166136261; // FNV-1a 32-bit offset basis\n\n    for (let i = 0; i < size; i++)\n    {\n        uid ^= textures[i].uid;\n        uid = Math.imul(uid, 16777619);\n        uid >>>= 0;\n    }\n\n    return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid);\n}\n\nlet maxTextures = 0;\n\nfunction generateTextureBatchBindGroup(textures: TextureSource[], size: number, key: number): BindGroup\n{\n    const bindGroupResources: Record<string, any> = {};\n\n    let bindIndex = 0;\n\n    if (!maxTextures)maxTextures = getMaxTexturesPerBatch();\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        const texture = i < size ? textures[i] : Texture.EMPTY.source;\n\n        bindGroupResources[bindIndex++] = texture.source;\n        bindGroupResources[bindIndex++] = texture.style;\n    }\n\n    // pad out with empty textures\n    const bindGroup = new BindGroup(bindGroupResources);\n\n    cachedGroups[key] = bindGroup;\n\n    return bindGroup;\n}\n\n","import type { TextureSource } from '../../renderers/shared/texture/sources/TextureSource';\n\n/**\n * Used by the batcher to build texture batches. Holds list of textures and their respective locations.\n * @memberof rendering\n */\nexport class BatchTextureArray\n{\n    /** Inside textures array. */\n    public textures: TextureSource[];\n\n    /** Respective locations for textures. */\n    public ids: Record<number, number> = Object.create(null);\n\n    /** Number of filled elements. */\n    public count: number;\n\n    constructor()\n    {\n        this.textures = [];\n        this.count = 0;\n    }\n\n    /** Clear the textures and their locations. */\n    public clear(): void\n    {\n        for (let i = 0; i < this.count; i++)\n        {\n            const t = this.textures[i];\n\n            this.textures[i] = null;\n            this.ids[t.uid] = null;\n        }\n\n        this.count = 0;\n    }\n}\n","import { uid } from '../../../utils/data/uid';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy';\nimport { type BLEND_MODES } from '../../renderers/shared/state/const';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures';\nimport { BatchTextureArray } from './BatchTextureArray';\n\nimport type { BoundsData } from '../../../scene/container/bounds/Bounds';\nimport type { BindGroup } from '../../renderers/gpu/shader/BindGroup';\nimport type { Geometry, IndexBufferArray } from '../../renderers/shared/geometry/Geometry';\nimport type { Instruction } from '../../renderers/shared/instructions/Instruction';\nimport type { InstructionSet } from '../../renderers/shared/instructions/InstructionSet';\nimport type { Shader } from '../../renderers/shared/shader/Shader';\nimport type { Texture } from '../../renderers/shared/texture/Texture';\n\nexport type BatchAction = 'startBatch' | 'renderBatch';\n\n/**\n * A batch pool is used to store batches when they are not currently in use.\n * @memberof rendering\n */\nexport class Batch implements Instruction\n{\n    public renderPipeId = 'batch';\n    public action: BatchAction = 'startBatch';\n\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n\n    // for drawing..\n    public start = 0;\n    public size = 0;\n    public textures: BatchTextureArray = new BatchTextureArray();\n\n    public blendMode: BLEND_MODES = 'normal';\n\n    public canBundle = true;\n\n    /**\n     * breaking rules slightly here in the name of performance..\n     * storing references to these bindgroups here is just faster for access!\n     * keeps a reference to the GPU bind group to set when rendering this batch for WebGPU. Will be null is using WebGL.\n     */\n    public gpuBindGroup: GPUBindGroup;\n    /**\n     * breaking rules slightly here in the name of performance..\n     * storing references to these bindgroups here is just faster for access!\n     * keeps a reference to the bind group to set when rendering this batch for WebGPU. Will be null if using WebGl.\n     */\n    public bindGroup: BindGroup;\n\n    public batcher: Batcher;\n\n    public destroy()\n    {\n        this.textures = null;\n        this.gpuBindGroup = null;\n        this.bindGroup = null;\n        this.batcher = null;\n    }\n}\n\n// inlined pool for SPEEEEEEEEEED :D\nconst batchPool: Batch[] = [];\nlet batchPoolIndex = 0;\n\nfunction getBatchFromPool()\n{\n    return batchPoolIndex > 0 ? batchPool[--batchPoolIndex] : new Batch();\n}\n\nfunction returnBatchToPool(batch: Batch)\n{\n    batchPool[batchPoolIndex++] = batch;\n}\n\n/**\n * Represents an element that can be batched for rendering.\n * @interface\n * @memberof rendering\n */\nexport interface BatchableElement\n{\n    /**\n     * The name of the batcher to use. Must be registered.\n     * @type {string}\n     */\n    batcherName: string;\n\n    /**\n     * The texture to be used for rendering.\n     * @type {Texture}\n     */\n    texture: Texture;\n\n    /**\n     * The blend mode to be applied.\n     * @type {BLEND_MODES}\n     */\n    blendMode: BLEND_MODES;\n\n    /**\n     * The size of the index data.\n     * @type {number}\n     */\n    indexSize: number;\n\n    /**\n     * The size of the attribute data.\n     * @type {number}\n     */\n    attributeSize: number;\n\n    /**\n     * Whether the element should be packed as a quad for better performance.\n     * @type {boolean}\n     */\n    packAsQuad: boolean;\n\n    /**\n     * The texture ID, stored for efficient updating.\n     * @type {number}\n     * @private\n     */\n    _textureId: number;\n\n    /**\n     * The starting position in the attribute buffer.\n     * @type {number}\n     * @private\n     */\n    _attributeStart: number;\n\n    /**\n     * The starting position in the index buffer.\n     * @type {number}\n     * @private\n     */\n    _indexStart: number;\n\n    /**\n     * Reference to the batcher.\n     * @type {Batcher}\n     * @private\n     */\n    _batcher: Batcher;\n\n    /**\n     * Reference to the batch.\n     * @type {Batch}\n     * @private\n     */\n    _batch: Batch;\n}\n\n/**\n * Represents a batchable quad element.\n * @extends BatchableElement\n * @memberof rendering\n */\nexport interface BatchableQuadElement extends BatchableElement\n{\n    /**\n     * Indicates that this element should be packed as a quad.\n     * @type {true}\n     */\n    packAsQuad: true;\n\n    /**\n     * The size of the attribute data for this quad element.\n     * @type {4}\n     */\n    attributeSize: 4;\n\n    /**\n     * The size of the index data for this quad element.\n     * @type {6}\n     */\n    indexSize: 6;\n\n    /**\n     * The bounds data for this quad element.\n     * @type {BoundsData}\n     */\n    bounds: BoundsData;\n}\n\n/**\n * Represents a batchable mesh element.\n * @extends BatchableElement\n * @memberof rendering\n */\nexport interface BatchableMeshElement extends BatchableElement\n{\n    /**\n     * The UV coordinates of the mesh.\n     * @type {number[] | Float32Array}\n     */\n    uvs: number[] | Float32Array;\n\n    /**\n     * The vertex positions of the mesh.\n     * @type {number[] | Float32Array}\n     */\n    positions: number[] | Float32Array;\n\n    /**\n     * The indices of the mesh.\n     * @type {number[] | Uint16Array | Uint32Array}\n     */\n    indices: number[] | Uint16Array | Uint32Array;\n\n    /**\n     * The offset in the index buffer.\n     * @type {number}\n     */\n    indexOffset: number;\n\n    /**\n     * The offset in the attribute buffer.\n     * @type {number}\n     */\n    attributeOffset: number;\n\n    /**\n     * Indicates that this element should not be packed as a quad.\n     * @type {false}\n     */\n    packAsQuad: false;\n}\n\nlet BATCH_TICK = 0;\n\n/**\n * The options for the batcher.\n * @memberof rendering\n */\nexport interface BatcherOptions\n{\n    /** The maximum number of textures per batch. */\n    maxTextures?: number;\n    attributesInitialSize?: number;\n    indicesInitialSize?: number;\n}\n\n/**\n * A batcher is used to batch together objects with the same texture.\n * It is an abstract class that must be extended. see DefaultBatcher for an example.\n * @memberof rendering\n */\nexport abstract class Batcher\n{\n    public static defaultOptions: Partial<BatcherOptions> = {\n        maxTextures: null,\n        attributesInitialSize: 4,\n        indicesInitialSize: 6,\n    };\n\n    /** unique id for this batcher */\n    public readonly uid: number = uid('batcher');\n\n    /** The buffer containing attribute data for all elements in the batch. */\n    public attributeBuffer: ViewableBuffer;\n\n    /** The buffer containing index data for all elements in the batch. */\n    public indexBuffer: IndexBufferArray;\n\n    /** The current size of the attribute data in the batch. */\n    public attributeSize: number;\n\n    /** The current size of the index data in the batch. */\n    public indexSize: number;\n\n    /** The total number of elements currently in the batch. */\n    public elementSize: number;\n\n    /** The starting index of elements in the current batch. */\n    public elementStart: number;\n\n    /** Indicates whether the batch data has been modified and needs updating. */\n    public dirty = true;\n\n    /** The current index of the batch being processed. */\n    public batchIndex = 0;\n\n    /** An array of all batches created during the current rendering process. */\n    public batches: Batch[] = [];\n\n    private _elements: BatchableElement[] = [];\n\n    private _batchIndexStart: number;\n    private _batchIndexSize: number;\n\n    /** The maximum number of textures per batch. */\n    public readonly maxTextures: number;\n\n    /** The name of the batcher. Must be implemented by subclasses. */\n    public abstract name: string;\n    /** The vertex size of the batcher. Must be implemented by subclasses. */\n    protected abstract vertexSize: number;\n\n    /** The geometry used by this batcher. Must be implemented by subclasses. */\n    public abstract geometry: Geometry;\n\n    /**\n     * The shader used by this batcher. Must be implemented by subclasses.\n     * this can be shared by multiple batchers of the same type.\n     */\n    public abstract shader: Shader;\n\n    /**\n     * Packs the attributes of a BatchableMeshElement into the provided views.\n     * Must be implemented by subclasses.\n     * @param element - The BatchableMeshElement to pack.\n     * @param float32View - The Float32Array view to pack into.\n     * @param uint32View - The Uint32Array view to pack into.\n     * @param index - The starting index in the views.\n     * @param textureId - The texture ID to use.\n     */\n    public abstract packAttributes(\n        element: BatchableMeshElement,\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number\n    ): void;\n\n    /**\n     * Packs the attributes of a BatchableQuadElement into the provided views.\n     * Must be implemented by subclasses.\n     * @param element - The BatchableQuadElement to pack.\n     * @param float32View - The Float32Array view to pack into.\n     * @param uint32View - The Uint32Array view to pack into.\n     * @param index - The starting index in the views.\n     * @param textureId - The texture ID to use.\n     */\n    public abstract packQuadAttributes(\n        element: BatchableQuadElement,\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number\n    ): void;\n\n    constructor(options: BatcherOptions = {})\n    {\n        Batcher.defaultOptions.maxTextures = Batcher.defaultOptions.maxTextures ?? getMaxTexturesPerBatch();\n        options = { ...Batcher.defaultOptions, ...options };\n\n        const { maxTextures, attributesInitialSize, indicesInitialSize } = options;\n\n        this.attributeBuffer = new ViewableBuffer(attributesInitialSize * 4);\n\n        this.indexBuffer = new Uint16Array(indicesInitialSize);\n\n        this.maxTextures = maxTextures;\n    }\n\n    public begin()\n    {\n        this.elementSize = 0;\n        this.elementStart = 0;\n        this.indexSize = 0;\n        this.attributeSize = 0;\n\n        for (let i = 0; i < this.batchIndex; i++)\n        {\n            returnBatchToPool(this.batches[i]);\n        }\n\n        this.batchIndex = 0;\n        this._batchIndexStart = 0;\n        this._batchIndexSize = 0;\n\n        this.dirty = true;\n    }\n\n    public add(batchableObject: BatchableElement)\n    {\n        this._elements[this.elementSize++] = batchableObject;\n\n        batchableObject._indexStart = this.indexSize;\n        batchableObject._attributeStart = this.attributeSize;\n        batchableObject._batcher = this;\n\n        this.indexSize += batchableObject.indexSize;\n        this.attributeSize += ((batchableObject.attributeSize) * this.vertexSize);\n    }\n\n    public checkAndUpdateTexture(batchableObject: BatchableElement, texture: Texture): boolean\n    {\n        const textureId = batchableObject._batch.textures.ids[texture._source.uid];\n\n        // TODO could try to be a bit smarter if there are spare textures..\n        // but need to figure out how to alter the bind groups too..\n        if (!textureId && textureId !== 0) return false;\n\n        batchableObject._textureId = textureId;\n        batchableObject.texture = texture;\n\n        return true;\n    }\n\n    public updateElement(batchableObject: BatchableElement)\n    {\n        this.dirty = true;\n\n        const attributeBuffer = this.attributeBuffer;\n\n        if (batchableObject.packAsQuad)\n        {\n            this.packQuadAttributes(\n                batchableObject as BatchableQuadElement,\n                attributeBuffer.float32View,\n                attributeBuffer.uint32View,\n                batchableObject._attributeStart, batchableObject._textureId);\n        }\n        else\n        {\n            this.packAttributes(\n                batchableObject as BatchableMeshElement,\n                attributeBuffer.float32View,\n                attributeBuffer.uint32View,\n                batchableObject._attributeStart, batchableObject._textureId);\n        }\n    }\n\n    /**\n     * breaks the batcher. This happens when a batch gets too big,\n     * or we need to switch to a different type of rendering (a filter for example)\n     * @param instructionSet\n     */\n    public break(instructionSet: InstructionSet)\n    {\n        const elements = this._elements;\n\n        // length 0??!! (we broke without adding anything)\n        if (!elements[this.elementStart]) return;\n\n        let batch = getBatchFromPool();\n        let textureBatch = batch.textures;\n\n        textureBatch.clear();\n\n        const firstElement = elements[this.elementStart];\n        let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n\n        if (this.attributeSize * 4 > this.attributeBuffer.size)\n        {\n            this._resizeAttributeBuffer(this.attributeSize * 4);\n        }\n\n        if (this.indexSize > this.indexBuffer.length)\n        {\n            this._resizeIndexBuffer(this.indexSize);\n        }\n\n        const f32 = this.attributeBuffer.float32View;\n        const u32 = this.attributeBuffer.uint32View;\n        const indexBuffer = this.indexBuffer;\n\n        let size = this._batchIndexSize;\n        let start = this._batchIndexStart;\n\n        let action: BatchAction = 'startBatch';\n\n        const maxTextures = this.maxTextures;\n\n        for (let i = this.elementStart; i < this.elementSize; ++i)\n        {\n            const element = elements[i];\n\n            elements[i] = null;\n\n            const texture = element.texture;\n            const source = texture._source;\n\n            const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n\n            const breakRequired = blendMode !== adjustedBlendMode;\n\n            if (source._batchTick === BATCH_TICK && !breakRequired)\n            {\n                element._textureId = source._textureBindLocation;\n\n                size += element.indexSize;\n\n                if (element.packAsQuad)\n                {\n                    this.packQuadAttributes(\n                        element as BatchableQuadElement,\n                        f32, u32,\n                        element._attributeStart, element._textureId\n                    );\n                    this.packQuadIndex(\n                        indexBuffer,\n                        element._indexStart,\n                        element._attributeStart / this.vertexSize\n                    );\n                }\n                else\n                {\n                    this.packAttributes(\n                        element as BatchableMeshElement,\n                        f32, u32,\n                        element._attributeStart,\n                        element._textureId\n                    );\n                    this.packIndex(\n                        element as BatchableMeshElement,\n                        indexBuffer,\n                        element._indexStart,\n                        element._attributeStart / this.vertexSize\n                    );\n                }\n\n                element._batch = batch;\n\n                continue;\n            }\n\n            source._batchTick = BATCH_TICK;\n\n            if (textureBatch.count >= maxTextures || breakRequired)\n            {\n                this._finishBatch(\n                    batch,\n                    start,\n                    size - start,\n                    textureBatch,\n                    blendMode,\n                    instructionSet,\n                    action\n                );\n\n                action = 'renderBatch';\n                start = size;\n                // create a batch...\n                blendMode = adjustedBlendMode;\n\n                batch = getBatchFromPool();\n                textureBatch = batch.textures;\n                textureBatch.clear();\n\n                ++BATCH_TICK;\n            }\n\n            element._textureId = source._textureBindLocation = textureBatch.count;\n            textureBatch.ids[source.uid] = textureBatch.count;\n            textureBatch.textures[textureBatch.count++] = source;\n            element._batch = batch;\n\n            size += element.indexSize;\n\n            if (element.packAsQuad)\n            {\n                this.packQuadAttributes(\n                    element as BatchableQuadElement,\n                    f32, u32,\n                    element._attributeStart, element._textureId\n                );\n                this.packQuadIndex(\n                    indexBuffer,\n                    element._indexStart,\n                    element._attributeStart / this.vertexSize\n                );\n            }\n            else\n            {\n                this.packAttributes(element as BatchableMeshElement,\n                    f32, u32,\n                    element._attributeStart, element._textureId\n                );\n\n                this.packIndex(\n                    element as BatchableMeshElement,\n                    indexBuffer,\n                    element._indexStart,\n                    element._attributeStart / this.vertexSize\n                );\n            }\n        }\n\n        if (textureBatch.count > 0)\n        {\n            this._finishBatch(\n                batch,\n                start,\n                size - start,\n                textureBatch,\n                blendMode,\n                instructionSet,\n                action\n            );\n\n            start = size;\n            ++BATCH_TICK;\n        }\n\n        this.elementStart = this.elementSize;\n        this._batchIndexStart = start;\n        this._batchIndexSize = size;\n    }\n\n    private _finishBatch(\n        batch: Batch,\n        indexStart: number,\n        indexSize: number,\n        textureBatch: BatchTextureArray,\n        blendMode: BLEND_MODES,\n        instructionSet: InstructionSet,\n        action: BatchAction\n    )\n    {\n        batch.gpuBindGroup = null;\n        batch.bindGroup = null;\n        batch.action = action;\n\n        batch.batcher = this;\n        batch.textures = textureBatch;\n        batch.blendMode = blendMode;\n\n        batch.start = indexStart;\n        batch.size = indexSize;\n\n        ++BATCH_TICK;\n\n        // track for returning later!\n        this.batches[this.batchIndex++] = batch;\n        instructionSet.add(batch);\n    }\n\n    public finish(instructionSet: InstructionSet)\n    {\n        this.break(instructionSet);\n    }\n\n    /**\n     * Resizes the attribute buffer to the given size (1 = 1 float32)\n     * @param size - the size in vertices to ensure (not bytes!)\n     */\n    public ensureAttributeBuffer(size: number)\n    {\n        if (size * 4 <= this.attributeBuffer.size) return;\n\n        this._resizeAttributeBuffer(size * 4);\n    }\n\n    /**\n     * Resizes the index buffer to the given size (1 = 1 float32)\n     * @param size - the size in vertices to ensure (not bytes!)\n     */\n    public ensureIndexBuffer(size: number)\n    {\n        if (size <= this.indexBuffer.length) return;\n\n        this._resizeIndexBuffer(size);\n    }\n\n    private _resizeAttributeBuffer(size: number)\n    {\n        const newSize = Math.max(size, this.attributeBuffer.size * 2);\n\n        const newArrayBuffer = new ViewableBuffer(newSize);\n\n        fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n\n        this.attributeBuffer = newArrayBuffer;\n    }\n\n    private _resizeIndexBuffer(size: number)\n    {\n        const indexBuffer = this.indexBuffer;\n\n        let newSize = Math.max(size, indexBuffer.length * 1.5);\n\n        newSize += newSize % 2;\n\n        // this, is technically not 100% accurate, as really we should\n        // be checking the maximum value in the buffer. This approximation\n        // does the trick though...\n\n        // make sure buffer is always an even number..\n        const newIndexBuffer = (newSize > 65535) ? new Uint32Array(newSize) : new Uint16Array(newSize);\n\n        if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT)\n        {\n            for (let i = 0; i < indexBuffer.length; i++)\n            {\n                newIndexBuffer[i] = indexBuffer[i];\n            }\n        }\n        else\n        {\n            fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n        }\n\n        this.indexBuffer = newIndexBuffer;\n    }\n\n    public packQuadIndex(indexBuffer: IndexBufferArray, index: number, indicesOffset: number)\n    {\n        indexBuffer[index] = indicesOffset + 0;\n        indexBuffer[index + 1] = indicesOffset + 1;\n        indexBuffer[index + 2] = indicesOffset + 2;\n\n        indexBuffer[index + 3] = indicesOffset + 0;\n        indexBuffer[index + 4] = indicesOffset + 2;\n        indexBuffer[index + 5] = indicesOffset + 3;\n    }\n\n    public packIndex(element: BatchableMeshElement, indexBuffer: IndexBufferArray, index: number, indicesOffset: number)\n    {\n        const indices = element.indices;\n        const size = element.indexSize;\n        const indexOffset = element.indexOffset;\n        const attributeOffset = element.attributeOffset;\n\n        for (let i = 0; i < size; i++)\n        {\n            indexBuffer[index++] = indicesOffset + indices[i + indexOffset] - attributeOffset;\n        }\n    }\n\n    public destroy()\n    {\n        for (let i = 0; i < this.batches.length; i++)\n        {\n            returnBatchToPool(this.batches[i]);\n        }\n\n        this.batches = null;\n\n        for (let i = 0; i < this._elements.length; i++)\n        {\n            this._elements[i]._batch = null;\n        }\n\n        this._elements = null;\n\n        this.indexBuffer = null;\n\n        this.attributeBuffer.destroy();\n        this.attributeBuffer = null;\n    }\n}\n\n","import { Buffer } from '../../renderers/shared/buffer/Buffer';\nimport { BufferUsage } from '../../renderers/shared/buffer/const';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry';\n\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\n\nexport class BatchGeometry extends Geometry\n{\n    constructor()\n    {\n        const vertexSize = 6;\n\n        const attributeBuffer = new Buffer({\n            data: placeHolderBufferData,\n            label: 'attribute-batch-buffer',\n            usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n            shrinkToFit: false,\n        });\n\n        const indexBuffer = new Buffer({\n            data: placeHolderIndexData,\n            label: 'index-batch-buffer',\n            usage: BufferUsage.INDEX | BufferUsage.COPY_DST, // | BufferUsage.STATIC,\n            shrinkToFit: false,\n        });\n\n        const stride = vertexSize * 4;\n\n        super({\n            attributes: {\n                aPosition: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 0,\n                },\n                aUV: {\n                    buffer: attributeBuffer,\n                    format: 'float32x2',\n                    stride,\n                    offset: 2 * 4,\n                },\n                aColor: {\n                    buffer: attributeBuffer,\n                    format: 'unorm8x4',\n                    stride,\n                    offset: 4 * 4,\n                },\n                aTextureIdAndRound: {\n                    buffer: attributeBuffer,\n                    format: 'uint16x2',\n                    stride,\n                    offset: 5 * 4,\n                },\n            },\n            indexBuffer\n        });\n    }\n}\n\n","import { compileHighShaderGlProgram, compileHighShaderGpuProgram } from '../../high-shader/compileHighShaderToProgram';\nimport { colorBit, colorBitGl } from '../../high-shader/shader-bits/colorBit';\nimport { generateTextureBatchBit, generateTextureBatchBitGl } from '../../high-shader/shader-bits/generateTextureBatchBit';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../high-shader/shader-bits/roundPixelsBit';\nimport { getBatchSamplersUniformGroup } from '../../renderers/gl/shader/getBatchSamplersUniformGroup';\nimport { Shader } from '../../renderers/shared/shader/Shader';\n\n/**\n * DefaultShader is a specialized shader class designed for batch rendering.\n * It extends the base Shader class and provides functionality for handling\n * color, texture batching, and pixel rounding in both WebGL and WebGPU contexts.\n *\n * It is used by the default batcher\n * @extends Shader\n * @memberof rendering\n */\nexport class DefaultShader extends Shader\n{\n    constructor(maxTextures: number)\n    {\n        const glProgram = compileHighShaderGlProgram({\n            name: 'batch',\n            bits: [\n                colorBitGl,\n                generateTextureBatchBitGl(maxTextures),\n                roundPixelsBitGl,\n            ]\n        });\n\n        const gpuProgram = compileHighShaderGpuProgram({\n            name: 'batch',\n            bits: [\n                colorBit,\n                generateTextureBatchBit(maxTextures),\n                roundPixelsBit,\n            ]\n        });\n\n        super({\n            glProgram,\n            gpuProgram,\n            resources: {\n                batchSamplers: getBatchSamplersUniformGroup(maxTextures),\n            }\n        });\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Batcher } from './Batcher';\nimport { BatchGeometry } from './BatchGeometry';\nimport { DefaultShader } from './DefaultShader';\n\nimport type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Shader } from '../../renderers/shared/shader/Shader';\nimport type { BatchableMeshElement, BatchableQuadElement } from './Batcher';\n\nlet defaultShader: Shader = null;\n\n/**\n * Represents the common elements for default batch rendering.\n * This interface defines the properties that are used by the DefaultBatcher\n * to render elements efficiently in a batch.\n * @memberof rendering\n */\nexport interface DefaultBatchElements\n{\n    /**\n     * The color of the element that will be multiplied with the texture color.\n     * This is typically represented as a 32-bit integer in RGBA format.\n     */\n    color: number;\n\n    /**\n     * Determines whether the element should be rounded to the nearest pixel.\n     * - 0: No rounding (default)\n     * - 1: Round to nearest pixel\n     * This can help with visual consistency, especially for pixel art styles.\n     */\n    roundPixels: 0 | 1;\n\n    /**\n     * The transform matrix of the element.\n     * This matrix represents the position, scale, rotation, and skew of the element.\n     */\n    transform: Matrix;\n}\n\n/**\n * Represents a batchable quad element with default batch properties.\n * @memberof rendering\n */\nexport interface DefaultBatchableQuadElement extends BatchableQuadElement, DefaultBatchElements {}\n\n/**\n * Represents a batchable mesh element with default batch properties.\n * @memberof rendering\n */\nexport interface DefaultBatchableMeshElement extends BatchableMeshElement, DefaultBatchElements {}\n\n/**\n * The default batcher is used to batch quads and meshes. This batcher will batch the following elements:\n * - tints\n * - roundPixels\n * - texture\n * - transform\n * @memberof rendering\n */\nexport class DefaultBatcher extends Batcher\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.Batcher,\n        ],\n        name: 'default',\n    } as const;\n\n    public geometry = new BatchGeometry();\n    public shader = defaultShader || (defaultShader = new DefaultShader(this.maxTextures));\n\n    public name = DefaultBatcher.extension.name;\n\n    /** The size of one attribute. 1 = 32 bit. x, y, u, v, color, textureIdAndRound -> total = 6 */\n    public vertexSize = 6;\n\n    /**\n     * Packs the attributes of a DefaultBatchableMeshElement into the provided views.\n     * @param element - The DefaultBatchableMeshElement to pack.\n     * @param float32View - The Float32Array view to pack into.\n     * @param uint32View - The Uint32Array view to pack into.\n     * @param index - The starting index in the views.\n     * @param textureId - The texture ID to use.\n     */\n    public packAttributes(\n        element: DefaultBatchableMeshElement,\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number\n    )\n    {\n        const textureIdAndRound = (textureId << 16) | (element.roundPixels & 0xFFFF);\n\n        const wt = element.transform;\n\n        const a = wt.a;\n        const b = wt.b;\n        const c = wt.c;\n        const d = wt.d;\n        const tx = wt.tx;\n        const ty = wt.ty;\n\n        const { positions, uvs } = element;\n\n        const argb = element.color;\n\n        const offset = element.attributeOffset;\n        const end = offset + element.attributeSize;\n\n        for (let i = offset; i < end; i++)\n        {\n            const i2 = i * 2;\n\n            const x = positions[i2];\n            const y = positions[(i2) + 1];\n\n            float32View[index++] = (a * x) + (c * y) + tx;\n            float32View[index++] = (d * y) + (b * x) + ty;\n\n            float32View[index++] = uvs[i2];\n            float32View[index++] = uvs[(i2) + 1];\n\n            uint32View[index++] = argb;\n            uint32View[index++] = textureIdAndRound;\n        }\n    }\n\n    /**\n     * Packs the attributes of a DefaultBatchableQuadElement into the provided views.\n     * @param element - The DefaultBatchableQuadElement to pack.\n     * @param float32View - The Float32Array view to pack into.\n     * @param uint32View - The Uint32Array view to pack into.\n     * @param index - The starting index in the views.\n     * @param textureId - The texture ID to use.\n     */\n    public packQuadAttributes(\n        element: DefaultBatchableQuadElement,\n        float32View: Float32Array,\n        uint32View: Uint32Array,\n        index: number,\n        textureId: number\n    )\n    {\n        const texture = element.texture;\n\n        const wt = element.transform;\n\n        const a = wt.a;\n        const b = wt.b;\n        const c = wt.c;\n        const d = wt.d;\n        const tx = wt.tx;\n        const ty = wt.ty;\n\n        const bounds = element.bounds;\n\n        const w0 = bounds.maxX;\n        const w1 = bounds.minX;\n        const h0 = bounds.maxY;\n        const h1 = bounds.minY;\n\n        const uvs = texture.uvs;\n\n        // _ _ _ _\n        // a b g r\n        const argb = element.color;\n\n        const textureIdAndRound = (textureId << 16) | (element.roundPixels & 0xFFFF);\n\n        float32View[index + 0] = (a * w1) + (c * h1) + tx;\n        float32View[index + 1] = (d * h1) + (b * w1) + ty;\n\n        float32View[index + 2] = uvs.x0;\n        float32View[index + 3] = uvs.y0;\n\n        uint32View[index + 4] = argb;\n        uint32View[index + 5] = textureIdAndRound;\n\n        // xy\n        float32View[index + 6] = (a * w0) + (c * h1) + tx;\n        float32View[index + 7] = (d * h1) + (b * w0) + ty;\n\n        float32View[index + 8] = uvs.x1;\n        float32View[index + 9] = uvs.y1;\n\n        uint32View[index + 10] = argb;\n        uint32View[index + 11] = textureIdAndRound;\n\n        // xy\n        float32View[index + 12] = (a * w0) + (c * h0) + tx;\n        float32View[index + 13] = (d * h0) + (b * w0) + ty;\n\n        float32View[index + 14] = uvs.x2;\n        float32View[index + 15] = uvs.y2;\n\n        uint32View[index + 16] = argb;\n        uint32View[index + 17] = textureIdAndRound;\n\n        // xy\n        float32View[index + 18] = (a * w1) + (c * h0) + tx;\n        float32View[index + 19] = (d * h0) + (b * w1) + ty;\n\n        float32View[index + 20] = uvs.x3;\n        float32View[index + 21] = uvs.y3;\n\n        uint32View[index + 22] = argb;\n        uint32View[index + 23] = textureIdAndRound;\n    }\n}\n\n","import { warn } from '../../../../utils/logging/warn';\n\n/**\n * takes the HighFragment source parts and adds them to the hook hash\n * @param srcParts - the hash of hook arrays\n * @param parts - the code to inject into the hooks\n * @param name - optional the name of the part to add\n */\nexport function addBits(srcParts: Record<string, string>, parts: Record<string, string[]>, name?: string)\n{\n    if (srcParts)\n    {\n        for (const i in srcParts)\n        {\n            const id = i.toLocaleLowerCase();\n\n            const part = parts[id];\n\n            if (part)\n            {\n                let sanitisedPart = srcParts[i];\n\n                if (i === 'header')\n                {\n                    sanitisedPart = sanitisedPart\n                        .replace(/@in\\s+[^;]+;\\s*/g, '')\n                        .replace(/@out\\s+[^;]+;\\s*/g, '');\n                }\n\n                if (name)\n                {\n                    part.push(`//----${name}----//`);\n                }\n                part.push(sanitisedPart);\n            }\n\n            else\n            {\n                // #if _DEBUG\n                warn(`${i} placement hook does not exist in shader`);\n                // #endif\n            }\n        }\n    }\n}\n","export const findHooksRx = /\\{\\{(.*?)\\}\\}/g;\n\n/**\n * takes a program string and returns an hash mapping the hooks to empty arrays\n * @param programSrc - the program containing hooks\n */\nexport function compileHooks(programSrc: string): Record<string, string[]>\n{\n    const parts: Record<string, string[]> = {};\n\n    const partMatches = programSrc\n        .match(findHooksRx)\n        ?.map((hook) => hook.replace(/[{()}]/g, '')) ?? [];\n\n    partMatches.forEach((hook) =>\n    {\n        parts[hook] = [];\n    });\n\n    return parts;\n}\n","function extractInputs(fragmentSource: string, out: string[])\n{\n    let match;\n    const regex = /@in\\s+([^;]+);/g;\n\n    while ((match = regex.exec(fragmentSource)) !== null)\n    {\n        out.push(match[1]);\n    }\n}\n\nexport function compileInputs(fragments: any[], template: string, sort = false)\n{\n    // get all the inputs from the fragments..\n    const results: string[] = [];\n\n    extractInputs(template, results);\n\n    fragments.forEach((fragment) =>\n    {\n        if (fragment.header)\n        {\n            extractInputs(fragment.header, results);\n        }\n    });\n\n    // build the input:\n    const mainInput = results;\n\n    if (sort)\n    {\n        mainInput.sort();\n    }\n\n    const finalString = mainInput\n        .map((inValue, i) => `       @location(${i}) ${inValue},`)\n        .join('\\n');\n\n    // Remove lines from original string\n    let cleanedString = template.replace(/@in\\s+[^;]+;\\s*/g, '');\n\n    cleanedString = cleanedString.replace('{{in}}', `\\n${finalString}\\n`);\n\n    return cleanedString;\n}\n","function extractOutputs(fragmentSource: string, out: string[])\n{\n    let match;\n    const regex = /@out\\s+([^;]+);/g;\n\n    while ((match = regex.exec(fragmentSource)) !== null)\n    {\n        out.push(match[1]);\n    }\n}\n\nfunction extractVariableName(value: string)\n{\n    const regex = /\\b(\\w+)\\s*:/g;\n\n    const match = regex.exec(value);\n\n    return match ? match[1] : '';\n}\n\nfunction stripVariable(value: string)\n{\n    const regex = /@.*?\\s+/g;\n\n    return value.replace(regex, '');\n}\n\nexport function compileOutputs(fragments: any[], template: string)\n{\n    // get all the inputs from the fragments..\n    const results: string[] = [];\n\n    extractOutputs(template, results);\n\n    fragments.forEach((fragment) =>\n    {\n        if (fragment.header)\n        {\n            extractOutputs(fragment.header, results);\n        }\n    });\n\n    let index = 0;\n\n    // generate the output struct\n    const mainStruct = results\n        .sort()\n        .map((inValue) =>\n        {\n            if (inValue.indexOf('builtin') > -1)\n            {\n                return inValue;\n            }\n\n            return `@location(${index++}) ${inValue}`;\n        })\n        .join(',\\n');\n\n    // generate the variables we will set:\n    const mainStart = results\n        .sort()\n        .map((inValue) => `       var ${stripVariable(inValue)};`)\n        .join('\\n');\n\n    // generate the return object\n    const mainEnd = `return VSOutput(\n                ${results\n        .sort()\n        .map((inValue) => ` ${extractVariableName(inValue)}`)\n        .join(',\\n')});`;\n\n    // Remove lines from original string\n    let compiledCode = template.replace(/@out\\s+[^;]+;\\s*/g, '');\n\n    compiledCode = compiledCode.replace('{{struct}}', `\\n${mainStruct}\\n`);\n    compiledCode = compiledCode.replace('{{start}}', `\\n${mainStart}\\n`);\n    compiledCode = compiledCode.replace('{{return}}', `\\n${mainEnd}\\n`);\n\n    return compiledCode;\n}\n","/**\n * takes a shader src and replaces any hooks with the HighFragment code.\n * @param templateSrc - the program src template\n * @param fragmentParts - the fragments to inject\n */\nexport function injectBits(templateSrc: string, fragmentParts: Record<string, string[]>): string\n{\n    let out = templateSrc;\n\n    for (const i in fragmentParts)\n    {\n        const parts = fragmentParts[i];\n\n        const toInject = parts.join('\\n');\n\n        if (toInject.length)\n        {\n            out = out.replace(`{{${i}}}`, `//-----${i} START-----//\\n${parts.join('\\n')}\\n//----${i} FINISH----//`);\n        }\n\n        else\n        {\n            out = out.replace(`{{${i}}}`, '');\n        }\n    }\n\n    return out;\n}\n","import { addBits } from './utils/addBits';\nimport { compileHooks } from './utils/compileHooks';\nimport { compileInputs } from './utils/compileInputs';\nimport { compileOutputs } from './utils/compileOutputs';\nimport { injectBits } from './utils/injectBits';\n\nimport type { HighShaderBit, HighShaderSource } from './types';\n\n/** A high template consists of vertex and fragment source */\nexport interface HighShaderTemplate\n{\n    name?: string;\n    fragment: string;\n    vertex: string;\n}\n\nexport interface CompileHighShaderOptions\n{\n    template: HighShaderTemplate;\n    bits: HighShaderBit[];\n}\n\nconst cacheMap: {[key: string]: HighShaderSource} = Object.create(null);\nconst bitCacheMap: Map<HighShaderBit, number> = new Map();\n\nlet CACHE_UID = 0;\n\n/**\n * This function will take a HighShader template, some High fragments and then merge them in to a shader source.\n * @param options\n * @param options.template\n * @param options.bits\n */\nexport function compileHighShader({\n    template,\n    bits\n}: CompileHighShaderOptions): HighShaderSource\n{\n    const cacheId = generateCacheId(template, bits);\n\n    if (cacheMap[cacheId]) return cacheMap[cacheId];\n\n    const { vertex, fragment } = compileInputsAndOutputs(template, bits);\n\n    cacheMap[cacheId] = compileBits(vertex, fragment, bits);\n\n    return cacheMap[cacheId];\n}\n\nexport function compileHighShaderGl({\n    template,\n    bits\n}: CompileHighShaderOptions): HighShaderSource\n{\n    const cacheId = generateCacheId(template, bits);\n\n    if (cacheMap[cacheId]) return cacheMap[cacheId];\n\n    cacheMap[cacheId] = compileBits(template.vertex, template.fragment, bits);\n\n    return cacheMap[cacheId];\n}\n\nfunction compileInputsAndOutputs(template: HighShaderTemplate, bits: HighShaderBit[])\n{\n    const vertexFragments = bits.map((shaderBit) => shaderBit.vertex).filter((v) => !!v);\n    const fragmentFragments = bits.map((shaderBit) => shaderBit.fragment).filter((v) => !!v);\n\n    // WebGPU compile inputs and outputs..\n    let compiledVertex = compileInputs(vertexFragments, template.vertex, true);\n\n    compiledVertex = compileOutputs(vertexFragments, compiledVertex);\n\n    const compiledFragment = compileInputs(fragmentFragments, template.fragment, true);\n\n    return {\n        vertex: compiledVertex,\n        fragment: compiledFragment,\n    };\n}\n\nfunction generateCacheId(template: HighShaderTemplate, bits: HighShaderBit[]): string\n{\n    return bits\n        .map((highFragment) =>\n        {\n            if (!bitCacheMap.has(highFragment))\n            {\n                bitCacheMap.set(highFragment, CACHE_UID++);\n            }\n\n            return bitCacheMap.get(highFragment);\n        })\n        .sort((a, b) => a - b)\n        .join('-') + template.vertex + template.fragment;\n}\n\nfunction compileBits(vertex: string, fragment: string, bits: HighShaderBit[])\n{\n    const vertexParts = compileHooks(vertex);\n    const fragmentParts = compileHooks(fragment);\n\n    bits.forEach((shaderBit) =>\n    {\n        addBits(shaderBit.vertex, vertexParts, shaderBit.name);\n        addBits(shaderBit.fragment, fragmentParts, shaderBit.name);\n    });\n\n    return {\n        vertex: injectBits(vertex, vertexParts),\n        fragment: injectBits(fragment, fragmentParts),\n    };\n}\n","const vertexGPUTemplate = /* wgsl */`\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n        \n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n       \n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n`;\n\nconst fragmentGPUTemplate = /* wgsl */`\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n   \n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n        \n        {{start}}\n\n        var outColor:vec4<f32>;\n      \n        {{main}}\n        \n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n`;\n\nconst vertexGlTemplate = /* glsl */`\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n        \n        {{start}}\n        \n        vColor = vec4(1.);\n        \n        {{main}}\n        \n        vUV = uv;\n        \n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n`;\n\nconst fragmentGlTemplate = /* glsl */`\n   \n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n        \n        {{start}}\n\n        vec4 outColor;\n      \n        {{main}}\n        \n        finalColor = outColor * vColor;\n        \n        {{end}}\n    }\n`;\n\nexport {\n    fragmentGlTemplate,\n    fragmentGPUTemplate,\n    vertexGlTemplate,\n    vertexGPUTemplate\n};\n","export const globalUniformsBit = {\n    name: 'global-uniforms-bit',\n    vertex: {\n        header: /* wgsl */`\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        `\n    }\n};\n\nexport const globalUniformsUBOBitGl = {\n    name: 'global-uniforms-ubo-bit',\n    vertex: {\n        header: /* glsl */`\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        `\n    }\n};\n\nexport const globalUniformsBitGl = {\n    name: 'global-uniforms-bit',\n    vertex: {\n        header: /* glsl */`\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        `\n    }\n\n};\n","import { GlProgram } from '../renderers/gl/shader/GlProgram';\nimport { GpuProgram } from '../renderers/gpu/shader/GpuProgram';\nimport { compileHighShader, compileHighShaderGl } from './compiler/compileHighShader';\nimport { fragmentGlTemplate, fragmentGPUTemplate, vertexGlTemplate, vertexGPUTemplate } from './defaultProgramTemplate';\nimport { globalUniformsBit, globalUniformsBitGl } from './shader-bits/globalUniformsBit';\n\nimport type { HighShaderBit } from './compiler/types';\n\nexport function compileHighShaderGpuProgram({ bits, name }: {bits: HighShaderBit[], name: string}): GpuProgram\n{\n    const source = compileHighShader({\n        template: {\n            fragment: fragmentGPUTemplate,\n            vertex: vertexGPUTemplate,\n        },\n        bits: [\n            globalUniformsBit,\n            ...bits,\n        ]\n    });\n\n    return GpuProgram.from({\n        name,\n        vertex: {\n            source: source.vertex,\n            entryPoint: 'main',\n        },\n        fragment: {\n            source: source.fragment,\n            entryPoint: 'main',\n        },\n    });\n}\n\nexport function compileHighShaderGlProgram({ bits, name }: {bits: HighShaderBit[], name: string}): GlProgram\n{\n    return new GlProgram({\n        name,\n        ...compileHighShaderGl({\n            template: {\n                vertex: vertexGlTemplate,\n                fragment: fragmentGlTemplate,\n            },\n            bits: [\n                globalUniformsBitGl,\n                ...bits,\n            ]\n        })\n    });\n}\n","export const colorBit = {\n    name: 'color-bit',\n    vertex: {\n        header: /* wgsl */`\n            @in aColor: vec4<f32>;\n        `,\n        main: /* wgsl */`\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        `\n    }\n};\n\nexport const colorBitGl = {\n    name: 'color-bit',\n    vertex: {\n        header: /* glsl */`\n            in vec4 aColor;\n        `,\n        main: /* glsl */`\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        `\n    }\n};\n","import type { HighShaderBit } from '../compiler/types';\n\nconst textureBatchBitGpuCache: Record<number, HighShaderBit> = {};\n\n/**\n *\n * @param maxTextures - the max textures the shader can use.\n * @returns a shader bit that will allow the shader to sample multiple textures AND round pixels.\n */\nfunction generateBindingSrc(maxTextures: number): string\n{\n    const src = [];\n\n    if (maxTextures === 1)\n    {\n        src.push('@group(1) @binding(0) var textureSource1: texture_2d<f32>;');\n        src.push('@group(1) @binding(1) var textureSampler1: sampler;');\n    }\n    else\n    {\n        let bindingIndex = 0;\n\n        for (let i = 0; i < maxTextures; i++)\n        {\n            src.push(`@group(1) @binding(${bindingIndex++}) var textureSource${i + 1}: texture_2d<f32>;`);\n            src.push(`@group(1) @binding(${bindingIndex++}) var textureSampler${i + 1}: sampler;`);\n        }\n    }\n\n    return src.join('\\n');\n}\n\nfunction generateSampleSrc(maxTextures: number): string\n{\n    const src = [];\n\n    if (maxTextures === 1)\n    {\n        src.push('outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);');\n    }\n    else\n    {\n        src.push('switch vTextureId {');\n\n        for (let i = 0; i < maxTextures; i++)\n        {\n            if (i === maxTextures - 1)\n            {\n                src.push(`  default:{`);\n            }\n            else\n            {\n                src.push(`  case ${i}:{`);\n            }\n            src.push(`      outColor = textureSampleGrad(textureSource${i + 1}, textureSampler${i + 1}, vUV, uvDx, uvDy);`);\n            src.push(`      break;}`);\n        }\n\n        src.push(`}`);\n    }\n\n    return src.join('\\n');\n}\n\nexport function generateTextureBatchBit(maxTextures: number): HighShaderBit\n{\n    if (!textureBatchBitGpuCache[maxTextures])\n    {\n        textureBatchBitGpuCache[maxTextures] = {\n            name: 'texture-batch-bit',\n            vertex: {\n                header: `\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            `,\n                main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n                end: `\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            `\n            },\n            fragment: {\n                header: `\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${generateBindingSrc(maxTextures)}\n            `,\n                main: `\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${generateSampleSrc(maxTextures)}\n            `\n            }\n        };\n    }\n\n    return textureBatchBitGpuCache[maxTextures];\n}\n\nconst textureBatchBitGlCache: Record<number, HighShaderBit> = {};\n\n/**\n *\n * @param maxTextures - the max textures the shader can use.\n * @returns a shader bit that will allow the shader to sample multiple textures AND round pixels.\n */\nfunction generateSampleGlSrc(maxTextures: number): string\n{\n    const src = [];\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        if (i > 0)\n        {\n            src.push('else');\n        }\n\n        if (i < maxTextures - 1)\n        {\n            src.push(`if(vTextureId < ${i}.5)`);\n        }\n\n        src.push('{');\n        src.push(`\\toutColor = texture(uTextures[${i}], vUV);`);\n        src.push('}');\n    }\n\n    return src.join('\\n');\n}\n\nexport function generateTextureBatchBitGl(maxTextures: number): HighShaderBit\n{\n    if (!textureBatchBitGlCache[maxTextures])\n    {\n        textureBatchBitGlCache[maxTextures] = {\n            name: 'texture-batch-bit',\n            vertex: {\n                header: `\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            `,\n                main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n                end: `\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            `\n            },\n            fragment: {\n                header: `\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${maxTextures}];\n\n            `,\n                main: `\n\n                ${generateSampleGlSrc(maxTextures)}\n            `\n            }\n        };\n    }\n\n    return textureBatchBitGlCache[maxTextures];\n}\n","export const roundPixelsBit = {\n    name: 'round-pixels-bit',\n    vertex: {\n        header: /* wgsl */`\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> \n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    }\n};\n\nexport const roundPixelsBitGl = {\n    name: 'round-pixels-bit',\n    vertex: {\n        header: /* glsl */`   \n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {       \n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    }\n};\n\n","import { Bounds } from '../../../scene/container/bounds/Bounds';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds';\n\nimport type { Container } from '../../../scene/container/Container';\n\nconst tempBounds = new Bounds();\n\nexport function addMaskBounds(mask: Container, bounds: Bounds, skipUpdateTransform: boolean): void\n{\n    const boundsToMask = tempBounds;\n\n    mask.measurable = true;\n\n    getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n\n    bounds.addBoundsMask(boundsToMask);\n\n    mask.measurable = false;\n}\n\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool';\nimport { warn } from '../../../utils/logging/warn';\n\nimport type { Matrix } from '../../../maths/matrix/Matrix';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Container } from '../../../scene/container/Container';\n\nexport function addMaskLocalBounds(mask: Container, bounds: Bounds, localRoot: Container): void\n{\n    const boundsToMask = boundsPool.get();\n\n    mask.measurable = true;\n\n    const tempMatrix = matrixPool.get().identity();\n\n    const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n\n    getLocalBounds(mask, boundsToMask, relativeMask);\n\n    mask.measurable = false;\n\n    bounds.addBoundsMask(boundsToMask);\n\n    matrixPool.return(tempMatrix);\n    boundsPool.return(boundsToMask);\n}\n\nexport function getMatrixRelativeToParent(target: Container, root: Container, matrix: Matrix): Matrix\n{\n    if (!target)\n    {\n        // we have reach the top of the tree!\n        // #if _DEBUG\n        warn('Mask bounds, renderable is not inside the root container');\n        // #endif\n\n        return matrix;\n    }\n\n    if (target !== root)\n    {\n        getMatrixRelativeToParent(target.parent, root, matrix);\n\n        target.updateLocalTransform();\n\n        matrix.append(target.localTransform);\n    }\n\n    return matrix;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Sprite } from '../../../scene/sprite/Sprite';\nimport { addMaskBounds } from '../utils/addMaskBounds';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Point } from '../../../maths/point/Point';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Container } from '../../../scene/container/Container';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class AlphaMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: Container;\n    public inverse: boolean = false;\n    public pipe = 'alphaMask';\n    public renderMaskToTexture: boolean;\n\n    constructor(options?: {mask: Container})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: Container): void\n    {\n        this.mask = mask;\n\n        // TODO - might want to change this to adjust on the fly\n        // user may add children to the sprite..\n        this.renderMaskToTexture = !(mask instanceof Sprite);\n\n        this.mask.renderable = this.renderMaskToTexture;\n        this.mask.includeInBuild = !this.renderMaskToTexture;\n\n        this.mask.measurable = false;\n    }\n\n    public reset()\n    {\n        this.mask.measurable = true;\n        this.mask = null;\n    }\n\n    public addBounds(bounds: Bounds, skipUpdateTransform?: boolean): void\n    {\n        if (!this.inverse)\n        {\n            addMaskBounds(this.mask, bounds, skipUpdateTransform);\n        }\n    }\n\n    public addLocalBounds(bounds: Bounds, localRoot: Container): void\n    {\n        addMaskLocalBounds(this.mask, bounds, localRoot);\n    }\n\n    public containsPoint(point: Point, hitTestFn: (container: Container, point: Point) => boolean): boolean\n    {\n        const mask = this.mask as any;\n\n        // if the point is in the mask, yay!\n        return hitTestFn(mask, point);\n    }\n\n    public destroy(): void\n    {\n        this.reset();\n    }\n\n    public static test(mask: any): boolean\n    {\n        return mask instanceof Sprite;\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class ColorMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: number;\n    public pipe = 'colorMask';\n\n    constructor(options: {mask: number})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: number): void\n    {\n        this.mask = mask;\n    }\n\n    public destroy(): void\n    {\n        // nothing to destroy\n    }\n\n    public static test(mask: any): boolean\n    {\n        return typeof mask === 'number';\n    }\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { Container } from '../../../scene/container/Container';\nimport { addMaskBounds } from '../utils/addMaskBounds';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds';\n\nimport type { ExtensionMetadata } from '../../../extensions/Extensions';\nimport type { Point } from '../../../maths/point/Point';\nimport type { Bounds } from '../../../scene/container/bounds/Bounds';\nimport type { Effect } from '../../../scene/container/Effect';\nimport type { PoolItem } from '../../../utils/pool/Pool';\n\nexport class StencilMask implements Effect, PoolItem\n{\n    public static extension: ExtensionMetadata = ExtensionType.MaskEffect;\n\n    public priority = 0;\n    public mask: Container;\n    public pipe = 'stencilMask';\n\n    constructor(options: {mask: Container})\n    {\n        if (options?.mask)\n        {\n            this.init(options.mask);\n        }\n    }\n\n    public init(mask: Container): void\n    {\n        this.mask = mask;\n        this.mask.includeInBuild = false;\n        this.mask.measurable = false;\n    }\n\n    public reset()\n    {\n        this.mask.measurable = true;\n        this.mask.includeInBuild = true;\n        this.mask = null;\n    }\n\n    public addBounds(bounds: Bounds, skipUpdateTransform: boolean): void\n    {\n        addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n\n    public addLocalBounds(bounds: Bounds, localRoot: Container): void\n    {\n        addMaskLocalBounds(this.mask, bounds, localRoot);\n    }\n\n    public containsPoint(point: Point, hitTestFn: (container: Container, point: Point) => boolean): boolean\n    {\n        const mask = this.mask as any;\n\n        // if the point is in the mask, yay!\n        return hitTestFn(mask, point);\n    }\n\n    public destroy(): void\n    {\n        this.reset();\n    }\n\n    public static test(mask: any): boolean\n    {\n        return mask instanceof Container;\n    }\n}\n","import { extensions } from '../extensions/Extensions';\nimport { AlphaMask } from './mask/alpha/AlphaMask';\nimport { ColorMask } from './mask/color/ColorMask';\nimport { StencilMask } from './mask/stencil/StencilMask';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource';\nimport './renderers/shared/texture/utils/textureFrom';\nimport './mask/MaskEffectManager';\n\n/**\n * The rendering namespace contains all the classes used for core rendering in PixiJS\n * this includes all the lower level resources such as Textures, Shaders, State, Buffers,\n * Geometry and the systems required to use them. This covers WebGL and WebGPU and their shared classes.\n *\n * To automatically create a renderer based on available resources, see the {@link rendering.autoDetectRenderer} function.\n * @namespace rendering\n */\n\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n\n","export enum CLEAR\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    NONE = 0,\n    COLOR = 16384,\n    STENCIL = 1024,\n    DEPTH = 256,\n\n    COLOR_DEPTH = COLOR | DEPTH,\n    COLOR_STENCIL = COLOR | STENCIL,\n    DEPTH_STENCIL = DEPTH | STENCIL,\n    ALL = COLOR | DEPTH | STENCIL,\n\n}\n\n/** Used for clearing render textures. true is the same as `ALL` false is the same as `NONE` */\nexport type CLEAR_OR_BOOL = CLEAR | boolean;\n","import { getTestContext } from './getTestContext';\n\nimport type { PRECISION } from '../const';\n\nlet maxFragmentPrecision: PRECISION;\n\nexport function getMaxFragmentPrecision(): PRECISION\n{\n    if (!maxFragmentPrecision)\n    {\n        maxFragmentPrecision = 'mediump';\n        const gl = getTestContext();\n\n        if (gl)\n        {\n            if (gl.getShaderPrecisionFormat)\n            {\n                const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n\n                maxFragmentPrecision = shaderFragment.precision ? 'highp' : 'mediump';\n            }\n        }\n    }\n\n    return maxFragmentPrecision;\n}\n","export function addProgramDefines(src: string, isES300: boolean, isFragment?: boolean)\n{\n    if (isES300) return src;\n\n    if (isFragment)\n    {\n        src = src.replace('out vec4 finalColor;', '');\n\n        return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n    }\n\n    return `\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n","import type { PRECISION } from '../../const';\n\ninterface EnsurePrecisionOptions\n{\n    requestedVertexPrecision: PRECISION;\n    requestedFragmentPrecision: PRECISION;\n    maxSupportedVertexPrecision: PRECISION;\n    maxSupportedFragmentPrecision: PRECISION;\n}\n\n/**\n * Sets the float precision on the shader, ensuring the device supports the request precision.\n * If the precision is already present, it just ensures that the device is able to handle it.\n * @param src\n * @param options\n * @param options.requestedVertexPrecision\n * @param options.requestedFragmentPrecision\n * @param options.maxSupportedVertexPrecision\n * @param options.maxSupportedFragmentPrecision\n * @param isFragment\n * @private\n */\nexport function ensurePrecision(\n    src: string,\n    options: EnsurePrecisionOptions,\n    isFragment: boolean,\n): string\n{\n    const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n\n    if (src.substring(0, 9) !== 'precision')\n    {\n        // no precision supplied, so PixiJS will add the requested level.\n        let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n\n        // If highp is requested but not supported, downgrade precision to a level all devices support.\n        if (precision === 'highp' && maxSupportedPrecision !== 'highp')\n        {\n            precision = 'mediump';\n        }\n\n        return `precision ${precision} float;\\n${src}`;\n    }\n    else if (maxSupportedPrecision !== 'highp' && src.substring(0, 15) === 'precision highp')\n    {\n        // precision was supplied, but at a level this device does not support, so downgrading to mediump.\n        return src.replace('precision highp', 'precision mediump');\n    }\n\n    return src;\n}\n","export function insertVersion(src: string, isES300: boolean): string\n{\n    if (!isES300) return src;\n\n    return `#version 300 es\\n${src}`;\n}\n","const fragmentNameCache: { [key: string]: number } = {};\nconst VertexNameCache: { [key: string]: number } = {};\n\nexport function setProgramName(src: string, { name = `pixi-program` }: { name: string; }, isFragment = true)\n{\n    name = name.replace(/\\s+/g, '-');\n\n    name += isFragment ? '-fragment' : '-vertex';\n\n    const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n\n    if (nameCache[name])\n    {\n        nameCache[name]++;\n        name += `-${nameCache[name]}`;\n    }\n    else\n    {\n        nameCache[name] = 1;\n    }\n\n    // if it already contains the define return\n    if (src.indexOf('#define SHADER_NAME') !== -1) return src;\n\n    const shaderName = `#define SHADER_NAME ${name}`;\n\n    return `${shaderName}\\n${src}`;\n}\n","export function stripVersion(src: string, isES300: boolean): string\n{\n    if (!isES300) return src;\n\n    return src.replace('#version 300 es', '');\n}\n","import { createIdFromString } from '../../shared/utils/createIdFromString';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision';\nimport { insertVersion } from './program/preprocessors/insertVersion';\nimport { setProgramName } from './program/preprocessors/setProgramName';\nimport { stripVersion } from './program/preprocessors/stripVersion';\n\nimport type { TypedArray } from '../../shared/buffer/Buffer';\nimport type { ExtractedAttributeData } from './program/extractAttributesFromGlProgram';\n\nexport interface GlAttributeData\n{\n    type: string;\n    size: number;\n    location: number;\n    name: string;\n}\n\nexport interface GlUniformData\n{\n    name: string;\n    index: number;\n    type: string;\n    size: number;\n    isArray: boolean;\n    value: any;\n}\n\nexport interface GlUniformBlockData\n{\n    index: number;\n    name: string;\n    size: number;\n    value?: TypedArray;\n}\n\n/**\n * The options for the gl program\n * @memberof rendering\n */\nexport interface GlProgramOptions\n{\n    /** The fragment glsl shader source. */\n    fragment: string;\n    /** The vertex glsl shader source. */\n    vertex: string;\n    /** the name of the program, defaults to 'pixi-program' */\n    name?: string;\n    /** the preferred vertex precision for the shader, this may not be used if the device does not support it  */\n    preferredVertexPrecision?: string;\n    /** the preferred fragment precision for the shader, this may not be used if the device does not support it  */\n    preferredFragmentPrecision?: string;\n}\n\nconst processes: Record<string, ((source: string, options: any, isFragment?: boolean) => string)> = {\n    // strips any version headers..\n    stripVersion,\n    // adds precision string if not already present\n    ensurePrecision,\n    // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n    addProgramDefines,\n    // add the program name to the shader\n    setProgramName,\n    // add the version string to the shader header\n    insertVersion,\n};\n\nconst programCache: Record<string, GlProgram> = Object.create(null);\n\n/**\n * A wrapper for a WebGL Program. You can create one and then pass it to a shader.\n * This will manage the WebGL program that is compiled and uploaded to the GPU.\n *\n * To get the most out of this class, you should be familiar with glsl shaders and how they work.\n * @see https://developer.mozilla.org/en-US/docs/Web/API/WebGLProgram\n * @example\n *\n * // Create a new program\n * const program = new GlProgram({\n *   vertex: '...',\n *   fragment: '...',\n * });\n *\n *\n * There are a few key things that pixi shader will do for you automatically:\n * <br>\n * - If no precision is provided in the shader, it will be injected into the program source for you.\n * This precision will be taken form the options provided, if none is provided,\n * then the program will default to the defaultOptions.\n * <br>\n * - It will inject the program name into the shader source if none is provided.\n * <br>\n *  - It will set the program version to 300 es.\n *\n * For optimal usage and best performance, its best to reuse programs as much as possible.\n * You should use the {@link GlProgram.from} helper function to create programs.\n * @class\n * @memberof rendering\n */\nexport class GlProgram\n{\n    /** The default options used by the program. */\n    public static defaultOptions: Partial<GlProgramOptions> = {\n        preferredVertexPrecision: 'highp',\n        preferredFragmentPrecision: 'mediump',\n    };\n\n    /** the fragment glsl shader source. */\n    public readonly fragment?: string;\n    /** the vertex glsl shader source */\n    public readonly vertex?: string;\n    /**\n     * attribute data extracted from the program once created this happens when the program is used for the first time\n     * @internal\n     * @ignore\n     */\n    public _attributeData: Record<string, ExtractedAttributeData>;\n    /**\n     * uniform data extracted from the program once created this happens when the program is used for the first time\n     * @internal\n     * @ignore\n     */\n    public _uniformData: Record<string, GlUniformData>;\n    /**\n     * uniform data extracted from the program once created this happens when the program is used for the first time\n     * @internal\n     * @ignore\n     */\n    public _uniformBlockData: Record<string, GlUniformBlockData>;\n    /** details on how to use this program with transform feedback */\n    public transformFeedbackVaryings?: {names: string[], bufferMode: 'separate' | 'interleaved'};\n    /**\n     * the key that identifies the program via its source vertex + fragment\n     * @internal\n     * @ignore\n     */\n    public readonly _key: number;\n\n    /**\n     * Creates a shiny new GlProgram. Used by WebGL renderer.\n     * @param options - The options for the program.\n     */\n    constructor(options: GlProgramOptions)\n    {\n        options = { ...GlProgram.defaultOptions, ...options };\n\n        // only need to check one as they both need to be the same or\n        // errors ensue!\n        const isES300 = options.fragment.indexOf('#version 300 es') !== -1;\n\n        const preprocessorOptions = {\n            stripVersion: isES300,\n            ensurePrecision: {\n                requestedFragmentPrecision: options.preferredFragmentPrecision,\n                requestedVertexPrecision: options.preferredVertexPrecision,\n                maxSupportedVertexPrecision: 'highp',\n                maxSupportedFragmentPrecision: getMaxFragmentPrecision(),\n            },\n            setProgramName: {\n                name: options.name,\n            },\n            addProgramDefines: isES300,\n            insertVersion: isES300\n        };\n\n        let fragment = options.fragment;\n        let vertex = options.vertex;\n\n        Object.keys(processes).forEach((processKey) =>\n        {\n            const processOptions = preprocessorOptions[processKey as keyof typeof preprocessorOptions];\n\n            fragment = processes[processKey](fragment, processOptions, true);\n            vertex = processes[processKey](vertex, processOptions, false);\n        });\n\n        this.fragment = fragment;\n        this.vertex = vertex;\n\n        this._key = createIdFromString(`${this.vertex}:${this.fragment}`, 'gl-program');\n    }\n\n    /** destroys the program */\n    public destroy(): void\n    {\n        (this.fragment as null) = null;\n        (this.vertex as null) = null;\n\n        this._attributeData = null;\n        this._uniformData = null;\n        this._uniformBlockData = null;\n\n        this.transformFeedbackVaryings = null;\n    }\n\n    /**\n     * Helper function that creates a program for a given source.\n     * It will check the program cache if the program has already been created.\n     * If it has that one will be returned, if not a new one will be created and cached.\n     * @param options - The options for the program.\n     * @returns A program using the same source\n     */\n    public static from(options: GlProgramOptions): GlProgram\n    {\n        const key = `${options.vertex}:${options.fragment}`;\n\n        if (!programCache[key])\n        {\n            programCache[key] = new GlProgram(options);\n        }\n\n        return programCache[key];\n    }\n}\n","import { UniformGroup } from '../../shared/shader/UniformGroup';\n\nconst batchSamplersUniformGroupHash: Record<number, UniformGroup> = {};\n\n/**\n * Automatically generates a uniform group that holds the texture samplers for a shader.\n * This is used mainly by the shaders that batch textures!\n * @param maxTextures - the number of textures that this uniform group will contain.\n * @returns a uniform group that holds the texture samplers.\n */\nexport function getBatchSamplersUniformGroup(maxTextures: number)\n{\n    let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n\n    if (batchSamplersUniformGroup) return batchSamplersUniformGroup;\n\n    const sampleValues = new Int32Array(maxTextures);\n\n    for (let i = 0; i < maxTextures; i++)\n    {\n        sampleValues[i] = i;\n    }\n\n    batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n        uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n    }, { isStatic: true });\n\n    return batchSamplersUniformGroup;\n}\n","import { DOMAdapter } from '../../../../../environment/adapter';\n\nimport type { GlRenderingContext } from '../../context/GlRenderingContext';\n\nlet context: GlRenderingContext;\n\n/**\n * returns a little WebGL context to use for program inspection.\n * @static\n * @private\n * @returns {WebGLRenderingContext} a gl context to test with\n */\nexport function getTestContext(): GlRenderingContext\n{\n    if (!context || context?.isContextLost())\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        context = canvas.getContext('webgl', {}) as GlRenderingContext;\n    }\n\n    return context;\n}\n","import type { BindResource } from './BindResource';\n\n/**\n * A bind group is a collection of resources that are bound together for use by a shader.\n * They are essentially a wrapper for the WebGPU BindGroup class. But with the added bonus\n * that WebGL can also work with them.\n * @see https://gpuweb.github.io/gpuweb/#dictdef-gpubindgroupdescriptor\n * @example\n * // Create a bind group with a single texture and sampler\n * const bindGroup = new BindGroup({\n *    uTexture: texture.source,\n *    uTexture: texture.style,\n * });\n *\n * Bind groups resources must implement the {@link BindResource} interface.\n * The following resources are supported:\n * - {@link TextureSource}\n * - {@link TextureStyle}\n * - {@link Buffer}\n * - {@link BufferResource}\n * - {@link UniformGroup}\n *\n * The keys in the bind group must correspond to the names of the resources in the GPU program.\n *\n * This bind group class will also watch for changes in its resources ensuring that the changes\n * are reflected in the WebGPU BindGroup.\n * @memberof rendering\n */\nexport class BindGroup\n{\n    /** The resources that are bound together for use by a shader. */\n    public resources: Record<string, BindResource> = Object.create(null);\n    /**\n     * a key used internally to match it up to a WebGPU Bindgroup\n     * @internal\n     * @ignore\n     */\n    public _key: string;\n    private _dirty = true;\n\n    /**\n     * Create a new instance eof the Bind Group.\n     * @param resources - The resources that are bound together for use by a shader.\n     */\n    constructor(resources?: Record<string, BindResource>)\n    {\n        let index = 0;\n\n        for (const i in resources)\n        {\n            const resource: BindResource = resources[i];\n\n            this.setResource(resource, index++);\n        }\n\n        this._updateKey();\n    }\n\n    /**\n     * Updates the key if its flagged as dirty. This is used internally to\n     * match this bind group to a WebGPU BindGroup.\n     * @internal\n     * @ignore\n     */\n    public _updateKey(): void\n    {\n        if (!this._dirty) return;\n\n        this._dirty = false;\n\n        const keyParts = [];\n        let index = 0;\n\n        // TODO - lets use big ints instead of strings...\n        for (const i in this.resources)\n        {\n            // TODO make this consistent...\n            keyParts[index++] = this.resources[i]._resourceId;\n        }\n\n        this._key = keyParts.join('|');\n    }\n\n    /**\n     * Set a resource at a given index. this function will\n     * ensure that listeners will be removed from the current resource\n     * and added to the new resource.\n     * @param resource - The resource to set.\n     * @param index - The index to set the resource at.\n     */\n    public setResource(resource: BindResource, index: number): void\n    {\n        const currentResource = this.resources[index];\n\n        if (resource === currentResource) return;\n\n        if (currentResource)\n        {\n            resource.off?.('change', this.onResourceChange, this);\n        }\n\n        resource.on?.('change', this.onResourceChange, this);\n\n        this.resources[index] = resource;\n        this._dirty = true;\n    }\n\n    /**\n     * Returns the resource at the current specified index.\n     * @param index - The index of the resource to get.\n     * @returns - The resource at the specified index.\n     */\n    public getResource(index: number): BindResource\n    {\n        return this.resources[index];\n    }\n\n    /**\n     * Used internally to 'touch' each resource, to ensure that the GC\n     * knows that all resources in this bind group are still being used.\n     * @param tick - The current tick.\n     * @internal\n     * @ignore\n     */\n    public _touch(tick: number)\n    {\n        const resources = this.resources;\n\n        for (const i in resources)\n        {\n            resources[i]._touched = tick;\n        }\n    }\n\n    /** Destroys this bind group and removes all listeners. */\n    public destroy()\n    {\n        const resources = this.resources;\n\n        for (const i in resources)\n        {\n            const resource = resources[i];\n\n            resource.off?.('change', this.onResourceChange, this);\n        }\n\n        this.resources = null;\n    }\n\n    protected onResourceChange(resource: BindResource)\n    {\n        this._dirty = true;\n\n        // check if a resource has been destroyed, if it has then we need to destroy this bind group\n        // using this bind group with a destroyed resource will cause the renderer to explode :)\n        if (resource.destroyed)\n        {\n            // free up the resource\n            const resources = this.resources;\n\n            for (const i in resources)\n            {\n                if (resources[i] === resource)\n                {\n                    resources[i] = null;\n                }\n            }\n        }\n        else\n        {\n            this._updateKey();\n        }\n    }\n}\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat';\n\nimport type { ExtractedAttributeData } from '../../../gl/shader/program/extractAttributesFromGlProgram';\nimport type { VertexFormat } from '../../../shared/geometry/const';\nimport type { ProgramSource } from '../GpuProgram';\n\nconst WGSL_TO_VERTEX_TYPES: Record<string, VertexFormat> = {\n\n    f32:  'float32',\n    'vec2<f32>': 'float32x2',\n    'vec3<f32>': 'float32x3',\n    'vec4<f32>': 'float32x4',\n    vec2f: 'float32x2',\n    vec3f: 'float32x3',\n    vec4f: 'float32x4',\n\n    i32: 'sint32',\n    'vec2<i32>': 'sint32x2',\n    'vec3<i32>': 'sint32x3',\n    'vec4<i32>': 'sint32x4',\n\n    u32: 'uint32',\n    'vec2<u32>': 'uint32x2',\n    'vec3<u32>': 'uint32x3',\n    'vec4<u32>': 'uint32x4',\n\n    bool: 'uint32',\n    'vec2<bool>': 'uint32x2',\n    'vec3<bool>': 'uint32x3',\n    'vec4<bool>': 'uint32x4',\n};\n\nexport function extractAttributesFromGpuProgram(\n    { source, entryPoint }: ProgramSource\n): Record<string, ExtractedAttributeData>\n{\n    const results: Record<string, ExtractedAttributeData> = {};\n\n    // Step 1: Find the start of the mainVert function using string methods\n    const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n\n    if (mainVertStart !== -1)\n    {\n        // Step 2: Find the index of the next '->' after the start of the mainVert function\n        const arrowFunctionStart = source.indexOf('->', mainVertStart);\n\n        if (arrowFunctionStart !== -1)\n        {\n            const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n\n            // Apply the inputs regex directly to the trimmed string\n            const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n            let match;\n\n            while ((match = inputsRegex.exec(functionArgsSubstring)) !== null)\n            {\n                const format = WGSL_TO_VERTEX_TYPES[match[3] as VertexFormat] ?? 'float32';\n\n                results[match[2]] = {\n                    location: parseInt(match[1], 10),\n                    format,\n                    stride: getAttributeInfoFromFormat(format).stride,\n                    offset: 0,\n                    instance: false,\n                    start: 0,\n                };\n            }\n        }\n    }\n\n    return results;\n}\n","export interface StructsAndGroups\n{\n    groups: {\n        group: number;\n        binding: number;\n        name: string;\n        isUniform: boolean;\n        type: string;\n    }[];\n    structs: {\n        name: string;\n        members: Record<string, string>;\n    }[];\n}\n\nexport function extractStructAndGroups(wgsl: string): StructsAndGroups\n{\n    // Patterns for parsing the WGSL file\n    const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n    const groupPattern = /@group\\((\\d+)\\)/;\n    const bindingPattern = /@binding\\((\\d+)\\)/;\n    const namePattern = /var(<[^>]+>)? (\\w+)/;\n    const typePattern = /:\\s*(\\w+)/;\n    const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n    const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n    const structName = /struct\\s+(\\w+)/;\n\n    // Find the @group and @binding annotations\n    const groups = wgsl.match(linePattern)?.map((item) => ({\n        group: parseInt(item.match(groupPattern)[1], 10),\n        binding: parseInt(item.match(bindingPattern)[1], 10),\n        name: item.match(namePattern)[2],\n        isUniform: item.match(namePattern)[1] === '<uniform>',\n        type: item.match(typePattern)[1],\n    }));\n\n    if (!groups)\n    {\n        return {\n            groups: [],\n            structs: [],\n        };\n    }\n\n    // Find the structs\n    const structs = wgsl\n        .match(structPattern)\n        ?.map((struct) =>\n        {\n            const name = struct.match(structName)[1];\n            const members = struct.match(structMemberPattern).reduce((acc: Record<string, string>, member) =>\n            {\n                const [name, type] = member.split(':');\n\n                acc[name.trim()] = type.trim();\n\n                return acc;\n            }, {});\n\n            if (!members)\n            {\n                return null;\n            }\n\n            return { name, members };\n            // Only include the structs mentioned in the @group/@binding annotations\n        })\n        .filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n\n    return {\n        groups,\n        structs,\n    };\n}\n","export enum ShaderStage\n    {\n    VERTEX = 1,\n    FRAGMENT = 2,\n    COMPUTE = 4\n}\n","import { ShaderStage } from '../../../shared/shader/const';\n\nimport type { ProgramPipelineLayoutDescription } from '../GpuProgram';\nimport type { StructsAndGroups } from './extractStructAndGroups';\n\nexport function generateGpuLayoutGroups({ groups }: StructsAndGroups): ProgramPipelineLayoutDescription\n{\n    const layout: ProgramPipelineLayoutDescription = [];\n\n    for (let i = 0; i < groups.length; i++)\n    {\n        const group = groups[i];\n\n        if (!layout[group.group])\n        {\n            layout[group.group] = [];\n        }\n\n        if (group.isUniform)\n        {\n            layout[group.group].push({\n                binding: group.binding,\n                visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n                buffer: {\n                    type: 'uniform'\n                }\n            });\n        }\n        else if (group.type === 'sampler')\n        {\n            layout[group.group].push({\n                binding: group.binding,\n                visibility: ShaderStage.FRAGMENT,\n                sampler: {\n                    type: 'filtering'\n                }\n            });\n        }\n        else if (group.type === 'texture_2d')\n        {\n            layout[group.group].push({\n                binding: group.binding,\n                visibility: ShaderStage.FRAGMENT,\n                texture: {\n                    sampleType: 'float',\n                    viewDimension: '2d',\n                    multisampled: false,\n                }\n            });\n        }\n    }\n\n    return layout;\n}\n","import type { ProgramLayout } from '../GpuProgram';\nimport type { StructsAndGroups } from './extractStructAndGroups';\n\nexport function generateLayoutHash({ groups }: StructsAndGroups): ProgramLayout\n{\n    const layout: ProgramLayout = [];\n\n    for (let i = 0; i < groups.length; i++)\n    {\n        const group = groups[i];\n\n        if (!layout[group.group])\n        {\n            layout[group.group] = {};\n        }\n\n        layout[group.group][group.name] = group.binding;\n    }\n\n    return layout;\n}\n","import type { StructsAndGroups } from './extractStructAndGroups';\n\nexport function removeStructAndGroupDuplicates(\n    vertexStructsAndGroups: StructsAndGroups,\n    fragmentStructsAndGroups: StructsAndGroups\n)\n{\n    const structNameSet = new Set();\n    const dupeGroupKeySet = new Set();\n\n    const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs]\n        .filter((struct) =>\n        {\n            if (structNameSet.has(struct.name))\n            {\n                return false;\n            }\n            structNameSet.add(struct.name);\n\n            return true;\n        });\n\n    const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups]\n        .filter((group) =>\n        {\n            const key = `${group.name}-${group.binding}`;\n\n            if (dupeGroupKeySet.has(key))\n            {\n                return false;\n            }\n            dupeGroupKeySet.add(key);\n\n            return true;\n        });\n\n    return { structs, groups };\n}\n","import { createIdFromString } from '../../shared/utils/createIdFromString';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups';\nimport { generateLayoutHash } from './utils/generateLayoutHash';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates';\n\nimport type { ExtractedAttributeData } from '../../gl/shader/program/extractAttributesFromGlProgram';\nimport type { StructsAndGroups } from './utils/extractStructAndGroups';\n\n/**\n * a WebGPU descriptions of how the program is laid out\n * @see https://gpuweb.github.io/gpuweb/#gpupipelinelayout\n * @memberof rendering\n */\nexport type ProgramPipelineLayoutDescription = GPUBindGroupLayoutEntry[][];\n/**\n * a map the maps names of uniforms to group indexes\n * @memberof rendering\n */\nexport type ProgramLayout = Record<string, number>[];\n\n/**\n * the program source\n * @memberof rendering\n */\nexport interface ProgramSource\n{\n    /** The wgsl source code of the shader. */\n    source: string;\n    /** The main function to run in this shader */\n    entryPoint?: string;\n}\n\n/**\n * The options for the gpu program\n * @memberof rendering\n */\nexport interface GpuProgramOptions\n{\n    /**\n     * the name of the program, this is added to the label of the GPU Program created\n     * under the hood. Makes it much easier to debug!\n     */\n    name?: string;\n    /** The fragment glsl shader source. */\n    fragment?: ProgramSource;\n    /** The vertex glsl shader source. */\n    vertex?: ProgramSource;\n    /** The layout of the program. If not provided, it will be generated from the shader sources. */\n    layout?: ProgramLayout;\n    /** The gpu layout of the program. If not provided, it will be generated from the shader sources. */\n    gpuLayout?: ProgramPipelineLayoutDescription;\n}\n\nconst programCache: Record<string, GpuProgram> = Object.create(null);\n\n/**\n * A wrapper for a WebGPU Program, specifically designed for the WebGPU renderer.\n * This class facilitates the creation and management of shader code that integrates with the WebGPU pipeline.\n *\n * To leverage the full capabilities of this class, familiarity with WGSL shaders is recommended.\n * @see https://gpuweb.github.io/gpuweb/#index\n * @example\n *\n * // Create a new program\n * const program = new GpuProgram({\n *   vertex: {\n *    source: '...',\n *    entryPoint: 'main',\n *   },\n *   fragment:{\n *    source: '...',\n *    entryPoint: 'main',\n *   },\n * });\n *\n *\n * Note: Both fragment and vertex shader sources can coexist within a single WGSL source file\n * this can make things a bit simpler.\n *\n * For optimal usage and best performance, it help to reuse programs whenever possible.\n * The {@link GpuProgram.from} helper function is designed for this purpose, utilizing an\n * internal cache to efficiently manage and retrieve program instances.\n * By leveraging this function, you can significantly reduce overhead and enhance the performance of your rendering pipeline.\n *\n * An important distinction between WebGL and WebGPU regarding program data retrieval:\n * While WebGL allows extraction of program information directly from its compiled state,\n * WebGPU does not offer such a capability. Therefore, in the context of WebGPU, we're required\n * to manually extract the program layout information from the source code itself.\n * @memberof rendering\n */\nexport class GpuProgram\n{\n    /** The fragment glsl shader source. */\n    public readonly fragment?: ProgramSource;\n    /** The vertex glsl shader source */\n    public readonly vertex?: ProgramSource;\n\n    /**\n     * Mapping of uniform names to group indexes for organizing shader program uniforms.\n     * Automatically generated from shader sources if not provided.\n     * @example\n     * // Assuming a shader with two uniforms, `u_time` and `u_resolution`, grouped respectively:\n     * [\n     *   { \"u_time\": 0 },\n     *   { \"u_resolution\": 1 }\n     * ]\n     */\n    public readonly layout: ProgramLayout;\n\n    /**\n     * Configuration for the WebGPU bind group layouts, detailing resource organization for the shader.\n     * Generated from shader sources if not explicitly provided.\n     * @example\n     * // Assuming a shader program that requires two bind groups:\n     * [\n     *   // First bind group layout entries\n     *   [{ binding: 0, visibility: GPUShaderStage.VERTEX, type: \"uniform-buffer\" }],\n     *   // Second bind group layout entries\n     *   [{ binding: 1, visibility: GPUShaderStage.FRAGMENT, type: \"sampler\" },\n     *    { binding: 2, visibility: GPUShaderStage.FRAGMENT, type: \"sampled-texture\" }]\n     * ]\n     */\n    public readonly gpuLayout: ProgramPipelineLayoutDescription;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _layoutKey = 0;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _attributeLocationsKey = 0;\n\n    /** the structs and groups extracted from the shader sources */\n    public readonly structsAndGroups: StructsAndGroups;\n    /**\n     * the name of the program, this is added to the label of the GPU Program created under the hood.\n     * Makes it much easier to debug!\n     */\n    public readonly name: string;\n    private _attributeData: Record<string, ExtractedAttributeData>;\n\n    /** if true, the program will automatically assign global uniforms to group[0] */\n    public autoAssignGlobalUniforms: boolean;\n    /** if true, the program will automatically assign local uniforms to group[1] */\n    public autoAssignLocalUniforms: boolean;\n\n    /**\n     * Create a new GpuProgram\n     * @param options - The options for the gpu program\n     */\n    constructor(options: GpuProgramOptions)\n    {\n        const { fragment, vertex, layout, gpuLayout, name } = options;\n\n        this.name = name;\n\n        this.fragment = fragment;\n        this.vertex = vertex;\n\n        // TODO this should be cached - or dealt with at a system level.\n        if (fragment.source === vertex.source)\n        {\n            const structsAndGroups = extractStructAndGroups(fragment.source);\n\n            this.structsAndGroups = structsAndGroups;\n        }\n        else\n        {\n            const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n            const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n\n            this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n        }\n\n        // todo layout\n        this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n\n        // struct properties!\n\n        this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n\n        this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== undefined);\n        this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== undefined);\n\n        this._generateProgramKey();\n    }\n\n    // TODO maker this pure\n    private _generateProgramKey()\n    {\n        const { vertex, fragment } = this;\n\n        const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n\n        this._layoutKey = createIdFromString(bigKey, 'program');\n    }\n\n    get attributeData()\n    {\n        this._attributeData ??= extractAttributesFromGpuProgram(this.vertex);\n\n        return this._attributeData;\n    }\n    /** destroys the program */\n    public destroy(): void\n    {\n        (this.gpuLayout as null) = null;\n        (this.layout as null) = null;\n        (this.structsAndGroups as null) = null;\n        (this.fragment as null) = null;\n        (this.vertex as null) = null;\n    }\n\n    /**\n     * Helper function that creates a program for a given source.\n     * It will check the program cache if the program has already been created.\n     * If it has that one will be returned, if not a new one will be created and cached.\n     * @param options - The options for the program.\n     * @returns A program using the same source\n     */\n    public static from(options: GpuProgramOptions): GpuProgram\n    {\n        // eslint-disable-next-line max-len\n        const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n\n        if (!programCache[key])\n        {\n            programCache[key] = new GpuProgram(options);\n        }\n\n        return programCache[key];\n    }\n}\n\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid';\nimport { BufferUsage } from './const';\n\nimport type { BindResource } from '../../gpu/shader/BindResource';\n\n/** All the various typed arrays that exist in js */\n// eslint-disable-next-line max-len\nexport type TypedArray = Int8Array | Uint8Array | Int16Array | Uint16Array | Int32Array | Uint32Array | Uint8ClampedArray | Float32Array | Float64Array;\n\n/** Options for creating a buffer */\nexport interface BufferOptions\n{\n    /**\n     * the data to initialize the buffer with, this can be a typed array,\n     * or a regular number array. If it is a number array, it will be converted to a Float32Array\n     */\n    data?: TypedArray | number[];\n    /** the size of the buffer in bytes, if not supplied, it will be inferred from the data */\n    size?: number;\n    /** the usage of the buffer, see {@link rendering.BufferUsage} */\n    usage: number;\n    /** a label for the buffer, this is useful for debugging */\n    label?: string;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    shrinkToFit?: boolean;\n}\n\nexport interface BufferDescriptor\n{\n    label?: string;\n    size: GPUSize64;\n    usage: BufferUsage;\n    mappedAtCreation?: boolean;\n}\n\n/**\n * A wrapper for a WebGPU/WebGL Buffer.\n * In PixiJS, the Buffer class is used to manage the data that is sent to the GPU rendering pipeline.\n * It abstracts away the underlying GPU buffer and provides an interface for uploading typed arrays or other data to the GPU,\n * They are used in the following places:\n * <br><br>\n * .1. {@link Geometry} as attribute data or index data for geometry\n * <br>\n * .2. {@link UniformGroup} as an underlying buffer for uniform data\n * <br>\n * .3. {@link BufferResource} as an underlying part of a buffer used directly by the GPU program\n * <br>\n *\n * It is important to note that you must provide a usage type when creating a buffer. This is because\n * the underlying GPU buffer needs to know how it will be used. For example, if you are creating a buffer\n * to hold vertex data, you would use `BufferUsage.VERTEX`. This will tell the GPU that this buffer will be\n * used as a vertex buffer. This is important because it will affect how you can use the buffer.\n *\n * Buffers are updated by calling the {@link Buffer.update} method. This immediately updates the buffer on the GPU.\n * Be mindful of calling this more often than you need to. It is recommended to update buffers only when needed.\n *\n * In WebGPU, a GPU buffer cannot resized. This limitation is abstracted away, but know that resizing a buffer means\n * creating a brand new one and destroying the old, so it is best to limit this if possible.\n * @example\n *\n * const buffer = new Buffer({\n *     data: new Float32Array([1, 2, 3, 4]),\n *     usage: BufferUsage.VERTEX,\n * });\n * @memberof rendering\n */\nexport class Buffer extends EventEmitter<{\n    change: BindResource,\n    update: Buffer,\n    destroy: Buffer,\n}> implements BindResource\n{\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n\n    /** a unique id for this uniform group used through the renderer */\n    public readonly uid: number = uid('buffer');\n\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     * @ignore\n     */\n    public readonly _resourceType = 'buffer';\n\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     * @ignore\n     */\n    public _resourceId = uid('resource');\n\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     * @ignore\n     */\n    public _touched = 0;\n\n    /**\n     * a description of the buffer and how it should be set up on the GPU\n     * @internal\n     * @ignore\n     */\n    public readonly descriptor: BufferDescriptor;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _updateID = 1;\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public _updateSize: number;\n\n    private _data: TypedArray;\n\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    public shrinkToFit = true;\n\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    public destroyed = false;\n\n    /**\n     * Creates a new Buffer with the given options\n     * @param options - the options for the buffer\n     */\n    constructor(options: BufferOptions)\n    {\n        let { data, size } = options;\n        const { usage, label, shrinkToFit } = options;\n\n        super();\n\n        if (data instanceof Array)\n        {\n            data = new Float32Array(data as number[]);\n        }\n\n        this._data = data as TypedArray;\n\n        size = size ?? (data as TypedArray)?.byteLength;\n\n        const mappedAtCreation = !!data;\n\n        this.descriptor = {\n            size,\n            usage,\n            mappedAtCreation,\n            label,\n        };\n\n        this.shrinkToFit = shrinkToFit ?? true;\n    }\n\n    /** the data in the buffer */\n    get data()\n    {\n        return this._data;\n    }\n\n    set data(value: TypedArray)\n    {\n        this.setDataWithSize(value, value.length, true);\n    }\n\n    /** whether the buffer is static or not */\n    get static()\n    {\n        return !!(this.descriptor.usage & BufferUsage.STATIC);\n    }\n\n    set static(value: boolean)\n    {\n        if (value)\n        {\n            this.descriptor.usage |= BufferUsage.STATIC;\n        }\n        else\n        {\n            this.descriptor.usage &= ~BufferUsage.STATIC;\n        }\n    }\n\n    /**\n     * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n     * If you only want to update a subset of the buffer, you can pass in the size of the data.\n     * @param value - the data to set\n     * @param size - the size of the data in bytes\n     * @param syncGPU - should the buffer be updated on the GPU immediately?\n     */\n    public setDataWithSize(value: TypedArray, size: number, syncGPU: boolean)\n    {\n        // Increment update ID\n        this._updateID++;\n\n        this._updateSize = (size * value.BYTES_PER_ELEMENT);\n\n        // If the data hasn't changed, early return after emitting 'update'\n        if (this._data === value)\n        {\n            if (syncGPU) this.emit('update', this);\n\n            return;\n        }\n\n        // Cache old data and update to new value\n        const oldData = this._data;\n\n        this._data = value;\n\n        // Event handling\n        if (oldData.length !== value.length)\n        {\n            if (!this.shrinkToFit && value.byteLength < oldData.byteLength)\n            {\n                if (syncGPU) this.emit('update', this);\n            }\n            else\n            {\n                this.descriptor.size = value.byteLength;\n                this._resourceId = uid('resource');\n                this.emit('change', this);\n            }\n\n            return;\n        }\n\n        if (syncGPU) this.emit('update', this);\n    }\n\n    /**\n     * updates the buffer on the GPU to reflect the data in the buffer.\n     * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n     * you can pass in the size of the buffer to update.\n     * @param sizeInBytes - the new size of the buffer in bytes\n     */\n    public update(sizeInBytes?: number): void\n    {\n        this._updateSize = sizeInBytes ?? this._updateSize;\n\n        this._updateID++;\n\n        this.emit('update', this);\n    }\n\n    /** Destroys the buffer */\n    public destroy()\n    {\n        this.destroyed = true;\n\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        this._data = null;\n        (this.descriptor as null) = null;\n\n        this.removeAllListeners();\n    }\n}\n\n","/**\n * Buffer usage flags. they can be combined using the bitwise OR operator\n * eg : BufferUsage.VERTEX | BufferUsage.INDEX\n * @memberof rendering\n */\nexport enum BufferUsage\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /**\n     * The buffer can be mapped for reading. (Example: calling mapAsync() with GPUMapMode.READ)\n     * May only be combined with COPY_DST.\n     */\n    MAP_READ = 0x0001,\n    /**\n     * The buffer can be mapped for writing. (Example: calling mapAsync() with GPUMapMode.WRITE)\n     * May only be combined with COPY_SRC.\n     */\n    MAP_WRITE = 0x0002,\n    /**\n     * The buffer can be used as the source of a copy operation.\n     * (Examples: as the source argument of a copyBufferToBuffer() or copyBufferToTexture() call.)\n     */\n    COPY_SRC = 0x0004,\n    /**\n     * The buffer can be used as the destination of a copy or write operation.\n     * (Examples: as the destination argument of a copyBufferToBuffer() or\n     * copyTextureToBuffer() call, or as the target of a writeBuffer() call.)\n     */\n    COPY_DST = 0x0008,\n    /** The buffer can be used as an index buffer. (Example: passed to setIndexBuffer().) */\n    INDEX = 0x0010,\n    /** The buffer can be used as a vertex buffer. (Example: passed to setVertexBuffer().) */\n    VERTEX = 0x0020,\n    /**\n     * The buffer can be used as a uniform buffer.\n     * (Example: as a bind group entry for a GPUBufferBindingLayout with a buffer.type of \"uniform\".)\n     */\n    UNIFORM = 0x0040,\n    /**\n     * The buffer can be used as a storage buffer.\n     * (Example: as a bind group entry for a GPUBufferBindingLayout with a buffer.type of \"storage\" or \"read-only-storage\".)\n     */\n    STORAGE = 0x0080,\n    /**\n     * The buffer can be used as to store indirect command arguments.\n     * (Examples: as the indirectBuffer argument of a drawIndirect() or dispatchWorkgroupsIndirect() call.)\n     */\n    INDIRECT = 0x0100,\n    /**\n     * The buffer can be used to capture query results.\n     * (Example: as the destination argument of a resolveQuerySet() call.)\n     */\n    QUERY_RESOLVE = 0x0200,\n    /** the buffer will not be updated frequently */\n    STATIC = 0x0400\n}\n","/**\n * Copies from one buffer to another.\n * This is an optimised function that will use `Float64Array` window.\n * This means it can copy twice as fast!\n * @param sourceBuffer - the array buffer to copy from\n * @param destinationBuffer - the array buffer to copy to\n * @private\n */\nexport function fastCopy(sourceBuffer: ArrayBuffer, destinationBuffer: ArrayBuffer): void\n{\n    const lengthDouble = (sourceBuffer.byteLength / 8) | 0;\n\n    const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n    const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n\n    // Use set for faster copying\n    destinationFloat64View.set(sourceFloat64View);\n\n    // copying over the remaining bytes\n    const remainingBytes = sourceBuffer.byteLength - (lengthDouble * 8);\n\n    if (remainingBytes > 0)\n    {\n        const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n        const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n\n        // Direct copy for remaining bytes\n        destinationUint8View.set(sourceUint8View);\n    }\n}\n","import { Buffer } from '../../buffer/Buffer';\nimport { BufferUsage } from '../../buffer/const';\n\nimport type { TypedArray } from '../../buffer/Buffer';\n\n/**\n * Converts something into a buffer. If it is already a buffer it will pass it through\n * if it is a number array it will convert it to a float32 array before being passed into a buffer\n * the buffer will be created with the correct usage flags for geometry attributes\n * @param buffer - number array\n * @param index - is this an index buffer?\n * @returns a buffer\n * @memberof rendering\n */\nexport function ensureIsBuffer(buffer: Buffer | TypedArray | number[], index: boolean): Buffer\n{\n    if (!(buffer instanceof Buffer))\n    {\n        let usage: number = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n\n        // its an array!\n        if (buffer instanceof Array)\n        {\n            if (index)\n            {\n                buffer = new Uint32Array(buffer);\n                usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n            }\n\n            else\n            {\n                buffer = new Float32Array(buffer);\n                usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n            }\n        }\n\n        buffer = new Buffer({\n            data: buffer,\n            label: index ? 'index-mesh-buffer' : 'vertex-mesh-buffer',\n            usage\n        });\n    }\n\n    return buffer;\n}\n","import type { Bounds } from '../../../../../scene/container/bounds/Bounds';\nimport type { Geometry } from '../Geometry';\n\n/**\n * Gets the 2D bounds of a geometry, based on a specific attribute.\n * @param geometry - Geometry to to measure\n * @param attributeId - AttributeId that contains the x,y data\n * @param bounds - Bounds to store the result in\n * @returns the bounds\n */\nexport function getGeometryBounds(geometry: Geometry, attributeId: string, bounds: Bounds): Bounds\n{\n    const attribute = geometry.getAttribute(attributeId);\n\n    if (!attribute)\n    {\n        bounds.minX = 0;\n        bounds.minY = 0;\n        bounds.maxX = 0;\n        bounds.maxY = 0;\n\n        return bounds;\n    }\n\n    const data = attribute.buffer.data as Float32Array;\n\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n\n    const byteSize = data.BYTES_PER_ELEMENT;\n\n    // stride and offset MAY have not been calculated yet.. so go with assumed defaults\n    const offset = (attribute.offset || 0) / byteSize;\n    const stride = (attribute.stride || (2 * 4)) / byteSize;\n\n    for (let i = offset; i < data.length; i += stride)\n    {\n        const x = data[i];\n        const y = data[i + 1];\n\n        if (x > maxX)maxX = x;\n        if (y > maxY)maxY = y;\n        if (x < minX)minX = x;\n        if (y < minY)minY = y;\n    }\n\n    bounds.minX = minX;\n    bounds.minY = minY;\n    bounds.maxX = maxX;\n    bounds.maxY = maxY;\n\n    return bounds;\n}\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds';\nimport { uid } from '../../../../utils/data/uid';\nimport { Buffer } from '../buffer/Buffer';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer';\nimport { getGeometryBounds } from './utils/getGeometryBounds';\n\nimport type { TypedArray } from '../buffer/Buffer';\nimport type { Topology, VertexFormat } from './const';\n\nexport type IndexBufferArray = Uint16Array | Uint32Array;\n\n/**\n * The attribute data for a geometries attributes\n * @memberof rendering\n */\nexport interface Attribute\n{\n    /** the buffer that this attributes data belongs to */\n    buffer: Buffer;\n    /** the format of the attribute */\n    format?: VertexFormat;\n    /** the stride of the data in the buffer - in bytes*/\n    stride?: number;\n    /** the offset of the attribute from the buffer, defaults to 0 - in bytes*/\n    offset?: number;\n    /** is this an instanced buffer? (defaults to false) */\n    instance?: boolean;\n    /** the number of elements to be rendered. If not specified, all vertices after the starting vertex will be drawn. */\n    size?: number;\n    /**\n     * the starting vertex in the geometry to start drawing from. If not specified,\n     *  drawing will start from the first vertex.\n     */\n    start?: number;\n    /**\n     * attribute divisor for instanced rendering. Note: this is a **WebGL-only** feature, the WebGPU renderer will\n     * issue a warning if one of the attributes has divisor set.\n     */\n    divisor?: number;\n}\n\n/**\n * The attribute options used by the constructor for adding geometries attributes\n * extends {@link rendering.Attribute} but allows for the buffer to be a typed or number array\n * @memberof rendering\n */\ntype AttributeOption = Omit<Attribute, 'buffer'> & { buffer: Buffer | TypedArray | number[]}\n| Buffer | TypedArray | number[];\n\nexport type AttributeOptions = Record<string, AttributeOption>;\n\n/**\n * the interface that describes the structure of the geometry\n * @memberof rendering\n */\nexport interface GeometryDescriptor\n{\n    /** an optional label to easily identify the geometry */\n    label?: string;\n    /** the attributes that make up the geometry */\n    attributes?: AttributeOptions;\n    /** optional index buffer for this geometry */\n    indexBuffer?: Buffer | TypedArray | number[];\n    /** the topology of the geometry, defaults to 'triangle-list' */\n    topology?: Topology;\n\n    instanceCount?: number;\n}\nfunction ensureIsAttribute(attribute: AttributeOption): Attribute\n{\n    if (attribute instanceof Buffer || Array.isArray(attribute) || (attribute as TypedArray).BYTES_PER_ELEMENT)\n    {\n        attribute = {\n            buffer: attribute as Buffer | TypedArray | number[],\n        };\n    }\n\n    (attribute as Attribute).buffer = ensureIsBuffer(attribute.buffer as Buffer | TypedArray | number[], false);\n\n    return attribute as Attribute;\n}\n\n/**\n * A Geometry is a low-level object that represents the structure of 2D shapes in terms of vertices and attributes.\n * It's a crucial component for rendering as it describes the shape and format of the data that will go through the shaders.\n * Essentially, a Geometry object holds the data you'd send to a GPU buffer.\n *\n * A geometry is basically made of two components:\n * <br>\n * <b>Attributes</b>: These are essentially arrays that define properties of the vertices like position, color,\n * texture coordinates, etc. They map directly to attributes in your vertex shaders.\n * <br>\n * <b>Indices</b>: An optional array that describes how the vertices are connected.\n * If not provided, vertices will be interpreted in the sequence they're given.\n * @example\n *\n * const geometry = new Geometry({\n *   attributes: {\n *     aPosition: [ // add some positions\n *       0, 0,\n *       0, 100,\n *       100, 100,\n *       100,   0,\n *     ],\n *     aUv: [ // add some uvs\n *       0, 0,\n *       0, 1,\n *       1, 1,\n *       1, 0,\n *     ]\n *   }\n * });\n * @memberof rendering\n * @class\n */\nexport class Geometry extends EventEmitter<{\n    update: Geometry,\n    destroy: Geometry,\n}>\n{\n    /** The topology of the geometry. */\n    public topology: Topology;\n    /** The unique id of the geometry. */\n    public readonly uid: number = uid('geometry');\n    /** A record of the attributes of the geometry. */\n    public readonly attributes: Record<string, Attribute>;\n    /** The buffers that the attributes use */\n    public readonly buffers: Buffer[];\n    /** The index buffer of the geometry */\n    public indexBuffer: Buffer;\n\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     * @ignore\n     */\n    public _layoutKey = 0;\n\n    /** the instance count of the geometry to draw */\n    public instanceCount = 1;\n\n    private readonly _bounds: Bounds = new Bounds();\n    private _boundsDirty = true;\n\n    /**\n     * Create a new instance of a geometry\n     * @param options - The options for the geometry.\n     */\n    constructor(options: GeometryDescriptor = {})\n    {\n        super();\n\n        const { attributes, indexBuffer, topology } = options;\n\n        this.buffers = [];\n\n        this.attributes = {};\n\n        if (attributes)\n        {\n            for (const i in attributes)\n            {\n                this.addAttribute(i, attributes[i]);\n            }\n        }\n\n        this.instanceCount = options.instanceCount || 1;\n\n        if (indexBuffer)\n        {\n            this.addIndex(indexBuffer);\n        }\n\n        this.topology = topology || 'triangle-list';\n    }\n\n    protected onBufferUpdate(): void\n    {\n        this._boundsDirty = true;\n        this.emit('update', this);\n    }\n\n    /**\n     * Returns the requested attribute.\n     * @param id - The name of the attribute required\n     * @returns - The attribute requested.\n     */\n    public getAttribute(id: string): Attribute\n    {\n        return this.attributes[id];\n    }\n\n    /**\n     * Returns the index buffer\n     * @returns - The index buffer.\n     */\n    public getIndex(): Buffer\n    {\n        return this.indexBuffer;\n    }\n\n    /**\n     * Returns the requested buffer.\n     * @param id - The name of the buffer required.\n     * @returns - The buffer requested.\n     */\n    public getBuffer(id: string): Buffer\n    {\n        return this.getAttribute(id).buffer;\n    }\n\n    /**\n     * Used to figure out how many vertices there are in this geometry\n     * @returns the number of vertices in the geometry\n     */\n    public getSize(): number\n    {\n        for (const i in this.attributes)\n        {\n            const attribute = this.attributes[i];\n            const buffer = attribute.buffer;\n\n            // TODO use SIZE again like v7..\n            return (buffer.data as any).length / ((attribute.stride / 4) || attribute.size);\n        }\n\n        return 0;\n    }\n\n    /**\n     * Adds an attribute to the geometry.\n     * @param name - The name of the attribute to add.\n     * @param attributeOption - The attribute option to add.\n     */\n    public addAttribute(name: string, attributeOption: AttributeOption): void\n    {\n        const attribute = ensureIsAttribute(attributeOption);\n\n        const bufferIndex = this.buffers.indexOf(attribute.buffer);\n\n        if (bufferIndex === -1)\n        {\n            this.buffers.push(attribute.buffer);\n\n            // two events here - one for a resize (new buffer change)\n            // and one for an update (existing buffer change)\n            attribute.buffer.on('update', this.onBufferUpdate, this);\n            attribute.buffer.on('change', this.onBufferUpdate, this);\n        }\n        this.attributes[name] = attribute;\n    }\n\n    /**\n     * Adds an index buffer to the geometry.\n     * @param indexBuffer - The index buffer to add. Can be a Buffer, TypedArray, or an array of numbers.\n     */\n    public addIndex(indexBuffer: Buffer | TypedArray | number[]): void\n    {\n        this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n        this.buffers.push(this.indexBuffer);\n    }\n\n    /** Returns the bounds of the geometry. */\n    get bounds(): Bounds\n    {\n        if (!this._boundsDirty) return this._bounds;\n\n        this._boundsDirty = false;\n\n        return getGeometryBounds(this, 'aPosition', this._bounds);\n    }\n\n    /**\n     * destroys the geometry.\n     * @param destroyBuffers - destroy the buffers associated with this geometry\n     */\n    public destroy(destroyBuffers = false): void\n    {\n        this.emit('destroy', this);\n\n        this.removeAllListeners();\n\n        if (destroyBuffers)\n        {\n            this.buffers.forEach((buffer) => buffer.destroy());\n        }\n\n        (this.attributes as null) = null;\n        (this.buffers as null) = null;\n        (this.indexBuffer as null) = null;\n        (this._bounds as null) = null;\n    }\n}\n","import type { VertexFormat } from '../const';\n\nconst attributeFormatData = {\n    uint8x2: { size: 2, stride: 2, normalised: false },\n    uint8x4: { size: 4, stride: 4, normalised: false },\n    sint8x2: { size: 2, stride: 2, normalised: false },\n    sint8x4: { size: 4, stride: 4, normalised: false },\n    unorm8x2: { size: 2, stride: 2, normalised: true },\n    unorm8x4: { size: 4, stride: 4, normalised: true },\n    snorm8x2: { size: 2, stride: 2, normalised: true },\n    snorm8x4: { size: 4, stride: 4, normalised: true },\n    uint16x2: { size: 2, stride: 4, normalised: false },\n    uint16x4: { size: 4, stride: 8, normalised: false },\n    sint16x2: { size: 2, stride: 4, normalised: false },\n    sint16x4: { size: 4, stride: 8, normalised: false },\n    unorm16x2: { size: 2, stride: 4, normalised: true },\n    unorm16x4: { size: 4, stride: 8, normalised: true },\n    snorm16x2: { size: 2, stride: 4, normalised: true },\n    snorm16x4: { size: 4, stride: 8, normalised: true },\n    float16x2: { size: 2, stride: 4, normalised: false },\n    float16x4: { size: 4, stride: 8, normalised: false },\n    float32: { size: 1, stride: 4, normalised: false },\n    float32x2: { size: 2, stride: 8, normalised: false },\n    float32x3: { size: 3, stride: 12, normalised: false },\n    float32x4: { size: 4, stride: 16, normalised: false },\n    uint32: { size: 1, stride: 4, normalised: false },\n    uint32x2: { size: 2, stride: 8, normalised: false },\n    uint32x3: { size: 3, stride: 12, normalised: false },\n    uint32x4: { size: 4, stride: 16, normalised: false },\n    sint32: { size: 1, stride: 4, normalised: false },\n    sint32x2: { size: 2, stride: 8, normalised: false },\n    sint32x3: { size: 3, stride: 12, normalised: false },\n    sint32x4: { size: 4, stride: 16, normalised: false },\n};\n\nexport function getAttributeInfoFromFormat(format: VertexFormat): { size: number; stride: number; normalised: boolean }\n{\n    return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n","import { uid } from '../../../../utils/data/uid';\n\nimport type { Renderable } from '../Renderable';\nimport type { Instruction } from './Instruction';\n\nlet _tick = 0;\n\n/**\n * A set of instructions that can be executed by the renderer.\n * Basically wraps an array, but with some extra properties that help the renderer\n * to keep things nice and optimised.\n *\n * Note:\n * InstructionSet.instructions contains all the instructions, but does not resize (for performance).\n * So for the true length of the instructions you need to use InstructionSet.instructionSize\n * @memberof rendering\n */\nexport class InstructionSet\n{\n    /** a unique id for this instruction set used through the renderer */\n    public readonly uid: number = uid('instructionSet');\n    /** the array of instructions */\n    public readonly instructions: Instruction[] = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    public instructionSize = 0;\n    /** allows for access to the render pipes of the renderer */\n    public renderPipes: any;\n\n    public renderables: Renderable[] = [];\n    public tick = 0;\n\n    /** reset the instruction set so it can be reused set size back to 0 */\n    public reset()\n    {\n        this.instructionSize = 0;\n        this.tick = _tick++;\n    }\n\n    /**\n     * Add an instruction to the set\n     * @param instruction - add an instruction to the set\n     */\n    public add(instruction: Instruction)\n    {\n        this.instructions[this.instructionSize++] = instruction;\n    }\n\n    /**\n     * Log the instructions to the console (for debugging)\n     * @internal\n     * @ignore\n     */\n    public log()\n    {\n        this.instructions.length = this.instructionSize;\n        // eslint-disable-next-line no-console\n        console.table(this.instructions, ['type', 'action']);\n    }\n}\n","/* eslint-disable no-new */\nimport EventEmitter from 'eventemitter3';\nimport { GlProgram } from '../../gl/shader/GlProgram';\nimport { BindGroup } from '../../gpu/shader/BindGroup';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram';\nimport { RendererType } from '../../types';\nimport { UniformGroup } from './UniformGroup';\n\nimport type { GlProgramOptions } from '../../gl/shader/GlProgram';\nimport type { BindResource } from '../../gpu/shader/BindResource';\nimport type { GpuProgramOptions } from '../../gpu/shader/GpuProgram';\n\n/**\n * A record of {@link BindGroup}'s used by the shader.\n *\n * `Record<number, BindGroup>`\n * @memberof rendering\n */\nexport type ShaderGroups = Record<number, BindGroup>;\n\ninterface ShaderBase\n{\n    /** The WebGL program used by the WebGL renderer. */\n    glProgram?: GlProgram\n    /** The WebGPU program used by the WebGPU renderer. */\n    gpuProgram?: GpuProgram\n    /**\n     * A number that uses two bits on whether the shader is compatible with the WebGL renderer and/or the WebGPU renderer.\n     * 0b00 - not compatible with either\n     * 0b01 - compatible with WebGL\n     * 0b10 - compatible with WebGPU\n     * This is automatically set based on if a {@link GlProgram} or {@link GpuProgram} is provided.\n     */\n    compatibleRenderers?: number\n}\n\nexport interface GlShaderWith extends ShaderBase\n{\n    /** The WebGL program used by the WebGL renderer. */\n    glProgram: GlProgram\n}\n\nexport interface GpuShaderWith extends ShaderBase\n{\n    /** The WebGPU program used by the WebGPU renderer. */\n    gpuProgram: GpuProgram\n}\n\nexport interface ShaderWithGroupsDescriptor\n{\n    /** A record of {@link BindGroup}'s used by the shader. */\n    groups: ShaderGroups;\n    /** an optional map of how to bind the groups. This is automatically generated by reading the WebGPU program */\n    groupMap?: Record<string, Record<string, any>>;\n}\n\ninterface ShaderWithResourcesDescriptor\n{\n    /**\n     * A key value of uniform resources used by the shader.\n     * Under the hood pixi will look at the provided shaders and figure out where\n     * the resources are mapped. Its up to you to make sure the resource key\n     * matches the uniform name in the webGPU program. WebGL is a little more forgiving!\n     */\n    resources?: Record<string, any>;\n}\n\ninterface GroupsData\n{\n    group: number\n    binding: number\n    name: string\n}\n\n/**\n * A descriptor for a shader\n * @memberof rendering\n */\nexport type ShaderWith = GlShaderWith | GpuShaderWith;\n\n/**\n * A descriptor for a shader with groups.\n * @memberof rendering\n */\nexport type ShaderWithGroups = ShaderWithGroupsDescriptor & ShaderWith;\nexport interface IShaderWithGroups extends ShaderWithGroupsDescriptor, ShaderBase {}\n\n/**\n * A descriptor for a shader with resources. This is an easier way to work with uniforms.\n * especially when you are not working with bind groups\n * @memberof rendering\n */\nexport type ShaderWithResources = ShaderWithResourcesDescriptor & ShaderWith;\nexport interface IShaderWithResources extends ShaderWithResourcesDescriptor, ShaderBase {}\n\nexport type ShaderDescriptor = ShaderWithGroups & ShaderWithResources;\n\ntype GlShaderFromWith = {\n    gpu?: GpuProgramOptions,\n    gl: GlProgramOptions\n};\ntype GpuShaderFromWith = {\n    gpu: GpuProgramOptions,\n    gl?: GlProgramOptions\n};\nexport type ShaderFromGroups = (GlShaderFromWith | GpuShaderFromWith) & Omit<ShaderWithGroups, 'glProgram' | 'gpuProgram'>;\nexport type ShaderFromResources = (GlShaderFromWith | GpuShaderFromWith)\n& Omit<ShaderWithResources, 'glProgram' | 'gpuProgram'>;\n\n/**\n * The Shader class is an integral part of the PixiJS graphics pipeline.\n * Central to rendering in PixiJS are two key elements: A [shader] and a [geometry].\n * The shader incorporates a {@link GlProgram} for WebGL or a {@link GpuProgram} for WebGPU,\n * instructing the respective technology on how to render the geometry.\n *\n * The primary goal of the Shader class is to offer a unified interface compatible with both WebGL and WebGPU.\n * When constructing a shader, you need to provide both a WebGL program and a WebGPU program due to the distinctions\n * between the two rendering engines. If only one is provided, the shader won't function with the omitted renderer.\n *\n * Both WebGL and WebGPU utilize the same resource object when passed into the shader.\n * Post-creation, the shader's interface remains consistent across both WebGL and WebGPU.\n * The sole distinction lies in whether a glProgram or a gpuProgram is employed.\n *\n * Modifying shader uniforms, which can encompass:\n *  - TextureSampler {@link TextureStyle}\n *  - TextureSource {@link TextureSource}\n *  - UniformsGroups {@link UniformGroup}\n * @example\n *\n * const shader = new Shader({\n *     glProgram: glProgram,\n *     gpuProgram: gpuProgram,\n *     resources: {\n *         uTexture: texture.source,\n *         uSampler: texture.sampler,\n *         uColor: [1, 0, 0, 1],\n *     },\n * });\n *\n * // update the uniforms\n * shader.resources.uColor[1] = 1;\n * shader.resources.uTexture = texture2.source;\n * @class\n * @memberof rendering\n */\nexport class Shader extends EventEmitter<{'destroy': Shader}>\n{\n    /** An instance of the GPU program used by the WebGPU renderer */\n    public gpuProgram: GpuProgram;\n    /** An instance of the GL program used by the WebGL renderer */\n    public glProgram: GlProgram;\n    /**\n     * A number that uses two bits on whether the shader is compatible with the WebGL renderer and/or the WebGPU renderer.\n     * 0b00 - not compatible with either\n     * 0b01 - compatible with WebGL\n     * 0b10 - compatible with WebGPU\n     * This is automatically set based on if a {@link GlProgram} or {@link GpuProgram} is provided.\n     */\n    public readonly compatibleRenderers: number;\n    /** */\n    public groups: Record<number, BindGroup>;\n    /** A record of the resources used by the shader. */\n    public resources: Record<string, any>;\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     * @ignore\n     */\n    public _uniformBindMap: Record<number, Record<number, string>> = Object.create(null);\n    private readonly _ownedBindGroups: BindGroup[] = [];\n\n    /**\n     * Fired after rendering finishes.\n     * @event rendering.Shader#destroy\n     */\n\n    /**\n     * There are two ways to create a shader.\n     * one is to pass in resources which is a record of uniform groups and resources.\n     * another is to pass in groups which is a record of {@link BindGroup}s.\n     * this second method is really to make use of shared {@link BindGroup}s.\n     * For most cases you will want to use resources as they are easier to work with.\n     * USe Groups if you want to share {@link BindGroup}s between shaders.\n     * you cannot mix and match - either use resources or groups.\n     * @param {ShaderWithResourcesDescriptor} options - The options for the shader using ShaderWithResourcesDescriptor.\n     */\n    constructor(options: ShaderWithResources);\n    constructor(options: ShaderWithGroups);\n    constructor(options: ShaderDescriptor)\n    {\n        super();\n\n        /* eslint-disable prefer-const */\n        let {\n            gpuProgram,\n            glProgram,\n            groups,\n            resources,\n            compatibleRenderers,\n            groupMap\n        } = options;\n        /* eslint-enable prefer-const */\n\n        this.gpuProgram = gpuProgram;\n        this.glProgram = glProgram;\n\n        if (compatibleRenderers === undefined)\n        {\n            compatibleRenderers = 0;\n\n            if (gpuProgram)compatibleRenderers |= RendererType.WEBGPU;\n            if (glProgram)compatibleRenderers |= RendererType.WEBGL;\n        }\n\n        this.compatibleRenderers = compatibleRenderers;\n\n        const nameHash: Record<string, GroupsData> = {};\n\n        if (!resources && !groups)\n        {\n            resources = {};\n        }\n\n        if (resources && groups)\n        {\n            throw new Error('[Shader] Cannot have both resources and groups');\n        }\n        else if (!gpuProgram && groups && !groupMap)\n        {\n            throw new Error('[Shader] No group map or WebGPU shader provided - consider using resources instead.');\n        }\n        else if (!gpuProgram && groups && groupMap)\n        {\n            for (const i in groupMap)\n            {\n                for (const j in groupMap[i])\n                {\n                    const uniformName = groupMap[i][j];\n\n                    nameHash[uniformName] = {\n                        group: i as unknown as number,\n                        binding: j as unknown as number,\n                        name: uniformName\n                    };\n                }\n            }\n        }\n        else if (gpuProgram && groups && !groupMap)\n        {\n            const groupData = gpuProgram.structsAndGroups.groups;\n\n            groupMap = {};\n\n            groupData.forEach((data) =>\n            {\n                groupMap[data.group] = groupMap[data.group] || {};\n                groupMap[data.group][data.binding] = data.name;\n\n                nameHash[data.name] = data;\n            });\n        }\n        else if (resources)\n        {\n            groups = {};\n            groupMap = {};\n\n            if (gpuProgram)\n            {\n                const groupData = gpuProgram.structsAndGroups.groups;\n\n                groupData.forEach((data) =>\n                {\n                    groupMap[data.group] = groupMap[data.group] || {};\n                    groupMap[data.group][data.binding] = data.name;\n\n                    nameHash[data.name] = data;\n                });\n            }\n\n            let bindTick = 0;\n\n            for (const i in resources)\n            {\n                if (nameHash[i]) continue;\n\n                // build out a dummy bind group..\n                if (!groups[99])\n                {\n                    groups[99] = new BindGroup();\n                    this._ownedBindGroups.push(groups[99]);\n                }\n                // Yes i know this is a little strange, but wil line up the shaders neatly\n                // basically we want to be driven by how webGPU does things.\n                // so making a fake group will work and not affect gpu as it means no gpu shader was provided..\n                nameHash[i] = { group: 99, binding: bindTick, name: i };\n\n                groupMap[99] = groupMap[99] || {};\n                groupMap[99][bindTick] = i;\n\n                bindTick++;\n            }\n\n            for (const i in resources)\n            {\n                const name = i;\n                let value = resources[i];\n\n                if (!(value.source) && !(value as BindResource)._resourceType)\n                {\n                    value = new UniformGroup(value);\n                }\n\n                const data = nameHash[name];\n\n                if (data)\n                {\n                    if (!groups[data.group])\n                    {\n                        groups[data.group] = new BindGroup();\n\n                        this._ownedBindGroups.push(groups[data.group]);\n                    }\n\n                    groups[data.group].setResource(value, data.binding);\n                }\n            }\n        }\n\n        this.groups = groups;\n        this._uniformBindMap = groupMap;\n\n        this.resources = this._buildResourceAccessor(groups, nameHash);\n    }\n\n    /**\n     * Sometimes a resource group will be provided later (for example global uniforms)\n     * In such cases, this method can be used to let the shader know about the group.\n     * @param name - the name of the resource group\n     * @param groupIndex - the index of the group (should match the webGPU shader group location)\n     * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n     */\n    public addResource(name: string, groupIndex: number, bindIndex: number): void\n    {\n        this._uniformBindMap[groupIndex] ||= {};\n\n        this._uniformBindMap[groupIndex][bindIndex] ||= name;\n\n        if (!this.groups[groupIndex])\n        {\n            this.groups[groupIndex] = new BindGroup();\n            this._ownedBindGroups.push(this.groups[groupIndex]);\n        }\n    }\n\n    private _buildResourceAccessor(groups: ShaderGroups, nameHash: Record<string, GroupsData>)\n    {\n        const uniformsOut = {};\n\n        for (const i in nameHash)\n        {\n            const data = nameHash[i];\n\n            // add getter setter for uniforms\n            Object.defineProperty(uniformsOut, data.name, {\n                get()\n                {\n                    return groups[data.group].getResource(data.binding);\n                },\n                set(value)\n                {\n                    groups[data.group].setResource(value, data.binding);\n                }\n            });\n        }\n\n        return uniformsOut;\n    }\n\n    /**\n     * Use to destroy the shader when its not longer needed.\n     * It will destroy the resources and remove listeners.\n     * @param destroyPrograms - if the programs should be destroyed as well.\n     * Make sure its not being used by other shaders!\n     */\n    public destroy(destroyPrograms = false): void\n    {\n        this.emit('destroy', this);\n\n        if (destroyPrograms)\n        {\n            this.gpuProgram?.destroy();\n            this.glProgram?.destroy();\n        }\n\n        this.gpuProgram = null;\n        this.glProgram = null;\n\n        this.removeAllListeners();\n\n        this._uniformBindMap = null;\n\n        this._ownedBindGroups.forEach((bindGroup) =>\n        {\n            bindGroup.destroy();\n        });\n\n        (this._ownedBindGroups as null) = null;\n\n        this.resources = null;\n        this.groups = null;\n    }\n\n    /**\n     * A short hand function to create a shader based of a vertex and fragment shader.\n     * @param options\n     * @returns A shiny new PixiJS shader!\n     */\n    public static from(options: ShaderFromGroups): Shader;\n    public static from(options: ShaderFromResources): Shader;\n    public static from(options: ShaderFromGroups & ShaderFromResources): Shader\n    {\n        const { gpu, gl, ...rest } = options;\n\n        let gpuProgram: GpuProgram;\n        let glProgram: GlProgram;\n\n        if (gpu)\n        {\n            gpuProgram = GpuProgram.from(gpu);\n        }\n\n        if (gl)\n        {\n            glProgram = GlProgram.from(gl);\n        }\n\n        return new Shader({\n            gpuProgram,\n            glProgram,\n            ...rest\n        });\n    }\n}\n","// TODO add more types as required\nexport const UNIFORM_TYPES_VALUES = [\n    'f32',\n    'i32',\n    'vec2<f32>',\n    'vec3<f32>',\n    'vec4<f32>',\n    'mat2x2<f32>',\n    'mat3x3<f32>',\n    'mat4x4<f32>',\n    'mat3x2<f32>',\n    'mat4x2<f32>',\n    'mat2x3<f32>',\n    'mat4x3<f32>',\n    'mat2x4<f32>',\n    'mat3x4<f32>'\n] as const;\n\n/** useful for checking if a type is supported - a map of supported types with a true value. */\nexport const UNIFORM_TYPES_MAP = UNIFORM_TYPES_VALUES.reduce((acc, type) =>\n{\n    acc[type] = true;\n\n    return acc;\n}, {} as Record<UNIFORM_TYPES, boolean>);\n\nexport type UNIFORM_TYPES_SINGLE = typeof UNIFORM_TYPES_VALUES[number];\n\ntype OPTIONAL_SPACE = ' ' | '';\n\nexport type UNIFORM_TYPES_ARRAY = `array<${UNIFORM_TYPES_SINGLE},${OPTIONAL_SPACE}${number}>`;\n\nexport type UNIFORM_TYPES = UNIFORM_TYPES_SINGLE | UNIFORM_TYPES_ARRAY;\n\nexport interface UniformData\n{\n    /** the value of the uniform, this could be any object - a parser will figure out how to write it to the buffer */\n    value: unknown;\n    type: UNIFORM_TYPES;\n    /** the size of the variable (eg 2 for vec2, 3 for vec3, 4 for vec4) */\n    size?: number;\n    name?: string;\n}\n\nexport interface UboElement\n{\n    data: UniformData;\n    offset: number;\n    size: number;\n}\n\nexport interface UboLayout\n{\n    uboElements: UboElement[];\n    /** float32 size // TODO change to bytes */\n    size: number;\n}\n\n/* eslint-disable quote-props */\nexport type UniformsSyncCallback = (...args: any[]) => void;\n","/**\n * @method defaultValue\n * @param {string} type - Type of value\n * @param {number} size\n * @private\n */\nexport function getDefaultUniformValue(\n    type: string,\n    size: number\n): number | Float32Array | Int32Array | Uint32Array | boolean | boolean[]\n{\n    switch (type)\n    {\n        case 'f32':\n            return 0;\n\n        case 'vec2<f32>':\n            return new Float32Array(2 * size);\n\n        case 'vec3<f32>':\n            return new Float32Array(3 * size);\n\n        case 'vec4<f32>':\n            return new Float32Array(4 * size);\n        case 'mat2x2<f32>':\n            return new Float32Array([1, 0,\n                0, 1]);\n\n        case 'mat3x3<f32>':\n            return new Float32Array([1, 0, 0,\n                0, 1, 0,\n                0, 0, 1]);\n\n        case 'mat4x4<f32>':\n            return new Float32Array([1, 0, 0, 0,\n                0, 1, 0, 0,\n                0, 0, 1, 0,\n                0, 0, 0, 1]);\n    }\n\n    return null;\n}\n","import { uid } from '../../../../utils/data/uid';\nimport { createIdFromString } from '../utils/createIdFromString';\nimport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES, type UniformData } from './types';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue';\n\nimport type { BindResource } from '../../gpu/shader/BindResource';\nimport type { Buffer } from '../buffer/Buffer';\n\ntype FLOPS<T = UniformData> = T extends { value: infer V } ? V : never;\n\n// TODO replace..T['value']\ntype ExtractUniformObject<T = Record<string, UniformData>> = {\n    [K in keyof T]: FLOPS<T[K]>;\n};\n\n/**\n * Uniform group options\n * @memberof rendering\n */\nexport type UniformGroupOptions = {\n    /**\n     * if true the UniformGroup is handled as an Uniform buffer object.\n     * This is the only way WebGPU can work with uniforms. WebGL2 can also use this.\n     * So don't set to true if you want to use WebGPU :D\n     */\n    ubo?: boolean;\n    /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n    isStatic?: boolean;\n};\n\n/**\n * Uniform group holds uniform map and some ID's for work\n *\n * `UniformGroup` has two modes:\n *\n * 1: Normal mode\n * Normal mode will upload the uniforms with individual function calls as required. This is the default mode\n * for WebGL rendering.\n *\n * 2: Uniform buffer mode\n * This mode will treat the uniforms as a uniform buffer. You can pass in either a buffer that you manually handle, or\n * or a generic object that PixiJS will automatically map to a buffer for you.\n * For maximum benefits, make Ubo UniformGroups static, and only update them each frame.\n * This is the only way uniforms can be used with WebGPU.\n *\n * Rules of UBOs:\n * - UBOs only work with WebGL2, so make sure you have a fallback!\n * - Only floats are supported (including vec[2,3,4], mat[2,3,4])\n * - Samplers cannot be used in ubo's (a GPU limitation)\n * - You must ensure that the object you pass in exactly matches in the shader ubo structure.\n * Otherwise, weirdness will ensue!\n * - The name of the ubo object added to the group must match exactly the name of the ubo in the shader.\n *\n * When declaring your uniform options, you ust parse in the value and the type of the uniform.\n * The types correspond to the WebGPU types {@link UNIFORM_TYPES}\n *\n Uniforms can be modified via the classes 'uniforms' property. It will contain all the uniforms declared in the constructor.\n *\n * ```glsl\n * // UBO in shader:\n * uniform myCoolData { // Declaring a UBO...\n *     mat4 uCoolMatrix;\n *     float uFloatyMcFloatFace;\n * };\n * ```\n *\n * ```js\n * // A new Uniform Buffer Object...\n * const myCoolData = new UniformGroup({\n *     uCoolMatrix: {value:new Matrix(), type: 'mat4<f32>'},\n *     uFloatyMcFloatFace: {value:23, type: 'f32'},\n * }}\n *\n * // modify the data\n * myCoolData.uniforms.uFloatyMcFloatFace = 42;\n * // Build a shader...\n * const shader = Shader.from(srcVert, srcFrag, {\n *     myCoolData // Name matches the UBO name in the shader. Will be processed accordingly.\n * })\n *\n *\n *  ```\n * @memberof rendering\n */\nexport class UniformGroup<UNIFORMS extends { [key: string]: UniformData } = any> implements BindResource\n{\n    /** The default options used by the uniform group. */\n    public static defaultOptions: UniformGroupOptions = {\n        /** if true the UniformGroup is handled as an Uniform buffer object. */\n        ubo: false,\n        /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n        isStatic: false,\n    };\n\n    /** used internally to know if a uniform group was used in the last render pass */\n    public _touched = 0;\n\n    /** a unique id for this uniform group used through the renderer */\n    public readonly uid: number = uid('uniform');\n    /** a resource type, used to identify how to handle it when its in a bind group / shader resource */\n    public _resourceType = 'uniformGroup';\n    /** the resource id used internally by the renderer to build bind group keys */\n    public _resourceId = uid('resource');\n    /** the structures of the uniform group */\n    public uniformStructures: UNIFORMS;\n    /** the uniforms as an easily accessible map of properties */\n    public uniforms: ExtractUniformObject<UNIFORMS>;\n    /** true if it should be used as a uniform buffer object */\n    public ubo: boolean;\n    /** an underlying buffer that will be uploaded to the GPU when using this UniformGroup */\n    public buffer?: Buffer;\n    /**\n     * if true, then you are responsible for when the data is uploaded to the GPU.\n     * otherwise, the data is reuploaded each frame.\n     */\n    public isStatic: boolean;\n    /** used ito identify if this is a uniform group */\n    public readonly isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     * @ignore\n     */\n    public _dirtyId = 0;\n    /**\n     * a signature string generated for internal use\n     * @internal\n     * @ignore\n     */\n    public readonly _signature: number;\n\n    // implementing the interface - UniformGroup are not destroyed\n    public readonly destroyed = false;\n\n    /**\n     * Create a new Uniform group\n     * @param uniformStructures - The structures of the uniform group\n     * @param options - The optional parameters of this uniform group\n     */\n    constructor(uniformStructures: UNIFORMS, options?: UniformGroupOptions)\n    {\n        options = { ...UniformGroup.defaultOptions, ...options };\n\n        this.uniformStructures = uniformStructures;\n\n        const uniforms = {} as ExtractUniformObject<UNIFORMS>;\n\n        for (const i in uniformStructures)\n        {\n            const uniformData = uniformStructures[i] as UniformData;\n\n            uniformData.name = i;\n            uniformData.size = uniformData.size ?? 1;\n\n            if (!UNIFORM_TYPES_MAP[uniformData.type])\n            {\n                // eslint-disable-next-line max-len\n                throw new Error(`Uniform type ${uniformData.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(', ')}`);\n            }\n\n            uniformData.value ??= getDefaultUniformValue(uniformData.type, uniformData.size);\n\n            uniforms[i] = uniformData.value as ExtractUniformObject<UNIFORMS>[keyof UNIFORMS];\n        }\n\n        this.uniforms = uniforms;\n\n        this._dirtyId = 1;\n        this.ubo = options.ubo;\n        this.isStatic = options.isStatic;\n\n        this._signature = createIdFromString(Object.keys(uniforms).map(\n            (i) => `${i}-${(uniformStructures[i as keyof typeof uniformStructures] as UniformData).type}`\n        ).join('-'), 'uniform-group');\n    }\n\n    /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n    public update(): void\n    {\n        this._dirtyId++;\n        // dispatch...\n    }\n}\n","/* eslint-disable @typescript-eslint/indent */\n/**\n * Various blend modes supported by Pixi\n * @memberof filters\n */\nexport type BLEND_MODES = 'inherit'\n| 'normal'\n| 'add'\n| 'multiply'\n| 'screen'\n| 'darken'\n| 'lighten'\n| 'erase'\n| 'color-dodge'\n| 'color-burn'\n| 'linear-burn'\n| 'linear-dodge'\n| 'linear-light'\n| 'hard-light'\n| 'soft-light'\n| 'pin-light'\n| 'difference'\n| 'exclusion'\n| 'overlay'\n// | 'hue'\n| 'saturation'\n| 'color'\n| 'luminosity'\n| 'normal-npm'\n| 'add-npm'\n| 'screen-npm'\n| 'none'\n| 'subtract'\n| 'divide'\n| 'vivid-light'\n| 'hard-mix'\n| 'negation'\n| 'min'\n| 'max';\n\n/**\n * The map of blend modes supported by Pixi\n * @memberof rendering\n */\nexport const BLEND_TO_NPM = {\n    normal: 'normal-npm',\n    add: 'add-npm',\n    screen: 'screen-npm',\n};\n\n/**\n * The stencil operation to perform when using the stencil buffer\n * @memberof rendering\n */\nexport enum STENCIL_MODES\n{\n    DISABLED = 0,\n    RENDERING_MASK_ADD = 1,\n    MASK_ACTIVE = 2,\n    INVERSE_MASK_ACTIVE = 3,\n    RENDERING_MASK_REMOVE = 4,\n    NONE = 5,\n}\n\n/**\n * The culling mode to use. It can be either `none`, `front` or `back`.\n * @memberof rendering\n */\nexport type CULL_MODES = 'none' | 'back' | 'front';\n\n","import { type BLEND_MODES, BLEND_TO_NPM } from './const';\n\nimport type { TextureSource } from '../texture/sources/TextureSource';\n\n/**\n * Adjusts a blend mode for the current alpha mode. Returns the blend mode that works with that format.\n * eg 'normal' blend mode will return 'normal-npm' when rendering with premultiplied alpha.\n * and 'normal' if the texture is already premultiplied (the default)\n * @param blendMode - The blend mode to get the adjusted blend mode for.\n * @param textureSource - The texture to test the format of.\n * @returns - the blend mode that should be used to render this texture correctly based on its alphaMode\n */\nexport function getAdjustedBlendModeBlend(blendMode: BLEND_MODES, textureSource: TextureSource): BLEND_MODES\n{\n    if (textureSource.alphaMode === 'no-premultiply-alpha')\n    {\n        return (BLEND_TO_NPM[blendMode as keyof typeof BLEND_TO_NPM] || blendMode) as BLEND_MODES;\n    }\n\n    return blendMode;\n}\n","import { extensions, ExtensionType } from '../extensions/Extensions';\n\nconst environments: { name: string; value: { test: () => boolean; load: () => Promise<boolean> } }[] = [];\n\nextensions.handleByNamedList(ExtensionType.Environment, environments);\n\n/**\n * Automatically detects the environment and loads the appropriate extensions.\n * @param skip - whether to skip loading the default extensions\n */\nexport async function loadEnvironmentExtensions(skip: boolean): Promise<void>\n{\n    if (skip) return;\n\n    for (let i = 0; i < environments.length; i++)\n    {\n        const env = environments[i];\n\n        if (env.value.test())\n        {\n            await env.value.load();\n\n            return;\n        }\n    }\n}\n\n/**\n * @param add - whether to add the default imports to the bundle\n * @deprecated since 8.1.6. Use `loadEnvironmentExtensions` instead\n */\nexport async function autoDetectEnvironment(add: boolean): Promise<void>\n{\n    return loadEnvironmentExtensions(!add);\n}\n","import { Color } from '../../../../color/Color';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment';\nimport { Container } from '../../../../scene/container/Container';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\nimport { EventEmitter } from '../../../../utils/utils';\nimport { CLEAR } from '../../gl/const';\nimport { SystemRunner } from './SystemRunner';\n\nimport type { ColorSource, RgbaArray } from '../../../../color/Color';\nimport type { ICanvas } from '../../../../environment/canvas/ICanvas';\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport type { TypeOrBool } from '../../../../scene/container/destroyTypes';\nimport type { CLEAR_OR_BOOL } from '../../gl/const';\nimport type { Renderer } from '../../types';\nimport type { BackgroundSystem } from '../background/BackgroundSystem';\nimport type { GenerateTextureOptions, GenerateTextureSystem } from '../extract/GenerateTextureSystem';\nimport type { PipeConstructor } from '../instructions/RenderPipe';\nimport type { RenderSurface } from '../renderTarget/RenderTargetSystem';\nimport type { Texture } from '../texture/Texture';\nimport type { ViewSystem, ViewSystemDestroyOptions } from '../view/ViewSystem';\nimport type { SharedRendererOptions } from './SharedSystems';\nimport type { System, SystemConstructor } from './System';\n\nexport interface RendererConfig\n{\n    type: number;\n    name: string;\n    runners?: string[];\n    systems: {name: string, value: SystemConstructor}[];\n    renderPipes: {name: string, value: PipeConstructor}[];\n    renderPipeAdaptors: {name: string, value: any}[];\n}\n\n/**\n * The options for rendering a view.\n * @memberof rendering\n */\nexport interface RenderOptions extends ClearOptions\n{\n    /** The container to render. */\n    container: Container;\n    /** the transform to apply to the container. */\n    transform?: Matrix;\n}\n\n/**\n * The options for clearing the render target.\n * @memberof rendering\n */\nexport interface ClearOptions\n{\n    /**\n     * The render target to render. if this target is a canvas and  you are using the WebGL renderer,\n     * please ensure you have set `multiView` to `true` on renderer.\n     */\n    target?: RenderSurface;\n    /** The color to clear with. */\n    clearColor?: ColorSource;\n    /** The clear mode to use. */\n    clear?: CLEAR_OR_BOOL\n}\n\nexport type RendererDestroyOptions = TypeOrBool<ViewSystemDestroyOptions>;\n\nconst defaultRunners = [\n    'init',\n    'destroy',\n    'contextChange',\n    'resolutionChange',\n    'reset',\n    'renderEnd',\n    'renderStart',\n    'render',\n    'update',\n    'postrender',\n    'prerender'\n] as const;\n\ntype DefaultRunners = typeof defaultRunners[number];\ntype Runners = {[key in DefaultRunners]: SystemRunner} & {\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    [K: ({} & string) | ({} & symbol)]: SystemRunner;\n};\n\n/* eslint-disable max-len */\n/**\n * The base class for a PixiJS Renderer. It contains the shared logic for all renderers.\n *\n * You should not use this class directly, but instead use {@linkrendering.WebGLRenderer}\n * or {@link rendering.WebGPURenderer}.\n * Alternatively, you can also use {@link rendering.autoDetectRenderer} if you want us to\n * determine the best renderer for you.\n *\n * The renderer is composed of systems that manage specific tasks. The following systems are added by default\n * whenever you create a renderer:\n *\n *\n * | Generic Systems                      | Systems that manage functionality that all renderer types share               |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.ViewSystem}              | This manages the main view of the renderer usually a Canvas              |\n * | {@link rendering.BackgroundSystem}        | This manages the main views background color and alpha                   |\n * | {@link events.EventSystem}           | This manages UI events.                                                       |\n * | {@link accessibility.AccessibilitySystem} | This manages accessibility features. Requires `import 'pixi.js/accessibility'`|\n *\n * | Core Systems                   | Provide an optimised, easy to use API to work with WebGL/WebGPU               |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.RenderGroupSystem} | This manages the what what we are rendering to (eg - canvas or texture)   |\n * | {@link rendering.GlobalUniformSystem} | This manages shaders, programs that run on the GPU to calculate 'em pixels.   |\n * | {@link rendering.TextureGCSystem}     | This will automatically remove textures from the GPU if they are not used.    |\n *\n * | PixiJS High-Level Systems            | Set of specific systems designed to work with PixiJS objects                  |\n * | ------------------------------------ | ----------------------------------------------------------------------------- |\n * | {@link rendering.HelloSystem}               | Says hello, buy printing out the pixi version into the console log (along with the renderer type)       |\n * | {@link rendering.GenerateTextureSystem} | This adds the ability to generate textures from any Container       |\n * | {@link rendering.FilterSystem}          | This manages the filtering pipeline for post-processing effects.             |\n * | {@link rendering.PrepareSystem}               | This manages uploading assets to the GPU. Requires `import 'pixi.js/prepare'`|\n * | {@link rendering.ExtractSystem}               | This extracts image data from display objects.                               |\n *\n * The breadth of the API surface provided by the renderer is contained within these systems.\n * @abstract\n * @memberof rendering\n * @property {rendering.HelloSystem} hello - HelloSystem instance.\n * @property {rendering.RenderGroupSystem} renderGroup - RenderGroupSystem instance.\n * @property {rendering.TextureGCSystem} textureGC - TextureGCSystem instance.\n * @property {rendering.FilterSystem} filter - FilterSystem instance.\n * @property {rendering.GlobalUniformSystem} globalUniforms - GlobalUniformSystem instance.\n * @property {rendering.TextureSystem} texture - TextureSystem instance.\n * @property {rendering.EventSystem} events - EventSystem instance.\n * @property {rendering.ExtractSystem} extract - ExtractSystem instance. Requires `import 'pixi.js/extract'`.\n * @property {rendering.PrepareSystem} prepare - PrepareSystem instance. Requires `import 'pixi.js/prepare'`.\n * @property {rendering.AccessibilitySystem} accessibility - AccessibilitySystem instance. Requires `import 'pixi.js/accessibility'`.\n */\n/* eslint-enable max-len */\nexport class AbstractRenderer<\n    PIPES, OPTIONS extends SharedRendererOptions, CANVAS extends ICanvas = HTMLCanvasElement\n> extends EventEmitter<{resize: [screenWidth: number, screenHeight: number, resolution: number]}>\n{\n    /** The default options for the renderer. */\n    public static defaultOptions = {\n        /**\n         * Default resolution / device pixel ratio of the renderer.\n         * @default 1\n         */\n        resolution: 1,\n        /**\n         * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n         * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n         * performance issues when using WebGL.\n         *\n         * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n         * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n         * driver version blacklisted by the\n         * browser.\n         *\n         * If your application requires high performance rendering, you may wish to set this to false.\n         * We recommend one of two options if you decide to set this flag to false:\n         *\n         * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n         *    not supported.\n         *\n         * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n         *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n         *    device & browser combination does not support high performance WebGL.\n         *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n         * @default false\n         */\n        failIfMajorPerformanceCaveat: false,\n        /**\n         * Should round pixels be forced when rendering?\n         * @default false\n         */\n        roundPixels: false\n    };\n\n    public readonly type: number;\n    /** The name of the renderer. */\n    public readonly name: string;\n\n    public _roundPixels: 0 | 1;\n\n    public readonly runners: Runners = Object.create(null) as Runners;\n    public readonly renderPipes = Object.create(null) as PIPES;\n    /** The view system manages the main canvas that is attached to the DOM */\n    public view!: ViewSystem;\n    /** The background system manages the background color and alpha of the main view. */\n    public background: BackgroundSystem;\n    /** System that manages the generation of textures from the renderer */\n    public textureGenerator: GenerateTextureSystem;\n\n    protected _initOptions: OPTIONS = {} as OPTIONS;\n    protected config: RendererConfig;\n\n    private _systemsHash: Record<string, System> = Object.create(null);\n    private _lastObjectRendered: Container;\n\n    /**\n     * Set up a system with a collection of SystemClasses and runners.\n     * Systems are attached dynamically to this class when added.\n     * @param config - the config for the system manager\n     */\n    constructor(config: RendererConfig)\n    {\n        super();\n        this.type = config.type;\n        this.name = config.name;\n        this.config = config;\n\n        const combinedRunners = [...defaultRunners, ...(this.config.runners ?? [])];\n\n        this._addRunners(...combinedRunners);\n        // Validation check that this environment support `new Function`\n        this._unsafeEvalCheck();\n    }\n\n    /**\n     * Initialize the renderer.\n     * @param options - The options to use to create the renderer.\n     */\n    public async init(options: Partial<OPTIONS> = {})\n    {\n        const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n\n        await loadEnvironmentExtensions(skip);\n\n        this._addSystems(this.config.systems);\n        this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n\n        // loop through all systems...\n        for (const systemName in this._systemsHash)\n        {\n            const system = this._systemsHash[systemName];\n\n            const defaultSystemOptions = (system.constructor as any).defaultOptions;\n\n            options = { ...defaultSystemOptions, ...options };\n        }\n\n        options = { ...AbstractRenderer.defaultOptions, ...options };\n        this._roundPixels = options.roundPixels ? 1 : 0;\n\n        // await emits..\n        for (let i = 0; i < this.runners.init.items.length; i++)\n        {\n            await this.runners.init.items[i].init(options);\n        }\n\n        // store options\n        this._initOptions = options as OPTIONS;\n    }\n\n    /**\n     * Renders the object to its view.\n     * @param options - The options to render with.\n     * @param options.container - The container to render.\n     * @param [options.target] - The target to render to.\n     */\n    public render(options: RenderOptions | Container): void;\n    /** @deprecated since 8.0.0 */\n    public render(container: Container, options: {renderTexture: any}): void;\n    public render(args: RenderOptions | Container, deprecated?: {renderTexture: any}): void\n    {\n        let options = args;\n\n        if (options instanceof Container)\n        {\n            options = { container: options };\n\n            if (deprecated)\n            {\n                // #if _DEBUG\n                // eslint-disable-next-line max-len\n                deprecation(v8_0_0, 'passing a second argument is deprecated, please use render options instead');\n                // #endif\n\n                options.target = deprecated.renderTexture;\n            }\n        }\n\n        options.target ||= this.view.renderTarget;\n\n        // TODO: we should eventually fix events so that it can handle multiple canvas elements\n        if (options.target === this.view.renderTarget)\n        {\n            // TODO get rid of this\n            this._lastObjectRendered = options.container;\n            options.clearColor = this.background.colorRgba;\n        }\n\n        if (options.clearColor)\n        {\n            const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n\n            options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n        }\n\n        if (!options.transform)\n        {\n            options.container.updateLocalTransform();\n            options.transform = options.container.localTransform;\n        }\n\n        this.runners.prerender.emit(options);\n        this.runners.renderStart.emit(options);\n        this.runners.render.emit(options);\n        this.runners.renderEnd.emit(options);\n        this.runners.postrender.emit(options);\n    }\n\n    /**\n     * Resizes the WebGL view to the specified width and height.\n     * @param desiredScreenWidth - The desired width of the screen.\n     * @param desiredScreenHeight - The desired height of the screen.\n     * @param resolution - The resolution / device pixel ratio of the renderer.\n     */\n    public resize(desiredScreenWidth: number, desiredScreenHeight: number, resolution?: number): void\n    {\n        const previousResolution = this.view.resolution;\n\n        this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n        this.emit('resize', this.view.screen.width, this.view.screen.height, this.view.resolution);\n        if (resolution !== undefined && resolution !== previousResolution)\n        {\n            this.runners.resolutionChange.emit(resolution);\n        }\n    }\n\n    public clear(options: ClearOptions = {}): void\n    {\n        // override!\n        const renderer = this as unknown as Renderer;\n\n        options.target ||= renderer.renderTarget.renderTarget;\n        options.clearColor ||= this.background.colorRgba;\n        options.clear ??= CLEAR.ALL;\n\n        const { clear, clearColor, target } = options;\n\n        Color.shared.setValue(clearColor ?? this.background.colorRgba);\n\n        renderer.renderTarget.clear(target, clear, Color.shared.toArray() as RgbaArray);\n    }\n\n    /** The resolution / device pixel ratio of the renderer. */\n    get resolution(): number\n    {\n        return this.view.resolution;\n    }\n\n    set resolution(value: number)\n    {\n        this.view.resolution = value;\n        this.runners.resolutionChange.emit(value);\n    }\n\n    /**\n     * Same as view.width, actual number of pixels in the canvas by horizontal.\n     * @member {number}\n     * @readonly\n     * @default 800\n     */\n    get width(): number\n    {\n        return this.view.texture.frame.width;\n    }\n\n    /**\n     * Same as view.height, actual number of pixels in the canvas by vertical.\n     * @default 600\n     */\n    get height(): number\n    {\n        return this.view.texture.frame.height;\n    }\n\n    // NOTE: this was `view` in v7\n    /**\n     * The canvas element that everything is drawn to.\n     * @type {environment.ICanvas}\n     */\n    get canvas(): CANVAS\n    {\n        return this.view.canvas as CANVAS;\n    }\n\n    /**\n     * the last object rendered by the renderer. Useful for other plugins like interaction managers\n     * @readonly\n     */\n    get lastObjectRendered(): Container\n    {\n        return this._lastObjectRendered;\n    }\n\n    /**\n     * Flag if we are rendering to the screen vs renderTexture\n     * @readonly\n     * @default true\n     */\n    get renderingToScreen(): boolean\n    {\n        const renderer = this as unknown as Renderer;\n\n        return renderer.renderTarget.renderingToScreen;\n    }\n\n    /**\n     * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n     *\n     * Its safe to use as filterArea or hitArea for the whole stage.\n     */\n    get screen(): Rectangle\n    {\n        return this.view.screen;\n    }\n\n    /**\n     * Create a bunch of runners based of a collection of ids\n     * @param runnerIds - the runner ids to add\n     */\n    private _addRunners(...runnerIds: string[]): void\n    {\n        runnerIds.forEach((runnerId) =>\n        {\n            this.runners[runnerId] = new SystemRunner(runnerId);\n        });\n    }\n\n    private _addSystems(systems: RendererConfig['systems']): void\n    {\n        let i: keyof typeof systems;\n\n        for (i in systems)\n        {\n            const val = systems[i];\n\n            this._addSystem(val.value, val.name);\n        }\n    }\n\n    /**\n     * Add a new system to the renderer.\n     * @param ClassRef - Class reference\n     * @param name - Property name for system, if not specified\n     *        will use a static `name` property on the class itself. This\n     *        name will be assigned as s property on the Renderer so make\n     *        sure it doesn't collide with properties on Renderer.\n     * @returns Return instance of renderer\n     */\n    private _addSystem(ClassRef: SystemConstructor, name: string): this\n    {\n        const system = new ClassRef(this as unknown as Renderer);\n\n        if ((this as any)[name])\n        {\n            throw new Error(`Whoops! The name \"${name}\" is already in use`);\n        }\n\n        (this as any)[name] = system;\n\n        this._systemsHash[name] = system;\n\n        for (const i in this.runners)\n        {\n            this.runners[i].add(system);\n        }\n\n        return this;\n    }\n\n    private _addPipes(pipes: RendererConfig['renderPipes'], pipeAdaptors: RendererConfig['renderPipeAdaptors']): void\n    {\n        const adaptors = pipeAdaptors.reduce((acc, adaptor) =>\n        {\n            acc[adaptor.name] = adaptor.value;\n\n            return acc;\n        }, {} as Record<string, any>);\n\n        pipes.forEach((pipe) =>\n        {\n            const PipeClass = pipe.value;\n            const name = pipe.name;\n\n            const Adaptor = adaptors[name];\n\n            // sorry typescript..\n            (this.renderPipes as any)[name] = new PipeClass(\n                this as unknown as Renderer,\n                Adaptor ? new Adaptor() : null\n            );\n        });\n    }\n\n    public destroy(options: RendererDestroyOptions = false): void\n    {\n        this.runners.destroy.items.reverse();\n        this.runners.destroy.emit(options);\n\n        // destroy all runners\n        Object.values(this.runners).forEach((runner) =>\n        {\n            runner.destroy();\n        });\n\n        this._systemsHash = null;\n\n        // destroy all pipes\n        (this.renderPipes as null) = null;\n    }\n\n    /**\n     * Generate a texture from a container.\n     * @param options - options or container target to use when generating the texture\n     * @returns a texture\n     */\n    public generateTexture(options: GenerateTextureOptions | Container): Texture\n    {\n        return this.textureGenerator.generateTexture(options);\n    }\n\n    /**\n     * Whether the renderer will round coordinates to whole pixels when rendering.\n     * Can be overridden on a per scene item basis.\n     */\n    get roundPixels(): boolean\n    {\n        return !!this._roundPixels;\n    }\n\n    /**\n     * Overridable function by `pixi.js/unsafe-eval` to silence\n     * throwing an error if platform doesn't support unsafe-evals.\n     * @private\n     * @ignore\n     */\n    public _unsafeEvalCheck(): void\n    {\n        if (!unsafeEvalSupported())\n        {\n            throw new Error('Current environment does not allow unsafe-eval, '\n               + 'please use pixi.js/unsafe-eval module to enable support.');\n        }\n    }\n}\n","/**\n * SystemRunner is used internally by the renderers as an efficient way for systems to\n * be notified about what the renderer is up to during the rendering phase.\n *\n * ```\n * import { SystemRunner } from 'pixi.js';\n *\n * const myObject = {\n *     loaded: new SystemRunner('loaded')\n * }\n *\n * const listener = {\n *     loaded: function(){\n *         // thin\n *     }\n * }\n *\n * myObject.loaded.add(listener);\n *\n * myObject.loaded.emit();\n * ```\n *\n * Or for handling calling the same function on many items\n * ```\n * import { SystemRunner } from 'pixi.js';\n *\n * const myGame = {\n *     update: new SystemRunner('update')\n * }\n *\n * const gameObject = {\n *     update: function(time){\n *         // update my gamey state\n *     }\n * }\n *\n * myGame.update.add(gameObject);\n *\n * myGame.update.emit(time);\n * ```\n * @memberof rendering\n */\nexport class SystemRunner\n{\n    public items: any[];\n    private _name: string;\n\n    /**\n     * @param name - The function name that will be executed on the listeners added to this Runner.\n     */\n    constructor(name: string)\n    {\n        this.items = [];\n        this._name = name;\n    }\n\n    /* eslint-disable jsdoc/require-param, jsdoc/check-param-names */\n    /**\n     * Dispatch/Broadcast Runner to all listeners added to the queue.\n     * @param {...any} params - (optional) parameters to pass to each listener\n     */\n    /*  eslint-enable jsdoc/require-param, jsdoc/check-param-names */\n    public emit(a0?: unknown, a1?: unknown, a2?: unknown, a3?: unknown,\n        a4?: unknown, a5?: unknown, a6?: unknown, a7?: unknown): this\n    {\n        const { name, items } = this;\n\n        for (let i = 0, len = items.length; i < len; i++)\n        {\n            items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n        }\n\n        return this;\n    }\n\n    /**\n     * Add a listener to the Runner\n     *\n     * Runners do not need to have scope or functions passed to them.\n     * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n     * as the name provided to the Runner when it was created.\n     *\n     * Eg A listener passed to this Runner will require a 'complete' function.\n     *\n     * ```\n     * import { Runner } from 'pixi.js';\n     *\n     * const complete = new Runner('complete');\n     * ```\n     *\n     * The scope used will be the object itself.\n     * @param {any} item - The object that will be listening.\n     */\n    public add(item: unknown): this\n    {\n        if ((item as any)[this._name])\n        {\n            this.remove(item);\n            this.items.push(item);\n        }\n\n        return this;\n    }\n\n    /**\n     * Remove a single listener from the dispatch queue.\n     * @param {any} item - The listener that you would like to remove.\n     */\n    public remove(item: unknown): this\n    {\n        const index = this.items.indexOf(item);\n\n        if (index !== -1)\n        {\n            this.items.splice(index, 1);\n        }\n\n        return this;\n    }\n\n    /**\n     * Check to see if the listener is already in the Runner\n     * @param {any} item - The listener that you would like to check.\n     */\n    public contains(item: unknown): boolean\n    {\n        return this.items.indexOf(item) !== -1;\n    }\n\n    /** Remove all listeners from the Runner */\n    public removeAll(): this\n    {\n        this.items.length = 0;\n\n        return this;\n    }\n\n    /** Remove all references, don't use after this. */\n    public destroy(): void\n    {\n        this.removeAll();\n        this.items = null;\n        this._name = null;\n    }\n\n    /**\n     * `true` if there are no this Runner contains no listeners\n     * @readonly\n     */\n    public get empty(): boolean\n    {\n        return this.items.length === 0;\n    }\n\n    /**\n     * The name of the runner.\n     * @readonly\n     */\n    public get name(): string\n    {\n        return this._name;\n    }\n}\n","import { DOMAdapter } from '../../../../environment/adapter';\nimport { nextPow2 } from '../../../../maths/misc/pow2';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\n\nexport interface CanvasAndContext\n{\n    canvas: ICanvas;\n    context: ICanvasRenderingContext2D;\n}\n\n/**\n * Texture pool, used by FilterSystem and plugins.\n *\n * Stores collection of temporary pow2 or screen-sized renderTextures\n *\n * If you use custom RenderTexturePool for your filters, you can use methods\n * `getFilterTexture` and `returnFilterTexture` same as in\n * @name CanvasPool\n * @memberof rendering\n */\nexport class CanvasPoolClass\n{\n    public canvasOptions: ICanvasRenderingContext2DSettings;\n\n    /**\n     * Allow renderTextures of the same size as screen, not just pow2\n     *\n     * Automatically sets to true after `setScreenSize`\n     * @default false\n     */\n    public enableFullScreen: boolean;\n    private _canvasPool: {[x in string | number]: CanvasAndContext[]};\n\n    constructor(canvasOptions?: ICanvasRenderingContext2DSettings)\n    {\n        this._canvasPool = Object.create(null);\n        this.canvasOptions = canvasOptions || {};\n        this.enableFullScreen = false;\n    }\n\n    /**\n     * Creates texture with params that were specified in pool constructor.\n     * @param pixelWidth - Width of texture in pixels.\n     * @param pixelHeight - Height of texture in pixels.\n     */\n    private _createCanvasAndContext(pixelWidth: number, pixelHeight: number): CanvasAndContext\n    {\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = pixelWidth;\n        canvas.height = pixelHeight;\n\n        const context = canvas.getContext('2d');\n\n        return { canvas, context };\n    }\n\n    /**\n     * Gets a Power-of-Two render texture or fullScreen texture\n     * @param minWidth - The minimum width of the render texture.\n     * @param minHeight - The minimum height of the render texture.\n     * @param resolution - The resolution of the render texture.\n     * @returns The new render texture.\n     */\n    public getOptimalCanvasAndContext(minWidth: number, minHeight: number, resolution = 1): CanvasAndContext\n    {\n        minWidth = Math.ceil((minWidth * resolution) - 1e-6);\n        minHeight = Math.ceil((minHeight * resolution) - 1e-6);\n        minWidth = nextPow2(minWidth);\n        minHeight = nextPow2(minHeight);\n\n        const key = (minWidth << 17) + (minHeight << 1);\n\n        if (!this._canvasPool[key])\n        {\n            this._canvasPool[key] = [];\n        }\n\n        let canvasAndContext = this._canvasPool[key].pop();\n\n        if (!canvasAndContext)\n        {\n            canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n        }\n\n        return canvasAndContext;\n    }\n\n    /**\n     * Place a render texture back into the pool.\n     * @param canvasAndContext\n     */\n    public returnCanvasAndContext(canvasAndContext: CanvasAndContext): void\n    {\n        const canvas = canvasAndContext.canvas;\n        const { width, height } = canvas;\n\n        const key = (width << 17) + (height << 1);\n\n        canvasAndContext.context.clearRect(0, 0, width, height);\n\n        this._canvasPool[key].push(canvasAndContext);\n    }\n\n    public clear(): void\n    {\n        this._canvasPool = {};\n    }\n}\n\nexport const CanvasPool = new CanvasPoolClass();\n","// Your friendly neighbour https://en.wikipedia.org/wiki/Dihedral_group\n//\n// This file implements the dihedral group of order 16, also called\n// of degree 8. That's why its called groupD8.\n\nimport { Matrix } from './Matrix';\n\n/*\n * Transform matrix for operation n is:\n * | ux | vx |\n * | uy | vy |\n */\n\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\n\n/**\n * [Cayley Table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n * for the composition of each rotation in the dihederal group D8.\n * @type {number[][]}\n * @private\n */\nconst rotationCayley: number[][] = [];\n\n/**\n * Matrices for each `GD8Symmetry` rotation.\n * @type {Matrix[]}\n * @private\n */\nconst rotationMatrices: Matrix[] = [];\n\n/*\n * Alias for {@code Math.sign}.\n */\nconst signum = Math.sign;\n\n/*\n * Initializes `rotationCayley` and `rotationMatrices`. It is called\n * only once below.\n */\nfunction init(): void\n{\n    for (let i = 0; i < 16; i++)\n    {\n        const row: number[] = [];\n\n        rotationCayley.push(row);\n\n        for (let j = 0; j < 16; j++)\n        {\n            /* Multiplies rotation matrices i and j. */\n            const _ux = signum((ux[i] * ux[j]) + (vx[i] * uy[j]));\n            const _uy = signum((uy[i] * ux[j]) + (vy[i] * uy[j]));\n            const _vx = signum((ux[i] * vx[j]) + (vx[i] * vy[j]));\n            const _vy = signum((uy[i] * vx[j]) + (vy[i] * vy[j]));\n\n            /* Finds rotation matrix matching the product and pushes it. */\n            for (let k = 0; k < 16; k++)\n            {\n                if (ux[k] === _ux && uy[k] === _uy\n                      && vx[k] === _vx && vy[k] === _vy)\n                {\n                    row.push(k);\n                    break;\n                }\n            }\n        }\n    }\n\n    for (let i = 0; i < 16; i++)\n    {\n        const mat = new Matrix();\n\n        mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n        rotationMatrices.push(mat);\n    }\n}\n\ninit();\n\ntype GD8Symmetry = number;\n/**\n * @typedef {number} GD8Symmetry\n * @see groupD8\n */\n\n/**\n * Implements the dihedral group D8, which is similar to\n * [group D4]{@link http://mathworld.wolfram.com/DihedralGroupD4.html};\n * D8 is the same but with diagonals, and it is used for texture\n * rotations.\n *\n * The directions the U- and V- axes after rotation\n * of an angle of `a: GD8Constant` are the vectors `(uX(a), uY(a))`\n * and `(vX(a), vY(a))`. These aren't necessarily unit vectors.\n *\n * **Origin:**<br>\n *  This is the small part of gameofbombs.com portal system. It works.\n * @see maths.groupD8.E\n * @see maths.groupD8.SE\n * @see maths.groupD8.S\n * @see maths.groupD8.SW\n * @see maths.groupD8.W\n * @see maths.groupD8.NW\n * @see maths.groupD8.N\n * @see maths.groupD8.NE\n * @author Ivan @ivanpopelyshev\n * @namespace maths.groupD8\n */\nexport const groupD8 = {\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 0       | East      |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    E: 0,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 45     | Southeast |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    SE: 1,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 90     | South     |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    S: 2,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 135    | Southwest |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    SW: 3,\n\n    /**\n     * | Rotation | Direction |\n     * |----------|-----------|\n     * | 180     | West      |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    W: 4,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -135/225 | Northwest    |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    NW: 5,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -90/270  | North        |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    N: 6,\n\n    /**\n     * | Rotation    | Direction    |\n     * |-------------|--------------|\n     * | -45/315  | Northeast    |\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    NE: 7,\n\n    /**\n     * Reflection about Y-axis.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MIRROR_VERTICAL: 8,\n\n    /**\n     * Reflection about the main diagonal.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MAIN_DIAGONAL: 10,\n\n    /**\n     * Reflection about X-axis.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    MIRROR_HORIZONTAL: 12,\n\n    /**\n     * Reflection about reverse diagonal.\n     * @memberof maths.groupD8\n     * @constant {GD8Symmetry}\n     */\n    REVERSE_DIAGONAL: 14,\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The X-component of the U-axis\n     *    after rotating the axes.\n     */\n    uX: (ind: GD8Symmetry): GD8Symmetry => ux[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The Y-component of the U-axis\n     *    after rotating the axes.\n     */\n    uY: (ind: GD8Symmetry): GD8Symmetry => uy[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The X-component of the V-axis\n     *    after rotating the axes.\n     */\n    vX: (ind: GD8Symmetry): GD8Symmetry => vx[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} ind - sprite rotation angle.\n     * @returns {GD8Symmetry} The Y-component of the V-axis\n     *    after rotating the axes.\n     */\n    vY: (ind: GD8Symmetry): GD8Symmetry => vy[ind],\n\n    /**\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotation - symmetry whose opposite\n     *   is needed. Only rotations have opposite symmetries while\n     *   reflections don't.\n     * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n     */\n    inv: (rotation: GD8Symmetry): GD8Symmetry =>\n    {\n        if (rotation & 8)// true only if between 8 & 15 (reflections)\n        {\n            return rotation & 15;// or rotation % 16\n        }\n\n        return (-rotation) & 7;// or (8 - rotation) % 8\n    },\n\n    /**\n     * Composes the two D8 operations.\n     *\n     * Taking `^` as reflection:\n     *\n     * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n     * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n     * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n     * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n     * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n     * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n     * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n     * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n     * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n     * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n     *\n     * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotationSecond - Second operation, which\n     *   is the row in the above cayley table.\n     * @param {GD8Symmetry} rotationFirst - First operation, which\n     *   is the column in the above cayley table.\n     * @returns {GD8Symmetry} Composed operation\n     */\n    add: (rotationSecond: GD8Symmetry, rotationFirst: GD8Symmetry): GD8Symmetry => (\n        rotationCayley[rotationSecond][rotationFirst]\n    ),\n\n    /**\n     * Reverse of `add`.\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotationSecond - Second operation\n     * @param {GD8Symmetry} rotationFirst - First operation\n     * @returns {GD8Symmetry} Result\n     */\n    sub: (rotationSecond: GD8Symmetry, rotationFirst: GD8Symmetry): GD8Symmetry => (\n        rotationCayley[rotationSecond][groupD8.inv(rotationFirst)]\n    ),\n\n    /**\n     * Adds 180 degrees to rotation, which is a commutative\n     * operation.\n     * @memberof maths.groupD8\n     * @param {number} rotation - The number to rotate.\n     * @returns {number} Rotated number\n     */\n    rotate180: (rotation: number): number => rotation ^ 4,\n\n    /**\n     * Checks if the rotation angle is vertical, i.e. south\n     * or north. It doesn't work for reflections.\n     * @memberof maths.groupD8\n     * @param {GD8Symmetry} rotation - The number to check.\n     * @returns {boolean} Whether or not the direction is vertical\n     */\n    isVertical: (rotation: GD8Symmetry): boolean => (rotation & 3) === 2, // rotation % 4 === 2\n\n    /**\n     * Approximates the vector `V(dx,dy)` into one of the\n     * eight directions provided by `groupD8`.\n     * @memberof maths.groupD8\n     * @param {number} dx - X-component of the vector\n     * @param {number} dy - Y-component of the vector\n     * @returns {GD8Symmetry} Approximation of the vector into\n     *  one of the eight symmetries.\n     */\n    byDirection: (dx: number, dy: number): GD8Symmetry =>\n    {\n        if (Math.abs(dx) * 2 <= Math.abs(dy))\n        {\n            if (dy >= 0)\n            {\n                return groupD8.S;\n            }\n\n            return groupD8.N;\n        }\n        else if (Math.abs(dy) * 2 <= Math.abs(dx))\n        {\n            if (dx > 0)\n            {\n                return groupD8.E;\n            }\n\n            return groupD8.W;\n        }\n        else if (dy > 0)\n        {\n            if (dx > 0)\n            {\n                return groupD8.SE;\n            }\n\n            return groupD8.SW;\n        }\n        else if (dx > 0)\n        {\n            return groupD8.NE;\n        }\n\n        return groupD8.NW;\n    },\n\n    /**\n     * Helps sprite to compensate texture packer rotation.\n     * @memberof maths.groupD8\n     * @param {Matrix} matrix - sprite world matrix\n     * @param {GD8Symmetry} rotation - The rotation factor to use.\n     * @param {number} tx - sprite anchoring\n     * @param {number} ty - sprite anchoring\n     */\n    matrixAppendRotationInv: (matrix: Matrix, rotation: GD8Symmetry, tx = 0, ty = 0): void =>\n    {\n        // Packer used \"rotation\", we use \"inv(rotation)\"\n        const mat: Matrix = rotationMatrices[groupD8.inv(rotation)];\n\n        mat.tx = tx;\n        mat.ty = ty;\n        matrix.append(mat);\n    },\n};\n","export const NOOP = () =>\n{\n    // empty!\n};\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { uid } from '../../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\nimport { NOOP } from '../../../../utils/misc/NOOP';\nimport { BufferImageSource } from './sources/BufferImageSource';\nimport { TextureSource } from './sources/TextureSource';\nimport { TextureMatrix } from './TextureMatrix';\n\nimport type { TextureResourceOrOptions } from './utils/textureFrom';\n\n/**\n * Stores the width of the non-scalable borders, for example when used with {@link scene.NineSlicePlane} texture.\n * @memberof rendering\n */\nexport interface TextureBorders\n{\n    /** left border in pixels */\n    left: number;\n    /** top border in pixels */\n    top: number;\n    /** right border in pixels */\n    right: number;\n    /** bottom border in pixels */\n    bottom: number;\n}\n\n/**\n * The UVs data structure for a texture.\n * @memberof rendering\n */\nexport type UVs = {\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n    x3: number;\n    y3: number;\n};\n\n/**\n * The options that can be passed to a new Texture\n * @memberof rendering\n */\nexport interface TextureOptions<TextureSourceType extends TextureSource = TextureSource>\n{\n    /** the underlying texture data that this texture will use  */\n    source?: TextureSourceType;\n    /** optional label, for debugging */\n    label?: string;\n    /** The rectangle frame of the texture to show */\n    frame?: Rectangle;\n    /** The area of original texture */\n    orig?: Rectangle;\n    /** Trimmed rectangle of original texture */\n    trim?: Rectangle;\n    /** Default anchor point used for sprite placement / rotation */\n    defaultAnchor?: { x: number; y: number };\n    /** Default borders used for 9-slice scaling {@link NineSlicePlane}*/\n    defaultBorders?: TextureBorders;\n    /** indicates how the texture was rotated by texture packer. See {@link groupD8} */\n    rotate?: number;\n    /** set to true if you plan on modifying the uvs of this texture - can affect performance with high numbers of sprites*/\n    dynamic?: boolean;\n}\n\nexport interface BindableTexture\n{\n    source: TextureSource;\n}\n\nexport type TextureSourceLike = TextureSource | TextureResourceOrOptions | string;\n\n/**\n * A texture stores the information that represents an image or part of an image.\n *\n * A texture must have a loaded resource passed to it to work. It does not contain any\n * loading mechanisms.\n *\n * The Assets class can be used to load an texture from a file. This is the recommended\n * way as it will handle the loading and caching for you.\n *\n * ```js\n *\n * const texture = await Assets.load('assets/image.png');\n *\n * // once Assets has loaded the image it will be available via the from method\n * const sameTexture = Texture.from('assets/image.png');\n * // another way to access the texture once loaded\n * const sameAgainTexture = Asset.get('assets/image.png');\n *\n * const sprite1 = new Sprite(texture);\n *\n * ```\n *\n * It cannot be added to the display list directly; instead use it as the texture for a Sprite.\n * If no frame is provided for a texture, then the whole image is used.\n *\n * You can directly create a texture from an image and then reuse it multiple times like this :\n *\n * ```js\n * import { Sprite, Texture } from 'pixi.js';\n *\n * const texture = await Assets.load('assets/image.png');\n * const sprite1 = new Sprite(texture);\n * const sprite2 = new Sprite(texture);\n * ```\n *\n * If you didn't pass the texture frame to constructor, it enables `noFrame` mode:\n * it subscribes on baseTexture events, it automatically resizes at the same time as baseTexture.\n * @memberof rendering\n * @class\n */\nexport class Texture<TextureSourceType extends TextureSource = TextureSource> extends EventEmitter<{\n    update: Texture\n    destroy: Texture\n}> implements BindableTexture\n{\n    /**\n     * Helper function that creates a returns Texture based on the source you provide.\n     * The source should be loaded and ready to go. If not its best to grab the asset using Assets.\n     * @param id - String or Source to create texture from\n     * @param skipCache - Skip adding the texture to the cache\n     * @returns The texture based on the Id provided\n     */\n    public static from: (id: TextureSourceLike, skipCache?: boolean) => Texture;\n\n    /** label used for debugging */\n    public label?: string;\n    /** unique id for this texture */\n    public readonly uid: number = uid('texture');\n    /**\n     * Has the texture been destroyed?\n     * @readonly\n     */\n    public destroyed: boolean;\n\n    public _source: TextureSourceType;\n\n    /**\n     * Indicates whether the texture is rotated inside the atlas\n     * set to 2 to compensate for texture packer rotation\n     * set to 6 to compensate for spine packer rotation\n     * can be used to rotate or mirror sprites\n     * See {@link maths.groupD8} for explanation\n     */\n    public readonly rotate: number;\n    /** A uvs object based on the given frame and the texture source */\n    public readonly uvs: UVs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * Anchor point that is used as default if sprite is created with this texture.\n     * Changing the `defaultAnchor` at a later point of time will not update Sprite's anchor point.\n     * @default {0,0}\n     */\n    public readonly defaultAnchor?: { x: number; y: number };\n    /**\n     * Default width of the non-scalable border that is used if 9-slice plane is created with this texture.\n     * @since 7.2.0\n     * @see scene.NineSliceSprite\n     */\n    public readonly defaultBorders?: TextureBorders;\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    public readonly frame = new Rectangle();\n    /** This is the area of original texture, before it was put in atlas. */\n    public readonly orig: Rectangle;\n    /**\n     * This is the trimmed area of original texture, before it was put in atlas\n     * Please call `updateUvs()` after you change coordinates of `trim` manually.\n     */\n    public readonly trim: Rectangle;\n\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    public noFrame = false;\n\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    public dynamic = false;\n\n    private _textureMatrix: TextureMatrix;\n\n    /** is it a texture? yes! used for type checking */\n    public readonly isTexture = true;\n\n    /**\n     * @param {rendering.TextureOptions} options - Options for the texture\n     */\n    constructor({\n        source,\n        label,\n        frame,\n        orig,\n        trim,\n        defaultAnchor,\n        defaultBorders,\n        rotate,\n        dynamic\n    }: TextureOptions<TextureSourceType> = {})\n    {\n        super();\n\n        this.label = label;\n        this.source = (source?.source ?? new TextureSource()) as TextureSourceType;\n\n        this.noFrame = !frame;\n\n        if (frame)\n        {\n            this.frame.copyFrom(frame);\n        }\n        else\n        {\n            const { width, height } = this._source;\n\n            this.frame.width = width;\n            this.frame.height = height;\n        }\n\n        this.orig = orig || this.frame;\n        this.trim = trim;\n\n        this.rotate = rotate ?? 0;\n        this.defaultAnchor = defaultAnchor;\n        this.defaultBorders = defaultBorders;\n\n        this.destroyed = false;\n        this.dynamic = dynamic || false;\n\n        this.updateUvs();\n    }\n\n    set source(value: TextureSourceType)\n    {\n        if (this._source)\n        {\n            this._source.off('resize', this.update, this);\n        }\n\n        this._source = value;\n\n        value.on('resize', this.update, this);\n\n        this.emit('update', this);\n    }\n\n    /** the underlying source of the texture (equivalent of baseTexture in v7) */\n    get source(): TextureSourceType\n    {\n        return this._source;\n    }\n\n    /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n    get textureMatrix()\n    {\n        if (!this._textureMatrix)\n        {\n            this._textureMatrix = new TextureMatrix(this);\n        }\n\n        return this._textureMatrix;\n    }\n\n    /** The width of the Texture in pixels. */\n    get width(): number\n    {\n        return this.orig.width;\n    }\n\n    /** The height of the Texture in pixels. */\n    get height(): number\n    {\n        return this.orig.height;\n    }\n\n    /** Call this function when you have modified the frame of this texture. */\n    public updateUvs()\n    {\n        const { uvs, frame } = this;\n        const { width, height } = this._source;\n\n        const nX = frame.x / width;\n        const nY = frame.y / height;\n\n        const nW = frame.width / width;\n        const nH = frame.height / height;\n\n        let rotate = this.rotate;\n\n        if (rotate)\n        {\n            // width and height div 2 div baseFrame size\n            const w2 = nW / 2;\n            const h2 = nH / 2;\n\n            // coordinates of center\n            const cX = nX + w2;\n            const cY = nY + h2;\n\n            rotate = groupD8.add(rotate, groupD8.NW); // NW is top-left corner\n            uvs.x0 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y0 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2); // rotate 90 degrees clockwise\n            uvs.x1 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y1 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            uvs.x2 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y2 = cY + (h2 * groupD8.uY(rotate));\n\n            rotate = groupD8.add(rotate, 2);\n            uvs.x3 = cX + (w2 * groupD8.uX(rotate));\n            uvs.y3 = cY + (h2 * groupD8.uY(rotate));\n        }\n\n        else\n        {\n            uvs.x0 = nX;\n            uvs.y0 = nY;\n            uvs.x1 = nX + nW;\n            uvs.y1 = nY;\n            uvs.x2 = nX + nW;\n            uvs.y2 = nY + nH;\n            uvs.x3 = nX;\n            uvs.y3 = nY + nH;\n        }\n    }\n\n    /**\n     * Destroys this texture\n     * @param destroySource - Destroy the source when the texture is destroyed.\n     */\n    public destroy(destroySource = false)\n    {\n        if (this._source)\n        {\n            if (destroySource)\n            {\n                this._source.destroy();\n                this._source = null;\n            }\n        }\n\n        this._textureMatrix = null;\n        this.destroyed = true;\n        this.emit('destroy', this);\n        this.removeAllListeners();\n    }\n\n    /**\n     * Call this if you have modified the `texture outside` of the constructor.\n     *\n     * If you have modified this texture's source, you must separately call `texture.source.update()` to see those changes.\n     */\n    public update(): void\n    {\n        if (this.noFrame)\n        {\n            this.frame.width = this._source.width;\n            this.frame.height = this._source.height;\n        }\n\n        this.updateUvs();\n        this.emit('update', this);\n    }\n\n    /** @deprecated since 8.0.0 */\n    get baseTexture(): TextureSource\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Texture.baseTexture is now Texture.source');\n        // #endif\n\n        return this._source;\n    }\n\n    /** an Empty Texture used internally by the engine */\n    public static EMPTY: Texture;\n    /** a White texture used internally by the engine */\n    public static WHITE: Texture<BufferImageSource>;\n}\n\nTexture.EMPTY = new Texture({\n    label: 'EMPTY',\n    source: new TextureSource({\n        label: 'EMPTY',\n    })\n});\n\nTexture.EMPTY.destroy = NOOP;\n\nTexture.WHITE = new Texture({\n    source: new BufferImageSource({\n        resource: new Uint8Array([255, 255, 255, 255]),\n        width: 1,\n        height: 1,\n        alphaMode: 'premultiply-alpha-on-upload',\n        label: 'WHITE',\n    }),\n    label: 'WHITE',\n});\n\nTexture.WHITE.destroy = NOOP;\n","import { Matrix } from '../../../../maths/matrix/Matrix';\n\nimport type { Texture } from './Texture';\n\nconst tempMat = new Matrix();\n\n/**\n * Class controls uv mapping from Texture normal space to BaseTexture normal space.\n *\n * Takes `trim` and `rotate` into account. May contain clamp settings for Meshes and TilingSprite.\n *\n * Can be used in Texture `uvMatrix` field, or separately, you can use different clamp settings on the same texture.\n * If you want to add support for texture region of certain feature or filter, that's what you're looking for.\n *\n * Takes track of Texture changes through `_lastTextureID` private field.\n * Use `update()` method call to track it from outside.\n * @see Texture\n * @see Mesh\n * @see TilingSprite\n * @memberof rendering\n */\nexport class TextureMatrix\n{\n    /**\n     * Matrix operation that converts texture region coords to texture coords\n     * @readonly\n     */\n    public mapCoord: Matrix;\n\n    /**\n     * Changes frame clamping\n     * Works with TilingSprite and Mesh\n     * Change to 1.5 if you texture has repeated right and bottom lines, that leads to smoother borders\n     * @default 0\n     */\n    public clampOffset: number;\n\n    /**\n     * Changes frame clamping\n     * Works with TilingSprite and Mesh\n     * Change to -0.5 to add a pixel to the edge, recommended for transparent trimmed textures in atlas\n     * @default 0.5\n     */\n    public clampMargin: number;\n\n    /**\n     * Clamp region for normalized coords, left-top pixel center in xy , bottom-right in zw.\n     * Calculated based on clampOffset.\n     */\n    public readonly uClampFrame: Float32Array;\n\n    /** Normalized clamp offset. Calculated based on clampOffset. */\n    public readonly uClampOffset: Float32Array;\n\n    /**\n     * Tracks Texture frame changes.\n     * @ignore\n     */\n    public _updateID: number;\n\n    /**\n     * Tracks Texture frame changes.\n     * @protected\n     */\n    protected _textureID: number;\n\n    protected _texture: Texture;\n\n    /**\n     * If texture size is the same as baseTexture.\n     * @default false\n     * @readonly\n     */\n    public isSimple: boolean;\n\n    /**\n     * @param texture - observed texture\n     * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n     */\n    constructor(texture: Texture, clampMargin?: number)\n    {\n        this.mapCoord = new Matrix();\n        this.uClampFrame = new Float32Array(4);\n        this.uClampOffset = new Float32Array(2);\n        this._textureID = -1;\n        this._updateID = 0;\n\n        this.clampOffset = 0;\n\n        if ((typeof clampMargin === 'undefined'))\n        {\n            this.clampMargin = (texture.width < 10) ? 0 : 0.5;\n        }\n        else\n        {\n            this.clampMargin = clampMargin;\n        }\n\n        this.isSimple = false;\n\n        this.texture = texture;\n    }\n\n    /** Texture property. */\n    get texture(): Texture\n    {\n        return this._texture;\n    }\n\n    set texture(value: Texture)\n    {\n        if (this.texture === value) return;\n\n        this._texture?.removeListener('update', this.update, this);\n        this._texture = value;\n        this._texture.addListener('update', this.update, this);\n\n        this.update();\n    }\n\n    /**\n     * Multiplies uvs array to transform\n     * @param uvs - mesh uvs\n     * @param [out=uvs] - output\n     * @returns - output\n     */\n    public multiplyUvs(uvs: Float32Array, out?: Float32Array): Float32Array\n    {\n        if (out === undefined)\n        {\n            out = uvs;\n        }\n\n        const mat = this.mapCoord;\n\n        for (let i = 0; i < uvs.length; i += 2)\n        {\n            const x = uvs[i];\n            const y = uvs[i + 1];\n\n            out[i] = (x * mat.a) + (y * mat.c) + mat.tx;\n            out[i + 1] = (x * mat.b) + (y * mat.d) + mat.ty;\n        }\n\n        return out;\n    }\n\n    /**\n     * Updates matrices if texture was changed\n     * @returns - whether or not it was updated\n     */\n    public update(): boolean\n    {\n        const tex = this._texture;\n\n        this._updateID++;\n\n        const uvs = tex.uvs;\n\n        this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n\n        const orig = tex.orig;\n        const trim = tex.trim;\n\n        if (trim)\n        {\n            tempMat.set(\n                orig.width / trim.width,\n                0, 0, orig.height / trim.height,\n                -trim.x / trim.width,\n                -trim.y / trim.height\n            );\n\n            this.mapCoord.append(tempMat);\n        }\n\n        const texBase = tex.source;\n        const frame = this.uClampFrame;\n        const margin = this.clampMargin / texBase._resolution;\n        const offset = this.clampOffset / texBase._resolution;\n\n        frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n        frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n        frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n        frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n\n        this.uClampOffset[0] = this.clampOffset / texBase.pixelWidth;\n        this.uClampOffset[1] = this.clampOffset / texBase.pixelHeight;\n\n        this.isSimple = tex.frame.width === texBase.width\n            && tex.frame.height === texBase.height\n            && tex.rotate === 0;\n\n        return true;\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation';\n\nimport type { BindResource } from '../../gpu/shader/BindResource';\nimport type { COMPARE_FUNCTION, SCALE_MODE, WRAP_MODE } from './const';\n\nconst idHash: Record<string, number> = Object.create(null);\n\n/**\n * This takes a shader string and maps it to a resource id.\n * This is a little different than regular resource ids as these ids\n * are not unique to the resource. But must not overlap with other (non sampler) resources Ids.\n * @param value - the string to turn into a resource id\n * @returns a unique resource id\n */\nfunction createResourceIdFromString(value: string): number\n{\n    const id = idHash[value];\n\n    if (id === undefined)\n    {\n        idHash[value] = uid('resource');\n    }\n\n    return id;\n}\n\nexport interface TextureStyleOptions extends Partial<TextureStyle>\n{\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    addressMode?: WRAP_MODE;\n    /** specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeU?: WRAP_MODE;\n    /** specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeV?: WRAP_MODE;\n    /** Specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    addressModeW?: WRAP_MODE;\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    scaleMode?: SCALE_MODE;\n\n    /** specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    magFilter?: SCALE_MODE;\n    /** specifies the sampling behavior when the sample footprint is larger than one texel. */\n    minFilter?: SCALE_MODE;\n    /** specifies behavior for sampling between mipmap levels. */\n    mipmapFilter?: SCALE_MODE;\n\n    /** specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    lodMinClamp?: number;\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    lodMaxClamp?: number;\n    /**\n     * When provided the sampler will be a comparison sampler with the specified\n     * {@link GPUCompareFunction}.\n     * Note: Comparison samplers may use filtering, but the sampling results will be\n     * implementation-dependent and may differ from the normal filtering rules.\n     */\n    compare?: COMPARE_FUNCTION;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     *\n     * setting this to anything higher than 1 will set scale modes to 'linear'\n     */\n    maxAnisotropy?: number;\n}\n\n/**\n * A texture style describes how a texture should be sampled by a shader.\n * @memberof rendering\n */\nexport class TextureStyle extends EventEmitter<{\n    change: TextureStyle,\n    destroy: TextureStyle,\n}> implements BindResource\n{\n    public _resourceType = 'textureSampler';\n    public _touched = 0;\n    private _sharedResourceId: number;\n\n    /** default options for the style */\n    public static readonly defaultOptions: TextureStyleOptions = {\n        addressMode: 'clamp-to-edge',\n        scaleMode: 'linear'\n    };\n\n    /** */\n    public addressModeU?: WRAP_MODE;\n    /** */\n    public addressModeV?: WRAP_MODE;\n    /** Specifies the {{GPUAddressMode|address modes}} for the texture width, height, and depth coordinates, respectively. */\n    public addressModeW?: WRAP_MODE;\n    /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    public magFilter?: SCALE_MODE;\n    /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n    public minFilter?: SCALE_MODE;\n    /** Specifies behavior for sampling between mipmap levels. */\n    public mipmapFilter?: SCALE_MODE;\n    /** */\n    public lodMinClamp?: number;\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    public lodMaxClamp?: number;\n    /**\n     * When provided the sampler will be a comparison sampler with the specified\n     * {@link GPUCompareFunction}.\n     * Note: Comparison samplers may use filtering, but the sampling results will be\n     * implementation-dependent and may differ from the normal filtering rules.\n     */\n    public compare?: COMPARE_FUNCTION;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link GPUSamplerDescriptor#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link GPUSamplerDescriptor#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     * @ignore\n     */\n    public _maxAnisotropy?: number = 1;\n\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    public destroyed = false;\n\n    /**\n     * @param options - options for the style\n     */\n    constructor(options: TextureStyleOptions = {})\n    {\n        super();\n\n        options = { ...TextureStyle.defaultOptions, ...options };\n\n        this.addressMode = options.addressMode;\n\n        this.addressModeU = options.addressModeU ?? this.addressModeU;\n        this.addressModeV = options.addressModeV ?? this.addressModeV;\n        this.addressModeW = options.addressModeW ?? this.addressModeW;\n\n        this.scaleMode = options.scaleMode;\n\n        this.magFilter = options.magFilter ?? this.magFilter;\n        this.minFilter = options.minFilter ?? this.minFilter;\n        this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n\n        this.lodMinClamp = options.lodMinClamp;\n        this.lodMaxClamp = options.lodMaxClamp;\n\n        this.compare = options.compare;\n\n        this.maxAnisotropy = options.maxAnisotropy ?? 1;\n    }\n\n    set addressMode(value: WRAP_MODE)\n    {\n        this.addressModeU = value;\n        this.addressModeV = value;\n        this.addressModeW = value;\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get addressMode(): WRAP_MODE\n    {\n        return this.addressModeU;\n    }\n\n    set wrapMode(value: WRAP_MODE)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'TextureStyle.wrapMode is now TextureStyle.addressMode');\n        // #endif\n\n        this.addressMode = value;\n    }\n\n    get wrapMode(): WRAP_MODE\n    {\n        return this.addressMode;\n    }\n\n    set scaleMode(value: SCALE_MODE)\n    {\n        this.magFilter = value;\n        this.minFilter = value;\n        this.mipmapFilter = value;\n    }\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    get scaleMode(): SCALE_MODE\n    {\n        return this.magFilter;\n    }\n\n    /** Specifies the maximum anisotropy value clamp used by the sampler. */\n    set maxAnisotropy(value: number)\n    {\n        this._maxAnisotropy = Math.min(value, 16);\n\n        if (this._maxAnisotropy > 1)\n        {\n            this.scaleMode = 'linear';\n        }\n    }\n\n    get maxAnisotropy(): number\n    {\n        return this._maxAnisotropy;\n    }\n\n    // TODO - move this to WebGL?\n    get _resourceId(): number\n    {\n        return this._sharedResourceId || this._generateResourceId();\n    }\n\n    public update()\n    {\n        // manage the resource..\n        this.emit('change', this);\n        this._sharedResourceId = null;\n    }\n\n    private _generateResourceId(): number\n    {\n        // eslint-disable-next-line max-len\n        const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n\n        this._sharedResourceId = createResourceIdFromString(bigKey);\n\n        return this._resourceId;\n    }\n\n    /** Destroys the style */\n    public destroy()\n    {\n        this.destroyed = true;\n\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        this.removeAllListeners();\n    }\n}\n","import { ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from './TextureSource';\n\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TypedArray } from '../../buffer/Buffer';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport interface BufferSourceOptions extends TextureSourceOptions<TypedArray | ArrayBuffer>\n{\n    width: number;\n    height: number;\n}\n\nexport class BufferImageSource extends TextureSource<TypedArray | ArrayBuffer>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    public uploadMethodId = 'buffer';\n\n    constructor(options: BufferSourceOptions)\n    {\n        const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n        let format = options.format;\n\n        if (!format)\n        {\n            if (buffer instanceof Float32Array)\n            {\n                format = 'rgba32float';\n            }\n            else if (buffer instanceof Int32Array)\n            {\n                format = 'rgba32uint';\n            }\n            else if (buffer instanceof Uint32Array)\n            {\n                format = 'rgba32uint';\n            }\n            else if (buffer instanceof Int16Array)\n            {\n                format = 'rgba16uint';\n            }\n            else if (buffer instanceof Uint16Array)\n            {\n                format = 'rgba16uint';\n            }\n            else if (buffer instanceof Int8Array)\n            {\n                format = 'bgra8unorm';\n            }\n            else\n            {\n                format = 'bgra8unorm';\n            }\n        }\n\n        super({\n            ...options,\n            resource: buffer,\n            format,\n        });\n    }\n\n    public static test(resource: any): resource is TypedArray | ArrayBuffer\n    {\n        return resource instanceof Int8Array\n        || resource instanceof Uint8Array\n        || resource instanceof Uint8ClampedArray\n        || resource instanceof Int16Array\n        || resource instanceof Uint16Array\n        || resource instanceof Int32Array\n        || resource instanceof Uint32Array\n        || resource instanceof Float32Array;\n    }\n}\n","import { DOMAdapter } from '../../../../../environment/adapter';\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from './TextureSource';\n\nimport type { ICanvas } from '../../../../../environment/canvas/ICanvas';\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport interface CanvasSourceOptions extends TextureSourceOptions<ICanvas>\n{\n    /** should the canvas be resized to preserve its screen width and height regardless of the resolution of the renderer */\n    autoDensity?: boolean;\n    /** if true, this canvas will be set up to be transparent where possible */\n    transparent?: boolean;\n}\n\nexport class CanvasSource extends TextureSource<ICanvas>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    public uploadMethodId = 'image';\n    public autoDensity: boolean;\n    public transparent: boolean;\n\n    private _context2D: CanvasRenderingContext2D;\n\n    constructor(options: CanvasSourceOptions)\n    {\n        if (!options.resource)\n        {\n            options.resource = DOMAdapter.get().createCanvas();\n        }\n\n        if (!options.width)\n        {\n            options.width = options.resource.width;\n\n            if (!options.autoDensity)\n            {\n                options.width /= options.resolution;\n            }\n        }\n\n        if (!options.height)\n        {\n            options.height = options.resource.height;\n\n            if (!options.autoDensity)\n            {\n                options.height /= options.resolution;\n            }\n        }\n\n        super(options);\n\n        this.autoDensity = options.autoDensity;\n\n        const canvas = options.resource;\n\n        if (this.pixelWidth !== canvas.width || this.pixelWidth !== canvas.height)\n        {\n            this.resizeCanvas();\n        }\n\n        this.transparent = !!options.transparent;\n    }\n\n    public resizeCanvas()\n    {\n        if (this.autoDensity)\n        {\n            this.resource.style.width = `${this.width}px`;\n            this.resource.style.height = `${this.height}px`;\n        }\n\n        // only resize if wee need to, as this clears the canvas (even if values are set to the same)\n        if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight)\n        {\n            this.resource.width = this.pixelWidth;\n            this.resource.height = this.pixelHeight;\n        }\n    }\n\n    public resize(width = this.width, height = this.height, resolution = this._resolution): boolean\n    {\n        const didResize = super.resize(width, height, resolution);\n\n        if (didResize)\n        {\n            this.resizeCanvas();\n        }\n\n        return didResize;\n    }\n\n    public static test(resource: any): resource is ICanvas\n    {\n        return (globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement)\n        || (globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas);\n    }\n\n    /**\n     * Returns the 2D rendering context for the canvas.\n     * Caches the context after creating it.\n     * @returns The 2D rendering context of the canvas.\n     */\n    get context2D(): CanvasRenderingContext2D\n    {\n        return this._context2D || (this._context2D = this.resource.getContext('2d') as CanvasRenderingContext2D);\n    }\n}\n","import { DOMAdapter } from '../../../../../environment/adapter';\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { warn } from '../../../../../utils/logging/warn';\nimport { TextureSource } from './TextureSource';\n\nimport type { ICanvas } from '../../../../../environment/canvas/ICanvas';\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { TextureSourceOptions } from './TextureSource';\n\nexport type ImageResource =\nImageBitmap\n| HTMLCanvasElement\n| OffscreenCanvas\n| ICanvas\n| VideoFrame\n| HTMLImageElement\n| HTMLVideoElement;\n\nexport class ImageSource extends TextureSource<ImageResource>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n    public uploadMethodId = 'image';\n\n    constructor(options: TextureSourceOptions<ImageResource>)\n    {\n        if (options.resource && (globalThis.HTMLImageElement && options.resource instanceof HTMLImageElement))\n        {\n            const canvas = DOMAdapter.get().createCanvas(options.resource.width, options.resource.height);\n            const context = canvas.getContext('2d');\n\n            context.drawImage(options.resource, 0, 0, options.resource.width, options.resource.height);\n            options.resource = canvas;\n\n            // #if _DEBUG\n            warn('ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.');\n            // #endif\n        }\n\n        super(options);\n\n        this.autoGarbageCollect = true;\n    }\n\n    public static test(resource: any): resource is ImageResource\n    {\n        return (globalThis.HTMLImageElement && resource instanceof HTMLImageElement)\n        || (typeof ImageBitmap !== 'undefined' && resource instanceof ImageBitmap)\n        || (globalThis.VideoFrame && resource instanceof VideoFrame);\n    }\n}\n","/**\n * Returns a new object with all properties from the input object that have defined values.\n * @template T - The type of the input object.\n * @param {T} obj - The input object.\n * @returns {T} - A new object with only the defined properties from the input object.\n * @memberof utils\n * @ignore\n */\nexport function definedProps<T extends Record<string, any>>(obj: T): T\n{\n    const result: Partial<T> = {};\n\n    for (const key in obj)\n    {\n        if (obj[key] !== undefined)\n        {\n            result[key] = obj[key];\n        }\n    }\n\n    return result as T;\n}\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps';\nimport { uid } from '../../../../../utils/data/uid';\nimport { TextureStyle } from '../TextureStyle';\n\nimport type { BindResource } from '../../../gpu/shader/BindResource';\nimport type { ALPHA_MODES, SCALE_MODE, TEXTURE_DIMENSIONS, TEXTURE_FORMATS, WRAP_MODE } from '../const';\nimport type { TextureStyleOptions } from '../TextureStyle';\nimport type { TextureResourceOrOptions } from '../utils/textureFrom';\n\n/**\n * options for creating a new TextureSource\n * @memberof rendering\n */\nexport interface TextureSourceOptions<T extends Record<string, any> = any> extends TextureStyleOptions\n{\n    /**\n     * the resource that will be uploaded to the GPU. This is where we get our pixels from\n     * eg an ImageBimt / Canvas / Video etc\n     */\n    resource?: T;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    width?: number;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    height?: number;\n    /** the resolution of the texture. */\n    resolution?: number;\n    /** the format that the texture data has */\n    format?: TEXTURE_FORMATS;\n    /**\n     * Used by internal textures\n     * @ignore\n     */\n    sampleCount?: number;\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    antialias?: boolean;\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    dimensions?: TEXTURE_DIMENSIONS;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    mipLevelCount?: number;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    autoGenerateMipmaps?: boolean;\n    /** the alpha mode of the texture */\n    alphaMode?: ALPHA_MODES;\n    /** optional label, can be used for debugging */\n    label?: string;\n    /** If true, the Garbage Collector will unload this texture if it is not used after a period of time */\n    autoGarbageCollect?: boolean;\n}\n\n/**\n * A TextureSource stores the information that represents an image.\n * All textures have require TextureSource, which contains information about the source.\n * Therefore you can have many textures all using a single TextureSource (eg a sprite sheet)\n *\n * This is an class is extended depending on the source of the texture.\n * Eg if you are using an an image as your resource, then an ImageSource is used.\n * @memberof rendering\n * @typeParam T - The TextureSource's Resource type.\n */\nexport class TextureSource<T extends Record<string, any> = any> extends EventEmitter<{\n    change: BindResource;\n    update: TextureSource;\n    unload: TextureSource;\n    destroy: TextureSource;\n    resize: TextureSource;\n    styleChange: TextureSource;\n    updateMipmaps: TextureSource;\n    error: Error;\n}> implements BindResource\n{\n    /** The default options used when creating a new TextureSource. override these to add your own defaults */\n    public static defaultOptions: TextureSourceOptions = {\n        resolution: 1,\n        format: 'bgra8unorm',\n        alphaMode: 'premultiply-alpha-on-upload',\n        dimensions: '2d',\n        mipLevelCount: 1,\n        autoGenerateMipmaps: false,\n        sampleCount: 1,\n        antialias: false,\n        autoGarbageCollect: false,\n    };\n\n    /** unique id for this Texture source */\n    public readonly uid: number = uid('textureSource');\n    /** optional label, can be used for debugging */\n    public label: string;\n\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @ignore\n     * @internal\n     */\n    public readonly _resourceType = 'textureSource';\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     */\n    public _resourceId = uid('resource');\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @ignore\n     * @internal\n     */\n    public uploadMethodId = 'unknown';\n\n    // dimensions\n    public _resolution = 1;\n\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    public pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    public pixelHeight = 1;\n\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    public width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    public height = 1;\n\n    /**\n     * the resource that will be uploaded to the GPU. This is where we get our pixels from\n     * eg an ImageBimt / Canvas / Video etc\n     */\n    public resource: T;\n\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     * @ignore\n     */\n    public sampleCount = 1;\n\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    public mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    public autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    public format: TEXTURE_FORMATS = 'rgba8unorm';\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    public dimension: TEXTURE_DIMENSIONS = '2d';\n    /** the alpha mode of the texture */\n    public alphaMode: ALPHA_MODES;\n    private _style: TextureStyle;\n\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    public antialias = false;\n\n    /**\n     * Has the source been destroyed?\n     * @readonly\n     */\n    public destroyed: boolean;\n\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    public _touched = 0;\n\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    public _batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    public _textureBindLocation = -1;\n\n    public isPowerOfTwo: boolean;\n\n    /** If true, the Garbage Collector will unload this texture if it is not used after a period of time */\n    public autoGarbageCollect: boolean;\n\n    /**\n     * used internally to know where a texture came from. Usually assigned by the asset loader!\n     * @ignore\n     */\n    public _sourceOrigin: string;\n\n    /**\n     * @param options - options for creating a new TextureSource\n     */\n    constructor(protected readonly options: TextureSourceOptions<T> = {})\n    {\n        super();\n\n        options = { ...TextureSource.defaultOptions, ...options };\n\n        this.label = options.label ?? '';\n        this.resource = options.resource;\n        this.autoGarbageCollect = options.autoGarbageCollect;\n        this._resolution = options.resolution;\n\n        if (options.width)\n        {\n            this.pixelWidth = options.width * this._resolution;\n        }\n        else\n        {\n            this.pixelWidth = this.resource ? (this.resourceWidth ?? 1) : 1;\n        }\n\n        if (options.height)\n        {\n            this.pixelHeight = options.height * this._resolution;\n        }\n        else\n        {\n            this.pixelHeight = this.resource ? (this.resourceHeight ?? 1) : 1;\n        }\n\n        this.width = this.pixelWidth / this._resolution;\n        this.height = this.pixelHeight / this._resolution;\n\n        this.format = options.format;\n        this.dimension = options.dimensions;\n        this.mipLevelCount = options.mipLevelCount;\n        this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n        this.sampleCount = options.sampleCount;\n        this.antialias = options.antialias;\n        this.alphaMode = options.alphaMode;\n\n        this.style = new TextureStyle(definedProps(options));\n\n        this.destroyed = false;\n\n        this._refreshPOT();\n    }\n\n    /** returns itself */\n    get source(): TextureSource\n    {\n        return this;\n    }\n\n    /** the style of the texture */\n    get style(): TextureStyle\n    {\n        return this._style;\n    }\n\n    set style(value: TextureStyle)\n    {\n        if (this.style === value) return;\n\n        this._style?.off('change', this._onStyleChange, this);\n        this._style = value;\n        this._style?.on('change', this._onStyleChange, this);\n\n        this._onStyleChange();\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get addressMode(): WRAP_MODE\n    {\n        return this._style.addressMode;\n    }\n\n    set addressMode(value: WRAP_MODE)\n    {\n        this._style.addressMode = value;\n    }\n\n    /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n    get repeatMode(): WRAP_MODE\n    {\n        return this._style.addressMode;\n    }\n\n    set repeatMode(value: WRAP_MODE)\n    {\n        this._style.addressMode = value;\n    }\n\n    /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n    get magFilter(): SCALE_MODE\n    {\n        return this._style.magFilter;\n    }\n\n    set magFilter(value: SCALE_MODE)\n    {\n        this._style.magFilter = value;\n    }\n\n    /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n    get minFilter(): SCALE_MODE\n    {\n        return this._style.minFilter;\n    }\n\n    set minFilter(value: SCALE_MODE)\n    {\n        this._style.minFilter = value;\n    }\n\n    /** Specifies behavior for sampling between mipmap levels. */\n    get mipmapFilter(): SCALE_MODE\n    {\n        return this._style.mipmapFilter;\n    }\n\n    set mipmapFilter(value: SCALE_MODE)\n    {\n        this._style.mipmapFilter = value;\n    }\n\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    get lodMinClamp(): number\n    {\n        return this._style.lodMinClamp;\n    }\n\n    set lodMinClamp(value: number)\n    {\n        this._style.lodMinClamp = value;\n    }\n\n    /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n    get lodMaxClamp(): number\n    {\n        return this._style.lodMaxClamp;\n    }\n\n    set lodMaxClamp(value: number)\n    {\n        this._style.lodMaxClamp = value;\n    }\n\n    private _onStyleChange()\n    {\n        this.emit('styleChange', this);\n    }\n\n    /** call this if you have modified the texture outside of the constructor */\n    public update()\n    {\n        // update resource...\n        if (this.resource)\n        {\n            const resolution = this._resolution;\n\n            const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n\n            // no need to dispatch the update we resized as that will\n            // notify the texture systems anyway\n            if (didResize) return;\n        }\n\n        this.emit('update', this);\n    }\n\n    /** Destroys this texture source */\n    public destroy()\n    {\n        this.destroyed = true;\n        this.emit('destroy', this);\n        this.emit('change', this);\n\n        if (this._style)\n        {\n            this._style.destroy();\n            this._style = null;\n        }\n\n        this.uploadMethodId = null;\n        this.resource = null;\n        this.removeAllListeners();\n    }\n\n    /**\n     * This will unload the Texture source from the GPU. This will free up the GPU memory\n     * As soon as it is required fore rendering, it will be re-uploaded.\n     */\n    public unload()\n    {\n        this._resourceId = uid('resource');\n        this.emit('change', this);\n        this.emit('unload', this);\n    }\n\n    /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n    public get resourceWidth(): number\n    {\n        const { resource } = this;\n\n        return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n    }\n\n    /** the height of the resource. This is the REAL pure number, not accounting resolution */\n    public get resourceHeight(): number\n    {\n        const { resource } = this;\n\n        return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n    }\n\n    /**\n     * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n     * but will the size of the texture when rendered.\n     *\n     * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n     * density will have increased)\n     */\n    get resolution(): number\n    {\n        return this._resolution;\n    }\n\n    set resolution(resolution: number)\n    {\n        if (this._resolution === resolution) return;\n\n        this._resolution = resolution;\n\n        this.width = this.pixelWidth / resolution;\n        this.height = this.pixelHeight / resolution;\n    }\n\n    /**\n     * Resize the texture, this is handy if you want to use the texture as a render texture\n     * @param width - the new width of the texture\n     * @param height - the new height of the texture\n     * @param resolution - the new resolution of the texture\n     * @returns - if the texture was resized\n     */\n    public resize(width?: number, height?: number, resolution?: number): boolean\n    {\n        resolution = resolution || this._resolution;\n        width = width || this.width;\n        height = height || this.height;\n\n        // make sure we work with rounded pixels\n        const newPixelWidth = Math.round(width * resolution);\n        const newPixelHeight = Math.round(height * resolution);\n\n        this.width = newPixelWidth / resolution;\n        this.height = newPixelHeight / resolution;\n\n        this._resolution = resolution;\n\n        if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight)\n        {\n            return false;\n        }\n\n        this._refreshPOT();\n\n        this.pixelWidth = newPixelWidth;\n        this.pixelHeight = newPixelHeight;\n\n        this.emit('resize', this);\n\n        this._resourceId = uid('resource');\n        this.emit('change', this);\n\n        return true;\n    }\n\n    /**\n     * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n     * This is only important for RenderTexture instances, as standard Texture instances will have their\n     * mipmaps generated on upload. You should call this method after you make any change to the texture\n     *\n     * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n     * We want you, the developer to specify when this action should happen.\n     *\n     * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n     */\n    public updateMipmaps()\n    {\n        if (this.autoGenerateMipmaps && this.mipLevelCount > 1)\n        {\n            this.emit('updateMipmaps', this);\n        }\n    }\n\n    set wrapMode(value: WRAP_MODE)\n    {\n        this._style.wrapMode = value;\n    }\n\n    get wrapMode(): WRAP_MODE\n    {\n        return this._style.wrapMode;\n    }\n\n    set scaleMode(value: SCALE_MODE)\n    {\n        this._style.scaleMode = value;\n    }\n\n    /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n    get scaleMode(): SCALE_MODE\n    {\n        return this._style.scaleMode;\n    }\n\n    /**\n     * Refresh check for isPowerOfTwo texture based on size\n     * @private\n     */\n    protected _refreshPOT(): void\n    {\n        this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n    }\n\n    public static test(_resource: any): any\n    {\n        // this should be overridden by other sources..\n        throw new Error('Unimplemented');\n    }\n\n    /**\n     * A helper function that creates a new TextureSource based on the resource you provide.\n     * @param resource - The resource to create the texture source from.\n     */\n    public static from: (resource: TextureResourceOrOptions) => TextureSource;\n}\n","// VideoSource.ts\n\nimport { ExtensionType } from '../../../../../extensions/Extensions';\nimport { Ticker } from '../../../../../ticker/Ticker';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode';\nimport { TextureSource } from './TextureSource';\n\nimport type { ExtensionMetadata } from '../../../../../extensions/Extensions';\nimport type { Dict } from '../../../../../utils/types';\nimport type { ALPHA_MODES } from '../const';\nimport type { TextureSourceOptions } from './TextureSource';\n\ntype VideoResource = HTMLVideoElement;\n\n/**\n * Options for video sources.\n * @memberof rendering\n */\nexport interface VideoSourceOptions extends TextureSourceOptions<VideoResource>\n{\n    /** If true, the video will start loading immediately. */\n    autoLoad?: boolean;\n    /** If true, the video will start playing as soon as it is loaded. */\n    autoPlay?: boolean;\n    /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n    updateFPS?: number;\n    /** If true, the video will be loaded with the `crossorigin` attribute. */\n    crossorigin?: boolean | string;\n    /** If true, the video will loop when it ends. */\n    loop?: boolean;\n    /** If true, the video will be muted. */\n    muted?: boolean;\n    /** If true, the video will play inline. */\n    playsinline?: boolean;\n    /** If true, the video will be preloaded. */\n    preload?: boolean;\n    /** The time in milliseconds to wait for the video to preload before timing out. */\n    preloadTimeoutMs?: number;\n    /** The alpha mode of the video. */\n    alphaMode?: ALPHA_MODES;\n}\n\nexport interface VideoResourceOptionsElement\n{\n    src: string;\n    mime: string;\n}\n\n/**\n * A source for video-based textures.\n * @memberof rendering\n */\nexport class VideoSource extends TextureSource<VideoResource>\n{\n    public static extension: ExtensionMetadata = ExtensionType.TextureSource;\n\n    /** The default options for video sources. */\n    public static defaultOptions: VideoSourceOptions = {\n        ...TextureSource.defaultOptions,\n        /** If true, the video will start loading immediately. */\n        autoLoad: true,\n        /** If true, the video will start playing as soon as it is loaded. */\n        autoPlay: true,\n        /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n        updateFPS: 0,\n        /** If true, the video will be loaded with the `crossorigin` attribute. */\n        crossorigin: true,\n        /** If true, the video will loop when it ends. */\n        loop: false,\n        /** If true, the video will be muted. */\n        muted: true,\n        /** If true, the video will play inline. */\n        playsinline: true,\n        /** If true, the video will be preloaded. */\n        preload: false,\n    };\n\n    // Public\n    /** Whether or not the video is ready to play. */\n    public isReady = false;\n    /** The upload method for this texture. */\n    public uploadMethodId = 'video';\n\n    // Protected\n    /**\n     * When set to true will automatically play videos used by this texture once\n     * they are loaded. If false, it will not modify the playing state.\n     * @default true\n     */\n    protected autoPlay: boolean;\n\n    // Private\n    /**\n     * `true` to use Ticker.shared to auto update the base texture.\n     * @default true\n     */\n    private _autoUpdate: boolean;\n\n    /**\n     * `true` if the instance is currently connected to Ticker.shared to auto update the base texture.\n     * @default false\n     */\n    private _isConnectedToTicker: boolean;\n\n    /**\n     * Promise when loading.\n     * @default null\n     */\n    private _load: Promise<this>;\n\n    private _msToNextUpdate: number;\n    private _preloadTimeout: number;\n\n    /** Callback when completed with load. */\n    private _resolve: (value?: this | PromiseLike<this>) => void;\n    private _reject: (error: ErrorEvent) => void;\n\n    private _updateFPS: number;\n    private _videoFrameRequestCallbackHandle: number | null;\n\n    constructor(\n        options: VideoSourceOptions\n    )\n    {\n        super(options);\n\n        // Merge provided options with default ones\n        options = {\n            ...VideoSource.defaultOptions,\n            ...options\n        };\n\n        this._autoUpdate = true;\n        this._isConnectedToTicker = false;\n        this._updateFPS = options.updateFPS || 0;\n        this._msToNextUpdate = 0;\n        this.autoPlay = options.autoPlay !== false;\n        this.alphaMode = options.alphaMode ?? 'premultiply-alpha-on-upload';\n\n        // Binding for frame updates\n        this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n        this._videoFrameRequestCallbackHandle = null;\n\n        this._load = null;\n        this._resolve = null;\n        this._reject = null;\n\n        // Bind for listeners\n        this._onCanPlay = this._onCanPlay.bind(this);\n        this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n        this._onError = this._onError.bind(this);\n        this._onPlayStart = this._onPlayStart.bind(this);\n        this._onPlayStop = this._onPlayStop.bind(this);\n        this._onSeeked = this._onSeeked.bind(this);\n\n        if (options.autoLoad !== false)\n        {\n            void this.load();\n        }\n    }\n\n    /** Update the video frame if the source is not destroyed and meets certain conditions. */\n    protected updateFrame(): void\n    {\n        if (this.destroyed)\n        {\n            return;\n        }\n\n        if (this._updateFPS)\n        {\n            // Account for if video has had its playbackRate changed\n            const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n\n            this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n        }\n\n        if (!this._updateFPS || this._msToNextUpdate <= 0)\n        {\n            this._msToNextUpdate = this._updateFPS ? Math.floor(1000 / this._updateFPS) : 0;\n        }\n\n        if (this.isValid)\n        {\n            this.update();\n        }\n    }\n\n    /** Callback to update the video frame and potentially request the next frame update. */\n    private _videoFrameRequestCallback(): void\n    {\n        this.updateFrame();\n\n        if (this.destroyed)\n        {\n            this._videoFrameRequestCallbackHandle = null;\n        }\n        else\n        {\n            this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n                this._videoFrameRequestCallback\n            );\n        }\n    }\n\n    /**\n     * Checks if the resource has valid dimensions.\n     * @returns {boolean} True if width and height are set, otherwise false.\n     */\n    public get isValid(): boolean\n    {\n        return !!this.resource.videoWidth && !!this.resource.videoHeight;\n    }\n\n    /**\n     * Start preloading the video resource.\n     * @returns {Promise<this>} Handle the validate event\n     */\n    public async load(): Promise<this>\n    {\n        if (this._load)\n        {\n            return this._load;\n        }\n\n        const source = this.resource;\n        const options = this.options as VideoSourceOptions;\n\n        // Check if source data is enough and set it to complete if needed\n        if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA)\n            && source.width && source.height)\n        {\n            (source as any).complete = true;\n        }\n\n        // Add event listeners related to playback and seeking\n        source.addEventListener('play', this._onPlayStart);\n        source.addEventListener('pause', this._onPlayStop);\n        source.addEventListener('seeked', this._onSeeked);\n\n        // Add or handle source readiness event listeners\n        if (!this._isSourceReady())\n        {\n            if (!options.preload)\n            {\n                // since this event fires early, only bind if not waiting for a preload event\n                source.addEventListener('canplay', this._onCanPlay);\n            }\n            source.addEventListener('canplaythrough', this._onCanPlayThrough);\n            source.addEventListener('error', this._onError, true);\n        }\n        else\n        {\n            // Source is already ready, so handle it immediately\n            this._mediaReady();\n        }\n\n        this.alphaMode = await detectVideoAlphaMode();\n\n        // Create and return the loading promise\n        this._load = new Promise((resolve, reject): void =>\n        {\n            if (this.isValid)\n            {\n                resolve(this);\n            }\n            else\n            {\n                this._resolve = resolve;\n                this._reject = reject;\n\n                if (options.preloadTimeoutMs !== undefined)\n                {\n                    this._preloadTimeout = setTimeout(() =>\n                    {\n                        this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n                    }) as unknown as number;\n                }\n                source.load();\n            }\n        });\n\n        return this._load;\n    }\n\n    /**\n     * Handle video error events.\n     * @param event - The error event\n     */\n    private _onError(event: ErrorEvent): void\n    {\n        this.resource.removeEventListener('error', this._onError, true);\n        this.emit('error', event);\n\n        if (this._reject)\n        {\n            this._reject(event);\n            this._reject = null;\n            this._resolve = null;\n        }\n    }\n\n    /**\n     * Checks if the underlying source is playing.\n     * @returns True if playing.\n     */\n    private _isSourcePlaying(): boolean\n    {\n        const source = this.resource;\n\n        return (!source.paused && !source.ended);\n    }\n\n    /**\n     * Checks if the underlying source is ready for playing.\n     * @returns True if ready.\n     */\n    private _isSourceReady(): boolean\n    {\n        const source = this.resource;\n\n        return source.readyState > 2;\n    }\n\n    /** Runs the update loop when the video is ready to play. */\n    private _onPlayStart(): void\n    {\n        // Handle edge case where video might not have received its \"can play\" event yet\n        if (!this.isValid)\n        {\n            this._mediaReady();\n        }\n\n        this._configureAutoUpdate();\n    }\n\n    /** Stops the update loop when a pause event is triggered. */\n    private _onPlayStop(): void\n    {\n        this._configureAutoUpdate();\n    }\n\n    /** Handles behavior when the video completes seeking to the current playback position. */\n    private _onSeeked(): void\n    {\n        if (this._autoUpdate && !this._isSourcePlaying())\n        {\n            this._msToNextUpdate = 0;\n            this.updateFrame();\n            this._msToNextUpdate = 0;\n        }\n    }\n\n    private _onCanPlay(): void\n    {\n        const source = this.resource;\n\n        // Remove event listeners\n        source.removeEventListener('canplay', this._onCanPlay);\n\n        this._mediaReady();\n    }\n\n    private _onCanPlayThrough(): void\n    {\n        const source = this.resource;\n\n        // Remove event listeners\n        source.removeEventListener('canplaythrough', this._onCanPlay);\n\n        if (this._preloadTimeout)\n        {\n            clearTimeout(this._preloadTimeout);\n            this._preloadTimeout = undefined;\n        }\n\n        this._mediaReady();\n    }\n\n    /** Fired when the video is loaded and ready to play. */\n    private _mediaReady(): void\n    {\n        const source = this.resource;\n\n        if (this.isValid)\n        {\n            this.isReady = true;\n            this.resize(source.videoWidth, source.videoHeight);\n        }\n\n        // Reset update timers and perform a frame update\n        this._msToNextUpdate = 0;\n        this.updateFrame();\n        this._msToNextUpdate = 0;\n\n        // Resolve the loading promise if it exists\n        if (this._resolve)\n        {\n            this._resolve(this);\n            this._resolve = null;\n            this._reject = null;\n        }\n\n        // Handle play behavior based on current source status\n        if (this._isSourcePlaying())\n        {\n            this._onPlayStart();\n        }\n        else if (this.autoPlay)\n        {\n            void this.resource.play();\n        }\n    }\n\n    /** Cleans up resources and event listeners associated with this texture. */\n    public destroy()\n    {\n        this._configureAutoUpdate();\n\n        const source = this.resource;\n\n        if (source)\n        {\n            // Remove event listeners\n            source.removeEventListener('play', this._onPlayStart);\n            source.removeEventListener('pause', this._onPlayStop);\n            source.removeEventListener('seeked', this._onSeeked);\n            source.removeEventListener('canplay', this._onCanPlay);\n            source.removeEventListener('canplaythrough', this._onCanPlayThrough);\n            source.removeEventListener('error', this._onError, true);\n\n            // Clear the video source and pause\n            source.pause();\n            source.src = '';\n            source.load();\n        }\n\n        super.destroy();\n    }\n\n    /** Should the base texture automatically update itself, set to true by default. */\n    get autoUpdate(): boolean\n    {\n        return this._autoUpdate;\n    }\n\n    set autoUpdate(value: boolean)\n    {\n        if (value !== this._autoUpdate)\n        {\n            this._autoUpdate = value;\n            this._configureAutoUpdate();\n        }\n    }\n\n    /**\n     * How many times a second to update the texture from the video.\n     * Leave at 0 to update at every render.\n     * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n     */\n    get updateFPS(): number\n    {\n        return this._updateFPS;\n    }\n\n    set updateFPS(value: number)\n    {\n        if (value !== this._updateFPS)\n        {\n            this._updateFPS = value;\n            this._configureAutoUpdate();\n        }\n    }\n\n    /**\n     * Configures the updating mechanism based on the current state and settings.\n     *\n     * This method decides between using the browser's native video frame callback or a custom ticker\n     * for updating the video frame. It ensures optimal performance and responsiveness\n     * based on the video's state, playback status, and the desired frames-per-second setting.\n     *\n     * - If `_autoUpdate` is enabled and the video source is playing:\n     *   - It will prefer the native video frame callback if available and no specific FPS is set.\n     *   - Otherwise, it will use a custom ticker for manual updates.\n     * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n     */\n    private _configureAutoUpdate(): void\n    {\n        // Check if automatic updating is enabled and if the source is currently playing\n        if (this._autoUpdate && this._isSourcePlaying())\n        {\n            // Determine if we should use the browser's native video frame callback (generally for better performance)\n            if (!this._updateFPS && this.resource.requestVideoFrameCallback)\n            {\n                // If connected to a custom ticker, remove the update frame function from it\n                if (this._isConnectedToTicker)\n                {\n                    Ticker.shared.remove(this.updateFrame, this);\n                    this._isConnectedToTicker = false;\n                    // Reset the time until the next update\n                    this._msToNextUpdate = 0;\n                }\n\n                // Check if we haven't already requested a video frame callback, and if not, request one\n                if (this._videoFrameRequestCallbackHandle === null)\n                {\n                    this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n                        this._videoFrameRequestCallback\n                    );\n                }\n            }\n            else\n            {\n                // If a video frame request callback exists, cancel it, as we are switching to manual ticker-based updates\n                if (this._videoFrameRequestCallbackHandle !== null)\n                {\n                    this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n                    this._videoFrameRequestCallbackHandle = null;\n                }\n\n                // If not connected to the custom ticker, add the update frame function to it\n                if (!this._isConnectedToTicker)\n                {\n                    Ticker.shared.add(this.updateFrame, this);\n                    this._isConnectedToTicker = true;\n                    // Reset the time until the next update\n                    this._msToNextUpdate = 0;\n                }\n            }\n        }\n        else\n        {\n            // If automatic updating is disabled or the source isn't playing, perform cleanup\n\n            // Cancel any existing video frame callback request\n            if (this._videoFrameRequestCallbackHandle !== null)\n            {\n                this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n                this._videoFrameRequestCallbackHandle = null;\n            }\n\n            // Remove the update frame function from the custom ticker\n            if (this._isConnectedToTicker)\n            {\n                Ticker.shared.remove(this.updateFrame, this);\n                this._isConnectedToTicker = false;\n                // Reset the time until the next update\n                this._msToNextUpdate = 0;\n            }\n        }\n    }\n\n    /**\n     * Map of video MIME types that can't be directly derived from file extensions.\n     * @readonly\n     */\n    public static MIME_TYPES: Dict<string>\n        = {\n            ogv: 'video/ogg',\n            mov: 'video/quicktime',\n            m4v: 'video/mp4',\n        };\n\n    public static test(resource: any): resource is VideoResource\n    {\n        return (globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement);\n    }\n}\n","import { Cache } from '../../../../../assets/cache/Cache';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions';\nimport { TextureSource } from '../sources/TextureSource';\nimport { Texture } from '../Texture';\n\nimport type { ICanvas } from '../../../../../environment/canvas/ICanvas';\nimport type { TypedArray } from '../../buffer/Buffer';\nimport type { BufferSourceOptions } from '../sources/BufferImageSource';\nimport type { CanvasSourceOptions } from '../sources/CanvasSource';\nimport type { ImageResource } from '../sources/ImageSource';\nimport type { TextureSourceOptions } from '../sources/TextureSource';\nimport type { TextureSourceLike } from '../Texture';\n\ninterface TextureSourceConstructor<T extends TextureSource = TextureSource>\n{\n    new (options: TextureSourceOptions): T;\n    test(options: ImageResource | TypedArray | ArrayBuffer | ICanvas): boolean;\n}\n\nconst sources: TextureSourceConstructor[] = [];\n\nextensions.handleByList(ExtensionType.TextureSource, sources);\n\nexport type TextureResourceOrOptions =\n  ImageResource\n  | TextureSourceOptions<ImageResource>\n  | BufferSourceOptions\n  | CanvasSourceOptions;\n\n/**\n * @param options\n * @deprecated since v8.2.0\n * @see TextureSource.from\n */\nexport function autoDetectSource(options: TextureResourceOrOptions = {}): TextureSource\n{\n    return textureSourceFrom(options);\n}\n\n/**\n * Creates a texture source from the options provided\n * @param options - The options to create the texture source from. This can be\n */\nfunction textureSourceFrom(options: TextureResourceOrOptions = {}): TextureSource\n{\n    const hasResource = options && (options as TextureSourceOptions).resource;\n    const res = hasResource ? (options as TextureSourceOptions).resource : options;\n    const opts = hasResource ? options as TextureSourceOptions : { resource: options } as TextureSourceOptions;\n\n    for (let i = 0; i < sources.length; i++)\n    {\n        const Source = sources[i];\n\n        if (Source.test(res))\n        {\n            return new Source(opts);\n        }\n    }\n\n    throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\n\nexport function resourceToTexture(\n    options: TextureResourceOrOptions = {},\n    skipCache = false\n): Texture\n{\n    const hasResource = options && (options as TextureSourceOptions).resource;\n    const resource = hasResource ? (options as TextureSourceOptions).resource : options;\n    const opts = hasResource ? options as TextureSourceOptions : { resource: options } as TextureSourceOptions;\n\n    if (!skipCache && Cache.has(resource))\n    {\n        return Cache.get(resource);\n    }\n\n    const texture = new Texture({ source: textureSourceFrom(opts) });\n\n    texture.on('destroy', () =>\n    {\n        if (Cache.has(resource))\n        {\n            Cache.remove(resource);\n        }\n    });\n\n    if (!skipCache)\n    {\n        Cache.set(resource, texture);\n    }\n\n    return texture;\n}\n\n/**\n * Helper function that creates a returns Texture based on the source you provide.\n * The source should be loaded and ready to go. If not its best to grab the asset using Assets.\n * @param id - String or Source to create texture from\n * @param skipCache - Skip adding the texture to the cache\n * @returns The texture based on the Id provided\n */\nexport function textureFrom(id: TextureSourceLike, skipCache = false): Texture\n{\n    if (typeof id === 'string')\n    {\n        return Cache.get(id);\n    }\n    else if (id instanceof TextureSource)\n    {\n        return new Texture({ source: id });\n    }\n\n    // return a auto generated texture from resource\n    return resourceToTexture(id, skipCache);\n}\n\nTexture.from = textureFrom;\nTextureSource.from = textureSourceFrom;\n","const idCounts: Record<string, number> = Object.create(null);\nconst idHash: Record<string, number> = Object.create(null);\n\nexport function createIdFromString(value: string, groupId: string): number\n{\n    let id = idHash[value];\n\n    if (id === undefined)\n    {\n        if (idCounts[groupId] === undefined)\n        {\n            idCounts[groupId] = 1;\n        }\n\n        idHash[value] = id = idCounts[groupId]++;\n    }\n\n    return id;\n}\n","import type { ICanvas } from '../../environment/canvas/ICanvas';\nimport type { WebGLOptions, WebGLPipes, WebGLRenderer } from './gl/WebGLRenderer';\nimport type { WebGPUOptions, WebGPUPipes, WebGPURenderer } from './gpu/WebGPURenderer';\n\n/** A generic renderer. */\n/**\n * @memberof rendering\n * @extends rendering.WebGLRenderer\n * @extends rendering.WebGPURenderer\n */\nexport type Renderer<T extends ICanvas = HTMLCanvasElement> = WebGLRenderer<T> | WebGPURenderer<T>;\nexport type RenderPipes = WebGLPipes | WebGPUPipes;\n/**\n * @extends rendering.WebGLOptions\n * @extends rendering.WebGPUOptions\n */\nexport interface RendererOptions extends WebGLOptions, WebGPUOptions {}\n\n/* eslint-disable @typescript-eslint/indent */\n/**\n * Ids for the different render types.\n * The idea is that you can use bitwise operations to filter whether or not you want to do something\n * in a certain render type.\n * Filters for example can be compatible for both webGL or WebGPU but not compatible with canvas.\n * So internally if it works with both we set filter.compatibleRenderers = RendererType.WEBGL | RendererType.WEBGPU\n * if it only works with webgl we set filter.compatibleRenderers = RendererType.WEBGL\n *\n */\nexport enum RendererType\n{\n    WEBGL = 0b01,\n    WEBGPU = 0b10,\n    BOTH = 0b11\n}\n\nexport type GpuPowerPreference = 'low-power' | 'high-performance';\n","import type { Rectangle } from '../maths/shapes/Rectangle';\n\nexport interface CullingMixinConstructor\n{\n    /**\n     * If set, this shape is used for culling instead of the bounds of this object.\n     * It can improve the culling performance of objects with many children.\n     * The culling area is defined in local space.\n     * @memberof scene.Container#\n     */\n    cullArea: Rectangle,\n    /**\n     * Should this object be rendered if the bounds of this object are out of frame?\n     *\n     * Culling has no effect on whether updateTransform is called.\n     * @default false\n     * @memberof scene.Container#\n     */\n    cullable: boolean,\n    /**\n     * Determines if the children to the container can be culled\n     * Setting this to false allows PixiJS to bypass a recursive culling function\n     * Which can help to optimize very complex scenes\n     * @default true\n     * @memberof scene.Container#\n     */\n    cullableChildren: boolean,\n}\n\nexport const cullingMixin: CullingMixinConstructor = {\n    cullArea: null,\n    cullable: false,\n    cullableChildren: true,\n};\n","import { removeItems } from '../../../utils/data/removeItems';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\n\nimport type { Container, ContainerChild } from '../Container';\n\nexport interface ChildrenHelperMixin<C = ContainerChild>\n{\n    allowChildren: boolean;\n    addChild<U extends C[]>(...children: U): U[0];\n    removeChild<U extends C[]>(...children: U): U[0];\n    removeChildren(beginIndex?: number, endIndex?: number): C[];\n    removeChildAt<U extends C>(index: number): U;\n    getChildAt<U extends C>(index: number): U;\n    setChildIndex(child: C, index: number): void;\n    getChildIndex(child: C): number;\n    addChildAt<U extends C>(child: U, index: number): U;\n    swapChildren<U extends C>(child: U, child2: U): void;\n    removeFromParent(): void;\n\n    reparentChild<U extends C[]>(...child: U): U[0];\n    reparentChildAt<U extends C>(child: U, index: number): U;\n}\n\nexport const childrenHelperMixin: Partial<Container> = {\n\n    allowChildren: true,\n\n    /**\n     * Removes all children from this container that are within the begin and end indexes.\n     * @param beginIndex - The beginning position.\n     * @param endIndex - The ending position. Default value is size of the container.\n     * @returns - List of removed children\n     * @memberof scene.Container#\n     */\n    removeChildren(beginIndex = 0, endIndex?: number): ContainerChild[]\n    {\n        const end = endIndex ?? this.children.length;\n        const range = end - beginIndex;\n        const removed: ContainerChild[] = [];\n\n        if (range > 0 && range <= end)\n        {\n            for (let i = end - 1; i >= beginIndex; i--)\n            {\n                const child = this.children[i];\n\n                if (!child) continue;\n                removed.push(child);\n                child.parent = null;\n            }\n\n            removeItems(this.children, beginIndex, end);\n\n            const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n            if (renderGroup)\n            {\n                renderGroup.removeChildren(removed);\n            }\n\n            for (let i = 0; i < removed.length; ++i)\n            {\n                this.emit('childRemoved', removed[i], this, i);\n                removed[i].emit('removed', this);\n            }\n\n            return removed;\n        }\n        else if (range === 0 && this.children.length === 0)\n        {\n            return removed;\n        }\n\n        throw new RangeError('removeChildren: numeric values are outside the acceptable range.');\n    },\n\n    /**\n     * Removes a child from the specified index position.\n     * @param index - The index to get the child from\n     * @returns The child that was removed.\n     * @memberof scene.Container#\n     */\n    removeChildAt<U extends ContainerChild>(index: number): U\n    {\n        const child = this.getChildAt<U>(index);\n\n        return this.removeChild(child);\n    },\n\n    /**\n     * Returns the child at the specified index\n     * @param index - The index to get the child at\n     * @returns - The child at the given index, if any.\n     * @memberof scene.Container#\n     */\n    getChildAt<U extends ContainerChild>(index: number): U\n    {\n        if (index < 0 || index >= this.children.length)\n        {\n            throw new Error(`getChildAt: Index (${index}) does not exist.`);\n        }\n\n        return this.children[index] as U;\n    },\n\n    /**\n     * Changes the position of an existing child in the container container\n     * @param child - The child Container instance for which you want to change the index number\n     * @param index - The resulting index number for the child container\n     * @memberof scene.Container#\n     */\n    setChildIndex(child: ContainerChild, index: number): void\n    {\n        if (index < 0 || index >= this.children.length)\n        {\n            throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n        }\n\n        this.getChildIndex(child); // check if child exists\n        this.addChildAt(child, index);\n    },\n\n    /**\n     * Returns the index position of a child Container instance\n     * @param child - The Container instance to identify\n     * @returns - The index position of the child container to identify\n     * @memberof scene.Container#\n     */\n    getChildIndex(child: ContainerChild): number\n    {\n        const index = this.children.indexOf(child);\n\n        if (index === -1)\n        {\n            throw new Error('The supplied Container must be a child of the caller');\n        }\n\n        return index;\n    },\n\n    /**\n     * Adds a child to the container at a specified index. If the index is out of bounds an error will be thrown.\n     * If the child is already in this container, it will be moved to the specified index.\n     * @param {Container} child - The child to add.\n     * @param {number} index - The absolute index where the child will be positioned at the end of the operation.\n     * @returns {Container} The child that was added.\n     * @memberof scene.Container#\n     */\n    addChildAt<U extends ContainerChild>(child: U, index: number): U\n    {\n        // #if _DEBUG\n        if (!this.allowChildren)\n        {\n            deprecation(v8_0_0, 'addChildAt: Only Containers will be allowed to add children in v8.0.0');\n        }\n        // #endif\n\n        const { children } = this;\n\n        if (index < 0 || index > children.length)\n        {\n            throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n        }\n\n        // TODO - check if child is already in the list?\n        // we should be able to optimise this!\n\n        if (child.parent)\n        {\n            const currentIndex = child.parent.children.indexOf(child);\n\n            // If this child is in the container and in the same position, do nothing\n            if (child.parent === this && currentIndex === index)\n            {\n                return child;\n            }\n\n            if (currentIndex !== -1)\n            {\n                child.parent.children.splice(currentIndex, 1);\n            }\n        }\n\n        if (index === children.length)\n        {\n            children.push(child);\n        }\n        else\n        {\n            children.splice(index, 0, child);\n        }\n\n        child.parent = this;\n        child.didChange = true;\n        child._updateFlags = 0b1111;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.addChild(child);\n        }\n\n        if (this.sortableChildren) this.sortDirty = true;\n\n        this.emit('childAdded', child, this, index);\n        child.emit('added', this);\n\n        return child;\n    },\n    /**\n     * Swaps the position of 2 Containers within this container.\n     * @param child - First container to swap\n     * @param child2 - Second container to swap\n     * @memberof scene.Container#\n     */\n    swapChildren<U extends ContainerChild>(child: U, child2: U): void\n    {\n        if (child === child2)\n        {\n            return;\n        }\n\n        const index1 = this.getChildIndex(child);\n        const index2 = this.getChildIndex(child2);\n\n        this.children[index1] = child2;\n        this.children[index2] = child;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.structureDidChange = true;\n        }\n\n        this._didContainerChangeTick++;\n    },\n    /**\n     * Remove the Container from its parent Container. If the Container has no parent, do nothing.\n     * @memberof scene.Container#\n     */\n    removeFromParent()\n    {\n        this.parent?.removeChild(this);\n    },\n\n    /**\n     * Reparent the child to this container, keeping the same worldTransform.\n     * @param child - The child to reparent\n     * @returns The first child that was reparented.\n     * @memberof scene.Container#\n     */\n    reparentChild<U extends ContainerChild[]>(...child: U): U[0]\n    {\n        if (child.length === 1)\n        {\n            return this.reparentChildAt(child[0], this.children.length);\n        }\n\n        child.forEach((c) => this.reparentChildAt(c, this.children.length));\n\n        return child[0];\n    },\n\n    /**\n     * Reparent the child to this container at the specified index, keeping the same worldTransform.\n     * @param child - The child to reparent\n     * @param index - The index to reparent the child to\n     * @memberof scene.Container#\n     */\n    reparentChildAt<U extends ContainerChild>(child: U, index: number): U\n    {\n        if (child.parent === this)\n        {\n            this.setChildIndex(child, index);\n\n            return child;\n        }\n\n        const childMat = child.worldTransform.clone();\n\n        child.removeFromParent();\n        this.addChildAt(child, index);\n\n        const newMatrix = this.worldTransform.clone();\n\n        newMatrix.invert();\n        childMat.prepend(newMatrix);\n\n        child.setFromMatrix(childMat);\n\n        return child;\n    }\n} as Container;\n","import { extensions, ExtensionType } from '../../extensions/Extensions';\nimport { BigPool } from '../../utils/pool/PoolGroup';\n\nimport type { Effect, EffectConstructor } from '../../scene/container/Effect';\nimport type { PoolItem, PoolItemConstructor } from '../../utils/pool/Pool';\n\ninterface MaskConversionTest\n{\n    test: (item: any) => boolean;\n    maskClass: new (item: any) => Effect & PoolItem;\n}\n\nexport type MaskEffect = {mask: unknown} & Effect;\n\n/**\n * A class that manages the conversion of masks to mask effects.\n * @memberof rendering\n * @ignore\n */\nexport class MaskEffectManagerClass\n{\n    /**\n     * @private\n     */\n    public readonly _effectClasses: EffectConstructor[] = [];\n    private readonly _tests: MaskConversionTest[] = [];\n    private _initialized = false;\n\n    public init()\n    {\n        if (this._initialized) return;\n\n        this._initialized = true;\n\n        this._effectClasses.forEach((test) =>\n        {\n            this.add({\n                test: test.test,\n                maskClass: test\n            });\n        });\n    }\n\n    public add(test: MaskConversionTest)\n    {\n        this._tests.push(test);\n    }\n\n    public getMaskEffect(item: any): MaskEffect\n    {\n        if (!this._initialized) this.init();\n\n        for (let i = 0; i < this._tests.length; i++)\n        {\n            const test = this._tests[i];\n\n            if (test.test(item))\n            {\n                return BigPool.get(test.maskClass as PoolItemConstructor<MaskEffect & PoolItem>, item);\n            }\n        }\n\n        return item;\n    }\n\n    public returnMaskEffect(effect: Effect & PoolItem)\n    {\n        BigPool.return(effect);\n    }\n}\n\nexport const MaskEffectManager = new MaskEffectManagerClass();\n\n// Handle registration of extensions\nextensions\n    .handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n","import { FilterEffect } from '../../../filters/FilterEffect';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager';\n\nimport type { Filter } from '../../../filters/Filter';\nimport type { Rectangle } from '../../../maths/shapes/Rectangle';\nimport type { MaskEffect } from '../../../rendering/mask/MaskEffectManager';\nimport type { Container } from '../Container';\nimport type { Effect } from '../Effect';\n\nexport interface EffectsMixinConstructor\n{\n    mask?: Mask;\n    setMask?: (options: Partial<MaskOptions>) => void;\n    filters?: Filter | Filter[];\n}\n\nexport type Mask = number | Container | null;\n\nexport interface MaskOptions\n{\n    inverse: boolean;\n}\n\nexport interface EffectsMixin extends Required<EffectsMixinConstructor>\n{\n    _maskEffect?: MaskEffect;\n    _maskOptions?: MaskOptions;\n    _filterEffect?: FilterEffect,\n\n    filterArea?: Rectangle,\n    effects?: Effect[];\n\n    addEffect(effect: Effect): void;\n    removeEffect(effect: Effect): void;\n}\n\nexport const effectsMixin: Partial<Container> = {\n    _maskEffect: null,\n    _maskOptions: {\n        inverse: false,\n    },\n    _filterEffect: null,\n\n    /**\n     * @todo Needs docs.\n     * @memberof scene.Container#\n     * @type {Array<Effect>}\n     */\n    effects: [],\n\n    /**\n     * @todo Needs docs.\n     * @param effect - The effect to add.\n     * @memberof scene.Container#\n     * @ignore\n     */\n    addEffect(effect: Effect)\n    {\n        const index = this.effects.indexOf(effect);\n\n        if (index !== -1) return; // already exists!\n\n        this.effects.push(effect);\n\n        this.effects.sort((a, b) => a.priority - b.priority);\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.structureDidChange = true;\n        }\n\n        // if (this.renderGroup)\n        // {\n        //     this.renderGroup.structureDidChange = true;\n        // }\n\n        this._updateIsSimple();\n    },\n    /**\n     * @todo Needs docs.\n     * @param effect - The effect to remove.\n     * @memberof scene.Container#\n     * @ignore\n     */\n    removeEffect(effect: Effect)\n    {\n        const index = this.effects.indexOf(effect);\n\n        if (index === -1) return; // already exists!\n\n        this.effects.splice(index, 1);\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateIsSimple();\n    },\n\n    set mask(value: Mask)\n    {\n        const effect = this._maskEffect;\n\n        if (effect?.mask === value) return;\n\n        if (effect)\n        {\n            this.removeEffect(effect);\n\n            MaskEffectManager.returnMaskEffect(effect);\n\n            this._maskEffect = null;\n        }\n\n        if (value === null || value === undefined) return;\n\n        this._maskEffect = MaskEffectManager.getMaskEffect(value);\n\n        this.addEffect(this._maskEffect);\n    },\n\n    /**\n     * Used to set mask and control mask options.\n     * @param options\n     * @example\n     * import { Graphics, Sprite } from 'pixi.js';\n     *\n     * const graphics = new Graphics();\n     * graphics.beginFill(0xFF3300);\n     * graphics.drawRect(50, 250, 100, 100);\n     * graphics.endFill();\n     *\n     * const sprite = new Sprite(texture);\n     * sprite.setMask({\n     *     mask: graphics,\n     *     inverse: true,\n     * });\n     * @memberof scene.Container#\n     */\n    setMask(options: Partial<MaskOptions & { mask: Mask }>)\n    {\n        this._maskOptions = {\n            ...this._maskOptions,\n            ...options,\n        };\n\n        if (options.mask)\n        {\n            this.mask = options.mask;\n        }\n    },\n\n    /**\n     * Sets a mask for the displayObject. A mask is an object that limits the visibility of an\n     * object to the shape of the mask applied to it. In PixiJS a regular mask must be a\n     * {@link Graphics} or a {@link Sprite} object. This allows for much faster masking in canvas as it\n     * utilities shape clipping. Furthermore, a mask of an object must be in the subtree of its parent.\n     * Otherwise, `getLocalBounds` may calculate incorrect bounds, which makes the container's width and height wrong.\n     * To remove a mask, set this property to `null`.\n     *\n     * For sprite mask both alpha and red channel are used. Black mask is the same as transparent mask.\n     * @example\n     * import { Graphics, Sprite } from 'pixi.js';\n     *\n     * const graphics = new Graphics();\n     * graphics.beginFill(0xFF3300);\n     * graphics.drawRect(50, 250, 100, 100);\n     * graphics.endFill();\n     *\n     * const sprite = new Sprite(texture);\n     * sprite.mask = graphics;\n     * @memberof scene.Container#\n     */\n    get mask(): unknown\n    {\n        return this._maskEffect?.mask;\n    },\n\n    set filters(value: Filter | Filter[] | null | undefined)\n    {\n        if (!Array.isArray(value) && value) value = [value];\n\n        const effect = this._filterEffect ||= new FilterEffect();\n\n        // Ignore the Filter type\n        value = value as Filter[] | null | undefined;\n\n        const hasFilters = value?.length > 0;\n        const hadFilters = effect.filters?.length > 0;\n\n        const didChange = hasFilters !== hadFilters;\n\n        // Clone the filters array so we don't freeze the user-input\n        value = Array.isArray(value) ? value.slice(0) : value;\n\n        // Ensure filters are immutable via filters getter\n        effect.filters = Object.freeze(value);\n\n        if (didChange)\n        {\n            if (hasFilters)\n            {\n                this.addEffect(effect);\n            }\n            else\n            {\n                this.removeEffect(effect);\n\n                // sets the empty array...\n                effect.filters = value ?? null;\n            }\n        }\n    },\n\n    /**\n     * Sets the filters for the displayObject.\n     * IMPORTANT: This is a WebGL only feature and will be ignored by the canvas renderer.\n     * To remove filters simply set this property to `'null'`.\n     * @memberof scene.Container#\n     */\n    get filters(): readonly Filter[]\n    {\n        return this._filterEffect?.filters;\n    },\n\n    set filterArea(value: Rectangle)\n    {\n        this._filterEffect ||= new FilterEffect();\n\n        this._filterEffect.filterArea = value;\n    },\n\n    /**\n     * The area the filter is applied to. This is used as more of an optimization\n     * rather than figuring out the dimensions of the displayObject each frame you can set this rectangle.\n     *\n     * Also works as an interaction mask.\n     * @memberof scene.Container#\n     */\n    get filterArea(): Rectangle\n    {\n        return this._filterEffect?.filterArea;\n    },\n\n} as Container;\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\n\nimport type { Container } from '../Container';\n\nexport interface FindMixinConstructor\n{\n    label?: string;\n}\nexport interface FindMixin extends Required<FindMixinConstructor>\n{\n    /**\n     * @deprecated since 8.0.0\n     * @see Container#label\n     */\n    name: string;\n    getChildByName(label: RegExp | string, deep?: boolean): Container | null;\n    getChildByLabel(label: RegExp | string, deep?: boolean): Container | null;\n    getChildrenByLabel(label: RegExp | string, deep?: boolean, out?: Container[]): Container[];\n}\n\nexport const findMixin: Partial<Container> = {\n    /**\n     * The instance label of the object.\n     * @memberof scene.Container#\n     * @member {string} label\n     */\n    label: null,\n\n    /**\n     * The instance name of the object.\n     * @deprecated since 8.0.0\n     * @see scene.Container#label\n     * @member {string} name\n     * @memberof scene.Container#\n     */\n    get name(): string\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Container.name property has been removed, use Container.label instead');\n        // #endif\n\n        return this.label;\n    },\n    set name(value: string)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'Container.name property has been removed, use Container.label instead');\n        // #endif\n\n        this.label = value;\n    },\n\n    /**\n     * @method getChildByName\n     * @deprecated since 8.0.0\n     * @param {string} name - Instance name.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @returns {Container} The child with the specified name.\n     * @see scene.Container#getChildByLabel\n     * @memberof scene.Container#\n     */\n    getChildByName(name: string, deep = false): Container | null\n    {\n        return this.getChildByLabel(name, deep);\n    },\n    /**\n     * Returns the first child in the container with the specified label.\n     *\n     * Recursive searches are done in a pre-order traversal.\n     * @memberof scene.Container#\n     * @param {string|RegExp} label - Instance label.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @returns {Container} The child with the specified label.\n     */\n    getChildByLabel(label: string | RegExp, deep = false): Container | null\n    {\n        const children = this.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            if (child.label === label || (label instanceof RegExp && label.test(child.label))) return child;\n        }\n\n        if (deep)\n        {\n            for (let i = 0; i < children.length; i++)\n            {\n                const child = children[i];\n                const found = child.getChildByLabel(label, true);\n\n                if (found)\n                {\n                    return found;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    /**\n     * Returns all children in the container with the specified label.\n     * @memberof scene.Container#\n     * @param {string|RegExp} label - Instance label.\n     * @param {boolean}[deep=false] - Whether to search recursively\n     * @param {Container[]} [out=[]] - The array to store matching children in.\n     * @returns {Container[]} An array of children with the specified label.\n     */\n    getChildrenByLabel(label: string | RegExp, deep = false, out = []): Container[]\n    {\n        const children = this.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            const child = children[i];\n\n            if (child.label === label || (label instanceof RegExp && label.test(child.label)))\n            {\n                out.push(child);\n            }\n        }\n\n        if (deep)\n        {\n            for (let i = 0; i < children.length; i++)\n            {\n                children[i].getChildrenByLabel(label, true, out);\n            }\n        }\n\n        return out;\n    },\n} as Container;\n","import type { Container } from '../Container';\n\n/**\n * This function will crawl through the container essentially check if the children have changed.\n *\n * This function checkChildrenDidChange recursively checks if any child in a Container\n * or its children has changed. It does this by comparing a generated changeId for each\n * child against a stored value in previousData.\n * The changeId is a combination of the child's uid and _didChangeId, bitwise manipulated for uniqueness.\n * If a change is detected, it updates previousData and sets didChange to true.\n * The function returns a boolean indicating if any change was detected in the entire hierarchy of children.\n * @param container - the container to check for changes\n * @param previousData - the previous data from the last check made\n * @param previousData.data - the data array\n * @param previousData.index - the index of the data array\n * @param previousData.didChange - did the data change\n */\nexport function checkChildrenDidChange(\n    container: Container,\n    previousData: {\n        data: number[];\n        index: number;\n        didChange: boolean;\n    })\n{\n    const children = container.children;\n\n    for (let i = 0; i < children.length; i++)\n    {\n        const child = children[i];\n\n        const uid = child.uid;\n        const didChange = ((child._didViewChangeTick & 0xffff) << 16) | (child._didContainerChangeTick & 0xffff);\n\n        const index = previousData.index;\n\n        if (previousData.data[index] !== uid || previousData.data[index + 1] !== didChange)\n        {\n            previousData.data[previousData.index] = uid;\n            previousData.data[previousData.index + 1] = didChange;\n\n            previousData.didChange = true;\n        }\n\n        previousData.index = index + 2;\n\n        if (child.children.length)\n        {\n            checkChildrenDidChange(child, previousData);\n        }\n    }\n\n    return previousData.didChange;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Bounds } from '../bounds/Bounds';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds';\nimport { getLocalBounds } from '../bounds/getLocalBounds';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange';\n\nimport type { Size } from '../../../maths/misc/Size';\nimport type { Container } from '../Container';\n\nexport type Optional<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>;\n\nexport interface MeasureMixinConstructor\n{\n    width?: number;\n    height?: number;\n}\nexport interface MeasureMixin extends Required<MeasureMixinConstructor>\n{\n    getSize(out?: Size): Size;\n    setSize(width: number, height?: number): void;\n    setSize(value: Optional<Size, 'height'>): void;\n    getLocalBounds(bounds?: Bounds): Bounds;\n    getBounds(skipUpdate?: boolean, bounds?: Bounds): Bounds;\n    _localBoundsCacheData: LocalBoundsCacheData;\n    _localBoundsCacheId: number;\n    _setWidth(width: number, localWidth: number): void;\n    _setHeight(height: number, localHeight: number): void;\n}\n\ninterface LocalBoundsCacheData\n{\n    data: number[];\n    index: number;\n    didChange: boolean;\n    localBounds: Bounds;\n}\n\nconst tempMatrix = new Matrix();\n\nexport const measureMixin: Partial<Container> = {\n\n    _localBoundsCacheId: -1,\n    _localBoundsCacheData: null,\n\n    _setWidth(value: number, localWidth: number)\n    {\n        const sign = Math.sign(this.scale.x) || 1;\n\n        if (localWidth !== 0)\n        {\n            this.scale.x = (value / localWidth) * sign;\n        }\n        else\n        {\n            this.scale.x = sign;\n        }\n    },\n\n    _setHeight(value: number, localHeight: number)\n    {\n        const sign = Math.sign(this.scale.y) || 1;\n\n        if (localHeight !== 0)\n        {\n            this.scale.y = (value / localHeight) * sign;\n        }\n        else\n        {\n            this.scale.y = sign;\n        }\n    },\n\n    /**\n     * Retrieves the local bounds of the container as a Bounds object.\n     * @returns - The bounding area.\n     * @memberof scene.Container#\n     */\n    getLocalBounds(): Bounds\n    {\n        if (!this._localBoundsCacheData)\n        {\n            this._localBoundsCacheData = {\n                data: [],\n                index: 1,\n                didChange: false,\n                localBounds: new Bounds()\n            };\n        }\n\n        const localBoundsCacheData = this._localBoundsCacheData;\n\n        localBoundsCacheData.index = 1;\n        localBoundsCacheData.didChange = false;\n\n        if (localBoundsCacheData.data[0] !== this._didViewChangeTick)\n        {\n            localBoundsCacheData.didChange = true;\n            localBoundsCacheData.data[0] = this._didViewChangeTick;\n        }\n\n        checkChildrenDidChange(this, localBoundsCacheData);\n\n        if (localBoundsCacheData.didChange)\n        {\n            getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n        }\n\n        return localBoundsCacheData.localBounds;\n    },\n\n    /**\n     * Calculates and returns the (world) bounds of the display object as a [Rectangle]{@link Rectangle}.\n     * @param skipUpdate - Setting to `true` will stop the transforms of the scene graph from\n     *  being updated. This means the calculation returned MAY be out of date BUT will give you a\n     *  nice performance boost.\n     * @param bounds - Optional bounds to store the result of the bounds calculation.\n     * @returns - The minimum axis-aligned rectangle in world space that fits around this object.\n     * @memberof scene.Container#\n     */\n    getBounds(skipUpdate?: boolean, bounds?: Bounds): Bounds\n    {\n        return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n    },\n} as Container;\n","import type { Container } from '../Container';\n\nexport interface OnRenderMixinConstructor\n{\n    onRender?: (() => void | null);\n}\nexport interface OnRenderMixin extends Required<OnRenderMixinConstructor>\n{\n    _onRender: (() => void) | null;\n}\n\nexport const onRenderMixin: Partial<Container> = {\n    _onRender: null,\n\n    set onRender(func: () => void)\n    {\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (!func)\n        {\n            if (this._onRender)\n            {\n                renderGroup?.removeOnRender(this);\n            }\n\n            this._onRender = null;\n\n            return;\n        }\n\n        if (!this._onRender)\n        {\n            renderGroup?.addOnRender(this);\n        }\n\n        this._onRender = func;\n    },\n\n    /**\n     * This callback is used when the container is rendered. This is where you should add your custom\n     * logic that is needed to be run every frame.\n     *\n     * In v7 many users used `updateTransform` for this, however the way v8 renders objects is different\n     * and \"updateTransform\" is no longer called every frame\n     * @example\n     * const container = new Container();\n     * container.onRender = () => {\n     *    container.rotation += 0.01;\n     * };\n     * @memberof scene.Container#\n     */\n    get onRender(): () => void\n    {\n        return this._onRender;\n    }\n} as Container;\n","import type { Container } from '../Container';\n\nexport interface SortMixinConstructor\n{\n    zIndex?: number;\n    sortDirty?: boolean;\n    sortableChildren?: boolean;\n}\nexport interface SortMixin extends Required<SortMixinConstructor>\n{\n    _zIndex: number;\n\n    sortChildren: () => void;\n    depthOfChildModified: () => void;\n}\n\nexport const sortMixin: Partial<Container> = {\n    _zIndex: 0,\n    /**\n     * Should children be sorted by zIndex at the next render call.\n     *\n     * Will get automatically set to true if a new child is added, or if a child's zIndex changes.\n     * @type {boolean}\n     * @memberof scene.Container#\n     */\n    sortDirty: false,\n    /**\n     * If set to true, the container will sort its children by `zIndex` value\n     * when the next render is called, or manually if `sortChildren()` is called.\n     *\n     * This actually changes the order of elements in the array, so should be treated\n     * as a basic solution that is not performant compared to other solutions,\n     * such as {@link https://github.com/pixijs/layers PixiJS Layers}\n     *\n     * Also be aware of that this may not work nicely with the `addChildAt()` function,\n     * as the `zIndex` sorting may cause the child to automatically sorted to another position.\n     * @type {boolean}\n     * @memberof scene.Container#\n     */\n    sortableChildren: false,\n\n    /**\n     * The zIndex of the container.\n     *\n     * Setting this value, will automatically set the parent to be sortable. Children will be automatically\n     * sorted by zIndex value; a higher value will mean it will be moved towards the end of the array,\n     * and thus rendered on top of other display objects within the same container.\n     * @see scene.Container#sortableChildren\n     * @memberof scene.Container#\n     */\n    get zIndex()\n    {\n        return this._zIndex;\n    },\n\n    set zIndex(value: number)\n    {\n        if (this._zIndex === value) return;\n\n        this._zIndex = value;\n\n        this.depthOfChildModified();\n    },\n\n    depthOfChildModified()\n    {\n        if (this.parent)\n        {\n            this.parent.sortableChildren = true;\n            this.parent.sortDirty = true;\n        }\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n    },\n\n    /**\n     * Sorts children by zIndex.\n     * @memberof scene.Container#\n     */\n    sortChildren()\n    {\n        if (!this.sortDirty) return;\n\n        this.sortDirty = false;\n\n        this.children.sort(sortChildren);\n    },\n} as Container;\n\nfunction sortChildren(a: Container, b: Container): number\n{\n    return a._zIndex - b._zIndex;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Container } from '../Container';\n\nexport interface ToLocalGlobalMixin\n{\n    getGlobalPosition(point?: Point, skipUpdate?: boolean): Point;\n    toGlobal<P extends PointData = Point>(position: PointData, point?: P, skipUpdate?: boolean): P;\n    toLocal<P extends PointData = Point>(position: PointData, from?: Container, point?: P, skipUpdate?: boolean): P;\n}\n\nexport const toLocalGlobalMixin: Partial<Container> = {\n    /**\n     * Returns the global position of the container.\n     * @param point - The optional point to write the global value to.\n     * @param skipUpdate - Should we skip the update transform.\n     * @returns - The updated point.\n     * @memberof scene.Container#\n     */\n    getGlobalPosition(point: Point = new Point(), skipUpdate = false): Point\n    {\n        if (this.parent)\n        {\n            this.parent.toGlobal(this._position, point, skipUpdate);\n        }\n        else\n        {\n            point.x = this._position.x;\n            point.y = this._position.y;\n        }\n\n        return point;\n    },\n\n    /**\n     * Calculates the global position of the container.\n     * @param position - The world origin to calculate from.\n     * @param point - A Point object in which to store the value, optional\n     *  (otherwise will create a new Point).\n     * @param skipUpdate - Should we skip the update transform.\n     * @returns - A point object representing the position of this object.\n     * @memberof scene.Container#\n     */\n    toGlobal<P extends PointData = Point>(position: PointData, point?: P, skipUpdate = false): P\n    {\n        if (!skipUpdate)\n        {\n            this.updateLocalTransform();\n\n            const globalMatrix = updateTransformBackwards(this, new Matrix());\n\n            globalMatrix.append(this.localTransform);\n\n            return globalMatrix.apply<P>(position, point);\n        }\n\n        // simply apply the matrix..\n        return this.worldTransform.apply<P>(position, point);\n    },\n\n    /**\n     * Calculates the local position of the container relative to another point.\n     * @param position - The world origin to calculate from.\n     * @param from - The Container to calculate the global position from.\n     * @param point - A Point object in which to store the value, optional\n     *  (otherwise will create a new Point).\n     * @param skipUpdate - Should we skip the update transform\n     * @returns - A point object representing the position of this object\n     * @memberof scene.Container#\n     */\n    toLocal<P extends PointData = Point>(position: PointData, from?: Container, point?: P, skipUpdate?: boolean): P\n    {\n        if (from)\n        {\n            position = from.toGlobal(position, point, skipUpdate);\n        }\n\n        if (!skipUpdate)\n        {\n            this.updateLocalTransform();\n\n            const globalMatrix = updateTransformBackwards(this, new Matrix());\n\n            globalMatrix.append(this.localTransform);\n\n            return globalMatrix.applyInverse<P>(position, point);\n        }\n\n        // simply apply the matrix..\n        return this.worldTransform.applyInverse<P>(position, point);\n    }\n} as Container;\n","import { Matrix } from '../../maths/matrix/Matrix';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet';\n\nimport type { Instruction } from '../../rendering/renderers/shared/instructions/Instruction';\nimport type { ViewContainer } from '../view/ViewContainer';\nimport type { Container } from './Container';\n\n/**\n * A RenderGroup is a class that is responsible for I generating a set of instructions that are used to render the\n * root container and its children. It also watches for any changes in that container or its children,\n * these changes are analysed and either the instruction set is rebuild or the instructions data is updated.\n * @memberof rendering\n */\nexport class RenderGroup implements Instruction\n{\n    public renderPipeId = 'renderGroup';\n    public root: Container = null;\n\n    public canBundle = false;\n\n    public renderGroupParent: RenderGroup = null;\n    public renderGroupChildren: RenderGroup[] = [];\n\n    public worldTransform: Matrix = new Matrix();\n    public worldColorAlpha = 0xffffffff;\n    public worldColor = 0xffffff;\n    public worldAlpha = 1;\n\n    // these updates are transform changes..\n    public readonly childrenToUpdate: Record<number, { list: Container[]; index: number; }> = Object.create(null);\n    public updateTick = 0;\n\n    // these update are renderable changes..\n    public readonly childrenRenderablesToUpdate: { list: Container[]; index: number; } = { list: [], index: 0 };\n\n    // other\n    public structureDidChange = true;\n\n    public instructionSet: InstructionSet = new InstructionSet();\n\n    private readonly _onRenderContainers: Container[] = [];\n\n    public init(root: Container)\n    {\n        this.root = root;\n\n        if (root._onRender) this.addOnRender(root);\n\n        root.didChange = true;\n\n        const children = root.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.addChild(children[i]);\n        }\n    }\n\n    public reset()\n    {\n        this.renderGroupChildren.length = 0;\n\n        for (const i in this.childrenToUpdate)\n        {\n            const childrenAtDepth = this.childrenToUpdate[i];\n\n            childrenAtDepth.list.fill(null);\n            childrenAtDepth.index = 0;\n        }\n\n        this.childrenRenderablesToUpdate.index = 0;\n        this.childrenRenderablesToUpdate.list.fill(null);\n\n        this.root = null;\n        this.updateTick = 0;\n        this.structureDidChange = true;\n\n        this._onRenderContainers.length = 0;\n        this.renderGroupParent = null;\n    }\n\n    get localTransform()\n    {\n        return this.root.localTransform;\n    }\n\n    public addRenderGroupChild(renderGroupChild: RenderGroup)\n    {\n        if (renderGroupChild.renderGroupParent)\n        {\n            renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n        }\n\n        renderGroupChild.renderGroupParent = this;\n\n        this.renderGroupChildren.push(renderGroupChild);\n    }\n\n    private _removeRenderGroupChild(renderGroupChild: RenderGroup)\n    {\n        const index = this.renderGroupChildren.indexOf(renderGroupChild);\n\n        if (index > -1)\n        {\n            this.renderGroupChildren.splice(index, 1);\n        }\n\n        renderGroupChild.renderGroupParent = null;\n    }\n\n    public addChild(child: Container)\n    {\n        this.structureDidChange = true;\n\n        child.parentRenderGroup = this;\n\n        child.updateTick = -1;\n\n        if (child.parent === this.root)\n        {\n            child.relativeRenderGroupDepth = 1;\n        }\n        else\n        {\n            child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n        }\n\n        child.didChange = true;\n        this.onChildUpdate(child);\n\n        if (child.renderGroup)\n        {\n            this.addRenderGroupChild(child.renderGroup);\n\n            return;\n        }\n\n        if (child._onRender) this.addOnRender(child);\n\n        const children = child.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.addChild(children[i]);\n        }\n    }\n\n    public removeChild(child: Container)\n    {\n        // remove all the children...\n        this.structureDidChange = true;\n\n        if (child._onRender)\n        {\n            // Remove the child to the onRender list under the following conditions:\n            // 1. If the child is not a render group.\n            // 2. If the child is a render group root of this render group - which it can't be removed from in this case.\n            if (!child.renderGroup)\n            {\n                this.removeOnRender(child);\n            }\n        }\n\n        child.parentRenderGroup = null;\n\n        if (child.renderGroup)\n        {\n            this._removeRenderGroupChild(child.renderGroup);\n\n            return;\n        }\n\n        const children = child.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this.removeChild(children[i]);\n        }\n    }\n\n    public removeChildren(children: Container[])\n    {\n        for (let i = 0; i < children.length; i++)\n        {\n            this.removeChild(children[i]);\n        }\n    }\n\n    public onChildUpdate(child: Container)\n    {\n        let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n\n        if (!childrenToUpdate)\n        {\n            childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n                index: 0,\n                list: [],\n            };\n        }\n\n        childrenToUpdate.list[childrenToUpdate.index++] = child;\n    }\n\n    public updateRenderable(renderable: ViewContainer)\n    {\n        if (renderable.globalDisplayStatus < 0b111) return;\n        this.instructionSet.renderPipes[renderable.renderPipeId].updateRenderable(renderable);\n        renderable.didViewUpdate = false;\n    }\n\n    public onChildViewUpdate(child: Container)\n    {\n        this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n    }\n\n    get isRenderable(): boolean\n    {\n        return (this.root.localDisplayStatus === 0b111 && this.worldAlpha > 0);\n    }\n\n    /**\n     * adding a container to the onRender list will make sure the user function\n     * passed in to the user defined 'onRender` callBack\n     * @param container - the container to add to the onRender list\n     */\n    public addOnRender(container: Container)\n    {\n        this._onRenderContainers.push(container);\n    }\n\n    public removeOnRender(container: Container)\n    {\n        this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n    }\n\n    public runOnRender()\n    {\n        for (let i = 0; i < this._onRenderContainers.length; i++)\n        {\n            this._onRenderContainers[i]._onRender();\n        }\n    }\n\n    public destroy()\n    {\n        this.renderGroupParent = null;\n        this.root = null;\n        (this.childrenRenderablesToUpdate as any) = null;\n        (this.childrenToUpdate as any) = null;\n        (this.renderGroupChildren as any) = null;\n        (this._onRenderContainers as any) = null;\n        this.instructionSet = null;\n    }\n\n    public getChildren(out: Container[] = []): Container[]\n    {\n        const children = this.root.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this._getChildren(children[i], out);\n        }\n\n        return out;\n    }\n\n    private _getChildren(container: Container, out: Container[] = []): Container[]\n    {\n        out.push(container);\n\n        if (container.renderGroup) return out;\n\n        const children = container.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            this._getChildren(children[i], out);\n        }\n\n        return out;\n    }\n}\n","/**\n * Assigns properties from one object to another, using an optional array of property names to ignore.\n * @param target - The target object to assign properties to.\n * @param options - The object to assign properties from.\n * @param ignore - An object of property names to ignore ({ propToIgnore: true }).\n */\nexport function assignWithIgnore<T extends Record<string, any>>(\n    target: T,\n    options: T,\n    ignore: Record<string, boolean> = {}\n)\n{\n    for (const key in options)\n    {\n        if (!ignore[key] && options[key] !== undefined)\n        {\n            target[key] = options[key];\n        }\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../color/Color';\nimport { cullingMixin } from '../../culling/cullingMixin';\nimport { Matrix } from '../../maths/matrix/Matrix';\nimport { DEG_TO_RAD, RAD_TO_DEG } from '../../maths/misc/const';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { uid } from '../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { BigPool } from '../../utils/pool/PoolGroup';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin';\nimport { effectsMixin } from './container-mixins/effectsMixin';\nimport { findMixin } from './container-mixins/findMixin';\nimport { measureMixin } from './container-mixins/measureMixin';\nimport { onRenderMixin } from './container-mixins/onRenderMixin';\nimport { sortMixin } from './container-mixins/sortMixin';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin';\nimport { RenderGroup } from './RenderGroup';\nimport { assignWithIgnore } from './utils/assignWithIgnore';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { Rectangle } from '../../maths/shapes/Rectangle';\nimport type { BLEND_MODES } from '../../rendering/renderers/shared/state/const';\nimport type { Dict } from '../../utils/types';\nimport type { Optional } from './container-mixins/measureMixin';\nimport type { DestroyOptions } from './destroyTypes';\n\nexport type ContainerChild = Container;\n\n/**\n * This is where you'll find all the display objects available in Pixi.\n *\n * All display objects inherit from the {@link scene.Container} class. You can use a `Container` for simple grouping of\n * other display objects. Here's all the available display object classes.\n *\n * - {@link scene.Container} is the base class for all display objects that act as a container for other objects.\n *   - {@link scene.Sprite} is a display object that uses a texture\n *      - {@link scene.AnimatedSprite} is a sprite that can play animations\n *   - {@link scene.TilingSprite} a fast way of rendering a tiling image\n *   - {@link scene.NineSliceSprite} allows you to stretch a texture using 9-slice scaling\n *   - {@link scene.Graphics} is a graphic object that can be drawn to the screen.\n *   - {@link scene.Mesh} empowers you to have maximum flexibility to render any kind of visuals you can think of\n *      - {@link scene.MeshSimple} mimics Mesh, providing easy-to-use constructor arguments\n *      - {@link scene.MeshPlane} allows you to draw a texture across several points and then manipulate these points\n *      - {@link scene.MeshRope} allows you to draw a texture across several points and then manipulate these points\n *   - {@link scene.Text} render text using custom fonts\n *      - {@link scene.BitmapText} render text using a bitmap font\n *      - {@link scene.HTMLText} render text using HTML and CSS\n * @namespace scene\n */\n\n// as pivot and skew are the least used properties of a container, we can use this optimisation\n// to avoid allocating lots of unnecessary objects for them.\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\n\nexport interface ContainerEvents<C extends ContainerChild> extends PixiMixins.ContainerEvents\n{\n    added: [container: Container];\n    childAdded: [child: C, container: Container, index: number];\n    removed: [container: Container];\n    childRemoved: [child: C, container: Container, index: number];\n    destroyed: [container: Container];\n}\n\ntype AnyEvent = {\n    // The following is a hack to allow any custom event while maintaining type safety.\n    // For some reason, the tsc compiler gets angry about error TS1023\n    // \"An index signature parameter type must be either 'string' or 'number'.\"\n    // This is really odd since ({}&string) should interpret as string, but then again\n    // there is some black magic behind why this works in the first place.\n    // Closest thing to an explanation:\n    // https://stackoverflow.com/questions/70144348/why-does-a-union-of-type-literals-and-string-cause-ide-code-completion-wh\n    //\n    // Side note, we disable @typescript-eslint/ban-types since {}&string is the only syntax that works.\n    // Nor of the Record/unknown/never alternatives work.\n    // eslint-disable-next-line @typescript-eslint/ban-types\n    [K: ({} & string) | ({} & symbol)]: any;\n};\n\nexport const UPDATE_COLOR = 0b0001;\nexport const UPDATE_BLEND = 0b0010;\nexport const UPDATE_VISIBLE = 0b0100;\nexport const UPDATE_TRANSFORM = 0b1000;\n\nexport interface UpdateTransformOptions\n{\n    x: number;\n    y: number;\n    scaleX: number;\n    scaleY: number;\n    rotation: number;\n    skewX: number;\n    skewY: number;\n    pivotX: number;\n    pivotY: number;\n}\n\n/**\n * Constructor options used for `Container` instances.\n * ```js\n * const container = new Container({\n *    position: new Point(100, 200),\n *    scale: new Point(2, 2),\n *    rotation: Math.PI / 2,\n * });\n * ```\n * @memberof scene\n * @see scene.Container\n */\nexport interface ContainerOptions<C extends ContainerChild = ContainerChild> extends PixiMixins.ContainerOptions\n{\n    /** @see scene.Container#isRenderGroup */\n    isRenderGroup?: boolean;\n\n    /** @see scene.Container#blendMode */\n    blendMode?: BLEND_MODES;\n    /** @see scene.Container#tint */\n    tint?: ColorSource;\n\n    /** @see scene.Container#alpha */\n    alpha?: number;\n    /** @see scene.Container#angle */\n    angle?: number;\n    /** @see scene.Container#children */\n    children?: C[];\n    /** @see scene.Container#parent */\n    parent?: Container;\n    /** @see scene.Container#renderable */\n    renderable?: boolean;\n    /** @see scene.Container#rotation */\n    rotation?: number;\n    /** @see scene.Container#scale */\n    scale?: PointData | number;\n    /** @see scene.Container#pivot */\n    pivot?: PointData | number;\n    /** @see scene.Container#position */\n    position?: PointData;\n    /** @see scene.Container#skew */\n    skew?: PointData;\n    /** @see scene.Container#visible */\n    visible?: boolean;\n    /** @see scene.Container#x */\n    x?: number;\n    /** @see scene.Container#y */\n    y?: number;\n    /** @see scene.Container#boundArea */\n    boundsArea?: Rectangle;\n}\n\nexport interface Container<C extends ContainerChild>\n    extends PixiMixins.Container<C>, EventEmitter<ContainerEvents<C> & AnyEvent> {}\n\n/**\n * Container is a general-purpose display object that holds children. It also adds built-in support for advanced\n * rendering features like masking and filtering.\n *\n * It is the base class of all display objects that act as a container for other objects, including Graphics\n * and Sprite.\n *\n * <details id=\"transforms\">\n *\n * <summary>Transforms</summary>\n *\n * The [transform]{@link scene.Container#transform} of a display object describes the projection from its\n * local coordinate space to its parent's local coordinate space. The following properties are derived\n * from the transform:\n *\n * <table>\n *   <thead>\n *     <tr>\n *       <th>Property</th>\n *       <th>Description</th>\n *     </tr>\n *   </thead>\n *   <tbody>\n *     <tr>\n *       <td>[pivot]{@link scene.Container#pivot}</td>\n *       <td>\n *         Invariant under rotation, scaling, and skewing. The projection of into the parent's space of the pivot\n *         is equal to position, regardless of the other three transformations. In other words, It is the center of\n *         rotation, scaling, and skewing.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[position]{@link scene.Container#position}</td>\n *       <td>\n *         Translation. This is the position of the [pivot]{@link scene.Container#pivot} in the parent's local\n *         space. The default value of the pivot is the origin (0,0). If the top-left corner of your display object\n *         is (0,0) in its local space, then the position will be its top-left corner in the parent's local space.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[scale]{@link scene.Container#scale}</td>\n *       <td>\n *         Scaling. This will stretch (or compress) the display object's projection. The scale factors are along the\n *         local coordinate axes. In other words, the display object is scaled before rotated or skewed. The center\n *         of scaling is the [pivot]{@link scene.Container#pivot}.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[rotation]{@link scene.Container#rotation}</td>\n *       <td>\n *          Rotation. This will rotate the display object's projection by this angle (in radians).\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[skew]{@link scene.Container#skew}</td>\n *       <td>\n *         <p>Skewing. This can be used to deform a rectangular display object into a parallelogram.</p>\n *         <p>\n *         In PixiJS, skew has a slightly different behaviour than the conventional meaning. It can be\n *         thought of the net rotation applied to the coordinate axes (separately). For example, if \"skew.x\" is\n *          and \"skew.y\" is , then the line x = 0 will be rotated by  (y = -x*cot) and the line y = 0 will be\n *         rotated by  (y = x*tan). A line y = x*tan (i.e. a line at angle  to the x-axis in local-space) will\n *         be rotated by an angle between  and .\n *         </p>\n *         <p>\n *         It can be observed that if skew is applied equally to both axes, then it will be equivalent to applying\n *         a rotation. Indeed, if \"skew.x\" = - and \"skew.y\" = , it will produce an equivalent of \"rotation\" = .\n *         </p>\n *         <p>\n *         Another quite interesting observation is that \"skew.x\", \"skew.y\", rotation are commutative operations. Indeed,\n *         because rotation is essentially a careful combination of the two.\n *         </p>\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[angle]{@link scene.Container#angle}</td>\n *       <td>Rotation. This is an alias for [rotation]{@link scene.Container#rotation}, but in degrees.</td>\n *     </tr>\n *     <tr>\n *       <td>[x]{@link scene.Container#x}</td>\n *       <td>Translation. This is an alias for position.x!</td>\n *     </tr>\n *     <tr>\n *       <td>[y]{@link scene.Container#y}</td>\n *       <td>Translation. This is an alias for position.y!</td>\n *     </tr>\n *     <tr>\n *       <td>[width]{@link scene.Container#width}</td>\n *       <td>\n *         Implemented in [Container]{@link scene.Container}. Scaling. The width property calculates scale.x by dividing\n *         the \"requested\" width by the local bounding box width. It is indirectly an abstraction over scale.x, and there\n *         is no concept of user-defined width.\n *       </td>\n *     </tr>\n *     <tr>\n *       <td>[height]{@link scene.Container#height}</td>\n *       <td>\n *         Implemented in [Container]{@link scene.Container}. Scaling. The height property calculates scale.y by dividing\n *         the \"requested\" height by the local bounding box height. It is indirectly an abstraction over scale.y, and there\n *         is no concept of user-defined height.\n *       </td>\n *     </tr>\n *   </tbody>\n * </table>\n * </details>\n *\n * <details id=\"alpha\">\n * <summary>Alpha</summary>\n *\n * This alpha sets a display object's **relative opacity** w.r.t its parent. For example, if the alpha of a display\n * object is 0.5 and its parent's alpha is 0.5, then it will be rendered with 25% opacity (assuming alpha is not\n * applied on any ancestor further up the chain).\n * </details>\n *\n * <details id=\"visible\">\n * <summary>Renderable vs Visible</summary>\n *\n * The `renderable` and `visible` properties can be used to prevent a display object from being rendered to the\n * screen. However, there is a subtle difference between the two. When using `renderable`, the transforms  of the display\n * object (and its children subtree) will continue to be calculated. When using `visible`, the transforms will not\n * be calculated.\n * ```ts\n * import { BlurFilter, Container, Graphics, Sprite } from 'pixi.js';\n *\n * const container = new Container();\n * const sprite = Sprite.from('https://s3-us-west-2.amazonaws.com/s.cdpn.io/693612/IaUrttj.png');\n *\n * sprite.width = 512;\n * sprite.height = 512;\n *\n * // Adds a sprite as a child to this container. As a result, the sprite will be rendered whenever the container\n * // is rendered.\n * container.addChild(sprite);\n *\n * // Blurs whatever is rendered by the container\n * container.filters = [new BlurFilter()];\n *\n * // Only the contents within a circle at the center should be rendered onto the screen.\n * container.mask = new Graphics()\n *     .beginFill(0xffffff)\n *     .drawCircle(sprite.width / 2, sprite.height / 2, Math.min(sprite.width, sprite.height) / 2)\n *     .endFill();\n * ```\n *\n * </details>\n *\n * <details id=\"renderGroup\">\n * <summary>RenderGroup</summary>\n *\n * In PixiJS v8, containers can be set to operate in 'render group mode',\n * transforming them into entities akin to a stage in traditional rendering paradigms.\n * A render group is a root renderable entity, similar to a container,\n * but it's rendered in a separate pass with its own unique set of rendering instructions.\n * This approach enhances rendering efficiency and organization, particularly in complex scenes.\n *\n * You can enable render group mode on any container using container.enableRenderGroup()\n * or by initializing a new container with the render group property set to true (new Container({isRenderGroup: true})).\n *  The method you choose depends on your specific use case and setup requirements.\n *\n * An important aspect of PixiJSs rendering process is the automatic treatment of rendered scenes as render groups.\n * This conversion streamlines the rendering process, but understanding when and how this happens is crucial\n * to fully leverage its benefits.\n *\n * One of the key advantages of using render groups is the performance efficiency in moving them. Since transformations\n *  are applied at the GPU level, moving a render group, even one with complex and numerous children,\n * doesn't require recalculating the rendering instructions or performing transformations on each child.\n * This makes operations like panning a large game world incredibly efficient.\n *\n * However, it's crucial to note that render groups do not batch together.\n * This means that turning every container into a render group could actually slow things down,\n * as each render group is processed separately. It's best to use render groups judiciously, at a broader level,\n * rather than on a per-child basis.\n * This approach ensures you get the performance benefits without overburdening the rendering process.\n *\n * RenderGroups maintain their own set of rendering instructions,\n * ensuring that changes or updates within a render group don't affect the rendering\n * instructions of its parent or other render groups.\n *  This isolation ensures more stable and predictable rendering behavior.\n *\n * Additionally, renderGroups can be nested, allowing for powerful options in organizing different aspects of your scene.\n * This feature is particularly beneficial for separating complex game graphics from UI elements,\n * enabling intricate and efficient scene management in complex applications.\n *\n * This means that Containers have 3 levels of matrix to be mindful of:\n *\n * 1. localTransform, this is the transform of the container based on its own properties\n * 2. groupTransform, this it the transform of the container relative to the renderGroup it belongs too\n * 3. worldTransform, this is the transform of the container relative to the Scene being rendered\n * </details>\n * @memberof scene\n */\nexport class Container<C extends ContainerChild = ContainerChild> extends EventEmitter<ContainerEvents<C> & AnyEvent>\n{\n    /**\n     * Mixes all enumerable properties and methods from a source object to Container.\n     * @param source - The source of properties and methods to mix in.\n     */\n    public static mixin(source: Dict<any>): void\n    {\n        Object.defineProperties(Container.prototype, Object.getOwnPropertyDescriptors(source));\n    }\n\n    /** unique id for this container */\n    public readonly uid: number = uid('renderable');\n\n    /** @private */\n    public _updateFlags = 0b1111;\n\n    // the render group this container owns\n    /** @private */\n    public renderGroup: RenderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    public parentRenderGroup: RenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    public parentRenderGroupIndex: number = 0;\n\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    public didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    public didViewUpdate = false;\n\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    public relativeRenderGroupDepth = 0;\n\n    /**\n     * The array of children of this container.\n     * @readonly\n     */\n    public children: C[] = [];\n    /** The display object container that contains this display object. */\n    public parent: Container = null;\n\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    public includeInBuild = true;\n    /** @private */\n    public measurable = true;\n    /** @private */\n    public isSimple = true;\n\n    // / /////////////Transform related props//////////////\n\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /**\n     * @internal\n     * @ignore\n     */\n    public updateTick = -1;\n\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * @readonly\n     */\n    public localTransform: Matrix = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     */\n    public relativeGroupTransform: Matrix = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     */\n    public groupTransform: Matrix = this.relativeGroupTransform;\n\n    // the global transform taking into account the render group and all parents\n    private _worldTransform: Matrix;\n\n    /** If the object has been destroyed via destroy(). If true, it should not be used. */\n    public destroyed = false;\n\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     * @ignore\n     */\n    public _position: ObservablePoint = new ObservablePoint(this, 0, 0);\n\n    /**\n     * The scale factor of the object.\n     * @internal\n     * @ignore\n     */\n    public _scale: ObservablePoint = defaultScale;\n\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     * @ignore\n     */\n    public _pivot: ObservablePoint = defaultPivot;\n\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     * @ignore\n     */\n    public _skew: ObservablePoint = defaultSkew;\n\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _cx = 1;\n\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _sx = 0;\n\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _cy = 0;\n\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     * @ignore\n     */\n    public _sy = 1;\n\n    /**\n     * The rotation amount.\n     * @internal\n     * @ignore\n     */\n    private _rotation = 0;\n\n    // / COLOR related props //////////////\n\n    // color stored as ABGR\n    public localColor = 0xFFFFFF;\n    public localAlpha = 1;\n\n    public groupAlpha = 1; // A\n    public groupColor = 0xFFFFFF; // BGR\n    public groupColorAlpha = 0xFFFFFFFF; // ABGR\n\n    // / BLEND related props //////////////\n\n    /**\n     * @internal\n     * @ignore\n     */\n    public localBlendMode: BLEND_MODES = 'inherit';\n    /**\n     * @internal\n     * @ignore\n     */\n    public groupBlendMode: BLEND_MODES = 'normal';\n\n    // / VISIBILITY related props //////////////\n\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = not renderable, 1 = renderable) 0b001\n     * @internal\n     * @ignore\n     */\n    public localDisplayStatus = 0b111; // 0b11 | 0b10 | 0b01 | 0b00\n    /**\n     * @internal\n     * @ignore\n     */\n    public globalDisplayStatus = 0b111; // 0b11 | 0b10 | 0b01 | 0b00\n\n    public readonly renderPipeId: string;\n\n    /**\n     * An optional bounds area for this container. Setting this rectangle will stop the renderer\n     * from recursively measuring the bounds of each children and instead use this single boundArea.\n     * This is great for optimisation! If for example you have a 1000 spinning particles and you know they all sit\n     * within a specific bounds, then setting it will mean the renderer will not need to measure the\n     * 1000 children to find the bounds. Instead it will just use the bounds you set.\n     */\n    public boundsArea: Rectangle;\n\n    /**\n     * A value that increments each time the containe is modified\n     * eg children added, removed etc\n     * @ignore\n     */\n    public _didContainerChangeTick = 0;\n    /**\n     * A value that increments each time the container view is modified\n     * eg texture swap, geometry change etc\n     * @ignore\n     */\n    public _didViewChangeTick = 0;\n\n    /**\n     * We now use the _didContainerChangeTick and _didViewChangeTick to track changes\n     * @deprecated since 8.2.6\n     * @ignore\n     */\n    set _didChangeId(value: number)\n    {\n        this._didViewChangeTick = (value >> 12) & 0xFFF; // Extract the upper 12 bits\n        this._didContainerChangeTick = value & 0xFFF; // Extract the lower 12 bits\n    }\n\n    get _didChangeId(): number\n    {\n        return (this._didContainerChangeTick & 0xfff) | ((this._didViewChangeTick & 0xfff) << 12);\n    }\n\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    private _didLocalTransformChangeId = -1;\n\n    constructor(options: ContainerOptions<C> = {})\n    {\n        super();\n\n        this.effects = [];\n        assignWithIgnore(this, options, {\n            children: true,\n            parent: true,\n            effects: true,\n        });\n\n        options.children?.forEach((child) => this.addChild(child));\n        options.parent?.addChild(this);\n    }\n\n    /**\n     * Adds one or more children to the container.\n     *\n     * Multiple items can be added like so: `myContainer.addChild(thingOne, thingTwo, thingThree)`\n     * @param {...Container} children - The Container(s) to add to the container\n     * @returns {Container} - The first child that was added.\n     */\n    public addChild<U extends C[]>(...children: U): U[0]\n    {\n        // #if _DEBUG\n        if (!this.allowChildren)\n        {\n            deprecation(v8_0_0, 'addChild: Only Containers will be allowed to add children in v8.0.0');\n        }\n        // #endif\n\n        if (children.length > 1)\n        {\n            // loop through the array and add all children\n            for (let i = 0; i < children.length; i++)\n            {\n                this.addChild(children[i]);\n            }\n\n            return children[0];\n        }\n\n        const child = children[0];\n\n        if (child.parent === this)\n        {\n            this.children.splice(this.children.indexOf(child), 1);\n            this.children.push(child);\n\n            if (this.parentRenderGroup)\n            {\n                this.parentRenderGroup.structureDidChange = true;\n            }\n\n            return child;\n        }\n\n        if (child.parent)\n        {\n            // TODO Optimisation...if the parent has the same render group, this does not need to change!\n            child.parent.removeChild(child);\n        }\n\n        this.children.push(child);\n\n        if (this.sortableChildren) this.sortDirty = true;\n\n        child.parent = this;\n\n        child.didChange = true;\n\n        // TODO - OPtimise this? could check what the parent has set?\n        child._updateFlags = 0b1111;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.addChild(child);\n        }\n\n        this.emit('childAdded', child, this, this.children.length - 1);\n        child.emit('added', this);\n\n        this._didViewChangeTick++;\n\n        if (child._zIndex !== 0)\n        {\n            child.depthOfChildModified();\n        }\n\n        return child;\n    }\n\n    /**\n     * Removes one or more children from the container.\n     * @param {...Container} children - The Container(s) to remove\n     * @returns {Container} The first child that was removed.\n     */\n    public removeChild<U extends C[]>(...children: U): U[0]\n    {\n        // if there is only one argument we can bypass looping through the them\n        if (children.length > 1)\n        {\n            // loop through the arguments property and remove all children\n            for (let i = 0; i < children.length; i++)\n            {\n                this.removeChild(children[i]);\n            }\n\n            return children[0];\n        }\n\n        const child = children[0];\n\n        const index = this.children.indexOf(child);\n\n        if (index > -1)\n        {\n            this._didViewChangeTick++;\n\n            this.children.splice(index, 1);\n\n            if (this.renderGroup)\n            {\n                this.renderGroup.removeChild(child);\n            }\n            else if (this.parentRenderGroup)\n            {\n                this.parentRenderGroup.removeChild(child);\n            }\n\n            child.parent = null;\n            this.emit('childRemoved', child, this, index);\n            child.emit('removed', this);\n        }\n\n        return child;\n    }\n\n    /** @ignore */\n    public _onUpdate(point?: ObservablePoint)\n    {\n        if (point)\n        {\n            //   this.updateFlags |= UPDATE_TRANSFORM;\n\n            if (point === this._skew)\n            {\n                this._updateSkew();\n            }\n        }\n\n        this._didContainerChangeTick++;\n\n        if (this.didChange) return;\n        this.didChange = true;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.onChildUpdate(this);\n        }\n    }\n\n    set isRenderGroup(value: boolean)\n    {\n        if (!!this.renderGroup === value) return;\n\n        if (value)\n        {\n            this.enableRenderGroup();\n        }\n        else\n        {\n            this.disableRenderGroup();\n        }\n    }\n\n    /**\n     * Returns true if this container is a render group.\n     * This means that it will be rendered as a separate pass, with its own set of instructions\n     */\n    get isRenderGroup(): boolean\n    {\n        return !!this.renderGroup;\n    }\n\n    /**\n     * Calling this enables a render group for this container.\n     * This means it will be rendered as a separate set of instructions.\n     * The transform of the container will also be handled on the GPU rather than the CPU.\n     */\n    public enableRenderGroup(): void\n    {\n        if (this.renderGroup) return;\n\n        const parentRenderGroup = this.parentRenderGroup;\n\n        parentRenderGroup?.removeChild(this);\n\n        this.renderGroup = BigPool.get(RenderGroup, this);\n\n        // this group matrix will now be an identity matrix,\n        // as its own transform will be passed to the GPU\n        this.groupTransform = Matrix.IDENTITY;\n\n        parentRenderGroup?.addChild(this);\n\n        this._updateIsSimple();\n    }\n\n    /** This will disable the render group for this container. */\n    public disableRenderGroup(): void\n    {\n        if (!this.renderGroup) return;\n\n        const parentRenderGroup = this.parentRenderGroup;\n\n        parentRenderGroup?.removeChild(this);\n\n        BigPool.return(this.renderGroup);\n\n        this.renderGroup = null;\n        this.groupTransform = this.relativeGroupTransform;\n\n        parentRenderGroup?.addChild(this);\n\n        this._updateIsSimple();\n    }\n\n    /** @ignore */\n    public _updateIsSimple()\n    {\n        this.isSimple = !(this.renderGroup) && (this.effects.length === 0);\n    }\n\n    /**\n     * Current transform of the object based on world (parent) factors.\n     * @readonly\n     */\n    get worldTransform()\n    {\n        this._worldTransform ||= new Matrix();\n\n        if (this.renderGroup)\n        {\n            this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n        }\n        else if (this.parentRenderGroup)\n        {\n            this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n        }\n\n        return this._worldTransform;\n    }\n\n    // / ////// transform related stuff\n\n    /**\n     * The position of the container on the x axis relative to the local coordinates of the parent.\n     * An alias to position.x\n     */\n    get x(): number\n    {\n        return this._position.x;\n    }\n\n    set x(value: number)\n    {\n        this._position.x = value;\n    }\n\n    /**\n     * The position of the container on the y axis relative to the local coordinates of the parent.\n     * An alias to position.y\n     */\n    get y(): number\n    {\n        return this._position.y;\n    }\n\n    set y(value: number)\n    {\n        this._position.y = value;\n    }\n\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @since 4.0.0\n     */\n    get position(): ObservablePoint\n    {\n        return this._position;\n    }\n\n    set position(value: PointData)\n    {\n        this._position.copyFrom(value);\n    }\n\n    /**\n     * The rotation of the object in radians.\n     * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n     */\n    get rotation(): number\n    {\n        return this._rotation;\n    }\n\n    set rotation(value: number)\n    {\n        if (this._rotation !== value)\n        {\n            this._rotation = value;\n            this._onUpdate(this._skew);\n        }\n    }\n\n    /**\n     * The angle of the object in degrees.\n     * 'rotation' and 'angle' have the same effect on a display object; rotation is in radians, angle is in degrees.\n     */\n    get angle(): number\n    {\n        return this.rotation * RAD_TO_DEG;\n    }\n\n    set angle(value: number)\n    {\n        this.rotation = value * DEG_TO_RAD;\n    }\n\n    /**\n     * The center of rotation, scaling, and skewing for this display object in its local space. The `position`\n     * is the projection of `pivot` in the parent's local space.\n     *\n     * By default, the pivot is the origin (0, 0).\n     * @since 4.0.0\n     */\n    get pivot(): ObservablePoint\n    {\n        if (this._pivot === defaultPivot)\n        {\n            this._pivot = new ObservablePoint(this, 0, 0);\n        }\n\n        return this._pivot;\n    }\n\n    set pivot(value: PointData | number)\n    {\n        if (this._pivot === defaultPivot)\n        {\n            this._pivot = new ObservablePoint(this, 0, 0);\n        }\n\n        typeof value === 'number' ? this._pivot.set(value) : this._pivot.copyFrom(value);\n    }\n\n    /**\n     * The skew factor for the object in radians.\n     * @since 4.0.0\n     */\n    get skew(): ObservablePoint\n    {\n        if (this._skew === defaultSkew)\n        {\n            this._skew = new ObservablePoint(this, 0, 0);\n        }\n\n        return this._skew;\n    }\n\n    set skew(value: PointData)\n    {\n        if (this._skew === defaultSkew)\n        {\n            this._skew = new ObservablePoint(this, 0, 0);\n        }\n\n        this._skew.copyFrom(value);\n    }\n\n    /**\n     * The scale factors of this object along the local coordinate axes.\n     *\n     * The default scale is (1, 1).\n     * @since 4.0.0\n     */\n    get scale(): ObservablePoint\n    {\n        if (this._scale === defaultScale)\n        {\n            this._scale = new ObservablePoint(this, 1, 1);\n        }\n\n        return this._scale;\n    }\n\n    set scale(value: PointData | number)\n    {\n        if (this._scale === defaultScale)\n        {\n            this._scale = new ObservablePoint(this, 0, 0);\n        }\n\n        typeof value === 'number' ? this._scale.set(value) : this._scale.copyFrom(value);\n    }\n\n    /**\n     * The width of the Container, setting this will actually modify the scale to achieve the value set.\n     * @memberof scene.Container#\n     */\n    get width(): number\n    {\n        return Math.abs(this.scale.x * this.getLocalBounds().width);\n    }\n\n    set width(value: number)\n    {\n        const localWidth = this.getLocalBounds().width;\n\n        this._setWidth(value, localWidth);\n    }\n\n    /**\n     * The height of the Container, setting this will actually modify the scale to achieve the value set.\n     * @memberof scene.Container#\n     */\n    get height(): number\n    {\n        return Math.abs(this.scale.y * this.getLocalBounds().height);\n    }\n\n    set height(value: number)\n    {\n        const localHeight = this.getLocalBounds().height;\n\n        this._setHeight(value, localHeight);\n    }\n\n    /**\n     * Retrieves the size of the container as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the container.\n     * @memberof scene.Container#\n     */\n    public getSize(out?: Size): Size\n    {\n        if (!out)\n        {\n            out = {} as Size;\n        }\n\n        const bounds = this.getLocalBounds();\n\n        out.width = Math.abs(this.scale.x * bounds.width);\n        out.height = Math.abs(this.scale.y * bounds.height);\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the container to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     * @memberof scene.Container#\n     */\n    public setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        const size = this.getLocalBounds();\n\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n        else\n        {\n            height ??= value;\n        }\n\n        value !== undefined && this._setWidth(value, size.width);\n        height !== undefined && this._setHeight(height, size.height);\n    }\n\n    /** Called when the skew or the rotation changes. */\n    private _updateSkew(): void\n    {\n        const rotation = this._rotation;\n        const skew = this._skew;\n\n        this._cx = Math.cos(rotation + skew._y);\n        this._sx = Math.sin(rotation + skew._y);\n        this._cy = -Math.sin(rotation - skew._x); // cos, added PI/2\n        this._sy = Math.cos(rotation - skew._x); // sin, added PI/2\n    }\n\n    /**\n     * Updates the transform properties of the container (accepts partial values).\n     * @param {object} opts - The options for updating the transform.\n     * @param {number} opts.x - The x position of the container.\n     * @param {number} opts.y - The y position of the container.\n     * @param {number} opts.scaleX - The scale factor on the x-axis.\n     * @param {number} opts.scaleY - The scale factor on the y-axis.\n     * @param {number} opts.rotation - The rotation of the container, in radians.\n     * @param {number} opts.skewX - The skew factor on the x-axis.\n     * @param {number} opts.skewY - The skew factor on the y-axis.\n     * @param {number} opts.pivotX - The x coordinate of the pivot point.\n     * @param {number} opts.pivotY - The y coordinate of the pivot point.\n     */\n    public updateTransform(opts: Partial<UpdateTransformOptions>): this\n    {\n        this.position.set(\n            typeof opts.x === 'number' ? opts.x : this.position.x,\n            typeof opts.y === 'number' ? opts.y : this.position.y\n        );\n        this.scale.set(\n            typeof opts.scaleX === 'number' ? opts.scaleX || 1 : this.scale.x,\n            typeof opts.scaleY === 'number' ? opts.scaleY || 1 : this.scale.y\n        );\n        this.rotation = typeof opts.rotation === 'number' ? opts.rotation : this.rotation;\n        this.skew.set(\n            typeof opts.skewX === 'number' ? opts.skewX : this.skew.x,\n            typeof opts.skewY === 'number' ? opts.skewY : this.skew.y\n        );\n        this.pivot.set(\n            typeof opts.pivotX === 'number' ? opts.pivotX : this.pivot.x,\n            typeof opts.pivotY === 'number' ? opts.pivotY : this.pivot.y\n        );\n\n        return this;\n    }\n\n    /**\n     * Updates the local transform using the given matrix.\n     * @param matrix - The matrix to use for updating the transform.\n     */\n    public setFromMatrix(matrix: Matrix): void\n    {\n        matrix.decompose(this);\n    }\n\n    /** Updates the local transform. */\n    public updateLocalTransform(): void\n    {\n        const localTransformChangeId = this._didContainerChangeTick;\n\n        if (this._didLocalTransformChangeId === localTransformChangeId) return;\n\n        this._didLocalTransformChangeId = localTransformChangeId;\n        //   this.didChange = false;\n\n        const lt = this.localTransform;\n        const scale = this._scale;\n        const pivot = this._pivot;\n        const position = this._position;\n\n        const sx = scale._x;\n        const sy = scale._y;\n\n        const px = pivot._x;\n        const py = pivot._y;\n\n        // get the matrix values of the container based on its this properties..\n        lt.a = this._cx * sx;\n        lt.b = this._sx * sx;\n        lt.c = this._cy * sy;\n        lt.d = this._sy * sy;\n\n        lt.tx = position._x - ((px * lt.a) + (py * lt.c));\n        lt.ty = position._y - ((px * lt.b) + (py * lt.d));\n    }\n\n    // / ///// color related stuff\n\n    set alpha(value: number)\n    {\n        if (value === this.localAlpha) return;\n\n        this.localAlpha = value;\n\n        this._updateFlags |= UPDATE_COLOR;\n\n        this._onUpdate();\n    }\n\n    /** The opacity of the object. */\n    get alpha(): number\n    {\n        return this.localAlpha;\n    }\n\n    set tint(value: ColorSource)\n    {\n        const tempColor = Color.shared.setValue(value ?? 0xFFFFFF);\n        const bgr = tempColor.toBgrNumber();\n\n        if (bgr === this.localColor) return;\n\n        this.localColor = bgr;\n\n        this._updateFlags |= UPDATE_COLOR;\n\n        this._onUpdate();\n    }\n\n    /**\n     * The tint applied to the sprite. This is a hex value.\n     *\n     * A value of 0xFFFFFF will remove any tint effect.\n     * @default 0xFFFFFF\n     */\n    get tint(): number\n    {\n        const bgr = this.localColor;\n        // convert bgr to rgb..\n\n        return ((bgr & 0xFF) << 16) + (bgr & 0xFF00) + ((bgr >> 16) & 0xFF);\n    }\n\n    // / //////////////// blend related stuff\n\n    set blendMode(value: BLEND_MODES)\n    {\n        if (this.localBlendMode === value) return;\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_BLEND;\n\n        this.localBlendMode = value;\n\n        this._onUpdate();\n    }\n\n    /**\n     * The blend mode to be applied to the sprite. Apply a value of `'normal'` to reset the blend mode.\n     * @default 'normal'\n     */\n    get blendMode(): BLEND_MODES\n    {\n        return this.localBlendMode;\n    }\n\n    // / ///////// VISIBILITY / RENDERABLE /////////////////\n\n    /** The visibility of the object. If false the object will not be drawn, and the transform will not be updated. */\n    get visible()\n    {\n        return !!(this.localDisplayStatus & 0b010);\n    }\n\n    set visible(value: boolean)\n    {\n        const valueNumber = value ? 0b010 : 0;\n\n        if ((this.localDisplayStatus & 0b010) === valueNumber) return;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_VISIBLE;\n\n        this.localDisplayStatus ^= 0b010;\n\n        this._onUpdate();\n    }\n\n    /** @ignore */\n    get culled()\n    {\n        return !(this.localDisplayStatus & 0b100);\n    }\n\n    /** @ignore */\n    set culled(value: boolean)\n    {\n        const valueNumber = value ? 0 : 0b100;\n\n        if ((this.localDisplayStatus & 0b100) === valueNumber) return;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._updateFlags |= UPDATE_VISIBLE;\n        this.localDisplayStatus ^= 0b100;\n\n        this._onUpdate();\n    }\n\n    /** Can this object be rendered, if false the object will not be drawn but the transform will still be updated. */\n    get renderable()\n    {\n        return !!(this.localDisplayStatus & 0b001);\n    }\n\n    set renderable(value: boolean)\n    {\n        const valueNumber = value ? 0b001 : 0;\n\n        if ((this.localDisplayStatus & 0b001) === valueNumber) return;\n\n        this._updateFlags |= UPDATE_VISIBLE;\n        this.localDisplayStatus ^= 0b001;\n\n        if (this.parentRenderGroup)\n        {\n            this.parentRenderGroup.structureDidChange = true;\n        }\n\n        this._onUpdate();\n    }\n\n    /** Whether or not the object should be rendered. */\n    get isRenderable(): boolean\n    {\n        return (this.localDisplayStatus === 0b111 && this.groupAlpha > 0);\n    }\n\n    /**\n     * Removes all internal references and listeners as well as removes children from the display list.\n     * Do not use a Container after calling `destroy`.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.children=false] - if set to true, all the children will have their destroy\n     *  method called as well. 'options' will be passed on to those calls.\n     * @param {boolean} [options.texture=false] - Only used for children with textures e.g. Sprites. If options.children\n     * is set to true it should destroy the texture of the child sprite\n     * @param {boolean} [options.textureSource=false] - Only used for children with textures e.g. Sprites.\n     * If options.children is set to true it should destroy the texture source of the child sprite\n     * @param {boolean} [options.context=false] - Only used for children with graphicsContexts e.g. Graphics.\n     * If options.children is set to true it should destroy the context of the child graphics\n     */\n    public destroy(options: DestroyOptions = false): void\n    {\n        if (this.destroyed) return;\n        this.destroyed = true;\n\n        // remove children is faster than removeChild..\n\n        let oldChildren: ContainerChild[];\n\n        // we add this check as calling removeChildren on particle container will throw an error\n        // As we know it does cannot have any children, check before calling the function.\n        if (this.children.length)\n        {\n            oldChildren = this.removeChildren(0, this.children.length);\n        }\n\n        this.removeFromParent();\n        this.parent = null;\n        this._maskEffect = null;\n        this._filterEffect = null;\n        this.effects = null;\n        this._position = null;\n        this._scale = null;\n        this._pivot = null;\n        this._skew = null;\n\n        this.emit('destroyed', this);\n\n        this.removeAllListeners();\n\n        const destroyChildren = typeof options === 'boolean' ? options : options?.children;\n\n        if (destroyChildren && oldChildren)\n        {\n            for (let i = 0; i < oldChildren.length; ++i)\n            {\n                oldChildren[i].destroy(options);\n            }\n        }\n\n        this.renderGroup?.destroy();\n        this.renderGroup = null;\n    }\n}\n\nContainer.mixin(childrenHelperMixin);\nContainer.mixin(toLocalGlobalMixin);\nContainer.mixin(onRenderMixin);\nContainer.mixin(measureMixin);\nContainer.mixin(effectsMixin);\nContainer.mixin(findMixin);\nContainer.mixin(sortMixin);\nContainer.mixin(cullingMixin);\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { Rectangle } from '../../../maths/shapes/Rectangle';\n\n/**\n * Simple bounds implementation instead of more ambiguous [number, number, number, number]\n * @memberof rendering\n */\nexport interface BoundsData\n{\n    minX: number;\n    minY: number;\n    maxX: number;\n    maxY: number;\n}\n\nconst defaultMatrix = new Matrix();\n\n// TODO optimisations\n// 1 - get rectangle could use a dirty flag, rather than setting the data each time is called\n// 2- getFrame ALWAYS assumes a matrix, could be optimised to avoid the matrix calculation if not needed\n\n/**\n * A representation of an AABB bounding box.\n * @memberof rendering\n */\nexport class Bounds\n{\n    /** @default Infinity */\n    public minX = Infinity;\n\n    /** @default Infinity */\n    public minY = Infinity;\n\n    /** @default -Infinity */\n    public maxX = -Infinity;\n\n    /** @default -Infinity */\n    public maxY = -Infinity;\n\n    public matrix = defaultMatrix;\n\n    private _rectangle: Rectangle;\n\n    constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity)\n    {\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Checks if bounds are empty.\n     * @returns - True if empty.\n     */\n    public isEmpty(): boolean\n    {\n        return this.minX > this.maxX || this.minY > this.maxY;\n    }\n\n    /** The bounding rectangle of the bounds. */\n    get rectangle(): Rectangle\n    {\n        if (!this._rectangle)\n        {\n            this._rectangle = new Rectangle();\n        }\n\n        const rectangle = this._rectangle;\n\n        if (this.minX > this.maxX || this.minY > this.maxY)\n        {\n            rectangle.x = 0;\n            rectangle.y = 0;\n            rectangle.width = 0;\n            rectangle.height = 0;\n        }\n        else\n        {\n            rectangle.copyFromBounds(this);\n        }\n\n        return rectangle;\n    }\n\n    /** Clears the bounds and resets. */\n    public clear(): this\n    {\n        this.minX = Infinity;\n        this.minY = Infinity;\n        this.maxX = -Infinity;\n        this.maxY = -Infinity;\n\n        this.matrix = defaultMatrix;\n\n        return this;\n    }\n\n    /**\n     * Sets the bounds.\n     * @param x0 - left X of frame\n     * @param y0 - top Y of frame\n     * @param x1 - right X of frame\n     * @param y1 - bottom Y of frame\n     */\n    public set(x0: number, y0: number, x1: number, y1: number)\n    {\n        this.minX = x0;\n        this.minY = y0;\n        this.maxX = x1;\n        this.maxY = y1;\n    }\n\n    /**\n     * Adds sprite frame\n     * @param x0 - left X of frame\n     * @param y0 - top Y of frame\n     * @param x1 - right X of frame\n     * @param y1 - bottom Y of frame\n     * @param matrix\n     */\n    public addFrame(x0: number, y0: number, x1: number, y1: number, matrix?: Matrix): void\n    {\n        matrix ||= this.matrix;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        let minX = this.minX;\n        let minY = this.minY;\n        let maxX = this.maxX;\n        let maxY = this.maxY;\n\n        let x = (a * x0) + (c * y0) + tx;\n        let y = (b * x0) + (d * y0) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x1) + (c * y0) + tx;\n        y = (b * x1) + (d * y0) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x0) + (c * y1) + tx;\n        y = (b * x0) + (d * y1) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        x = (a * x1) + (c * y1) + tx;\n        y = (b * x1) + (d * y1) + ty;\n\n        if (x < minX) minX = x;\n        if (y < minY) minY = y;\n        if (x > maxX) maxX = x;\n        if (y > maxY) maxY = y;\n\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Adds a rectangle to the bounds.\n     * @param rect - The rectangle to be added.\n     * @param matrix - The matrix to apply to the bounds.\n     */\n    public addRect(rect: Rectangle, matrix?: Matrix)\n    {\n        this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n    }\n\n    /**\n     * Adds other {@link Bounds}.\n     * @param bounds - The Bounds to be added\n     * @param matrix\n     */\n    public addBounds(bounds: BoundsData, matrix?: Matrix)\n    {\n        this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n    }\n\n    /**\n     * Adds other Bounds, masked with Bounds.\n     * @param mask - The Bounds to be added.\n     */\n    public addBoundsMask(mask: Bounds): void\n    {\n        this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n        this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n        this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n        this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n    }\n\n    /**\n     * Adds other Bounds, multiplied with matrix.\n     * @param matrix - The matrix to apply to the bounds.\n     */\n    public applyMatrix(matrix: Matrix): void\n    {\n        const minX = this.minX;\n        const minY = this.minY;\n        const maxX = this.maxX;\n        const maxY = this.maxY;\n\n        // multiple bounds by matrix\n        const { a, b, c, d, tx, ty } = matrix;\n\n        let x = (a * minX) + (c * minY) + tx;\n        let y = (b * minX) + (d * minY) + ty;\n\n        this.minX = x;\n        this.minY = y;\n        this.maxX = x;\n        this.maxY = y;\n\n        x = (a * maxX) + (c * minY) + tx;\n        y = (b * maxX) + (d * minY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n\n        x = (a * minX) + (c * maxY) + tx;\n        y = (b * minX) + (d * maxY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n\n        x = (a * maxX) + (c * maxY) + tx;\n        y = (b * maxX) + (d * maxY) + ty;\n        this.minX = x < this.minX ? x : this.minX;\n        this.minY = y < this.minY ? y : this.minY;\n        this.maxX = x > this.maxX ? x : this.maxX;\n        this.maxY = y > this.maxY ? y : this.maxY;\n    }\n\n    /**\n     * Resizes the bounds object to include the given rectangle.\n     * @param rect - The rectangle to be included.\n     */\n    public fit(rect: Rectangle): this\n    {\n        if (this.minX < rect.left) this.minX = rect.left;\n        if (this.maxX > rect.right) this.maxX = rect.right;\n\n        if (this.minY < rect.top) this.minY = rect.top;\n        if (this.maxY > rect.bottom) this.maxY = rect.bottom;\n\n        return this;\n    }\n\n    /**\n     * Resizes the bounds object to include the given bounds.\n     * @param left - The left value of the bounds.\n     * @param right - The right value of the bounds.\n     * @param top - The top value of the bounds.\n     * @param bottom - The bottom value of the bounds.\n     */\n    public fitBounds(left: number, right: number, top: number, bottom: number): this\n    {\n        if (this.minX < left) this.minX = left;\n        if (this.maxX > right) this.maxX = right;\n\n        if (this.minY < top) this.minY = top;\n        if (this.maxY > bottom) this.maxY = bottom;\n\n        return this;\n    }\n\n    /**\n     * Pads bounds object, making it grow in all directions.\n     * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n     * @param paddingX - The horizontal padding amount.\n     * @param paddingY - The vertical padding amount.\n     */\n    public pad(paddingX: number, paddingY: number = paddingX): this\n    {\n        this.minX -= paddingX;\n        this.maxX += paddingX;\n\n        this.minY -= paddingY;\n        this.maxY += paddingY;\n\n        return this;\n    }\n\n    /** Ceils the bounds. */\n    public ceil(): this\n    {\n        this.minX = Math.floor(this.minX);\n        this.minY = Math.floor(this.minY);\n        this.maxX = Math.ceil(this.maxX);\n        this.maxY = Math.ceil(this.maxY);\n\n        return this;\n    }\n\n    /** Clones the bounds. */\n    public clone(): Bounds\n    {\n        return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n    }\n\n    /**\n     * Scales the bounds by the given values\n     * @param x - The X value to scale by.\n     * @param y - The Y value to scale by.\n     */\n    public scale(x: number, y: number = x): this\n    {\n        this.minX *= x;\n        this.minY *= y;\n        this.maxX *= x;\n        this.maxY *= y;\n\n        return this;\n    }\n\n    /** the x value of the bounds. */\n    get x(): number\n    {\n        return this.minX;\n    }\n    set x(value: number)\n    {\n        const width = this.maxX - this.minX;\n\n        this.minX = value;\n        this.maxX = value + width;\n    }\n\n    /** the y value of the bounds. */\n    get y(): number\n    {\n        return this.minY;\n    }\n\n    set y(value: number)\n    {\n        const height = this.maxY - this.minY;\n\n        this.minY = value;\n        this.maxY = value + height;\n    }\n\n    /** the width value of the bounds. */\n    get width(): number\n    {\n        return this.maxX - this.minX;\n    }\n\n    set width(value: number)\n    {\n        this.maxX = this.minX + value;\n    }\n\n    /** the height value of the bounds. */\n    get height(): number\n    {\n        return this.maxY - this.minY;\n    }\n\n    set height(value: number)\n    {\n        this.maxY = this.minY + value;\n    }\n\n    /** the left value of the bounds. */\n    get left(): number\n    {\n        return this.minX;\n    }\n\n    /** the right value of the bounds. */\n    get right(): number\n    {\n        return this.maxX;\n    }\n\n    /** the top value of the bounds. */\n    get top(): number\n    {\n        return this.minY;\n    }\n\n    /** the bottom value of the bounds. */\n    get bottom(): number\n    {\n        return this.maxY;\n    }\n\n    /** Is the bounds positive. */\n    get isPositive(): boolean\n    {\n        return (this.maxX - this.minX > 0) && (this.maxY - this.minY > 0);\n    }\n\n    get isValid(): boolean\n    {\n        return (this.minX + this.minY !== Infinity);\n    }\n\n    /**\n     * Adds screen vertices from array\n     * @param vertexData - calculated vertices\n     * @param beginOffset - begin offset\n     * @param endOffset - end offset, excluded\n     * @param matrix\n     */\n    public addVertexData(vertexData: Float32Array, beginOffset: number, endOffset: number, matrix?: Matrix): void\n    {\n        let minX = this.minX;\n        let minY = this.minY;\n        let maxX = this.maxX;\n        let maxY = this.maxY;\n\n        matrix ||= this.matrix;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        for (let i = beginOffset; i < endOffset; i += 2)\n        {\n            const localX = vertexData[i];\n            const localY = vertexData[i + 1];\n\n            const x = (a * localX) + (c * localY) + tx;\n            const y = (b * localX) + (d * localY) + ty;\n\n            minX = x < minX ? x : minX;\n            minY = y < minY ? y : minY;\n            maxX = x > maxX ? x : maxX;\n            maxY = y > maxY ? y : maxY;\n        }\n\n        this.minX = minX;\n        this.minY = minY;\n        this.maxX = maxX;\n        this.maxY = maxY;\n    }\n\n    /**\n     * Checks if the point is contained within the bounds.\n     * @param x - x coordinate\n     * @param y - y coordinate\n     */\n    public containsPoint(x: number, y: number): boolean\n    {\n        if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y)\n        {\n            return true;\n        }\n\n        return false;\n    }\n\n    public toString(): string\n    {\n        // eslint-disable-next-line max-len\n        return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n    }\n}\n\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { boundsPool, matrixPool } from './utils/matrixAndBoundsPool';\n\nimport type { Renderable } from '../../../rendering/renderers/shared/Renderable';\nimport type { Container } from '../Container';\nimport type { Bounds } from './Bounds';\n\nexport function getGlobalBounds(target: Container, skipUpdateTransform: boolean, bounds: Bounds): Bounds\n{\n    bounds.clear();\n\n    let parentTransform;\n    let pooledMatrix;\n\n    if (target.parent)\n    {\n        if (!skipUpdateTransform)\n        {\n            pooledMatrix = matrixPool.get().identity();\n            parentTransform = updateTransformBackwards(target, pooledMatrix);\n        }\n        else\n        {\n            parentTransform = target.parent.worldTransform;\n        }\n    }\n    else\n    {\n        parentTransform = Matrix.IDENTITY;\n    }\n\n    // then collect them...\n\n    _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n\n    if (pooledMatrix)\n    {\n        matrixPool.return(pooledMatrix);\n    }\n\n    if (!bounds.isValid)\n    {\n        bounds.set(0, 0, 0, 0);\n    }\n\n    return bounds;\n}\n\nexport function _getGlobalBounds(\n    target: Container,\n    bounds: Bounds,\n    parentTransform: Matrix,\n    skipUpdateTransform: boolean,\n): void\n{\n    if (!target.visible || !target.measurable) return;\n\n    let worldTransform: Matrix;\n\n    if (!skipUpdateTransform)\n    {\n        target.updateLocalTransform();\n\n        worldTransform = matrixPool.get();\n\n        worldTransform.appendFrom(target.localTransform, parentTransform);\n    }\n    else\n    {\n        worldTransform = target.worldTransform;\n    }\n\n    const parentBounds = bounds;\n    const preserveBounds = !!target.effects.length;\n\n    if (preserveBounds)\n    {\n        bounds = boundsPool.get().clear();\n    }\n\n    if (target.boundsArea)\n    {\n        bounds.addRect(target.boundsArea, worldTransform);\n    }\n    else\n    {\n        if ((target as Renderable).addBounds)\n        {\n            // save a copy\n            bounds.matrix = worldTransform;\n\n            (target as Renderable).addBounds(bounds);\n        }\n\n        for (let i = 0; i < target.children.length; i++)\n        {\n            _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n        }\n    }\n\n    if (preserveBounds)\n    {\n        for (let i = 0; i < target.effects.length; i++)\n        {\n            target.effects[i].addBounds?.(bounds);\n        }\n\n        parentBounds.addBounds(bounds, Matrix.IDENTITY);\n\n        boundsPool.return(bounds);\n    }\n\n    if (!skipUpdateTransform)\n    {\n        matrixPool.return(worldTransform);\n    }\n}\n\nexport function updateTransformBackwards(target: Container, parentTransform: Matrix)\n{\n    const parent = target.parent;\n\n    if (parent)\n    {\n        updateTransformBackwards(parent, parentTransform);\n\n        parent.updateLocalTransform();\n\n        parentTransform.append(parent.localTransform);\n    }\n\n    return parentTransform;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { warn } from '../../../utils/logging/warn';\nimport { boundsPool, matrixPool } from './utils/matrixAndBoundsPool';\n\nimport type { Renderable } from '../../../rendering/renderers/shared/Renderable';\nimport type { Container } from '../Container';\nimport type { Bounds } from './Bounds';\n\nexport function getLocalBounds(target: Container, bounds: Bounds, relativeMatrix?: Matrix): Bounds\n{\n    bounds.clear();\n\n    relativeMatrix ||= Matrix.IDENTITY;\n\n    _getLocalBounds(target, bounds, relativeMatrix, target, true);\n\n    if (!bounds.isValid)\n    {\n        bounds.set(0, 0, 0, 0);\n    }\n\n    return bounds;\n}\n\nfunction _getLocalBounds(\n    target: Container,\n    bounds: Bounds,\n    parentTransform: Matrix,\n    rootContainer: Container,\n    isRoot: boolean\n): void\n{\n    let relativeTransform: Matrix;\n\n    if (!isRoot)\n    {\n        if (!target.visible || !target.measurable) return;\n\n        target.updateLocalTransform();\n\n        const localTransform = target.localTransform;\n\n        relativeTransform = matrixPool.get();\n        relativeTransform.appendFrom(localTransform, parentTransform);\n    }\n    else\n    {\n        relativeTransform = matrixPool.get();\n        relativeTransform = parentTransform.copyTo(relativeTransform);\n    }\n\n    const parentBounds = bounds;\n    const preserveBounds = !!target.effects.length;\n\n    if (preserveBounds)\n    {\n        bounds = boundsPool.get().clear();\n    }\n\n    if (target.boundsArea)\n    {\n        bounds.addRect(target.boundsArea, relativeTransform);\n    }\n    else\n    {\n        if (target.renderPipeId)\n        {\n            bounds.matrix = relativeTransform;\n            (target as Renderable).addBounds(bounds);\n        }\n\n        const children = target.children;\n\n        for (let i = 0; i < children.length; i++)\n        {\n            _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n        }\n    }\n\n    if (preserveBounds)\n    {\n        for (let i = 0; i < target.effects.length; i++)\n        {\n            target.effects[i].addLocalBounds?.(bounds, rootContainer);\n        }\n\n        // TODO - make a add transformed bounds?\n        parentBounds.addBounds(bounds, Matrix.IDENTITY);\n\n        boundsPool.return(bounds);\n    }\n\n    matrixPool.return(relativeTransform);\n}\n\nexport function getParent(target: Container, root: Container, matrix: Matrix)\n{\n    const parent = target.parent;\n\n    if (!parent)\n    {\n        // we have reach the top of the tree!\n        // #if _DEBUG\n        warn('Item is not inside the root container');\n        // #endif\n\n        return;\n    }\n\n    if (parent !== root)\n    {\n        getParent(parent, root, matrix);\n\n        parent.updateLocalTransform();\n        matrix.append(parent.localTransform);\n    }\n}\n\n","import { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Pool } from '../../../../utils/pool/Pool';\nimport { Bounds } from '../Bounds';\n\nimport type { PoolItem } from '../../../../utils/pool/Pool';\n\ntype MatrixPoolItem = Matrix & PoolItem;\ntype BoundsPoolItem = Bounds & PoolItem;\nexport const matrixPool = new Pool<MatrixPoolItem>(Matrix);\nexport const boundsPool = new Pool<BoundsPoolItem>(Bounds);\n","export function multiplyHexColors(color1: number, color2: number): number\n{\n    if (color1 === 0xFFFFFF || !color2) return color2;\n    if (color2 === 0xFFFFFF || !color1) return color1;\n\n    const r1 = (color1 >> 16) & 0xFF;\n    const g1 = (color1 >> 8) & 0xFF;\n    const b1 = color1 & 0xFF;\n\n    const r2 = (color2 >> 16) & 0xFF;\n    const g2 = (color2 >> 8) & 0xFF;\n    const b2 = color2 & 0xFF;\n\n    const r = (r1 * r2) / 255;\n    const g = (g1 * g2) / 255;\n    const b = (b1 * b2) / 255;\n\n    return (r << 16) + (g << 8) + b;\n}\n","import { Matrix } from '../../../maths/matrix/Matrix';\nimport { multiplyHexColors } from '../../container/utils/multiplyHexColors';\n\nimport type { Batch, Batcher } from '../../../rendering/batcher/shared/Batcher';\nimport type { DefaultBatchableMeshElement } from '../../../rendering/batcher/shared/DefaultBatcher';\nimport type { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport type { Graphics } from './Graphics';\n\nconst identityMatrix = new Matrix();\n/**\n * A batchable graphics object.\n * @ignore\n */\n\nexport class BatchableGraphics implements DefaultBatchableMeshElement\n{\n    public readonly packAsQuad = false;\n    public batcherName = 'default';\n\n    public texture: Texture;\n\n    public renderable: Graphics;\n    public indexOffset: number;\n    public indexSize: number;\n    public attributeOffset: number;\n    public attributeSize: number;\n    public baseColor: number;\n    public alpha: number;\n    public applyTransform = true;\n    public roundPixels: 0 | 1 = 0;\n\n    public _indexStart: number;\n    public _textureId: number;\n    public _attributeStart: number;\n    public _batcher: Batcher = null;\n    public _batch: Batch = null;\n\n    public geometryData: { vertices: number[]; uvs: number[]; indices: number[]; };\n\n    get uvs()\n    {\n        return this.geometryData.uvs;\n    }\n\n    get positions()\n    {\n        return this.geometryData.vertices;\n    }\n\n    get indices()\n    {\n        return this.geometryData.indices;\n    }\n\n    get blendMode()\n    {\n        if (this.applyTransform)\n        {\n            return this.renderable.groupBlendMode;\n        }\n\n        return 'normal';\n    }\n    get color()\n    {\n        const rgb = this.baseColor;\n        const bgr = (rgb >> 16) | (rgb & 0xff00) | ((rgb & 0xff) << 16);\n        const renderable = this.renderable;\n\n        if (renderable)\n        {\n            return multiplyHexColors(bgr, renderable.groupColor)\n            + ((this.alpha * renderable.groupAlpha * 255) << 24);\n        }\n\n        return bgr + ((this.alpha * 255) << 24);\n    }\n\n    get transform()\n    {\n        return this.renderable?.groupTransform || identityMatrix;\n    }\n\n    public copyTo(gpuBuffer: BatchableGraphics)\n    {\n        gpuBuffer.indexOffset = this.indexOffset;\n        gpuBuffer.indexSize = this.indexSize;\n\n        gpuBuffer.attributeOffset = this.attributeOffset;\n        gpuBuffer.attributeSize = this.attributeSize;\n\n        gpuBuffer.baseColor = this.baseColor;\n        gpuBuffer.alpha = this.alpha;\n\n        gpuBuffer.texture = this.texture;\n        gpuBuffer.geometryData = this.geometryData;\n    }\n\n    public reset()\n    {\n        this.applyTransform = true;\n        this.renderable = null;\n    }\n}\n","/* eslint-disable no-console */\nimport parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn';\n\nimport type { GraphicsPath } from '../path/GraphicsPath';\n\ninterface SubPath\n{\n    startX: number;\n    startY: number;\n}\n\n// TODO optimise and cache the paths?\nexport function SVGToGraphicsPath(svgPath: string, path: GraphicsPath): GraphicsPath\n{\n    const commands = parse(svgPath);\n\n    const subpaths: SubPath[] = [];\n    let currentSubPath: SubPath | null = null;\n\n    let lastX = 0;\n    let lastY = 0;\n\n    for (let i = 0; i < commands.length; i++)\n    {\n        const command = commands[i];\n        const type = command[0];\n        const data = command; // alias for 1-based referencing\n\n        switch (type)\n        {\n            case 'M':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.moveTo(lastX, lastY);\n                break;\n            case 'm':\n\n                lastX += data[1];\n                lastY += data[2];\n\n                path.moveTo(lastX, lastY);\n                break;\n            case 'H':\n                lastX = data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'h':\n                lastX += data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'V':\n                lastY = data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'v':\n                lastY += data[1];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'L':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'l':\n                lastX += data[1];\n                lastY += data[2];\n\n                path.lineTo(lastX, lastY);\n                break;\n            case 'C':\n\n                lastX = data[5];\n                lastY = data[6];\n\n                path.bezierCurveTo(\n                    data[1], data[2],\n                    data[3], data[4],\n                    lastX, lastY\n                );\n                break;\n            case 'c':\n                path.bezierCurveTo(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4],\n                    lastX + data[5], lastY + data[6]\n                );\n\n                lastX += data[5];\n                lastY += data[6];\n                break;\n            case 'S':\n                lastX = data[3];\n                lastY = data[4];\n\n                path.bezierCurveToShort(\n                    data[1], data[2],\n                    lastX, lastY\n                );\n                break;\n            case 's':\n                path.bezierCurveToShort(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4],\n                );\n\n                lastX += data[3];\n                lastY += data[4];\n                break;\n            case 'Q':\n                lastX = data[3];\n                lastY = data[4];\n\n                path.quadraticCurveTo(\n                    data[1], data[2],\n                    lastX, lastY\n                );\n                break;\n            case 'q':\n                path.quadraticCurveTo(\n                    lastX + data[1], lastY + data[2],\n                    lastX + data[3], lastY + data[4]\n                );\n\n                lastX += data[3];\n                lastY += data[4];\n                break;\n            case 'T':\n                lastX = data[1];\n                lastY = data[2];\n\n                path.quadraticCurveToShort(\n                    lastX, lastY\n                );\n                break;\n            case 't':\n                lastX += data[1];\n                lastY += data[2];\n\n                path.quadraticCurveToShort(\n                    lastX, lastY\n                );\n                break;\n            case 'A':\n                lastX = data[6];\n                lastY = data[7];\n\n                path.arcToSvg(\n                    data[1],\n                    data[2],\n                    data[3],\n                    data[4],\n                    data[5],\n                    lastX, lastY\n                );\n                break;\n            case 'a':\n                lastX += data[6];\n                lastY += data[7];\n\n                path.arcToSvg(\n                    data[1],\n                    data[2],\n                    data[3],\n                    data[4],\n                    data[5],\n                    lastX, lastY\n                );\n                break;\n            case 'Z':\n            case 'z':\n                path.closePath();\n                if (subpaths.length > 0)\n                {\n                    currentSubPath = subpaths.pop();\n                    if (currentSubPath)\n                    {\n                        lastX = currentSubPath.startX;\n                        lastY = currentSubPath.startY;\n                    }\n                    else\n                    {\n                        lastX = 0;\n                        lastY = 0;\n                    }\n                }\n                currentSubPath = null;\n                break;\n            default:\n                // #if _DEBUG\n                warn(`Unknown SVG path command: ${type}`);\n                // #endif\n        }\n\n        if (type !== 'Z' && type !== 'z')\n        {\n            if (currentSubPath === null)\n            {\n                currentSubPath = { startX: lastX, startY: lastY };\n                subpaths.push(currentSubPath);\n            }\n        }\n    }\n\n    return path;\n}\n","import { Rectangle } from './Rectangle';\n\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * The Circle object is used to help draw graphics and can also be used to specify a hit area for containers.\n * @memberof maths\n */\nexport class Circle implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the center of this circle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the center of this circle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The radius of the circle\n     *  @default 0\n     */\n    public radius: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'circle'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'circle';\n\n    /**\n     * @param x - The X coordinate of the center of this circle\n     * @param y - The Y coordinate of the center of this circle\n     * @param radius - The radius of the circle\n     */\n    constructor(x = 0, y = 0, radius = 0)\n    {\n        this.x = x;\n        this.y = y;\n        this.radius = radius;\n    }\n\n    /**\n     * Creates a clone of this Circle instance\n     * @returns A copy of the Circle\n     */\n    public clone(): Circle\n    {\n        return new Circle(this.x, this.y, this.radius);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this circle\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coordinates are within this Circle\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.radius <= 0) return false;\n\n        const r2 = this.radius * this.radius;\n        let dx = (this.x - x);\n        let dy = (this.y - y);\n\n        dx *= dx;\n        dy *= dy;\n\n        return (dx + dy <= r2);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param width - The width of the line to check\n     * @returns Whether the x/y coordinates are within this Circle\n     */\n    public strokeContains(x: number, y: number, width: number): boolean\n    {\n        if (this.radius === 0) return false;\n\n        const dx = (this.x - x);\n        const dy = (this.y - y);\n        const r = this.radius;\n        const w2 = width / 2;\n        const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n        return (distance < r + w2 && distance > r - w2);\n    }\n\n    /**\n     * Returns the framing rectangle of the circle as a Rectangle object\n     * @param out\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        out.x = this.x - this.radius;\n        out.y = this.y - this.radius;\n        out.width = this.radius * 2;\n        out.height = this.radius * 2;\n\n        return out;\n    }\n\n    /**\n     * Copies another circle to this one.\n     * @param circle - The circle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(circle: Circle): this\n    {\n        this.x = circle.x;\n        this.y = circle.y;\n        this.radius = circle.radius;\n\n        return this;\n    }\n\n    /**\n     * Copies this circle to another one.\n     * @param circle - The circle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(circle: Circle): Circle\n    {\n        circle.copyFrom(this);\n\n        return circle;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n    }\n    // #endif\n}\n","import { Rectangle } from './Rectangle';\n\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * The Ellipse object is used to help draw graphics and can also be used to specify a hit area for containers.\n * ```js\n * import { Ellipse } from 'pixi.js';\n *\n * const ellipse = new Ellipse(0, 0, 20, 10); // 40x20 rectangle\n * const isPointInEllipse = ellipse.contains(0, 0); // true\n * ```\n * @memberof maths\n */\nexport class Ellipse implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the center of this ellipse\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the center of this ellipse\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The half width of this ellipse\n     * @default 0\n     */\n    public halfWidth: number;\n\n    /**\n     * The half height of this ellipse\n     * @default 0\n     */\n    public halfHeight: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'ellipse'\n     */\n    public readonly type = 'ellipse';\n\n    /**\n     * @param x - The X coordinate of the center of this ellipse\n     * @param y - The Y coordinate of the center of this ellipse\n     * @param halfWidth - The half width of this ellipse\n     * @param halfHeight - The half height of this ellipse\n     */\n    constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0)\n    {\n        this.x = x;\n        this.y = y;\n        this.halfWidth = halfWidth;\n        this.halfHeight = halfHeight;\n    }\n\n    /**\n     * Creates a clone of this Ellipse instance\n     * @returns {Ellipse} A copy of the ellipse\n     */\n    public clone(): Ellipse\n    {\n        return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this ellipse\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @returns Whether the x/y coords are within this ellipse\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.halfWidth <= 0 || this.halfHeight <= 0)\n        {\n            return false;\n        }\n\n        // normalize the coords to an ellipse with center 0,0\n        let normx = ((x - this.x) / this.halfWidth);\n        let normy = ((y - this.y) / this.halfHeight);\n\n        normx *= normx;\n        normy *= normy;\n\n        return (normx + normy <= 1);\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this ellipse including stroke\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param width\n     * @returns Whether the x/y coords are within this ellipse\n     */\n    public strokeContains(x: number, y: number, width: number): boolean\n    {\n        const { halfWidth, halfHeight } = this;\n\n        if (halfWidth <= 0 || halfHeight <= 0)\n        {\n            return false;\n        }\n\n        const halfStrokeWidth = width / 2;\n        const innerA = halfWidth - halfStrokeWidth;\n        const innerB = halfHeight - halfStrokeWidth;\n        const outerA = halfWidth + halfStrokeWidth;\n        const outerB = halfHeight + halfStrokeWidth;\n\n        const normalizedX = x - this.x;\n        const normalizedY = y - this.y;\n\n        const innerEllipse = ((normalizedX * normalizedX) / (innerA * innerA))\n                           + ((normalizedY * normalizedY) / (innerB * innerB));\n        const outerEllipse = ((normalizedX * normalizedX) / (outerA * outerA))\n                           + ((normalizedY * normalizedY) / (outerB * outerB));\n\n        return innerEllipse > 1 && outerEllipse <= 1;\n    }\n\n    /**\n     * Returns the framing rectangle of the ellipse as a Rectangle object\n     * @param out\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        out.x = this.x - this.halfWidth;\n        out.y = this.y - this.halfHeight;\n        out.width = this.halfWidth * 2;\n        out.height = this.halfHeight * 2;\n\n        return out;\n    }\n\n    /**\n     * Copies another ellipse to this one.\n     * @param ellipse - The ellipse to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(ellipse: Ellipse): this\n    {\n        this.x = ellipse.x;\n        this.y = ellipse.y;\n        this.halfWidth = ellipse.halfWidth;\n        this.halfHeight = ellipse.halfHeight;\n\n        return this;\n    }\n\n    /**\n     * Copies this ellipse to another one.\n     * @param ellipse - The ellipse to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(ellipse: Ellipse): Ellipse\n    {\n        ellipse.copyFrom(this);\n\n        return ellipse;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n    }\n    // #endif\n}\n","export function squaredDistanceToLineSegment(\n    x: number, y: number,\n    x1: number, y1: number,\n    x2: number, y2: number\n): number\n{\n    const a = x - x1;\n    const b = y - y1;\n    const c = x2 - x1;\n    const d = y2 - y1;\n\n    const dot = (a * c) + (b * d);\n    const lenSq = (c * c) + (d * d);\n    let param = -1;\n\n    if (lenSq !== 0)\n    {\n        param = dot / lenSq;\n    }\n\n    let xx; let\n        yy;\n\n    if (param < 0)\n    {\n        xx = x1;\n        yy = y1;\n    }\n    else if (param > 1)\n    {\n        xx = x2;\n        yy = y2;\n    }\n\n    else\n    {\n        xx = x1 + (param * c);\n        yy = y1 + (param * d);\n    }\n\n    const dx = x - xx;\n    const dy = y - yy;\n\n    return (dx * dx) + (dy * dy);\n}\n","import { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment';\nimport { Rectangle } from './Rectangle';\n\nimport type { SHAPE_PRIMITIVE } from '../misc/const';\nimport type { PointData } from '../point/PointData';\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n/**\n * A class to define a shape via user defined coordinates.\n *\n *\n * `Polygon` can accept the following different constructor arguments:\n * - An array of `Point` objects\n * - An array of coordinate pairs\n *\n *\n * These can be passed as a single array, or as a sequence of arguments.\n * ```js\n * import { Polygon } from 'pixi.js';\n *\n * // create a polygon object from an array of points, or an array of coordinate pairs\n * const polygon1 = new Polygon([ new Point(0, 0), new Point(0, 100), new Point(100, 100) ]);\n * const polygon2 = new Polygon([ 0, 0, 0, 100, 100, 100 ]);\n *\n * // or create a polygon object from a sequence of points, or coordinate pairs\n * const polygon3 = new Polygon(new Point(0, 0), new Point(0, 100), new Point(100, 100));\n * const polygon4 = new Polygon(0, 0, 0, 100, 100, 100);\n * ```\n * @memberof maths\n */\nexport class Polygon implements ShapePrimitive\n{\n    /** An array of the points of this polygon. */\n    public points: number[];\n\n    /** `false` after moveTo, `true` after `closePath`. In all other cases it is `true`. */\n    public closePath: boolean;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'polygon'\n     */\n    public readonly type: SHAPE_PRIMITIVE = 'polygon';\n\n    constructor(points: PointData[] | number[]);\n    constructor(...points: PointData[] | number[]);\n    /**\n     * @param points - This can be an array of Points\n     *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n     *  the arguments passed can be all the points of the polygon e.g.\n     *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n     *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n     */\n    constructor(...points: (PointData[] | number[])[] | PointData[] | number[])\n    {\n        let flat = Array.isArray(points[0]) ? points[0] : points;\n\n        // if this is an array of points, convert it to a flat array of numbers\n        if (typeof flat[0] !== 'number')\n        {\n            const p: number[] = [];\n\n            for (let i = 0, il = flat.length; i < il; i++)\n            {\n                p.push((flat[i] as PointData).x, (flat[i] as PointData).y);\n            }\n\n            flat = p;\n        }\n\n        this.points = flat as number[];\n\n        this.closePath = true;\n    }\n\n    /**\n     * Creates a clone of this polygon.\n     * @returns - A copy of the polygon.\n     */\n    public clone(): Polygon\n    {\n        const points = this.points.slice();\n        const polygon = new Polygon(points);\n\n        polygon.closePath = this.closePath;\n\n        return polygon;\n    }\n\n    /**\n     * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n     * @param x - The X coordinate of the point to test.\n     * @param y - The Y coordinate of the point to test.\n     * @returns - Whether the x/y coordinates are within this polygon.\n     */\n    public contains(x: number, y: number): boolean\n    {\n        let inside = false;\n\n        // use some raycasting to test hits\n        // https://github.com/substack/point-in-polygon/blob/master/index.js\n        const length = this.points.length / 2;\n\n        for (let i = 0, j = length - 1; i < length; j = i++)\n        {\n            const xi = this.points[i * 2];\n            const yi = this.points[(i * 2) + 1];\n            const xj = this.points[j * 2];\n            const yj = this.points[(j * 2) + 1];\n            const intersect = ((yi > y) !== (yj > y)) && (x < ((xj - xi) * ((y - yi) / (yj - yi))) + xi);\n\n            if (intersect)\n            {\n                inside = !inside;\n            }\n        }\n\n        return inside;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n     * @param x - The X coordinate of the point to test\n     * @param y - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this polygon\n     */\n    public strokeContains(x: number, y: number, strokeWidth: number): boolean\n    {\n        const halfStrokeWidth = strokeWidth / 2;\n        const halfStrokeWidthSqrd = halfStrokeWidth * halfStrokeWidth;\n        const { points } = this;\n        const iterationLength = points.length - (this.closePath ? 0 : 2);\n\n        for (let i = 0; i < iterationLength; i += 2)\n        {\n            const x1 = points[i];\n            const y1 = points[i + 1];\n            const x2 = points[(i + 2) % points.length];\n            const y2 = points[(i + 3) % points.length];\n\n            const distanceSqrd = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n\n            if (distanceSqrd <= halfStrokeWidthSqrd)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Returns the framing rectangle of the polygon as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        const points = this.points;\n\n        let minX = Infinity;\n        let maxX = -Infinity;\n\n        let minY = Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0, n = points.length; i < n; i += 2)\n        {\n            const x = points[i];\n            const y = points[i + 1];\n\n            minX = x < minX ? x : minX;\n            maxX = x > maxX ? x : maxX;\n\n            minY = y < minY ? y : minY;\n            maxY = y > maxY ? y : maxY;\n        }\n\n        out.x = minX;\n        out.width = maxX - minX;\n\n        out.y = minY;\n        out.height = maxY - minY;\n\n        return out;\n    }\n\n    /**\n     * Copies another polygon to this one.\n     * @param polygon - The polygon to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(polygon: Polygon): this\n    {\n        this.points = polygon.points.slice();\n        this.closePath = polygon.closePath;\n\n        return this;\n    }\n\n    /**\n     * Copies this polygon to another one.\n     * @param polygon - The polygon to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(polygon: Polygon): Polygon\n    {\n        polygon.copyFrom(this);\n\n        return polygon;\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:Polygon`\n            + `closeStroke=${this.closePath}`\n            + `points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, '')}]`;\n    }\n    // #endif\n\n    /**\n     * Get the last X coordinate of the polygon\n     * @readonly\n     */\n    get lastX(): number\n    {\n        return this.points[this.points.length - 2];\n    }\n\n    /**\n     * Get the last Y coordinate of the polygon\n     * @readonly\n     */\n    get lastY(): number\n    {\n        return this.points[this.points.length - 1];\n    }\n\n    /**\n     * Get the first X coordinate of the polygon\n     * @readonly\n     */\n    get x(): number\n    {\n        return this.points[this.points.length - 2];\n    }\n    /**\n     * Get the first Y coordinate of the polygon\n     * @readonly\n     */\n    get y(): number\n    {\n        return this.points[this.points.length - 1];\n    }\n}\n\n","import { Rectangle } from './Rectangle';\n\nimport type { ShapePrimitive } from './ShapePrimitive';\n\n// Check corner within stroke width\nconst isCornerWithinStroke = (\n    pX: number,\n    pY: number,\n    cornerX: number,\n    cornerY: number,\n    radius: number,\n    halfStrokeWidth: number\n) =>\n{\n    const dx = pX - cornerX;\n    const dy = pY - cornerY;\n    const distance = Math.sqrt((dx * dx) + (dy * dy));\n\n    return distance >= radius - halfStrokeWidth && distance <= radius + halfStrokeWidth;\n};\n\n/**\n * The `RoundedRectangle` object is an area defined by its position, as indicated by its top-left corner\n * point (`x`, `y`) and by its `width` and its `height`, including a `radius` property that\n * defines the radius of the rounded corners.\n * @memberof maths\n */\nexport class RoundedRectangle implements ShapePrimitive\n{\n    /**\n     * The X coordinate of the upper-left corner of the rounded rectangle\n     * @default 0\n     */\n    public x: number;\n\n    /**\n     * The Y coordinate of the upper-left corner of the rounded rectangle\n     * @default 0\n     */\n    public y: number;\n\n    /**\n     * The overall width of this rounded rectangle\n     * @default 0\n     */\n    public width: number;\n\n    /**\n     * The overall height of this rounded rectangle\n     * @default 0\n     */\n    public height: number;\n\n    /**\n     * Controls the radius of the rounded corners\n     * @default 20\n     */\n    public radius: number;\n\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @default 'roundedRectangle'\n     */\n    public readonly type = 'roundedRectangle';\n\n    /**\n     * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n     * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n     * @param width - The overall width of this rounded rectangle\n     * @param height - The overall height of this rounded rectangle\n     * @param radius - Controls the radius of the rounded corners\n     */\n    constructor(x = 0, y = 0, width = 0, height = 0, radius = 20)\n    {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this.radius = radius;\n    }\n\n    /**\n     * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n     * @param out - optional rectangle to store the result\n     * @returns The framing rectangle\n     */\n    public getBounds(out?: Rectangle): Rectangle\n    {\n        out = out || new Rectangle();\n\n        out.x = this.x;\n        out.y = this.y;\n        out.width = this.width;\n        out.height = this.height;\n\n        return out;\n    }\n\n    /**\n     * Creates a clone of this Rounded Rectangle.\n     * @returns - A copy of the rounded rectangle.\n     */\n    public clone(): RoundedRectangle\n    {\n        return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n    }\n\n    /**\n     * Copies another rectangle to this one.\n     * @param rectangle - The rectangle to copy from.\n     * @returns Returns itself.\n     */\n    public copyFrom(rectangle: RoundedRectangle): this\n    {\n        this.x = rectangle.x;\n        this.y = rectangle.y;\n        this.width = rectangle.width;\n        this.height = rectangle.height;\n\n        return this;\n    }\n\n    /**\n     * Copies this rectangle to another one.\n     * @param rectangle - The rectangle to copy to.\n     * @returns Returns given parameter.\n     */\n    public copyTo(rectangle: RoundedRectangle): RoundedRectangle\n    {\n        rectangle.copyFrom(this);\n\n        return rectangle;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n     * @param x - The X coordinate of the point to test.\n     * @param y - The Y coordinate of the point to test.\n     * @returns - Whether the x/y coordinates are within this Rounded Rectangle.\n     */\n    public contains(x: number, y: number): boolean\n    {\n        if (this.width <= 0 || this.height <= 0)\n        {\n            return false;\n        }\n        if (x >= this.x && x <= this.x + this.width)\n        {\n            if (y >= this.y && y <= this.y + this.height)\n            {\n                const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n\n                if ((y >= this.y + radius && y <= this.y + this.height - radius)\n                || (x >= this.x + radius && x <= this.x + this.width - radius))\n                {\n                    return true;\n                }\n                let dx = x - (this.x + radius);\n                let dy = y - (this.y + radius);\n                const radius2 = radius * radius;\n\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dx = x - (this.x + this.width - radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dy = y - (this.y + this.height - radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n                dx = x - (this.x + radius);\n                if ((dx * dx) + (dy * dy) <= radius2)\n                {\n                    return true;\n                }\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n     * @param pX - The X coordinate of the point to test\n     * @param pY - The Y coordinate of the point to test\n     * @param strokeWidth - The width of the line to check\n     * @returns Whether the x/y coordinates are within this rectangle\n     */\n    public strokeContains(pX: number, pY: number, strokeWidth: number): boolean\n    {\n        const { x, y, width, height, radius } = this;\n\n        const halfStrokeWidth = strokeWidth / 2;\n        const innerX = x + radius;\n        const innerY = y + radius;\n        const innerWidth = width - (radius * 2);\n        const innerHeight = height - (radius * 2);\n        const rightBound = x + width;\n        const bottomBound = y + height;\n\n        // Check if point is within the vertical edges (excluding corners)\n        if (((pX >= x - halfStrokeWidth && pX <= x + halfStrokeWidth)\n             || (pX >= rightBound - halfStrokeWidth && pX <= rightBound + halfStrokeWidth))\n            && pY >= innerY && pY <= innerY + innerHeight)\n        {\n            return true;\n        }\n\n        // Check if point is within the horizontal edges (excluding corners)\n        if (((pY >= y - halfStrokeWidth && pY <= y + halfStrokeWidth)\n             || (pY >= bottomBound - halfStrokeWidth && pY <= bottomBound + halfStrokeWidth))\n            && pX >= innerX && pX <= innerX + innerWidth)\n        {\n            return true;\n        }\n\n        // Top-left, top-right, bottom-right, bottom-left corners\n        return (\n            // Top-left\n            (pX < innerX && pY < innerY\n                && isCornerWithinStroke(pX, pY, innerX, innerY, radius, halfStrokeWidth))\n            //  top-right\n            || (pX > rightBound - radius && pY < innerY\n                && isCornerWithinStroke(pX, pY, rightBound - radius, innerY, radius, halfStrokeWidth))\n            // bottom-right\n            || (pX > rightBound - radius && pY > bottomBound - radius\n                && isCornerWithinStroke(pX, pY, rightBound - radius, bottomBound - radius, radius, halfStrokeWidth))\n            // bottom-left\n            || (pX < innerX && pY > bottomBound - radius\n                && isCornerWithinStroke(pX, pY, innerX, bottomBound - radius, radius, halfStrokeWidth)));\n    }\n\n    // #if _DEBUG\n    public toString(): string\n    {\n        return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}`\n            + `width=${this.width} height=${this.height} radius=${this.radius}]`;\n    }\n    // #endif\n}\n","// thanks to https://github.com/mattdesl/adaptive-bezier-curve\n// for the original code!\n\nimport { GraphicsContextSystem } from '../GraphicsContextSystem';\n\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 1.19209290e-7;\nconst PATH_DISTANCE_EPSILON = 1.0;\n\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\n\nexport function buildAdaptiveBezier(\n    points: number[],\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    cp2x: number, cp2y: number,\n    eX: number, eY: number,\n    smoothness?: number,\n)\n{\n    // TODO expose as a parameter\n    const scale = 1;\n    const smoothing = Math.min(\n        0.99, // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n        Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n    );\n    let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n\n    distanceTolerance *= distanceTolerance;\n    begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n\n    return points;\n}\n\n// //// Based on:\n// //// https://github.com/pelson/antigrain/blob/master/agg-2.4/src/agg_curves.cpp\n\nfunction begin(\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    cp2x: number, cp2y: number,\n    eX: number, eY: number,\n    points: number[],\n    distanceTolerance: number\n)\n{\n    // dont need to actually ad this!\n    // points.push(sX, sY);\n    recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n    points.push(eX, eY);\n}\n\n// eslint-disable-next-line max-params\nfunction recursive(\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    x4: number, y4: number,\n    points: number[],\n    distanceTolerance: number,\n    level: number)\n{\n    if (level > RECURSION_LIMIT)\n    { return; }\n\n    const pi = Math.PI;\n\n    // Calculate all the mid-points of the line segments\n    // ----------------------\n    const x12 = (x1 + x2) / 2;\n    const y12 = (y1 + y2) / 2;\n    const x23 = (x2 + x3) / 2;\n    const y23 = (y2 + y3) / 2;\n    const x34 = (x3 + x4) / 2;\n    const y34 = (y3 + y4) / 2;\n    const x123 = (x12 + x23) / 2;\n    const y123 = (y12 + y23) / 2;\n    const x234 = (x23 + x34) / 2;\n    const y234 = (y23 + y34) / 2;\n    const x1234 = (x123 + x234) / 2;\n    const y1234 = (y123 + y234) / 2;\n\n    if (level > 0)\n    { // Enforce subdivision first time\n        // Try to approximate the full cubic curve by a single straight line\n        // ------------------\n        let dx = x4 - x1;\n        let dy = y4 - y1;\n\n        const d2 = Math.abs(((x2 - x4) * dy) - ((y2 - y4) * dx));\n        const d3 = Math.abs(((x3 - x4) * dy) - ((y3 - y4) * dx));\n\n        let da1; let da2;\n\n        if (d2 > FLT_EPSILON && d3 > FLT_EPSILON)\n        {\n            // Regular care\n            // -----------------\n            if ((d2 + d3) * (d2 + d3) <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                // If the curvature doesn't exceed the distanceTolerance value\n                // we tend to finish subdivisions.\n                // ----------------------\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle & Cusp Condition\n                // ----------------------\n                const a23 = Math.atan2(y3 - y2, x3 - x2);\n\n                da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n                da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n                if (da2 >= pi) da2 = (2 * pi) - da2;\n\n                if (da1 + da2 < mAngleTolerance)\n                {\n                    // Finally we can stop the recursion\n                    // ----------------------\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x2, y2);\n\n                        return;\n                    }\n\n                    if (da2 > mCuspLimit)\n                    {\n                        points.push(x3, y3);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else if (d2 > FLT_EPSILON)\n        {\n            // p1,p3,p4 are collinear, p2 is considerable\n            // ----------------------\n            if (d2 * d2 <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle Condition\n                // ----------------------\n                da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n\n                if (da1 < mAngleTolerance)\n                {\n                    points.push(x2, y2);\n                    points.push(x3, y3);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x2, y2);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else if (d3 > FLT_EPSILON)\n        {\n            // p1,p2,p4 are collinear, p3 is considerable\n            // ----------------------\n            if (d3 * d3 <= distanceTolerance * ((dx * dx) + (dy * dy)))\n            {\n                if (mAngleTolerance < curveAngleToleranceEpsilon)\n                {\n                    points.push(x1234, y1234);\n\n                    return;\n                }\n\n                // Angle Condition\n                // ----------------------\n                da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n                if (da1 >= pi) da1 = (2 * pi) - da1;\n\n                if (da1 < mAngleTolerance)\n                {\n                    points.push(x2, y2);\n                    points.push(x3, y3);\n\n                    return;\n                }\n\n                if (mCuspLimit !== 0.0)\n                {\n                    if (da1 > mCuspLimit)\n                    {\n                        points.push(x3, y3);\n\n                        return;\n                    }\n                }\n            }\n        }\n        else\n        {\n            // Collinear case\n            // -----------------\n            dx = x1234 - ((x1 + x4) / 2);\n            dy = y1234 - ((y1 + y4) / 2);\n            if ((dx * dx) + (dy * dy) <= distanceTolerance)\n            {\n                points.push(x1234, y1234);\n\n                return;\n            }\n        }\n    }\n\n    // Continue subdivision\n    // ----------------------\n    recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n    recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\n","// thanks to https://github.com/mattdesl/adaptive-quadratic-curve\n// for the original code!\n\nimport { GraphicsContextSystem } from '../GraphicsContextSystem';\n\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 1.19209290e-7;\nconst PATH_DISTANCE_EPSILON = 1.0;\n\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\n\nexport function buildAdaptiveQuadratic(\n    points: number[],\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    eX: number, eY: number,\n    smoothness?: number,\n)\n{\n    const scale = 1.0;\n    const smoothing = Math.min(\n        0.99, // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n        Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n    );\n    let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n\n    distanceTolerance *= distanceTolerance;\n    begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n\n    return points;\n}\n\n// //// Based on:\n// //// https://github.com/pelson/antigrain/blob/master/agg-2.4/src/agg_curves.cpp\n\nfunction begin(\n    sX: number, sY: number,\n    cp1x: number, cp1y: number,\n    eX: number, eY: number,\n    points: number[],\n    distanceTolerance: number\n)\n{\n    recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n\n    points.push(eX, eY);\n}\n\nfunction recursive(\n    points: number[],\n    x1: number, y1: number,\n    x2: number, y2: number,\n    x3: number, y3: number,\n    distanceTolerance: number,\n    level: number\n)\n{\n    if (level > RECURSION_LIMIT)\n    { return; }\n\n    const pi = Math.PI;\n\n    // Calculate all the mid-points of the line segments\n    // ----------------------\n    const x12 = (x1 + x2) / 2;\n    const y12 = (y1 + y2) / 2;\n    const x23 = (x2 + x3) / 2;\n    const y23 = (y2 + y3) / 2;\n    const x123 = (x12 + x23) / 2;\n    const y123 = (y12 + y23) / 2;\n\n    let dx = x3 - x1;\n    let dy = y3 - y1;\n    const d = Math.abs((((x2 - x3) * dy) - ((y2 - y3) * dx)));\n\n    if (d > FLT_EPSILON)\n    {\n        // Regular care\n        // -----------------\n        if (d * d <= distanceTolerance * ((dx * dx) + (dy * dy)))\n        {\n            // If the curvature doesn't exceed the distance_tolerance value\n            // we tend to finish subdivisions.\n            // ----------------------\n            if (mAngleTolerance < curveAngleToleranceEpsilon)\n            {\n                points.push(x123, y123);\n\n                return;\n            }\n\n            // Angle & Cusp Condition\n            // ----------------------\n            let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n\n            if (da >= pi) da = (2 * pi) - da;\n\n            if (da < mAngleTolerance)\n            {\n                // Finally we can stop the recursion\n                // ----------------------\n                points.push(x123, y123);\n\n                return;\n            }\n        }\n    }\n    else\n    {\n        // Collinear case\n        // -----------------\n        dx = x123 - ((x1 + x3) / 2);\n        dy = y123 - ((y1 + y3) / 2);\n        if ((dx * dx) + (dy * dy) <= distanceTolerance)\n        {\n            points.push(x123, y123);\n\n            return;\n        }\n    }\n\n    // Continue subdivision\n    // ----------------------\n    recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n    recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\n","export function buildArc(\n    points: number[],\n    x: number, y: number,\n    radius: number,\n    start: number,\n    end: number,\n    clockwise: boolean,\n    steps?: number\n)\n{\n    // determine distance between the two angles\n    // ...probably a nicer way of writing this\n    let dist = Math.abs(start - end);\n\n    if (!clockwise && start > end)\n    {\n        dist = (2 * Math.PI) - dist;\n    }\n    else if (clockwise && end > start)\n    {\n        dist = (2 * Math.PI) - dist;\n    }\n\n    // approximate the # of steps using the cube root of the radius\n\n    steps = steps || Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / (Math.PI))));\n\n    // ensure we have at least 3 steps..\n    steps = Math.max(steps, 3);\n\n    let f = dist / (steps);\n    let t = start;\n\n    // modify direction\n    f *= clockwise ? -1 : 1;\n\n    for (let i = 0; i < steps + 1; i++)\n    {\n        const cs = Math.cos(t);\n        const sn = Math.sin(t);\n\n        const nx = x + (cs * radius);\n        const ny = y + (sn * radius);\n\n        points.push(nx, ny);\n\n        t += f;\n    }\n}\n","import { buildArc } from './buildArc';\n\n/**\n * The arcTo() method creates an arc/curve between two tangents on the canvas.\n *\n * \"borrowed\" from https://code.google.com/p/fxcanvas/ - thanks google!\n * @param points\n * @param x1\n * @param y1\n * @param x2\n * @param y2\n * @param radius\n */\nexport function buildArcTo(\n    points: number[],\n    x1: number, y1: number,\n    x2: number, y2: number,\n    radius: number,\n): void\n{\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n\n    const a1 = fromY - y1;\n    const b1 = fromX - x1;\n    const a2 = y2 - y1;\n    const b2 = x2 - x1;\n    const mm = Math.abs((a1 * b2) - (b1 * a2));\n\n    if (mm < 1.0e-8 || radius === 0)\n    {\n        if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1)\n        {\n            points.push(x1, y1);\n        }\n\n        return;\n    }\n\n    const dd = (a1 * a1) + (b1 * b1);\n    const cc = (a2 * a2) + (b2 * b2);\n    const tt = (a1 * a2) + (b1 * b2);\n    const k1 = radius * Math.sqrt(dd) / mm;\n    const k2 = radius * Math.sqrt(cc) / mm;\n    const j1 = k1 * tt / dd;\n    const j2 = k2 * tt / cc;\n    const cx = (k1 * b2) + (k2 * b1);\n    const cy = (k1 * a2) + (k2 * a1);\n    const px = b1 * (k2 + j1);\n    const py = a1 * (k2 + j1);\n    const qx = b2 * (k1 + j2);\n    const qy = a2 * (k1 + j2);\n    const startAngle = Math.atan2(py - cy, px - cx);\n    const endAngle = Math.atan2(qy - cy, qx - cx);\n\n    buildArc(points,\n        (cx + x1),\n        (cy + y1),\n        radius,\n        startAngle,\n        endAngle,\n        b1 * a2 > b2 * a1\n    );\n}\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier';\n\nconst TAU = Math.PI * 2;\n\nconst out = {\n    centerX: 0,\n    centerY: 0,\n    ang1: 0,\n    ang2: 0\n};\n\nconst mapToEllipse = (\n    { x, y }: {x: number, y: number},\n    rx: number, ry: number,\n    cosPhi: number, sinPhi: number,\n    centerX: number, centerY: number,\n    out: {x: number, y: number}\n): {x: number, y: number} =>\n{\n    x *= rx;\n    y *= ry;\n\n    const xp = (cosPhi * x) - (sinPhi * y);\n    const yp = (sinPhi * x) + (cosPhi * y);\n\n    out.x = xp + centerX;\n    out.y = yp + centerY;\n\n    return out;\n};\n\nfunction approxUnitArc(ang1: number, ang2: number): {x: number, y: number}[]\n{\n    // If 90 degree circular arc, use a constant\n    // as derived from http://spencermortensen.com/articles/bezier-circle\n\n    const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n\n    const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n\n    const x1 = Math.cos(ang1);\n    const y1 = Math.sin(ang1);\n    const x2 = Math.cos(ang1 + ang2);\n    const y2 = Math.sin(ang1 + ang2);\n\n    return [\n        {\n            x: x1 - (y1 * a),\n            y: y1 + (x1 * a)\n        },\n        {\n            x: x2 + (y2 * a),\n            y: y2 - (x2 * a)\n        },\n        {\n            x: x2,\n            y: y2\n        }\n    ];\n}\n\nconst vectorAngle = (ux: number, uy: number, vx: number, vy: number) =>\n{\n    const sign = ((ux * vy) - (uy * vx) < 0) ? -1 : 1;\n\n    let dot = (ux * vx) + (uy * vy);\n\n    if (dot > 1)\n    {\n        dot = 1;\n    }\n\n    if (dot < -1)\n    {\n        dot = -1;\n    }\n\n    return sign * Math.acos(dot);\n};\n\nconst getArcCenter = (\n    px: number,\n    py: number,\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    largeArcFlag: number,\n    sweepFlag: number,\n    sinPhi: number,\n    cosPhi: number,\n    pxp: number,\n    pyp: number,\n    out: {\n        centerX: number,\n        centerY: number,\n        ang1: number,\n        ang2: number\n    }\n// eslint-disable-next-line max-params\n) =>\n{\n    const rxSq = Math.pow(rx, 2);\n    const rySq = Math.pow(ry, 2);\n    const pxpSq = Math.pow(pxp, 2);\n    const pypSq = Math.pow(pyp, 2);\n\n    let radicant = (rxSq * rySq) - (rxSq * pypSq) - (rySq * pxpSq);\n\n    if (radicant < 0)\n    {\n        radicant = 0;\n    }\n\n    radicant /= (rxSq * pypSq) + (rySq * pxpSq);\n    radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n\n    const centerXp = radicant * rx / ry * pyp;\n    const centerYp = radicant * -ry / rx * pxp;\n\n    const centerX = (cosPhi * centerXp) - (sinPhi * centerYp) + ((px + cx) / 2);\n    const centerY = (sinPhi * centerXp) + (cosPhi * centerYp) + ((py + cy) / 2);\n\n    const vx1 = (pxp - centerXp) / rx;\n    const vy1 = (pyp - centerYp) / ry;\n    const vx2 = (-pxp - centerXp) / rx;\n    const vy2 = (-pyp - centerYp) / ry;\n\n    const ang1 = vectorAngle(1, 0, vx1, vy1);\n    let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n\n    if (sweepFlag === 0 && ang2 > 0)\n    {\n        ang2 -= TAU;\n    }\n\n    if (sweepFlag === 1 && ang2 < 0)\n    {\n        ang2 += TAU;\n    }\n\n    out.centerX = centerX;\n    out.centerY = centerY;\n    out.ang1 = ang1;\n    out.ang2 = ang2;\n};\n\nexport function buildArcToSvg(\n    points: number[],\n    px: number,\n    py: number,\n    cx: number,\n    cy: number,\n    rx: number,\n    ry: number,\n    xAxisRotation = 0,\n    largeArcFlag = 0,\n    sweepFlag = 0\n): void\n{\n    if (rx === 0 || ry === 0)\n    {\n        return;\n    }\n\n    const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n    const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n\n    const pxp = (cosPhi * (px - cx) / 2) + (sinPhi * (py - cy) / 2);\n    const pyp = (-sinPhi * (px - cx) / 2) + (cosPhi * (py - cy) / 2);\n\n    if (pxp === 0 && pyp === 0)\n    {\n        return;\n    }\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    const lambda = (Math.pow(pxp, 2) / Math.pow(rx, 2)) + (Math.pow(pyp, 2) / Math.pow(ry, 2));\n\n    if (lambda > 1)\n    {\n        rx *= Math.sqrt(lambda);\n        ry *= Math.sqrt(lambda);\n    }\n\n    getArcCenter(\n        px,\n        py,\n        cx,\n        cy,\n        rx,\n        ry,\n        largeArcFlag,\n        sweepFlag,\n        sinPhi,\n        cosPhi,\n        pxp,\n        pyp,\n        out\n    );\n\n    let { ang1, ang2 } = out;\n    const { centerX, centerY } = out;\n\n    // If 'ang2' == 90.0000000001, then `ratio` will devalue to\n    // 1.0000000001. This causes `segments` to be greater than one, which is an\n    // unnecessary split, and adds extra points to the bezier curve. To alleviate\n    // this issue, we round to 1.0 when the ratio is close to 1.0.\n    let ratio = Math.abs(ang2) / (TAU / 4);\n\n    if (Math.abs(1.0 - ratio) < 0.0000001)\n    {\n        ratio = 1.0;\n    }\n\n    const segments = Math.max(Math.ceil(ratio), 1);\n\n    ang2 /= segments;\n\n    let lastX = points[points.length - 2];\n    let lastY = points[points.length - 1];\n\n    const outCurvePoint = { x: 0, y: 0 };\n\n    for (let i = 0; i < segments; i++)\n    {\n        const curve = approxUnitArc(ang1, ang2);\n\n        const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n        const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n        const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n\n        buildAdaptiveBezier(\n            points,\n            lastX, lastY,\n            x1, y1, x2, y2, x, y\n        );\n\n        lastX = x;\n        lastY = y;\n\n        ang1 += ang2;\n    }\n}\n","import type { PointData } from '../../../../maths/point/PointData';\nimport type { ShapePath } from './ShapePath';\n\n/**\n * Typed and cleaned up version of:\n * https://stackoverflow.com/questions/44855794/html5-canvas-triangle-with-rounded-corners/44856925#44856925\n * @param g - Graphics to be drawn on.\n * @param points - Corners of the shape to draw. Minimum length is 3.\n * @param radius - Corners default radius.\n * @ignore\n */\nexport function roundedShapeArc(\n    g: ShapePath,\n    points: RoundedPoint[],\n    radius: number\n): void\n{\n    const vecFrom = (p: PointData, pp: PointData) =>\n    {\n        const x = pp.x - p.x;\n        const y = pp.y - p.y;\n        const len = Math.sqrt((x * x) + (y * y));\n        const nx = x / len;\n        const ny = y / len;\n\n        return { len, nx, ny };\n    };\n\n    const sharpCorner = (i: number, p: PointData) =>\n    {\n        if (i === 0)\n        {\n            g.moveTo(p.x, p.y);\n        }\n        else\n        {\n            g.lineTo(p.x, p.y);\n        }\n    };\n\n    let p1 = points[points.length - 1];\n\n    for (let i = 0; i < points.length; i++)\n    {\n        const p2 = points[i % points.length];\n        const pRadius = p2.radius ?? radius;\n\n        if (pRadius <= 0)\n        {\n            sharpCorner(i, p2);\n            p1 = p2;\n            continue;\n        }\n\n        const p3 = points[(i + 1) % points.length];\n        const v1 = vecFrom(p2, p1);\n        const v2 = vecFrom(p2, p3);\n\n        if (v1.len < 1e-4 || v2.len < 1e-4)\n        {\n            sharpCorner(i, p2);\n            p1 = p2;\n            continue;\n        }\n\n        let angle = Math.asin((v1.nx * v2.ny) - (v1.ny * v2.nx));\n        let radDirection = 1;\n        let drawDirection = false;\n\n        if ((v1.nx * v2.nx) - (v1.ny * -v2.ny) < 0)\n        {\n            if (angle < 0)\n            {\n                angle = Math.PI + angle;\n            }\n            else\n            {\n                angle = Math.PI - angle;\n                radDirection = -1;\n                drawDirection = true;\n            }\n        }\n        else if (angle > 0)\n        {\n            radDirection = -1;\n            drawDirection = true;\n        }\n\n        const halfAngle = angle / 2;\n\n        let cRadius: number;\n        let lenOut = Math.abs(\n            (Math.cos(halfAngle) * pRadius) / Math.sin(halfAngle)\n        );\n\n        if (lenOut > Math.min(v1.len / 2, v2.len / 2))\n        {\n            lenOut = Math.min(v1.len / 2, v2.len / 2);\n            cRadius = Math.abs((lenOut * Math.sin(halfAngle)) / Math.cos(halfAngle));\n        }\n        else\n        {\n            cRadius = pRadius;\n        }\n\n        const cX = p2.x + (v2.nx * lenOut) + (-v2.ny * cRadius * radDirection);\n        const cY = p2.y + (v2.ny * lenOut) + (v2.nx * cRadius * radDirection);\n        const startAngle = Math.atan2(v1.ny, v1.nx) + ((Math.PI / 2) * radDirection);\n        const endAngle = Math.atan2(v2.ny, v2.nx) - ((Math.PI / 2) * radDirection);\n\n        if (i === 0)\n        {\n            g.moveTo(\n                cX + (Math.cos(startAngle) * cRadius),\n                cY + (Math.sin(startAngle) * cRadius)\n            );\n        }\n\n        g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n\n        p1 = p2;\n    }\n}\n\nexport type RoundedPoint = PointData & { radius?: number };\n\n/**\n * Typed and cleaned up version of:\n * https://stackoverflow.com/questions/44855794/html5-canvas-triangle-with-rounded-corners/56214413#56214413\n * @param g - Graphics to be drawn on.\n * @param points - Corners of the shape to draw. Minimum length is 3.\n * @param radius - Corners default radius.\n * @ignore\n */\nexport function roundedShapeQuadraticCurve(\n    g: ShapePath,\n    points: RoundedPoint[],\n    radius: number,\n    smoothness?: number,\n): void\n{\n    const distance = (p1: PointData, p2: PointData) =>\n        Math.sqrt(((p1.x - p2.x) ** 2) + ((p1.y - p2.y) ** 2));\n\n    const pointLerp = (p1: PointData, p2: PointData, t: number) => ({\n        x: p1.x + ((p2.x - p1.x) * t),\n        y: p1.y + ((p2.y - p1.y) * t),\n    });\n\n    const numPoints = points.length;\n\n    for (let i = 0; i < numPoints; i++)\n    {\n        const thisPoint = points[(i + 1) % numPoints];\n        const pRadius = thisPoint.radius ?? radius;\n\n        if (pRadius <= 0)\n        {\n            if (i === 0)\n            {\n                g.moveTo(thisPoint.x, thisPoint.y);\n            }\n            else\n            {\n                g.lineTo(thisPoint.x, thisPoint.y);\n            }\n\n            continue;\n        }\n\n        const lastPoint = points[i];\n        const nextPoint = points[(i + 2) % numPoints];\n\n        const lastEdgeLength = distance(lastPoint, thisPoint);\n        let start;\n\n        if (lastEdgeLength < 1e-4)\n        {\n            start = thisPoint;\n        }\n        else\n        {\n            const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n\n            start = pointLerp(\n                thisPoint,\n                lastPoint,\n                lastOffsetDistance / lastEdgeLength\n            );\n        }\n\n        const nextEdgeLength = distance(nextPoint, thisPoint);\n        let end;\n\n        if (nextEdgeLength < 1e-4)\n        {\n            end = thisPoint;\n        }\n        else\n        {\n            const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n\n            end = pointLerp(\n                thisPoint,\n                nextPoint,\n                nextOffsetDistance / nextEdgeLength\n            );\n        }\n\n        if (i === 0)\n        {\n            g.moveTo(start.x, start.y);\n        }\n        else\n        {\n            g.lineTo(start.x, start.y);\n        }\n        g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n    }\n}\n","// a shape lets you build out a shape with lines and curves and primitives..\n\nimport { Circle } from '../../../../maths/shapes/Circle';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse';\nimport { Polygon } from '../../../../maths/shapes/Polygon';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle';\nimport { Bounds } from '../../../container/bounds/Bounds';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic';\nimport { buildArc } from '../buildCommands/buildArc';\nimport { buildArcTo } from '../buildCommands/buildArcTo';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg';\nimport { roundedShapeArc, roundedShapeQuadraticCurve } from './roundShape';\n\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { PointData } from '../../../../maths/point/PointData';\nimport type { ShapePrimitive } from '../../../../maths/shapes/ShapePrimitive';\nimport type { GraphicsPath } from './GraphicsPath';\nimport type { RoundedPoint } from './roundShape';\n\nconst tempRectangle = new Rectangle();\n\n/**\n * The `ShapePath` class acts as a bridge between high-level drawing commands\n * and the lower-level `GraphicsContext` rendering engine.\n * It translates drawing commands, such as those for creating lines, arcs, ellipses, rectangles, and complex polygons, into a\n * format that can be efficiently processed by a `GraphicsContext`. This includes handling path starts,\n * ends, and transformations for shapes.\n *\n * It is used internally by `GraphicsPath` to build up the path.\n * @memberof scene\n */\nexport class ShapePath\n{\n    /** The list of shape primitives that make up the path. */\n    public shapePrimitives: { shape: ShapePrimitive, transform?: Matrix }[] = [];\n    private _currentPoly: Polygon | null = null;\n    private readonly _graphicsPath2D: GraphicsPath;\n    private readonly _bounds = new Bounds();\n\n    constructor(graphicsPath2D: GraphicsPath)\n    {\n        this._graphicsPath2D = graphicsPath2D;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this\n    {\n        this.startPoly(x, y);\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this\n    {\n        this._ensurePoly();\n\n        const points = this._currentPoly.points;\n\n        const fromX = points[points.length - 2];\n        const fromY = points[points.length - 1];\n\n        if (fromX !== x || fromY !== y)\n        {\n            points.push(x, y);\n        }\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path. The arc is centered at (x, y)\n     *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The radius of the arc.\n     * @param startAngle - The starting angle of the arc, in radians.\n     * @param endAngle - The ending angle of the arc, in radians.\n     * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise: boolean): this\n    {\n        // TODO - if its 360 degrees.. make it a circle object?\n\n        this._ensurePoly(false);\n\n        const points = this._currentPoly.points;\n\n        buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path with the arc tangent to the line joining two specified points.\n     * The arc radius is specified by `radius`.\n     * @param x1 - The x-coordinate of the first point.\n     * @param y1 - The y-coordinate of the first point.\n     * @param x2 - The x-coordinate of the second point.\n     * @param y2 - The y-coordinate of the second point.\n     * @param radius - The radius of the arc.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this\n    {\n        this._ensurePoly();\n\n        const points = this._currentPoly.points;\n\n        buildArcTo(points, x1, y1, x2, y2, radius);\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number,\n        xAxisRotation: number, largeArcFlag: number, sweepFlag: number,\n        x: number, y: number\n    ): this\n    {\n        const points = this._currentPoly.points;\n\n        // this needs to work on both canvas and GPU backends so might want to move this to the Graphics2D path..\n        buildArcToSvg(\n            points,\n            this._currentPoly.lastX,\n            this._currentPoly.lastY,\n            x,\n            y,\n            rx,\n            ry,\n            xAxisRotation,\n            largeArcFlag,\n            sweepFlag,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(\n        cp1x: number, cp1y: number, cp2x: number, cp2y: number,\n        x: number, y: number,\n        smoothness?: number\n    ): this\n    {\n        this._ensurePoly();\n\n        const currentPoly = this._currentPoly;\n\n        // ensure distance from last point to first control point is not too small\n\n        // TODO - make this a plugin that people can override..\n        buildAdaptiveBezier(\n            this._currentPoly.points,\n            currentPoly.lastX, currentPoly.lastY,\n            cp1x, cp1y, cp2x, cp2y, x, y,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the control point.\n     * @param cp1y - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cp1x: number, cp1y: number, x: number, y: number, smoothing?: number): this\n    {\n        this._ensurePoly();\n\n        const currentPoly = this._currentPoly;\n\n        // ensure distance from last point to first control point is not too small\n\n        // TODO - make this a plugin that people can override..\n        buildAdaptiveQuadratic(\n            this._currentPoly.points,\n            currentPoly.lastX, currentPoly.lastY,\n            cp1x, cp1y, x, y,\n            smoothing,\n        );\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this.endPoly(true);\n\n        return this;\n    }\n\n    /**\n     * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n     * @param path - The `GraphicsPath` object representing the path to add.\n     * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n     * @returns The instance of the current object for chaining.\n     */\n    public addPath(path: GraphicsPath, transform?: Matrix): this\n    {\n        this.endPoly();\n\n        if (transform && !transform.isIdentity())\n        {\n            path = path.clone(true);\n            path.transform(transform);\n        }\n\n        for (let i = 0; i < path.instructions.length; i++)\n        {\n            const instruction = path.instructions[i];\n\n            // Sorry TS! this is the best we could do...\n            this[instruction.action](...(instruction.data as [never, never, never, never, never, never, never]));\n            // build out the path points\n        }\n\n        return this;\n    }\n\n    /**\n     * Finalizes the drawing of the current path. Optionally, it can close the path.\n     * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n     */\n    public finish(closePath = false)\n    {\n        this.endPoly(closePath);\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number, transform?: Matrix): this\n    {\n        this.drawShape(new Rectangle(x, y, w, h), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number, transform?: Matrix): this\n    {\n        this.drawShape(new Circle(x, y, radius), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n     * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public poly(points: number[] | PointData[], close?: boolean, transform?: Matrix): this\n    {\n        const polygon = new Polygon(points);\n\n        polygon.closePath = close;\n\n        this.drawShape(polygon, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation = 0, transform?: Matrix): this\n    {\n        sides = Math.max(sides | 0, 3);\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const delta = (Math.PI * 2) / sides;\n        const polygon = [];\n\n        for (let i = 0; i < sides; i++)\n        {\n            const angle = (i * delta) + startAngle;\n\n            polygon.push(\n                x + (radius * Math.cos(angle)),\n                y + (radius * Math.sin(angle))\n            );\n        }\n\n        this.poly(polygon, true, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(\n        x: number, y: number,\n        radius: number,\n        sides: number, corner: number,\n        rotation = 0,\n        smoothness?: number,\n    ): this\n    {\n        sides = Math.max((sides | 0), 3);\n\n        if (corner <= 0)\n        {\n            return this.regularPoly(x, y, radius, sides, rotation);\n        }\n\n        const sideLength = (radius * Math.sin(Math.PI / sides)) - 0.001;\n\n        corner = Math.min(corner, sideLength);\n\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const delta = (Math.PI * 2) / sides;\n        const internalAngle = ((sides - 2) * Math.PI) / sides / 2;\n\n        for (let i = 0; i < sides; i++)\n        {\n            const angle = (i * delta) + startAngle;\n            const x0 = x + (radius * Math.cos(angle));\n            const y0 = y + (radius * Math.sin(angle));\n            const a1 = angle + (Math.PI) + internalAngle;\n            const a2 = angle - (Math.PI) - internalAngle;\n            const x1 = x0 + (corner * Math.cos(a1));\n            const y1 = y0 + (corner * Math.sin(a1));\n            const x3 = x0 + (corner * Math.cos(a2));\n            const y3 = y0 + (corner * Math.sin(a2));\n\n            if (i === 0)\n            {\n                this.moveTo(x1, y1);\n            }\n            else\n            {\n                this.lineTo(x1, y1);\n            }\n            this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n        }\n\n        return this.closePath();\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic = false, smoothness?: number): this\n    {\n        if (points.length < 3)\n        {\n            return this;\n        }\n\n        if (useQuadratic)\n        {\n            roundedShapeQuadraticCurve(this, points, radius, smoothness);\n        }\n        else\n        {\n            roundedShapeArc(this, points, radius);\n        }\n\n        return this.closePath();\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this\n    {\n        if (fillet === 0)\n        {\n            return this.rect(x, y, width, height);\n        }\n\n        const maxFillet = Math.min(width, height) / 2;\n        const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n        const right = x + width;\n        const bottom = y + height;\n        const dir = inset < 0 ? -inset : 0;\n        const size = Math.abs(inset);\n\n        return this\n            .moveTo(x, y + size)\n            .arcTo(x + dir, y + dir, x + size, y, size)\n            .lineTo(right - size, y)\n            .arcTo(right - dir, y + dir, right, y + size, size)\n            .lineTo(right, bottom - size)\n            .arcTo(right - dir, bottom - dir, x + width - size, bottom, size)\n            .lineTo(x + size, bottom)\n            .arcTo(x + dir, bottom - dir, x, bottom - size, size)\n            .closePath();\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this\n    {\n        if (chamfer <= 0)\n        {\n            return this.rect(x, y, width, height);\n        }\n\n        const inset = Math.min(chamfer, Math.min(width, height) / 2);\n        const right = x + width;\n        const bottom = y + height;\n        const points = [\n            x + inset, y,\n            right - inset, y,\n            right, y + inset,\n            right, bottom - inset,\n            right - inset, bottom,\n            x + inset, bottom,\n            x, bottom - inset,\n            x, y + inset,\n        ];\n\n        // Remove overlapping points\n        for (let i = points.length - 1; i >= 2; i -= 2)\n        {\n            if (points[i] === points[i - 2] && points[i - 1] === points[i - 3])\n            {\n                points.splice(i - 1, 2);\n            }\n        }\n\n        return this.poly(points, true, transform);\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number, transform?: Matrix): this\n    {\n        // TODO apply rotation to transform...\n\n        this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number, transform?: Matrix): this\n    {\n        this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a given shape on the canvas.\n     * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n     * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n     * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n     * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n     * scaling, and translations.\n     * @returns The instance of the current object for chaining.\n     */\n    public drawShape(shape: ShapePrimitive, matrix?: Matrix): this\n    {\n        this.endPoly();\n\n        this.shapePrimitives.push({ shape, transform: matrix });\n\n        return this;\n    }\n\n    /**\n     * Starts a new polygon path from the specified starting point.\n     * This method initializes a new polygon or ends the current one if it exists.\n     * @param x - The x-coordinate of the starting point of the new polygon.\n     * @param y - The y-coordinate of the starting point of the new polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public startPoly(x: number, y: number): this\n    {\n        let currentPoly = this._currentPoly;\n\n        if (currentPoly)\n        {\n            this.endPoly();\n        }\n\n        currentPoly = new Polygon();\n\n        currentPoly.points.push(x, y);\n\n        this._currentPoly = currentPoly;\n\n        return this;\n    }\n\n    /**\n     * Ends the current polygon path. If `closePath` is set to true,\n     * the path is closed by connecting the last point to the first one.\n     * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n     * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n     *  back to the starting point. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public endPoly(closePath = false): this\n    {\n        const shape = this._currentPoly;\n\n        if (shape && shape.points.length > 2)\n        {\n            shape.closePath = closePath;\n\n            this.shapePrimitives.push({ shape });\n        }\n\n        this._currentPoly = null;\n\n        return this;\n    }\n\n    private _ensurePoly(start = true): void\n    {\n        if (this._currentPoly) return;\n\n        this._currentPoly = new Polygon();\n\n        if (start)\n        {\n            // get last points..\n            const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n\n            if (lastShape)\n            {\n                // i KNOW its a rect..\n                let lx = lastShape.shape.x;\n                let ly = lastShape.shape.y;\n\n                if (lastShape.transform && !lastShape.transform.isIdentity())\n                {\n                    const t = lastShape.transform;\n\n                    const tempX = lx;\n\n                    lx = (t.a * lx) + (t.c * ly) + t.tx;\n                    ly = (t.b * tempX) + (t.d * ly) + t.ty;\n                }\n\n                this._currentPoly.points.push(lx, ly);\n            }\n            else\n            {\n                this._currentPoly.points.push(0, 0);\n            }\n        }\n    }\n\n    /** Builds the path. */\n    public buildPath()\n    {\n        const path = this._graphicsPath2D;\n\n        this.shapePrimitives.length = 0;\n        this._currentPoly = null;\n\n        for (let i = 0; i < path.instructions.length; i++)\n        {\n            const instruction = path.instructions[i];\n\n            // Sorry TS! this is the best we could do...\n            this[instruction.action](...(instruction.data as [never, never, never, never, never, never, never]));\n        }\n\n        this.finish();\n    }\n\n    /** Gets the bounds of the path. */\n    get bounds(): Bounds\n    {\n        const bounds = this._bounds;\n\n        bounds.clear();\n\n        const shapePrimitives = this.shapePrimitives;\n\n        for (let i = 0; i < shapePrimitives.length; i++)\n        {\n            const shapePrimitive = shapePrimitives[i];\n\n            const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n\n            if (shapePrimitive.transform)\n            {\n                bounds.addRect(boundsRect, shapePrimitive.transform);\n            }\n            else\n            {\n                bounds.addRect(boundsRect);\n            }\n        }\n\n        return bounds;\n    }\n}\n","import { Point } from '../../../../maths/point/Point';\nimport { uid } from '../../../../utils/data/uid';\nimport { warn } from '../../../../utils/logging/warn';\nimport { SVGToGraphicsPath } from '../svg/SVGToGraphicsPath';\nimport { ShapePath } from './ShapePath';\n\nimport type { Matrix } from '../../../../maths/matrix/Matrix';\nimport type { PointData } from '../../../../maths/point/PointData';\nimport type { Bounds } from '../../../container/bounds/Bounds';\nimport type { RoundedPoint } from './roundShape';\n\nexport interface PathInstruction\n{\n    action: 'moveTo' | 'lineTo' | 'quadraticCurveTo' |\n    'bezierCurveTo' | 'arc' | 'closePath' |\n    'addPath' | 'arcTo' | 'ellipse' |\n    'rect' | 'roundRect' | 'arcToSvg' |\n    'poly' | 'circle' |\n    'regularPoly' | 'roundPoly' | 'roundShape' | 'filletRect' | 'chamferRect'\n    data: any[];\n}\n\n/**\n * The `GraphicsPath` class is designed to represent a graphical path consisting of multiple drawing instructions.\n * This class serves as a collection of drawing commands that can be executed to render shapes and paths on a canvas or\n * similar graphical context. It supports high-level drawing operations like lines, arcs, curves, and more, enabling\n * complex graphic constructions with relative ease.\n */\nexport class GraphicsPath\n{\n    public instructions: PathInstruction[] = [];\n\n    /** unique id for this graphics path */\n    public readonly uid: number = uid('graphicsPath');\n\n    private _dirty = true;\n    // needed for hit testing and bounds calculations\n    private _shapePath: ShapePath;\n\n    /**\n     * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n     * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n     */\n    get shapePath(): ShapePath\n    {\n        if (!this._shapePath)\n        {\n            this._shapePath = new ShapePath(this);\n        }\n\n        if (this._dirty)\n        {\n            this._dirty = false;\n            this._shapePath.buildPath();\n        }\n\n        return this._shapePath;\n    }\n\n    /**\n     * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n     * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n     */\n    constructor(instructions?: string | PathInstruction[])\n    {\n        if (typeof instructions === 'string')\n        {\n            SVGToGraphicsPath(instructions, this);\n        }\n        else\n        {\n            this.instructions = instructions?.slice() ?? [];\n        }\n    }\n\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @param transform - An optional transformation to apply to the added path.\n     * @returns The instance of the current object for chaining.\n     */\n    public addPath(path: GraphicsPath, transform?: Matrix): this\n    {\n        path = path.clone();\n        this.instructions.push({ action: 'addPath', data: [path, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path. The arc is centered at (x, y)\n     *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The radius of the arc.\n     * @param startAngle - The starting angle of the arc, in radians.\n     * @param endAngle - The ending angle of the arc, in radians.\n     * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this;\n    public arc(...args: [number, number, number, number, number, boolean]): this\n    {\n        this.instructions.push({ action: 'arc', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the path with the arc tangent to the line joining two specified points.\n     * The arc radius is specified by `radius`.\n     * @param x1 - The x-coordinate of the first point.\n     * @param y1 - The y-coordinate of the first point.\n     * @param x2 - The x-coordinate of the second point.\n     * @param y2 - The y-coordinate of the second point.\n     * @param radius - The radius of the arc.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this;\n    public arcTo(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'arcTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    // eslint-disable-next-line max-len\n    public arcToSvg(rx: number, ry: number, xAxisRotation: number, largeArcFlag: number, sweepFlag: number, x: number, y: number): this;\n    public arcToSvg(...args: [number, number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'arcToSvg', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(\n        cp1x: number, cp1y: number, cp2x: number, cp2y: number,\n        x: number, y: number,\n        smoothness?: number\n    ): this;\n    public bezierCurveTo(...args: [number, number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'bezierCurveTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires two points: the second control point and the end point. The first control point is assumed to be\n     * The starting point is the last point in the current path.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveToShort(cp2x: number, cp2y: number, x: number, y: number, smoothness?: number): this\n    {\n        const last = this.instructions[this.instructions.length - 1];\n\n        const lastPoint = this.getLastPoint(Point.shared);\n\n        let cp1x = 0;\n        let cp1y = 0;\n\n        if (!last || last.action !== 'bezierCurveTo')\n        {\n            cp1x = lastPoint.x;\n            cp1y = lastPoint.y;\n        }\n        else\n        {\n            cp1x = last.data[2];\n            cp1y = last.data[3];\n\n            const currentX = lastPoint.x;\n            const currentY = lastPoint.y;\n\n            cp1x = currentX + (currentX - cp1x);\n            cp1y = currentY + (currentY - cp1y);\n        }\n\n        this.instructions.push({ action: 'bezierCurveTo', data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this.instructions.push({ action: 'closePath', data: [] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number, matrix?: Matrix): this;\n    public ellipse(...args: [number, number, number, number, Matrix]): this\n    {\n        this.instructions.push({ action: 'ellipse', data: args });\n\n        // TODO nail this!\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this;\n    public lineTo(...args: [number, number]): this\n    {\n        this.instructions.push({ action: 'lineTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this;\n    public moveTo(...args: [number, number]): this\n    {\n        this.instructions.push({ action: 'moveTo', data: args });\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the control point.\n     * @param cp1y - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this;\n    public quadraticCurveTo(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'quadraticCurveTo', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It uses the previous point as the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveToShort(x: number, y: number, smoothness?: number): this\n    {\n        // check if we have a previous quadraticCurveTo\n        const last = this.instructions[this.instructions.length - 1];\n\n        const lastPoint = this.getLastPoint(Point.shared);\n\n        let cpx1 = 0;\n        let cpy1 = 0;\n\n        if (!last || last.action !== 'quadraticCurveTo')\n        {\n            cpx1 = lastPoint.x;\n            cpy1 = lastPoint.y;\n        }\n        else\n        {\n            cpx1 = last.data[0];\n            cpy1 = last.data[1];\n\n            const currentX = lastPoint.x;\n            const currentY = lastPoint.y;\n\n            cpx1 = currentX + (currentX - cpx1);\n            cpy1 = currentY + (currentY - cpy1);\n        }\n\n        this.instructions.push({ action: 'quadraticCurveTo', data: [cpx1, cpy1, x, y, smoothness] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number, transform?: Matrix): this\n    {\n        this.instructions.push({ action: 'rect', data: [x, y, w, h, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number, transform?: Matrix): this\n    {\n        this.instructions.push({ action: 'circle', data: [x, y, radius, transform] });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number, transform?: Matrix): this;\n    public roundRect(...args: [number, number, number, number, number, Matrix?]): this\n    {\n        this.instructions.push({ action: 'roundRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers representing the x and y coordinates of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public poly(points: number[] | PointData[], close?: boolean, transform?: Matrix): this;\n    public poly(...args: [number[] | PointData[], boolean, Matrix?]): this\n    {\n        this.instructions.push({ action: 'poly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation?: number, transform?: Matrix): this;\n    public regularPoly(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'regularPoly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this;\n    public roundPoly(...args: [number, number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'roundPoly', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this;\n    public roundShape(...args: [RoundedPoint[], number, boolean, number]): this\n    {\n        this.instructions.push({ action: 'roundShape', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this;\n    public filletRect(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'filletRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this;\n    public chamferRect(...args: [number, number, number, number, number]): this\n    {\n        this.instructions.push({ action: 'chamferRect', data: args });\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @param transform - An optional `Matrix` object to apply a transformation to the star.\n     * This can include rotations, scaling, and translations.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    // eslint-disable-next-line max-len\n    public star(x: number, y: number, points: number, radius: number, innerRadius?: number, rotation?: number, transform?: Matrix): this\n    {\n        innerRadius = innerRadius || radius / 2;\n\n        const startAngle = (-1 * Math.PI / 2) + rotation;\n        const len = points * 2;\n        const delta = (Math.PI * 2) / len;\n        const polygon = [];\n\n        for (let i = 0; i < len; i++)\n        {\n            const r = i % 2 ? innerRadius : radius;\n            const angle = (i * delta) + startAngle;\n\n            polygon.push(\n                x + (r * Math.cos(angle)),\n                y + (r * Math.sin(angle))\n            );\n        }\n\n        this.poly(polygon, true, transform);\n\n        return this;\n    }\n\n    /**\n     * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n     * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n     * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n     * do not affect the original `GraphicsPath` and vice versa.\n     * @param deep - A boolean flag indicating whether the clone should be deep.\n     * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n     */\n    public clone(deep = false): GraphicsPath\n    {\n        const newGraphicsPath2D = new GraphicsPath();\n\n        if (!deep)\n        {\n            newGraphicsPath2D.instructions = this.instructions.slice();\n        }\n        else\n        {\n            for (let i = 0; i < this.instructions.length; i++)\n            {\n                const instruction = this.instructions[i];\n\n                newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n            }\n        }\n\n        return newGraphicsPath2D;\n    }\n\n    public clear(): this\n    {\n        this.instructions.length = 0;\n        this._dirty = true;\n\n        return this;\n    }\n\n    /**\n     * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n     * This method enables the modification of the path's geometry according to the provided\n     * transformation matrix, which can include translations, rotations, scaling, and skewing.\n     *\n     * Each drawing instruction in the path is updated to reflect the transformation,\n     * ensuring the visual representation of the path is consistent with the applied matrix.\n     *\n     * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n     * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n     * allowing for fine-grained control over the path's appearance.\n     * @param matrix - A `Matrix` object representing the transformation to apply.\n     * @returns The instance of the current object for chaining further operations.\n     */\n    public transform(matrix: Matrix): this\n    {\n        if (matrix.isIdentity()) return this;\n\n        const a = matrix.a;\n        const b = matrix.b;\n        const c = matrix.c;\n        const d = matrix.d;\n        const tx = matrix.tx;\n        const ty = matrix.ty;\n\n        let x = 0;\n        let y = 0;\n\n        let cpx1 = 0;\n        let cpy1 = 0;\n        let cpx2 = 0;\n        let cpy2 = 0;\n\n        let rx = 0;\n        let ry = 0;\n\n        for (let i = 0; i < this.instructions.length; i++)\n        {\n            const instruction = this.instructions[i];\n            const data = instruction.data as any[];\n\n            switch (instruction.action)\n            {\n                case 'moveTo':\n                case 'lineTo':\n\n                    x = data[0];\n                    y = data[1];\n\n                    data[0] = (a * x) + (c * y) + tx;\n                    data[1] = (b * x) + (d * y) + ty;\n                    break;\n                case 'bezierCurveTo':\n\n                    cpx1 = data[0];\n                    cpy1 = data[1];\n                    cpx2 = data[2];\n                    cpy2 = data[3];\n\n                    x = data[4];\n                    y = data[5];\n\n                    data[0] = (a * cpx1) + (c * cpy1) + tx;\n                    data[1] = (b * cpx1) + (d * cpy1) + ty;\n                    data[2] = (a * cpx2) + (c * cpy2) + tx;\n                    data[3] = (b * cpx2) + (d * cpy2) + ty;\n                    data[4] = (a * x) + (c * y) + tx;\n                    data[5] = (b * x) + (d * y) + ty;\n                    break;\n\n                case 'quadraticCurveTo':\n\n                    cpx1 = data[0];\n                    cpy1 = data[1];\n\n                    x = data[2];\n                    y = data[3];\n\n                    data[0] = (a * cpx1) + (c * cpy1) + tx;\n                    data[1] = (b * cpx1) + (d * cpy1) + ty;\n\n                    data[2] = (a * x) + (c * y) + tx;\n                    data[3] = (b * x) + (d * y) + ty;\n\n                    break;\n\n                case 'arcToSvg':\n\n                    x = data[5];\n                    y = data[6];\n\n                    rx = data[0];\n                    ry = data[1];\n\n                    // multiply the radius by the transform..\n\n                    data[0] = (a * rx) + (c * ry);\n                    data[1] = (b * rx) + (d * ry);\n\n                    data[5] = (a * x) + (c * y) + tx;\n                    data[6] = (b * x) + (d * y) + ty;\n\n                    break;\n\n                case 'circle':\n                    data[4] = adjustTransform(data[3], matrix);\n                    break;\n                case 'rect':\n                    data[4] = adjustTransform(data[4], matrix);\n                    break;\n                case 'ellipse':\n                    data[8] = adjustTransform(data[8], matrix);\n                    break;\n                case 'roundRect':\n                    data[5] = adjustTransform(data[5], matrix);\n                    break;\n                case 'addPath':\n                    data[0].transform(matrix);\n                    break;\n                case 'poly':\n                    data[2] = adjustTransform(data[2], matrix);\n                    break;\n                default:\n                    // #if _DEBUG\n                    warn('unknown transform action', instruction.action);\n                    // #endif\n                    break;\n            }\n        }\n\n        this._dirty = true;\n\n        return this;\n    }\n\n    get bounds(): Bounds\n    {\n        return this.shapePath.bounds;\n    }\n\n    /**\n     * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n     * This method is useful for operations that depend on the path's current endpoint,\n     * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n     * ensuring the last point's position is accurately determined regardless of the path's complexity.\n     *\n     * If the last instruction is a `closePath`, the method iterates backward through the instructions\n     *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n     * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n     * the last point from the nested path.\n     * @param out - A `Point` object where the last point's coordinates will be stored.\n     * This object is modified directly to contain the result.\n     * @returns The `Point` object containing the last point's coordinates.\n     */\n    public getLastPoint(out: Point): Point\n    {\n        let index = this.instructions.length - 1;\n\n        let lastInstruction = this.instructions[index];\n\n        if (!lastInstruction)\n        {\n            out.x = 0;\n            out.y = 0;\n\n            return out;\n        }\n\n        while (lastInstruction.action === 'closePath')\n        {\n            index--;\n\n            if (index < 0)\n            {\n                out.x = 0;\n                out.y = 0;\n\n                return out;\n            }\n\n            lastInstruction = this.instructions[index];\n        }\n\n        switch (lastInstruction.action)\n        {\n            case 'moveTo':\n            case 'lineTo':\n                out.x = lastInstruction.data[0];\n                out.y = lastInstruction.data[1];\n                break;\n            case 'quadraticCurveTo':\n                out.x = lastInstruction.data[2];\n                out.y = lastInstruction.data[3];\n                break;\n            case 'bezierCurveTo':\n                out.x = lastInstruction.data[4];\n                out.y = lastInstruction.data[5];\n                break;\n            case 'arc':\n            case 'arcToSvg':\n                out.x = lastInstruction.data[5];\n                out.y = lastInstruction.data[6];\n                break;\n            case 'addPath':\n                // TODO prolly should transform the last point of the path\n                lastInstruction.data[0].getLastPoint(out);\n                break;\n        }\n\n        return out;\n    }\n}\n\nfunction adjustTransform(currentMatrix?: Matrix, transform?: Matrix): Matrix\n{\n    if (currentMatrix)\n    {\n        return currentMatrix.prepend(transform);\n    }\n\n    return transform.clone();\n}\n","import { Color } from '../../../../color/Color';\nimport { GraphicsPath } from '../path/GraphicsPath';\n\nimport type { ConvertedFillStyle, ConvertedStrokeStyle, FillStyle, StrokeStyle } from '../FillTypes';\nimport type {\n    GraphicsContext,\n} from '../GraphicsContext';\n\ninterface Session\n{\n    context: GraphicsContext;\n    path: GraphicsPath;\n}\n\nexport function SVGParser(\n    svg: string | SVGElement | SVGSVGElement,\n    graphicsContext?: GraphicsContext\n): GraphicsContext\n{\n    if (typeof svg === 'string')\n    {\n        const div = document.createElement('div');\n\n        div.innerHTML = svg.trim();\n        svg = div.querySelector('svg') as SVGElement;\n    }\n\n    const session = {\n        context: graphicsContext,\n        path: new GraphicsPath(),\n    };\n\n    renderChildren(svg, session, null, null);\n\n    return graphicsContext;\n}\n\nfunction renderChildren(svg: SVGElement, session: Session, fillStyle: FillStyle, strokeStyle: StrokeStyle): void\n{\n    const children = svg.children;\n\n    const { fillStyle: f1, strokeStyle: s1 } = parseStyle(svg);\n\n    if (f1 && fillStyle)\n    {\n        fillStyle = { ...fillStyle, ...f1 };\n    }\n    else if (f1)\n    {\n        fillStyle = f1;\n    }\n\n    if (s1 && strokeStyle)\n    {\n        strokeStyle = { ...strokeStyle, ...s1 };\n    }\n    else if (s1)\n    {\n        strokeStyle = s1;\n    }\n\n    session.context.fillStyle = fillStyle;\n    session.context.strokeStyle = strokeStyle;\n\n    let x;\n    let y;\n    let x1;\n    let y1;\n    let x2;\n    let y2;\n    let cx;\n    let cy;\n    let r;\n    let rx;\n    let ry;\n    let points;\n    let pointsString;\n    let d;\n    let graphicsPath;\n    let width;\n    let height;\n\n    switch (svg.nodeName.toLowerCase())\n    {\n        case 'path':\n            d = svg.getAttribute('d') as string;\n\n            graphicsPath = new GraphicsPath(d);\n\n            session.context.path(graphicsPath);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'circle':\n            cx = parseFloatAttribute(svg, 'cx', 0);\n            cy = parseFloatAttribute(svg, 'cy', 0);\n\n            r = parseFloatAttribute(svg, 'r', 0);\n\n            session.context.ellipse(cx, cy, r, r);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'rect':\n            x = parseFloatAttribute(svg, 'x', 0);\n            y = parseFloatAttribute(svg, 'y', 0);\n\n            width = parseFloatAttribute(svg, 'width', 0);\n            height = parseFloatAttribute(svg, 'height', 0);\n\n            rx = parseFloatAttribute(svg, 'rx', 0);\n            ry = parseFloatAttribute(svg, 'ry', 0);\n\n            if (rx || ry)\n            {\n                session.context.roundRect(x, y, width, height, rx || ry);\n            }\n            else\n            {\n                session.context.rect(x, y, width, height);\n            }\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'ellipse':\n            cx = parseFloatAttribute(svg, 'cx', 0);\n            cy = parseFloatAttribute(svg, 'cy', 0);\n\n            rx = parseFloatAttribute(svg, 'rx', 0);\n            ry = parseFloatAttribute(svg, 'ry', 0);\n\n            session.context.beginPath();\n            session.context.ellipse(cx, cy, rx, ry); // , 0, Math.PI * 2);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'line':\n            x1 = parseFloatAttribute(svg, 'x1', 0);\n            y1 = parseFloatAttribute(svg, 'y1', 0);\n\n            x2 = parseFloatAttribute(svg, 'x2', 0);\n            y2 = parseFloatAttribute(svg, 'y2', 0);\n\n            session.context.beginPath();\n            session.context.moveTo(x1, y1);\n            session.context.lineTo(x2, y2);\n\n            if (strokeStyle) session.context.stroke();\n\n            break;\n\n        case 'polygon':\n            pointsString = svg.getAttribute('points') as string;\n\n            points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n\n            session.context.poly(points, true);\n\n            if (fillStyle) session.context.fill();\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        case 'polyline':\n            pointsString = svg.getAttribute('points') as string;\n\n            points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n\n            session.context.poly(points, false);\n\n            if (strokeStyle) session.context.stroke();\n\n            break;\n        // children will cover these two..\n        case 'g':\n        case 'svg':\n            break;\n        default: {\n            // eslint-disable-next-line no-console\n            console.info(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n            break;\n        }\n    }\n\n    for (let i = 0; i < children.length; i++)\n    {\n        renderChildren(children[i] as SVGElement, session, fillStyle, strokeStyle);\n    }\n}\n\nfunction parseFloatAttribute(svg: SVGElement, id: string, defaultValue: number): number\n{\n    const value = svg.getAttribute(id) as string;\n\n    return value ? Number(value) : defaultValue;\n}\n\nfunction parseStyle(svg: SVGElement): { strokeStyle: ConvertedStrokeStyle; fillStyle: ConvertedFillStyle }\n{\n    const style = svg.getAttribute('style');\n\n    const strokeStyle: StrokeStyle = {};\n\n    const fillStyle: FillStyle = {};\n\n    let useFill = false;\n    let useStroke = false;\n\n    if (style)\n    {\n        const styleParts = style.split(';');\n\n        for (let i = 0; i < styleParts.length; i++)\n        {\n            const stylePart = styleParts[i];\n\n            const [key, value] = stylePart.split(':');\n\n            switch (key)\n            {\n                case 'stroke':\n                    if (value !== 'none')\n                    {\n                        strokeStyle.color = Color.shared.setValue(value).toNumber();\n                        useStroke = true;\n                    }\n\n                    break;\n                case 'stroke-width':\n                    strokeStyle.width = Number(value);\n                    break;\n                case 'fill':\n                    if (value !== 'none')\n                    {\n                        useFill = true;\n                        fillStyle.color = Color.shared.setValue(value).toNumber();\n                    }\n                    break;\n                case 'fill-opacity':\n                    fillStyle.alpha = Number(value);\n                    break;\n                case 'stroke-opacity':\n                    strokeStyle.alpha = Number(value);\n                    break;\n                case 'opacity':\n                    fillStyle.alpha = Number(value);\n                    strokeStyle.alpha = Number(value);\n                    break;\n            }\n        }\n    }\n    else\n    {\n        const stroke = svg.getAttribute('stroke');\n\n        if (stroke && stroke !== 'none')\n        {\n            useStroke = true;\n            strokeStyle.color = Color.shared.setValue(stroke).toNumber();\n\n            strokeStyle.width = parseFloatAttribute(svg, 'stroke-width', 1);\n        }\n\n        const fill = svg.getAttribute('fill');\n\n        if (fill && fill !== 'none')\n        {\n            useFill = true;\n            fillStyle.color = Color.shared.setValue(fill).toNumber();\n        }\n    }\n\n    return {\n        strokeStyle: useStroke ? (strokeStyle as ConvertedStrokeStyle) : null,\n        fillStyle: useFill ? (fillStyle as ConvertedFillStyle) : null,\n    };\n}\n","/* eslint-disable max-len */\nimport EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../../color/Color';\nimport { Matrix } from '../../../maths/matrix/Matrix';\nimport { Point } from '../../../maths/point/Point';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture';\nimport { uid } from '../../../utils/data/uid';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation';\nimport { Bounds } from '../../container/bounds/Bounds';\nimport { GraphicsPath } from './path/GraphicsPath';\nimport { SVGParser } from './svg/SVGParser';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle';\n\nimport type { PointData } from '../../../maths/point/PointData';\nimport type { Shader } from '../../../rendering/renderers/shared/shader/Shader';\nimport type { TextureDestroyOptions, TypeOrBool } from '../../container/destroyTypes';\nimport type { ConvertedFillStyle, ConvertedStrokeStyle, FillInput, StrokeInput } from './FillTypes';\nimport type { RoundedPoint } from './path/roundShape';\n\nconst tmpPoint = new Point();\n\nexport type BatchMode = 'auto' | 'batch' | 'no-batch';\n\nexport interface FillInstruction\n{\n    action: 'fill' | 'cut'\n    data: { style: ConvertedFillStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\nexport interface StrokeInstruction\n{\n    action: 'stroke'\n    data: { style: ConvertedStrokeStyle, path: GraphicsPath, hole?: GraphicsPath }\n}\n\nexport interface TextureInstruction\n{\n    action: 'texture'\n    data: {\n        image: Texture,\n\n        dx: number\n        dy: number\n\n        dw: number\n        dh: number\n\n        transform: Matrix\n        alpha: number\n        style: number,\n    }\n}\n\nexport type GraphicsInstructions = FillInstruction | StrokeInstruction | TextureInstruction;\n\nconst tempMatrix = new Matrix();\n\n/**\n * The GraphicsContext class allows for the creation of lightweight objects that contain instructions for drawing shapes and paths.\n * It is used internally by the Graphics class to draw shapes and paths, and can be used directly and shared between Graphics objects,\n *\n * This sharing of a `GraphicsContext` means that the intensive task of converting graphics instructions into GPU-ready geometry is done once, and the results are reused,\n * much like sprites reusing textures.\n * @memberof scene\n */\nexport class GraphicsContext extends EventEmitter<{\n    update: GraphicsContext\n    destroy: GraphicsContext\n}>\n{\n    /** The default fill style to use when none is provided. */\n    public static defaultFillStyle: ConvertedFillStyle = {\n        /** The color to use for the fill. */\n        color: 0xffffff,\n        /** The alpha value to use for the fill. */\n        alpha: 1,\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n    };\n\n    /** The default stroke style to use when none is provided. */\n    public static defaultStrokeStyle: ConvertedStrokeStyle = {\n        /** The width of the stroke. */\n        width: 1,\n        /** The color to use for the stroke. */\n        color: 0xffffff,\n        /** The alpha value to use for the stroke. */\n        alpha: 1,\n        /** The alignment of the stroke. */\n        alignment: 0.5,\n        /** The miter limit to use. */\n        miterLimit: 10,\n        /** The line cap style to use. */\n        cap: 'butt',\n        /** The line join style to use. */\n        join: 'miter',\n        /** The texture to use for the fill. */\n        texture: Texture.WHITE,\n        /** The matrix to apply. */\n        matrix: null,\n        /** The fill pattern to use. */\n        fill: null,\n    };\n\n    /** unique id for this graphics context */\n    public readonly uid: number = uid('graphicsContext');\n    public dirty = true;\n    public batchMode: BatchMode = 'auto';\n    public instructions: GraphicsInstructions[] = [];\n    public customShader?: Shader;\n\n    private _activePath: GraphicsPath = new GraphicsPath();\n    private _transform: Matrix = new Matrix();\n\n    private _fillStyle: ConvertedFillStyle = { ...GraphicsContext.defaultFillStyle };\n    private _strokeStyle: ConvertedStrokeStyle = { ...GraphicsContext.defaultStrokeStyle };\n    private _stateStack: { fillStyle: ConvertedFillStyle; strokeStyle: ConvertedStrokeStyle, transform: Matrix }[] = [];\n\n    private _tick = 0;\n\n    private _bounds = new Bounds();\n    private _boundsDirty = true;\n\n    /**\n     * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n     * including the current drawing state, transformations, styles, and instructions.\n     * @returns A new GraphicsContext instance with the same properties and state as this one.\n     */\n    public clone(): GraphicsContext\n    {\n        const clone = new GraphicsContext();\n\n        clone.batchMode = this.batchMode;\n        clone.instructions = this.instructions.slice();\n        clone._activePath = this._activePath.clone();\n        clone._transform = this._transform.clone();\n        clone._fillStyle = { ...this._fillStyle };\n        clone._strokeStyle = { ...this._strokeStyle };\n        clone._stateStack = this._stateStack.slice();\n        clone._bounds = this._bounds.clone();\n        clone._boundsDirty = true;\n\n        return clone;\n    }\n\n    /**\n     * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n     */\n    get fillStyle(): ConvertedFillStyle\n    {\n        return this._fillStyle;\n    }\n\n    set fillStyle(value: FillInput)\n    {\n        this._fillStyle = toFillStyle(value, GraphicsContext.defaultFillStyle);\n    }\n\n    /**\n     * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     */\n    get strokeStyle(): ConvertedStrokeStyle\n    {\n        return this._strokeStyle;\n    }\n\n    set strokeStyle(value: FillInput)\n    {\n        this._strokeStyle = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    }\n\n    /**\n     * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n     * pattern, or a more complex style defined by a FillStyle object.\n     * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n     *                or a FillStyle or ConvertedFillStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setFillStyle(style: FillInput): this\n    {\n        this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n\n        return this;\n    }\n\n    /**\n     * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n     * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n     * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n     *                or a StrokeStyle or ConvertedStrokeStyle object.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setStrokeStyle(style: StrokeInput): this\n    {\n        this._strokeStyle = toFillStyle(style, GraphicsContext.defaultStrokeStyle) as ConvertedStrokeStyle;\n\n        return this;\n    }\n\n    /**\n     * Adds a texture to the graphics context. This method supports multiple overloads for specifying the texture, tint, and dimensions.\n     * If only a texture is provided, it uses the texture's width and height for drawing. Additional parameters allow for specifying\n     * a tint color, and custom dimensions for the texture drawing area.\n     * @param texture - The Texture object to use.\n     * @param tint - (Optional) A ColorSource to tint the texture. If not provided, defaults to white (0xFFFFFF).\n     * @param dx - (Optional) The x-coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param dy - (Optional) The y-coordinate in the destination canvas at which to place the top-left corner of the source image.\n     * @param dw - (Optional) The width of the rectangle within the source image to draw onto the destination canvas. If not provided, uses the texture's frame width.\n     * @param dh - (Optional) The height of the rectangle within the source image to draw onto the destination canvas. If not provided, uses the texture's frame height.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public texture(texture: Texture): this;\n    public texture(texture: Texture, tint: ColorSource): this;\n    public texture(texture: Texture, tint: ColorSource, dx: number, dy: number): this;\n    public texture(texture: Texture, tint: ColorSource, dx: number, dy: number, dw: number, dh: number): this;\n    public texture(texture: Texture, tint?: ColorSource, dx?: number, dy?: number, dw?: number, dh?: number): this\n    {\n        this.instructions.push({\n            action: 'texture',\n            data: {\n                image: texture,\n\n                dx: dx || 0,\n                dy: dy || 0,\n\n                dw: dw || texture.frame.width,\n                dh: dh || texture.frame.height,\n\n                transform: this._transform.clone(),\n                alpha: this._fillStyle.alpha,\n                style: tint ? Color.shared.setValue(tint).toNumber() : 0xFFFFFF,\n            }\n        });\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    /**\n     * Resets the current path. Any previous path and its commands are discarded and a new path is\n     * started. This is typically called before beginning a new shape or series of drawing commands.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public beginPath(): this\n    {\n        this._activePath = new GraphicsPath();\n\n        return this;\n    }\n\n    /**\n     * Fills the current or given path with the current fill style. This method can optionally take\n     * a color and alpha for a simple fill, or a more complex FillInput object for advanced fills.\n     * @param style - (Optional) The style to fill the path with. Can be a color, gradient, pattern, or a complex style object. If omitted, uses the current fill style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public fill(style?: FillInput): this;\n    /** @deprecated 8.0.0 */\n    public fill(color: ColorSource, alpha: number): this;\n    public fill(style?: FillInput, alpha?: number): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction && lastInstruction.action === 'stroke')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            if (alpha !== undefined && typeof style === 'number')\n            {\n                // #if _DEBUG\n                deprecation(v8_0_0, 'GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead');\n                // #endif\n\n                style = { color: style, alpha };\n            }\n            this._fillStyle = toFillStyle(style, GraphicsContext.defaultFillStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'fill',\n            // TODO copy fill style!\n            data: { style: this.fillStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    private _initNextPathLocation()\n    {\n        // Reset the _activePath with the last point of the current path\n        const { x, y } = this._activePath.getLastPoint(Point.shared);\n\n        this._activePath.clear();\n        this._activePath.moveTo(x, y);\n    }\n\n    /**\n     * Strokes the current path with the current stroke style. This method can take an optional\n     * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n     * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public stroke(style?: StrokeInput): this\n    {\n        let path: GraphicsPath;\n\n        const lastInstruction = this.instructions[this.instructions.length - 1];\n\n        if (this._tick === 0 && lastInstruction && lastInstruction.action === 'fill')\n        {\n            path = lastInstruction.data.path;\n        }\n        else\n        {\n            path = this._activePath.clone();\n        }\n\n        if (!path) return this;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style != null)\n        {\n            this._strokeStyle = toStrokeStyle(style, GraphicsContext.defaultStrokeStyle);\n        }\n\n        // TODO not a fan of the clone!!\n        this.instructions.push({\n            action: 'stroke',\n            // TODO copy fill style!\n            data: { style: this.strokeStyle, path }\n        });\n\n        this.onUpdate();\n\n        this._initNextPathLocation();\n        this._tick = 0;\n\n        return this;\n    }\n\n    /**\n     * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n     * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n     * fail to cut correctly!\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public cut(): this\n    {\n        for (let i = 0; i < 2; i++)\n        {\n            const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n\n            const holePath = this._activePath.clone();\n\n            if (lastInstruction)\n            {\n                if (lastInstruction.action === 'stroke' || lastInstruction.action === 'fill')\n                {\n                    if (lastInstruction.data.hole)\n                    {\n                        lastInstruction.data.hole.addPath(holePath);\n                    }\n                    else\n                    {\n                        lastInstruction.data.hole = holePath;\n                        break;\n                    }\n                }\n            }\n        }\n\n        this._initNextPathLocation();\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n     * starting and ending angles, and direction.\n     * @param x - The x-coordinate of the arc's center.\n     * @param y - The y-coordinate of the arc's center.\n     * @param radius - The arc's radius.\n     * @param startAngle - The starting angle, in radians.\n     * @param endAngle - The ending angle, in radians.\n     * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arc(x: number, y: number, radius: number, startAngle: number, endAngle: number, counterclockwise?: boolean): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arc(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            radius,\n            startAngle,\n            endAngle,\n            counterclockwise,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an arc to the current path with the given control points and radius, connected to the previous point\n     * by a straight line if necessary.\n     * @param x1 - The x-coordinate of the first control point.\n     * @param y1 - The y-coordinate of the first control point.\n     * @param x2 - The x-coordinate of the second control point.\n     * @param y2 - The y-coordinate of the second control point.\n     * @param radius - The arc's radius.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public arcTo(x1: number, y1: number, x2: number, y2: number, radius: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcTo(\n            (t.a * x1) + (t.c * y1) + t.tx,\n            (t.b * x1) + (t.d * y1) + t.ty,\n            (t.a * x2) + (t.c * y2) + t.tx,\n            (t.b * x2) + (t.d * y2) + t.ty,\n            radius,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n     * @param rx - The x-radius of the ellipse.\n     * @param ry - The y-radius of the ellipse.\n     * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n     * to the x-axis of the coordinate system, in degrees.\n     * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n     * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n     * @param x - The x-coordinate of the arc's end point.\n     * @param y - The y-coordinate of the arc's end point.\n     * @returns The instance of the current object for chaining.\n     */\n    public arcToSvg(\n        rx: number, ry: number,\n        xAxisRotation: number,\n        largeArcFlag: number,\n        sweepFlag: number,\n        x: number, y: number\n    ): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.arcToSvg(\n            rx, ry,\n            xAxisRotation, // should we rotate this with transform??\n            largeArcFlag,\n            sweepFlag,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a cubic Bezier curve to the path.\n     * It requires three points: the first two are control points and the third one is the end point.\n     * The starting point is the last point in the current path.\n     * @param cp1x - The x-coordinate of the first control point.\n     * @param cp1y - The y-coordinate of the first control point.\n     * @param cp2x - The x-coordinate of the second control point.\n     * @param cp2y - The y-coordinate of the second control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public bezierCurveTo(cp1x: number, cp1y: number, cp2x: number, cp2y: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        // TODO optimize for no transform\n        const t = this._transform;\n\n        this._activePath.bezierCurveTo(\n            (t.a * cp1x) + (t.c * cp1y) + t.tx,\n            (t.b * cp1x) + (t.d * cp1y) + t.ty,\n            (t.a * cp2x) + (t.c * cp2y) + t.tx,\n            (t.b * cp2x) + (t.d * cp2y) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Closes the current path by drawing a straight line back to the start.\n     * If the shape is already closed or there are no points in the path, this method does nothing.\n     * @returns The instance of the current object for chaining.\n     */\n    public closePath(): this\n    {\n        this._tick++;\n\n        this._activePath?.closePath();\n\n        return this;\n    }\n\n    /**\n     * Draws an ellipse at the specified location and with the given x and y radii.\n     * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n     * @param x - The x-coordinate of the center of the ellipse.\n     * @param y - The y-coordinate of the center of the ellipse.\n     * @param radiusX - The horizontal radius of the ellipse.\n     * @param radiusY - The vertical radius of the ellipse.\n     * @returns The instance of the current object for chaining.\n     */\n    public ellipse(x: number, y: number, radiusX: number, radiusY: number): this\n    {\n        this._tick++;\n\n        this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a circle shape. This method adds a new circle path to the current drawing.\n     * @param x - The x-coordinate of the center of the circle.\n     * @param y - The y-coordinate of the center of the circle.\n     * @param radius - The radius of the circle.\n     * @returns The instance of the current object for chaining.\n     */\n    public circle(x: number, y: number, radius: number): this\n    {\n        this._tick++;\n\n        this._activePath.circle(x, y, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n     * @param path - The `GraphicsPath` to add.\n     * @returns The instance of the current object for chaining.\n     */\n    public path(path: GraphicsPath): this\n    {\n        this._tick++;\n\n        this._activePath.addPath(path, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Connects the current point to a new point with a straight line. This method updates the current path.\n     * @param x - The x-coordinate of the new point to connect to.\n     * @param y - The y-coordinate of the new point to connect to.\n     * @returns The instance of the current object for chaining.\n     */\n    public lineTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.lineTo(\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty\n        );\n\n        return this;\n    }\n\n    /**\n     * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n     * @param x - The x-coordinate for the starting point.\n     * @param y - The y-coordinate for the starting point.\n     * @returns The instance of the current object for chaining.\n     */\n    public moveTo(x: number, y: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        const instructions = this._activePath.instructions;\n\n        const transformedX = (t.a * x) + (t.c * y) + t.tx;\n        const transformedY = (t.b * x) + (t.d * y) + t.ty;\n\n        if (instructions.length === 1 && instructions[0].action === 'moveTo')\n        {\n            instructions[0].data[0] = transformedX;\n            instructions[0].data[1] = transformedY;\n\n            return this;\n        }\n        this._activePath.moveTo(\n            transformedX,\n            transformedY\n        );\n\n        return this;\n    }\n\n    /**\n     * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n     * The starting point is the last point in the current path.\n     * @param cpx - The x-coordinate of the control point.\n     * @param cpy - The y-coordinate of the control point.\n     * @param x - The x-coordinate of the end point.\n     * @param y - The y-coordinate of the end point.\n     * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n     * @returns The instance of the current object for chaining.\n     */\n    public quadraticCurveTo(cpx: number, cpy: number, x: number, y: number, smoothness?: number): this\n    {\n        this._tick++;\n\n        const t = this._transform;\n\n        this._activePath.quadraticCurveTo(\n            (t.a * cpx) + (t.c * cpy) + t.tx,\n            (t.b * cpx) + (t.d * cpy) + t.ty,\n            (t.a * x) + (t.c * y) + t.tx,\n            (t.b * x) + (t.d * y) + t.ty,\n            smoothness,\n        );\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @returns The instance of the current object for chaining.\n     */\n    public rect(x: number, y: number, w: number, h: number): this\n    {\n        this._tick++;\n\n        this._activePath.rect(x, y, w, h, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a rectangle with rounded corners.\n     * The corner radius can be specified to determine how rounded the corners should be.\n     * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n     * @param x - The x-coordinate of the top-left corner of the rectangle.\n     * @param y - The y-coordinate of the top-left corner of the rectangle.\n     * @param w - The width of the rectangle.\n     * @param h - The height of the rectangle.\n     * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundRect(x: number, y: number, w: number, h: number, radius?: number): this\n    {\n        this._tick++;\n\n        this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n     * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n     * rotated, or translated as needed.\n     * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n     * representing the x and y coordinates, of the polygon's vertices, in sequence.\n     * @param close - A boolean indicating whether to close the polygon path. True by default.\n     */\n    public poly(points: number[] | PointData[], close?: boolean): this\n    {\n        this._tick++;\n\n        this._activePath.poly(points, close, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n     * @returns The instance of the current object for chaining.\n     */\n    public regularPoly(x: number, y: number, radius: number, sides: number, rotation = 0, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a polygon with rounded corners.\n     * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n     * @param x - The x-coordinate of the center of the polygon.\n     * @param y - The y-coordinate of the center of the polygon.\n     * @param radius - The radius of the circumscribed circle of the polygon.\n     * @param sides - The number of sides of the polygon. Must be 3 or more.\n     * @param corner - The radius of the rounding of the corners.\n     * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundPoly(x: number, y: number, radius: number, sides: number, corner: number, rotation?: number): this\n    {\n        this._tick++;\n        this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n\n        return this;\n    }\n\n    /**\n     * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n     * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n     * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n     * A minimum of 3 points is required.\n     * @param radius - The default radius for the corners.\n     * This radius is applied to all corners unless overridden in `points`.\n     * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n     *  method instead of an arc method. Defaults to false.\n     * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n     * Higher values make the curve smoother.\n     * @returns The instance of the current object for chaining.\n     */\n    public roundShape(points: RoundedPoint[], radius: number, useQuadratic?: boolean, smoothness?: number): this\n    {\n        this._tick++;\n        this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with fillet corners. This is much like rounded rectangle\n     * however it support negative numbers as well for the corner radius.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param fillet - accept negative or positive values\n     */\n    public filletRect(x: number, y: number, width: number, height: number, fillet: number): this\n    {\n        this._tick++;\n        this._activePath.filletRect(x, y, width, height, fillet);\n\n        return this;\n    }\n\n    /**\n     * Draw Rectangle with chamfer corners. These are angled corners.\n     * @param x - Upper left corner of rect\n     * @param y - Upper right corner of rect\n     * @param width - Width of rect\n     * @param height - Height of rect\n     * @param chamfer - non-zero real number, size of corner cutout\n     * @param transform\n     */\n    public chamferRect(x: number, y: number, width: number, height: number, chamfer: number, transform?: Matrix): this\n    {\n        this._tick++;\n        this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n\n        return this;\n    }\n\n    /**\n     * Draws a star shape centered at a specified location. This method allows for the creation\n     *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n     * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n     * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n     * @param x - The x-coordinate of the center of the star.\n     * @param y - The y-coordinate of the center of the star.\n     * @param points - The number of points of the star.\n     * @param radius - The outer radius of the star (distance from the center to the outer points).\n     * @param innerRadius - Optional. The inner radius of the star\n     * (distance from the center to the inner points between the outer points).\n     * If not provided, defaults to half of the `radius`.\n     * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n     * Defaults to 0, meaning one point is directly upward.\n     * @returns The instance of the current object for chaining further drawing commands.\n     */\n    public star(x: number, y: number, points: number, radius: number, innerRadius = 0, rotation = 0): this\n    {\n        this._tick++;\n\n        this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n\n        return this;\n    }\n\n    /**\n     * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n     * defined in SVG format to be drawn within the graphics context.\n     * @param svg - The SVG string to be parsed and rendered.\n     */\n    public svg(svg: string): this\n    {\n        this._tick++;\n\n        SVGParser(svg, this);\n\n        return this;\n    }\n\n    /**\n     * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n     * This includes transformations, fill styles, and stroke styles.\n     */\n    public restore(): this\n    {\n        const state = this._stateStack.pop();\n\n        if (state)\n        {\n            this._transform = state.transform;\n            this._fillStyle = state.fillStyle;\n            this._strokeStyle = state.strokeStyle;\n        }\n\n        return this;\n    }\n\n    /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n    public save(): this\n    {\n        this._stateStack.push({\n            transform: this._transform.clone(),\n            fillStyle: { ...this._fillStyle },\n            strokeStyle: { ...this._strokeStyle },\n        });\n\n        return this;\n    }\n\n    /**\n     * Returns the current transformation matrix of the graphics context.\n     * @returns The current transformation matrix.\n     */\n    public getTransform(): Matrix\n    {\n        return this._transform;\n    }\n\n    /**\n     * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public resetTransform(): this\n    {\n        this._transform.identity();\n\n        return this;\n    }\n\n    /**\n     * Applies a rotation transformation to the graphics context around the current origin.\n     * @param angle - The angle of rotation in radians.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public rotate(angle: number): this\n    {\n        this._transform.rotate(angle);\n\n        return this;\n    }\n\n    /**\n     * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n     * @param x - The scale factor in the horizontal direction.\n     * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public scale(x: number, y: number = x): this\n    {\n        this._transform.scale(x, y);\n\n        return this;\n    }\n\n    /**\n     * Sets the current transformation matrix of the graphics context to the specified matrix or values.\n     * This replaces the current transformation matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public setTransform(transform: Matrix): this;\n    public setTransform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public setTransform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n\n            return this;\n        }\n\n        this._transform.set(a, b, c, d, dx, dy);\n\n        return this;\n    }\n\n    /**\n     * Applies the specified transformation matrix to the current graphics context by multiplying the current matrix with the specified matrix.\n     * @param a - The value for the a property of the matrix, or a Matrix object to use directly.\n     * @param b - The value for the b property of the matrix.\n     * @param c - The value for the c property of the matrix.\n     * @param d - The value for the d property of the matrix.\n     * @param dx - The value for the tx (translate x) property of the matrix.\n     * @param dy - The value for the ty (translate y) property of the matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public transform(transform: Matrix): this;\n    public transform(a: number, b: number, c: number, d: number, dx: number, dy: number): this;\n    public transform(a: number | Matrix, b?: number, c?: number, d?: number, dx?: number, dy?: number): this\n    {\n        if (a instanceof Matrix)\n        {\n            this._transform.append(a);\n\n            return this;\n        }\n\n        tempMatrix.set(a, b, c, d, dx, dy);\n        this._transform.append(tempMatrix);\n\n        return this;\n    }\n\n    /**\n     * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n     * @param x - The amount to translate in the horizontal direction.\n     * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public translate(x: number, y: number = x): this\n    {\n        this._transform.translate(x, y);\n\n        return this;\n    }\n\n    /**\n     * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n     * and optionally resetting transformations to the identity matrix.\n     * @returns The instance of the current GraphicsContext for method chaining.\n     */\n    public clear(): this\n    {\n        this._activePath.clear();\n        this.instructions.length = 0;\n        this.resetTransform();\n\n        this.onUpdate();\n\n        return this;\n    }\n\n    protected onUpdate(): void\n    {\n        if (this.dirty) return;\n\n        this.emit('update', this, 0x10);\n        this.dirty = true;\n        this._boundsDirty = true;\n    }\n\n    /** The bounds of the graphic shape. */\n    get bounds(): Bounds\n    {\n        if (!this._boundsDirty) return this._bounds;\n\n        // TODO switch to idy dirty with tick..\n        const bounds = this._bounds;\n\n        bounds.clear();\n\n        for (let i = 0; i < this.instructions.length; i++)\n        {\n            const instruction = this.instructions[i];\n            const action = instruction.action;\n\n            if (action === 'fill')\n            {\n                const data = instruction.data as FillInstruction['data'];\n\n                bounds.addBounds(data.path.bounds);\n            }\n            else if (action === 'texture')\n            {\n                const data = instruction.data as TextureInstruction['data'];\n\n                bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n            }\n            if (action === 'stroke')\n            {\n                const data = instruction.data as StrokeInstruction['data'];\n\n                const padding = data.style.width / 2;\n\n                const _bounds = data.path.bounds;\n\n                bounds.addFrame(\n                    _bounds.minX - padding,\n                    _bounds.minY - padding,\n                    _bounds.maxX + padding,\n                    _bounds.maxY + padding\n                );\n            }\n        }\n\n        return bounds;\n    }\n\n    /**\n     * Check to see if a point is contained within this geometry.\n     * @param point - Point to check if it's contained.\n     * @returns {boolean} `true` if the point is contained within geometry.\n     */\n    public containsPoint(point: PointData): boolean\n    {\n        // early out if the bounding box is not hit\n        if (!this.bounds.containsPoint(point.x, point.y)) return false;\n\n        const instructions = this.instructions;\n        let hasHit = false;\n\n        for (let k = 0; k < instructions.length; k++)\n        {\n            const instruction = instructions[k];\n\n            const data = instruction.data as FillInstruction['data'];\n            const path = data.path;\n\n            if (!instruction.action || !path) continue;\n\n            const style = data.style;\n            const shapes = path.shapePath.shapePrimitives;\n\n            for (let i = 0; i < shapes.length; i++)\n            {\n                const shape = shapes[i].shape;\n\n                if (!style || !shape) continue;\n\n                const transform = shapes[i].transform;\n\n                const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n\n                if (instruction.action === 'fill')\n                {\n                    hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n                }\n                else\n                {\n                    hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, (style as ConvertedStrokeStyle).width);\n                }\n\n                const holes = data.hole;\n\n                if (holes)\n                {\n                    const holeShapes = holes.shapePath?.shapePrimitives;\n\n                    if (holeShapes)\n                    {\n                        for (let j = 0; j < holeShapes.length; j++)\n                        {\n                            if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y))\n                            {\n                                hasHit = false;\n                            }\n                        }\n                    }\n                }\n\n                if (hasHit)\n                {\n                    return true;\n                }\n            }\n        }\n\n        return hasHit;\n    }\n\n    /**\n     * Destroys the GraphicsData object.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the fill/stroke style?\n     * @param {boolean} [options.textureSource=false] - Should it destroy the texture source of the fill/stroke style?\n     */\n    public destroy(options: TypeOrBool<TextureDestroyOptions> = false): void\n    {\n        this._stateStack.length = 0;\n        this._transform = null;\n\n        this.emit('destroy', this);\n        this.removeAllListeners();\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            if (this._fillStyle.texture)\n            {\n                this._fillStyle.texture.destroy(destroyTextureSource);\n            }\n\n            if (this._strokeStyle.texture)\n            {\n                this._strokeStyle.texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this._fillStyle = null;\n        this._strokeStyle = null;\n\n        this.instructions = null;\n        this._activePath = null;\n        this._bounds = null;\n        this._stateStack = null;\n        this.customShader = null;\n        this._transform = null;\n    }\n}\n","import type { Matrix } from '../../../../../maths/matrix/Matrix';\n\n/**\n * Takes a vertices array and a matrix and transforms the vertices based on the matrix.\n * this out put is written to the uvs array\n * @param vertices - the vertices to calculate uvs from\n * @param verticesStride - the stride of the vertice\n * @param verticesOffset - the offset of the vertices\n * @param uvs - the uvs to fill\n * @param uvsOffset - the offset of the uvs\n * @param uvsStride - the stride of the uvs\n * @param size - the size of the vertices\n * @param matrix - the matrix to apply to the uvs\n * @memberof rendering\n */\nexport function buildUvs(\n    vertices: number[],\n    verticesStride: number,\n    verticesOffset: number,\n\n    uvs: number[],\n    uvsOffset: number,\n    uvsStride: number,\n\n    size: number,\n    matrix: Matrix = null\n): void\n{\n    let index = 0;\n\n    verticesOffset *= verticesStride;\n    uvsOffset *= uvsStride;\n\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n\n    while (index < size)\n    {\n        const x = vertices[verticesOffset];\n        const y = vertices[verticesOffset + 1];\n\n        uvs[uvsOffset] = (a * x) + (c * y) + tx;\n        uvs[uvsOffset + 1] = (b * x) + (d * y) + ty;\n\n        uvsOffset += uvsStride;\n\n        verticesOffset += verticesStride;\n\n        index++;\n    }\n}\n\nexport function buildSimpleUvs(\n    uvs: number[],\n    uvsOffset: number,\n    uvsStride: number,\n    size: number,\n)\n{\n    let index = 0;\n\n    uvsOffset *= uvsStride;\n\n    while (index < size)\n    {\n        uvs[uvsOffset] = 0;\n        uvs[uvsOffset + 1] = 0;\n\n        uvsOffset += uvsStride;\n\n        index++;\n    }\n}\n","import type { Matrix } from '../../../../../maths/matrix/Matrix';\n\n/**\n * Transforms the vertices in an array with the given matrix.\n * @param vertices - the vertices to transform\n * @param m - the matrix to apply to the vertices\n * @param offset - the offset of the vertices (defaults to 0)\n * @param stride - the stride of the vertices (defaults to 2)\n * @param size - the size of the vertices (defaults to vertices.length / stride - offset)\n * @memberof rendering\n */\nexport function transformVertices(vertices: number[], m: Matrix, offset?: number, stride?: number, size?: number)\n{\n    const a = m.a;\n    const b = m.b;\n    const c = m.c;\n    const d = m.d;\n    const tx = m.tx;\n    const ty = m.ty;\n\n    offset = offset || 0;\n    stride = stride || 2;\n    size = size || (vertices.length / stride) - offset;\n\n    let index = offset * stride;\n\n    for (let i = 0; i < size; i++)\n    {\n        const x = vertices[index];\n        const y = vertices[index + 1];\n\n        vertices[index] = (a * x) + (c * y) + tx;\n        vertices[index + 1] = (b * x) + (d * y) + ty;\n\n        index += stride;\n    }\n}\n","import { ExtensionType } from '../../../../extensions/Extensions';\n\nimport type { Circle } from '../../../../maths/shapes/Circle';\nimport type { Ellipse } from '../../../../maths/shapes/Ellipse';\nimport type { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\ntype RoundedShape = Circle | Ellipse | RoundedRectangle;\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildCircle: ShapeBuildCommand<RoundedShape> = {\n    extension: {\n        type: ExtensionType.ShapeBuilder,\n        name: 'circle',\n    },\n\n    build(shape: RoundedShape, points: number[])\n    {\n        let x;\n        let y;\n        let dx;\n        let dy;\n\n        let rx;\n        let ry;\n\n        if (shape.type === 'circle')\n        {\n            const circle = shape as Circle;\n\n            x = circle.x;\n            y = circle.y;\n            rx = ry = circle.radius;\n            dx = dy = 0;\n        }\n\n        else if (shape.type === 'ellipse')\n        {\n            const ellipse = shape as Ellipse;\n\n            x = ellipse.x;\n            y = ellipse.y;\n            rx = ellipse.halfWidth;\n            ry = ellipse.halfHeight;\n            dx = dy = 0;\n        }\n        else\n        {\n            const roundedRect = shape as RoundedRectangle;\n            const halfWidth = roundedRect.width / 2;\n            const halfHeight = roundedRect.height / 2;\n\n            x = roundedRect.x + halfWidth;\n            y = roundedRect.y + halfHeight;\n            rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n            dx = halfWidth - rx;\n            dy = halfHeight - ry;\n        }\n\n        if (!(rx >= 0 && ry >= 0 && dx >= 0 && dy >= 0))\n        {\n            return points;\n        }\n\n        // Choose a number of segments such that the maximum absolute deviation from the circle is approximately 0.029\n        const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n        const m = (n * 8) + (dx ? 4 : 0) + (dy ? 4 : 0);\n\n        if (m === 0)\n        {\n            return points;\n        }\n\n        if (n === 0)\n        {\n            points[0] = points[6] = x + dx;\n            points[1] = points[3] = y + dy;\n            points[2] = points[4] = x - dx;\n            points[5] = points[7] = y - dy;\n\n            return points;\n        }\n\n        let j1 = 0;\n        let j2 = (n * 4) + (dx ? 2 : 0) + 2;\n        let j3 = j2;\n        let j4 = m;\n\n        let x0 = dx + rx;\n        let y0 = dy;\n        let x1 = x + x0;\n        let x2 = x - x0;\n        let y1 = y + y0;\n\n        points[j1++] = x1;\n        points[j1++] = y1;\n        points[--j2] = y1;\n        points[--j2] = x2;\n\n        if (dy)\n        {\n            const y2 = y - y0;\n\n            points[j3++] = x2;\n            points[j3++] = y2;\n            points[--j4] = y2;\n            points[--j4] = x1;\n        }\n\n        for (let i = 1; i < n; i++)\n        {\n            const a = Math.PI / 2 * (i / n);\n            const x0 = dx + (Math.cos(a) * rx);\n            const y0 = dy + (Math.sin(a) * ry);\n            const x1 = x + x0;\n            const x2 = x - x0;\n            const y1 = y + y0;\n            const y2 = y - y0;\n\n            points[j1++] = x1;\n            points[j1++] = y1;\n            points[--j2] = y1;\n            points[--j2] = x2;\n            points[j3++] = x2;\n            points[j3++] = y2;\n            points[--j4] = y2;\n            points[--j4] = x1;\n        }\n\n        x0 = dx;\n        y0 = dy + ry;\n        x1 = x + x0;\n        x2 = x - x0;\n        y1 = y + y0;\n        const y2 = y - y0;\n\n        points[j1++] = x1;\n        points[j1++] = y1;\n        points[--j4] = y2;\n        points[--j4] = x1;\n\n        if (dx)\n        {\n            points[j1++] = x2;\n            points[j1++] = y1;\n            points[--j4] = y2;\n            points[--j4] = x2;\n        }\n\n        return points;\n    },\n\n    triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset)\n    {\n        if (points.length === 0)\n        {\n            return;\n        }\n\n        // Compute center (average of all points)\n        let centerX = 0; let\n            centerY = 0;\n\n        for (let i = 0; i < points.length; i += 2)\n        {\n            centerX += points[i];\n            centerY += points[i + 1];\n        }\n        centerX /= (points.length / 2);\n        centerY /= (points.length / 2);\n\n        // Set center vertex\n        let count = verticesOffset;\n\n        vertices[count * verticesStride] = centerX;\n        vertices[(count * verticesStride) + 1] = centerY;\n        const centerIndex = count++;\n\n        // Set edge vertices and indices\n        for (let i = 0; i < points.length; i += 2)\n        {\n            vertices[count * verticesStride] = points[i];\n            vertices[(count * verticesStride) + 1] = points[i + 1];\n\n            if (i > 0)\n            { // Skip first point for indices\n                indices[indicesOffset++] = count;\n                indices[indicesOffset++] = centerIndex;\n                indices[indicesOffset++] = count - 1;\n            }\n            count++;\n        }\n\n        // Connect last point to the first edge point\n        indices[indicesOffset++] = centerIndex + 1;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n    }\n\n};\n\nexport const buildEllipse = { ...buildCircle, extension: { ...buildCircle.extension, name: 'ellipse' } };\nexport const buildRoundedRectangle = { ...buildCircle, extension: { ...buildCircle.extension, name: 'roundedRectangle' } };\n","export type LineCap = 'butt' | 'round' | 'square';\nexport type LineJoin = 'round' | 'bevel' | 'miter';\n\nexport const closePointEps = 1e-4;\nexport const curveEps = 0.0001;\n","export function getOrientationOfPoints(points: number[]): number\n{\n    const m = points.length;\n\n    if (m < 6)\n    {\n        return 1;\n    }\n\n    let area = 0;\n\n    for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2)\n    {\n        const x2 = points[i];\n        const y2 = points[i + 1];\n\n        area += (x2 - x1) * (y2 + y1);\n\n        x1 = x2;\n        y1 = y2;\n    }\n\n    if (area < 0)\n    {\n        return -1;\n    }\n\n    return 1;\n}\n","import { Point } from '../../../../maths/point/Point';\nimport { closePointEps, curveEps } from '../const';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints';\n\nimport type { StrokeAttributes } from '../FillTypes';\n\n/**\n * Buffers vertices to draw a square cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} x - X-coord of end point\n * @param {number} y - Y-coord of end point\n * @param {number} nx - X-coord of line normal pointing inside\n * @param {number} ny - Y-coord of line normal pointing inside\n * @param {number} innerWeight - Weight of inner points\n * @param {number} outerWeight - Weight of outer points\n * @param {boolean} clockwise - Whether the cap is drawn clockwise\n * @param {Array<number>} verts - vertex buffer\n * @returns {number} - no. of vertices pushed\n */\nfunction square(\n    x: number,\n    y: number,\n    nx: number,\n    ny: number,\n    innerWeight: number,\n    outerWeight: number,\n    clockwise: boolean, /* rotation for square (true at left end, false at right end) */\n    verts: Array<number>\n): number\n{\n    const ix = x - (nx * innerWeight);\n    const iy = y - (ny * innerWeight);\n    const ox = x + (nx * outerWeight);\n    const oy = y + (ny * outerWeight);\n\n    /* Rotate nx,ny for extension vector */\n    let exx; let\n        eyy;\n\n    if (clockwise)\n    {\n        exx = ny;\n        eyy = -nx;\n    }\n    else\n    {\n        exx = -ny;\n        eyy = nx;\n    }\n\n    /* [i|0]x,y extended at cap */\n    const eix = ix + exx;\n    const eiy = iy + eyy;\n    const eox = ox + exx;\n    const eoy = oy + eyy;\n\n    /* Square itself must be inserted clockwise*/\n    verts.push(eix, eiy);\n    verts.push(eox, eoy);\n\n    return 2;\n}\n\n/**\n * Buffers vertices to draw an arc at the line joint or cap.\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n * @param {number} cx - X-coord of center\n * @param {number} cy - Y-coord of center\n * @param {number} sx - X-coord of arc start\n * @param {number} sy - Y-coord of arc start\n * @param {number} ex - X-coord of arc end\n * @param {number} ey - Y-coord of arc end\n * @param {Array[]} verts - buffer of vertices\n * @param {boolean} clockwise - orientation of vertices\n * @returns {number} - no. of vertices pushed\n */\nfunction round(\n    cx: number,\n    cy: number,\n    sx: number,\n    sy: number,\n    ex: number,\n    ey: number,\n    verts: number[],\n    clockwise: boolean, /* if not cap, then clockwise is turn of joint, otherwise rotation from angle0 to angle1 */\n): number\n{\n    const cx2p0x = sx - cx;\n    const cy2p0y = sy - cy;\n\n    let angle0 = Math.atan2(cx2p0x, cy2p0y);\n    let angle1 = Math.atan2(ex - cx, ey - cy);\n\n    if (clockwise && angle0 < angle1)\n    {\n        angle0 += Math.PI * 2;\n    }\n    else if (!clockwise && angle0 > angle1)\n    {\n        angle1 += Math.PI * 2;\n    }\n\n    let startAngle = angle0;\n    const angleDiff = angle1 - angle0;\n    const absAngleDiff = Math.abs(angleDiff);\n\n    const radius = Math.sqrt((cx2p0x * cx2p0x) + (cy2p0y * cy2p0y));\n    const segCount = ((15 * absAngleDiff * Math.sqrt(radius) / Math.PI) >> 0) + 1;\n    const angleInc = angleDiff / segCount;\n\n    startAngle += angleInc;\n\n    if (clockwise)\n    {\n        verts.push(cx, cy);\n        verts.push(sx, sy);\n\n        for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc)\n        {\n            verts.push(cx, cy);\n            verts.push(cx + ((Math.sin(angle) * radius)),\n                cy + ((Math.cos(angle) * radius)));\n        }\n\n        verts.push(cx, cy);\n        verts.push(ex, ey);\n    }\n    else\n    {\n        verts.push(sx, sy);\n        verts.push(cx, cy);\n\n        for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc)\n        {\n            verts.push(cx + ((Math.sin(angle) * radius)),\n                cy + ((Math.cos(angle) * radius)));\n            verts.push(cx, cy);\n        }\n\n        verts.push(ex, ey);\n        verts.push(cx, cy);\n    }\n\n    return segCount * 2;\n}\n\n/**\n * Builds a line to draw using the polygon method.\n * @param points\n * @param lineStyle\n * @param flipAlignment\n * @param closed\n * @param vertices\n * @param _verticesStride\n * @param _verticesOffset\n * @param indices\n * @param _indicesOffset\n */\nexport function buildLine(\n    points: number[],\n    lineStyle: StrokeAttributes,\n    flipAlignment: boolean,\n    closed: boolean,\n    // alignment:number,\n\n    vertices: number[],\n    _verticesStride: number,\n    _verticesOffset: number,\n\n    indices: number[],\n    _indicesOffset: number,\n\n): void\n{\n    // const shape = graphicsData.shape as Polygon;\n    //   let points = graphicsData.points || shape.points.slice();\n    const eps = closePointEps;\n\n    if (points.length === 0)\n    {\n        return;\n    }\n\n    const style = lineStyle;\n\n    let alignment = style.alignment;\n\n    if (lineStyle.alignment !== 0.5)\n    {\n        // rotate the points!\n        let orientation = getOrientationOfPoints(points);\n\n        if (flipAlignment)orientation *= -1;\n\n        alignment = ((alignment - 0.5) * orientation) + 0.5;\n    }\n\n    // get first and last point.. figure out the middle!\n    const firstPoint = new Point(points[0], points[1]);\n    const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n    const closedShape = closed;\n    const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps\n        && Math.abs(firstPoint.y - lastPoint.y) < eps;\n\n    // if the first point is the last point - gonna have issues :)\n    if (closedShape)\n    {\n        // need to clone as we are going to slightly modify the shape..\n        points = points.slice();\n\n        if (closedPath)\n        {\n            points.pop();\n            points.pop();\n            lastPoint.set(points[points.length - 2], points[points.length - 1]);\n        }\n\n        const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n        const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n\n        points.unshift(midPointX, midPointY);\n        points.push(midPointX, midPointY);\n    }\n\n    const verts = vertices;\n\n    const length = points.length / 2;\n    let indexCount = points.length;\n    const indexStart = verts.length / 2;\n\n    // Max. inner and outer width\n    const width = style.width / 2;\n    const widthSquared = width * width;\n    const miterLimitSquared = style.miterLimit * style.miterLimit;\n\n    /* Line segments of interest where (x1,y1) forms the corner. */\n    let x0 = points[0];\n    let y0 = points[1];\n    let x1 = points[2];\n    let y1 = points[3];\n    let x2 = 0;\n    let y2 = 0;\n\n    /* perp[?](x|y) = the line normal with magnitude lineWidth. */\n    let perpX = -(y0 - y1);\n    let perpY = x0 - x1;\n    let perp1x = 0;\n    let perp1y = 0;\n\n    let dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n\n    const ratio = alignment;// 0.5;\n    const innerWeight = (1 - ratio) * 2;\n    const outerWeight = ratio * 2;\n\n    if (!closedShape)\n    {\n        if (style.cap === 'round')\n        {\n            indexCount += round(\n                x0 - (perpX * (innerWeight - outerWeight) * 0.5),\n                y0 - (perpY * (innerWeight - outerWeight) * 0.5),\n                x0 - (perpX * innerWeight),\n                y0 - (perpY * innerWeight),\n                x0 + (perpX * outerWeight),\n                y0 + (perpY * outerWeight),\n                verts,\n                true,\n            ) + 2;\n        }\n        else if (style.cap === 'square')\n        {\n            indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n        }\n    }\n\n    // Push first point (below & above vertices)\n    verts.push(\n        x0 - (perpX * innerWeight),\n        y0 - (perpY * innerWeight));\n    verts.push(\n        x0 + (perpX * outerWeight),\n        y0 + (perpY * outerWeight));\n\n    for (let i = 1; i < length - 1; ++i)\n    {\n        x0 = points[(i - 1) * 2];\n        y0 = points[((i - 1) * 2) + 1];\n\n        x1 = points[i * 2];\n        y1 = points[(i * 2) + 1];\n\n        x2 = points[(i + 1) * 2];\n        y2 = points[((i + 1) * 2) + 1];\n\n        perpX = -(y0 - y1);\n        perpY = x0 - x1;\n\n        dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n        perpX /= dist;\n        perpY /= dist;\n        perpX *= width;\n        perpY *= width;\n\n        perp1x = -(y1 - y2);\n        perp1y = x1 - x2;\n\n        dist = Math.sqrt((perp1x * perp1x) + (perp1y * perp1y));\n        perp1x /= dist;\n        perp1y /= dist;\n        perp1x *= width;\n        perp1y *= width;\n\n        /* d[x|y](0|1) = the component displacement between points p(0,1|1,2) */\n        const dx0 = x1 - x0;\n        const dy0 = y0 - y1;\n        const dx1 = x1 - x2;\n        const dy1 = y2 - y1;\n\n        /* +ve if internal angle < 90 degree, -ve if internal angle > 90 degree. */\n        const dot = (dx0 * dx1) + (dy0 * dy1);\n        /* +ve if internal angle counterclockwise, -ve if internal angle clockwise. */\n        const cross = (dy0 * dx1) - (dy1 * dx0);\n        const clockwise = (cross < 0);\n\n        /* Going nearly parallel? */\n        /* atan(0.001) ~= 0.001 rad ~= 0.057 degree */\n        if (Math.abs(cross) < 0.001 * Math.abs(dot))\n        {\n            verts.push(\n                x1 - (perpX * innerWeight),\n                y1 - (perpY * innerWeight));\n            verts.push(\n                x1 + (perpX * outerWeight),\n                y1 + (perpY * outerWeight));\n\n            /* 180 degree corner? */\n            if (dot >= 0)\n            {\n                if (style.join === 'round')\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false) + 4;\n                }\n                else\n                {\n                    indexCount += 2;\n                }\n\n                verts.push(\n                    x1 - (perp1x * outerWeight),\n                    y1 - (perp1y * outerWeight));\n                verts.push(\n                    x1 + (perp1x * innerWeight),\n                    y1 + (perp1y * innerWeight));\n            }\n\n            continue;\n        }\n\n        /* p[x|y] is the miter point. pDist is the distance between miter point and p1. */\n        const c1 = ((-perpX + x0) * (-perpY + y1)) - ((-perpX + x1) * (-perpY + y0));\n        const c2 = ((-perp1x + x2) * (-perp1y + y1)) - ((-perp1x + x1) * (-perp1y + y2));\n        const px = ((dx0 * c2) - (dx1 * c1)) / cross;\n        const py = ((dy1 * c1) - (dy0 * c2)) / cross;\n        const pDist = ((px - x1) * (px - x1)) + ((py - y1) * (py - y1));\n\n        /* Inner miter point */\n        const imx = x1 + ((px - x1) * innerWeight);\n        const imy = y1 + ((py - y1) * innerWeight);\n        /* Outer miter point */\n        const omx = x1 - ((px - x1) * outerWeight);\n        const omy = y1 - ((py - y1) * outerWeight);\n\n        /* Is the inside miter point too far away, creating a spike? */\n        const smallerInsideSegmentSq = Math.min((dx0 * dx0) + (dy0 * dy0), (dx1 * dx1) + (dy1 * dy1));\n        const insideWeight = clockwise ? innerWeight : outerWeight;\n        const smallerInsideDiagonalSq = smallerInsideSegmentSq + (insideWeight * insideWeight * widthSquared);\n        const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n\n        if (insideMiterOk)\n        {\n            if (style.join === 'bevel' || pDist / widthSquared > miterLimitSquared)\n            {\n                if (clockwise) /* rotating at inner angle */\n                {\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight)); // first segment's outer vertex\n                    verts.push(imx, imy); // inner miter point\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n                }\n                else /* rotating at outer angle */\n                {\n                    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight)); // first segment's inner vertex\n                    verts.push(omx, omy); // outer miter point\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's outer vertex\n                    verts.push(omx, omy); // outer miter point\n                }\n\n                indexCount += 2;\n            }\n            else if (style.join === 'round')\n            {\n                if (clockwise) /* arc is outside */\n                {\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight));\n\n                    indexCount += round(\n                        x1, y1,\n                        x1 + (perpX * outerWeight), y1 + (perpY * outerWeight),\n                        x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight),\n                        verts, true\n                    ) + 4;\n\n                    verts.push(imx, imy);\n                    verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight));\n                }\n                else /* arc is inside */\n                {\n                    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight));\n                    verts.push(omx, omy);\n\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false\n                    ) + 4;\n\n                    verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight));\n                    verts.push(omx, omy);\n                }\n            }\n            else\n            {\n                verts.push(imx, imy);\n                verts.push(omx, omy);\n            }\n        }\n        else // inside miter is NOT ok\n        {\n            verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight)); // first segment's inner vertex\n            verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight)); // first segment's outer vertex\n            if (style.join === 'round')\n            {\n                if (clockwise) /* arc is outside */\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 + (perpX * outerWeight), y1 + (perpY * outerWeight),\n                        x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight),\n                        verts, true\n                    ) + 2;\n                }\n                else /* arc is inside */\n                {\n                    indexCount += round(\n                        x1, y1,\n                        x1 - (perpX * innerWeight), y1 - (perpY * innerWeight),\n                        x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight),\n                        verts, false\n                    ) + 2;\n                }\n            }\n            else if (style.join === 'miter' && pDist / widthSquared <= miterLimitSquared)\n            {\n                if (clockwise)\n                {\n                    verts.push(omx, omy); // inner miter point\n                    verts.push(omx, omy); // inner miter point\n                }\n                else\n                {\n                    verts.push(imx, imy); // outer miter point\n                    verts.push(imx, imy); // outer miter point\n                }\n                indexCount += 2;\n            }\n            verts.push(x1 - (perp1x * innerWeight), y1 - (perp1y * innerWeight)); // second segment's inner vertex\n            verts.push(x1 + (perp1x * outerWeight), y1 + (perp1y * outerWeight)); // second segment's outer vertex\n            indexCount += 2;\n        }\n    }\n\n    x0 = points[(length - 2) * 2];\n    y0 = points[((length - 2) * 2) + 1];\n\n    x1 = points[(length - 1) * 2];\n    y1 = points[((length - 1) * 2) + 1];\n\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n\n    dist = Math.sqrt((perpX * perpX) + (perpY * perpY));\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n\n    verts.push(x1 - (perpX * innerWeight), y1 - (perpY * innerWeight));\n    verts.push(x1 + (perpX * outerWeight), y1 + (perpY * outerWeight));\n\n    if (!closedShape)\n    {\n        if (style.cap === 'round')\n        {\n            indexCount += round(\n                x1 - (perpX * (innerWeight - outerWeight) * 0.5),\n                y1 - (perpY * (innerWeight - outerWeight) * 0.5),\n                x1 - (perpX * innerWeight),\n                y1 - (perpY * innerWeight),\n                x1 + (perpX * outerWeight),\n                y1 + (perpY * outerWeight),\n                verts,\n                false\n            ) + 2;\n        }\n        else if (style.cap === 'square')\n        {\n            indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n        }\n    }\n\n    // const indices = graphicsGeometry.indices;\n    const eps2 = curveEps * curveEps;\n\n    // indices.push(indexStart);\n    for (let i = indexStart; i < indexCount + indexStart - 2; ++i)\n    {\n        x0 = verts[(i * 2)];\n        y0 = verts[(i * 2) + 1];\n\n        x1 = verts[(i + 1) * 2];\n        y1 = verts[((i + 1) * 2) + 1];\n\n        x2 = verts[(i + 2) * 2];\n        y2 = verts[((i + 2) * 2) + 1];\n\n        /* Skip zero area triangles */\n        if (Math.abs((x0 * (y1 - y2)) + (x1 * (y2 - y0)) + (x2 * (y0 - y1))) < eps2)\n        {\n            continue;\n        }\n\n        indices.push(i, i + 1, i + 2);\n    }\n}\n\n","import { default as earcut } from 'earcut';\n\nexport function triangulateWithHoles(\n    points: number[],\n    holes: number[],\n    vertices: number[],\n    verticesStride: number,\n    verticesOffset: number,\n\n    indices: number[],\n    indicesOffset: number\n)\n{\n    const triangles = earcut(points, holes, 2);\n\n    if (!triangles)\n    {\n        return;\n    }\n\n    for (let i = 0; i < triangles.length; i += 3)\n    {\n        indices[indicesOffset++] = (triangles[i] + verticesOffset);\n        indices[indicesOffset++] = (triangles[i + 1] + verticesOffset);\n        indices[indicesOffset++] = (triangles[i + 2] + verticesOffset);\n    }\n\n    let index = verticesOffset * verticesStride;\n\n    for (let i = 0; i < points.length; i += 2)\n    {\n        vertices[index] = points[i];\n        vertices[index + 1] = points[i + 1];\n\n        index += verticesStride;\n    }\n}\n\n","import { ExtensionType } from '../../../../extensions/Extensions';\nimport { triangulateWithHoles } from '../utils/triangulateWithHoles';\n\nimport type { Polygon } from '../../../../maths/shapes/Polygon';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\nconst emptyArray: number[] = [];\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildPolygon: ShapeBuildCommand<Polygon> = {\n    extension: {\n        type: ExtensionType.ShapeBuilder,\n        name: 'polygon',\n    },\n\n    build(shape: Polygon, points: number[]): number[]\n    {\n        for (let i = 0; i < shape.points.length; i++)\n        {\n            points[i] = shape.points[i];\n        }\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n        //  holes: number[],\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n    },\n\n};\n","import { ExtensionType } from '../../../../extensions/Extensions';\n\nimport type { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\n/**\n * Builds a rectangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildRectangle: ShapeBuildCommand<Rectangle> = {\n    extension: {\n        type: ExtensionType.ShapeBuilder,\n        name: 'rectangle',\n    },\n\n    build(shape: Rectangle, points: number[]): number[]\n    {\n        const rectData = shape;\n        const x = rectData.x;\n        const y = rectData.y;\n        const width = rectData.width;\n        const height = rectData.height;\n\n        if (!(width >= 0 && height >= 0))\n        {\n            return points;\n        }\n\n        points[0] = x;\n        points[1] = y;\n        points[2] = x + width;\n        points[3] = y;\n        points[4] = x + width;\n        points[5] = y + height;\n        points[6] = x;\n        points[7] = y + height;\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        let count = 0;\n\n        verticesOffset *= verticesStride;\n\n        vertices[verticesOffset + count] = points[0];\n        vertices[verticesOffset + count + 1] = points[1];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[2];\n        vertices[verticesOffset + count + 1] = points[3];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[6];\n        vertices[verticesOffset + count + 1] = points[7];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[4];\n        vertices[verticesOffset + count + 1] = points[5];\n\n        count += verticesStride;\n\n        const verticesIndex = verticesOffset / verticesStride;\n\n        // triangle 1\n        indices[indicesOffset++] = verticesIndex;\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 2;\n\n        // triangle 2\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 3;\n        indices[indicesOffset++] = verticesIndex + 2;\n    },\n};\n","import { ExtensionType } from '../../../../extensions/Extensions';\n\nimport type { Triangle } from '../../../../maths/shapes/Triangle';\nimport type { ShapeBuildCommand } from './ShapeBuildCommand';\n\n/**\n * Builds a triangle to draw\n *\n * Ignored from docs since it is not directly exposed.\n * @ignore\n * @private\n */\nexport const buildTriangle: ShapeBuildCommand<Triangle> = {\n    extension: {\n        type: ExtensionType.ShapeBuilder,\n        name: 'triangle',\n    },\n\n    build(shape: Triangle, points: number[]): number[]\n    {\n        points[0] = shape.x;\n        points[1] = shape.y;\n        points[2] = shape.x2;\n        points[3] = shape.y2;\n        points[4] = shape.x3;\n        points[5] = shape.y3;\n\n        return points;\n    },\n\n    triangulate(\n        points: number[],\n\n        vertices: number[],\n        verticesStride: number,\n        verticesOffset: number,\n\n        indices: number[],\n        indicesOffset: number\n    )\n    {\n        let count = 0;\n\n        verticesOffset *= verticesStride;\n\n        vertices[verticesOffset + count] = points[0];\n        vertices[verticesOffset + count + 1] = points[1];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[2];\n        vertices[verticesOffset + count + 1] = points[3];\n\n        count += verticesStride;\n\n        vertices[verticesOffset + count] = points[4];\n        vertices[verticesOffset + count + 1] = points[5];\n\n        const verticesIndex = verticesOffset / verticesStride;\n\n        // triangle 1\n        indices[indicesOffset++] = verticesIndex;\n        indices[indicesOffset++] = verticesIndex + 1;\n        indices[indicesOffset++] = verticesIndex + 2;\n    },\n};\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle';\nimport { buildSimpleUvs, buildUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { BigPool } from '../../../../utils/pool/PoolGroup';\nimport { BatchableGraphics } from '../BatchableGraphics';\nimport { buildCircle, buildEllipse, buildRoundedRectangle } from '../buildCommands/buildCircle';\nimport { buildLine } from '../buildCommands/buildLine';\nimport { buildPolygon } from '../buildCommands/buildPolygon';\nimport { buildRectangle } from '../buildCommands/buildRectangle';\nimport { buildTriangle } from '../buildCommands/buildTriangle';\nimport { triangulateWithHoles } from './triangulateWithHoles';\n\nimport type { Polygon } from '../../../../maths/shapes/Polygon';\nimport type { ShapeBuildCommand } from '../buildCommands/ShapeBuildCommand';\nimport type { ConvertedFillStyle, ConvertedStrokeStyle } from '../FillTypes';\nimport type { GraphicsContext, TextureInstruction } from '../GraphicsContext';\nimport type { GpuGraphicsContext } from '../GraphicsContextSystem';\nimport type { GraphicsPath } from '../path/GraphicsPath';\nimport type { ShapePath } from '../path/ShapePath';\n\nexport const shapeBuilders: Record<string, ShapeBuildCommand> = {};\n\nextensions.handleByMap(ExtensionType.ShapeBuilder, shapeBuilders);\nextensions.add(buildRectangle, buildPolygon, buildTriangle, buildCircle, buildEllipse, buildRoundedRectangle);\n\nconst tempRect = new Rectangle();\n\nexport function buildContextBatches(context: GraphicsContext, gpuContext: GpuGraphicsContext)\n{\n    const { geometryData, batches } = gpuContext;\n\n    // reset them..\n    batches.length = 0;\n    geometryData.indices.length = 0;\n    geometryData.vertices.length = 0;\n    geometryData.uvs.length = 0;\n\n    for (let i = 0; i < context.instructions.length; i++)\n    {\n        const instruction = context.instructions[i];\n\n        if (instruction.action === 'texture')\n        {\n            // add a quad!\n            addTextureToGeometryData(instruction.data, batches, geometryData);\n        }\n        else if (instruction.action === 'fill' || instruction.action === 'stroke')\n        {\n            const isStroke = instruction.action === 'stroke';\n\n            // build path collection of polys and shapes points..\n            const shapePath = instruction.data.path.shapePath;\n\n            const style = instruction.data.style;\n\n            const hole = instruction.data.hole;\n\n            if (isStroke && hole)\n            {\n                addShapePathToGeometryData(hole.shapePath, style, null, true, batches, geometryData);\n            }\n\n            addShapePathToGeometryData(shapePath, style, hole, isStroke, batches, geometryData);\n        }\n    }\n}\n\nfunction addTextureToGeometryData(\n    data: TextureInstruction['data'],\n    batches: BatchableGraphics[],\n    geometryData: {\n        vertices: number[];\n        uvs: number[];\n        indices: number[];\n    }\n)\n{\n    const { vertices, uvs, indices } = geometryData;\n\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n\n    const points: number[] = [];\n\n    const build = shapeBuilders.rectangle;\n\n    const rect = tempRect;\n\n    const texture = data.image;\n\n    rect.x = data.dx;\n    rect.y = data.dy;\n    rect.width = data.dw;\n    rect.height = data.dh;\n\n    const matrix = data.transform;\n\n    // TODO - this can be cached...\n    build.build(rect, points);\n\n    if (matrix)\n    {\n        transformVertices(points, matrix);\n    }\n\n    build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n\n    const textureUvs = texture.uvs;\n\n    uvs.push(\n        textureUvs.x0, textureUvs.y0,\n        textureUvs.x1, textureUvs.y1,\n        textureUvs.x3, textureUvs.y3,\n        textureUvs.x2, textureUvs.y2,\n    );\n\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n\n    graphicsBatch.attributeOffset = vertOffset;\n    graphicsBatch.attributeSize = (vertices.length / 2) - vertOffset;\n\n    graphicsBatch.baseColor = data.style;\n    graphicsBatch.alpha = data.alpha;\n\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n\n    batches.push(graphicsBatch);\n}\n\nfunction addShapePathToGeometryData(\n    shapePath: ShapePath,\n    style: ConvertedFillStyle | ConvertedStrokeStyle,\n    hole: GraphicsPath,\n    isStroke: boolean,\n    batches: BatchableGraphics[],\n    geometryData: {\n        vertices: number[];\n        uvs: number[];\n        indices: number[];\n    }\n)\n{\n    const { vertices, uvs, indices } = geometryData;\n    const lastIndex = shapePath.shapePrimitives.length - 1;\n\n    shapePath.shapePrimitives.forEach(({ shape, transform: matrix }, i) =>\n    {\n        const indexOffset = indices.length;\n        const vertOffset = vertices.length / 2;\n\n        const points: number[] = [];\n\n        const build = shapeBuilders[shape.type];\n\n        // TODO - this can be cached...\n        // TODO - THIS IS DONE TWICE!!!!!!\n        // ONCE FOR STROKE AND ONCE FOR FILL\n        // move to the ShapePath2D class itself?\n        build.build(shape, points);\n\n        if (matrix)\n        {\n            transformVertices(points, matrix);\n        }\n\n        if (!isStroke)\n        {\n            if (hole && lastIndex === i)\n            {\n                if (lastIndex !== 0)\n                {\n                    console.warn('[Pixi Graphics] only the last shape have be cut out');\n                }\n\n                const holeIndices: number[] = [];\n\n                const otherPoints = points.slice();\n\n                const holeArrays = getHoleArrays(hole.shapePath);\n\n                holeArrays.forEach((holePoints) =>\n                {\n                    holeIndices.push(otherPoints.length / 2);\n                    otherPoints.push(...holePoints);\n                });\n\n                triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n            }\n            else\n            {\n                build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n            }\n        }\n        else\n        {\n            const close = (shape as Polygon).closePath ?? true;\n            const lineStyle = style as ConvertedStrokeStyle;\n\n            buildLine(points, lineStyle, false, close, vertices, 2, vertOffset, indices, indexOffset);\n        }\n\n        const uvsOffset = uvs.length / 2;\n\n        const texture = style.texture;\n\n        if (texture !== Texture.WHITE)\n        {\n            const textureMatrix = style.matrix;\n\n            if (textureMatrix)\n            {\n                // todo can prolly do this before calculating uvs..\n                if (matrix)\n                {\n                    textureMatrix.append(matrix.clone().invert());\n                }\n\n                buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset, textureMatrix);\n            }\n        }\n        else\n        {\n            buildSimpleUvs(uvs, uvsOffset, 2, (vertices.length / 2) - vertOffset);\n        }\n\n        const graphicsBatch = BigPool.get(BatchableGraphics);\n\n        graphicsBatch.indexOffset = indexOffset;\n        graphicsBatch.indexSize = indices.length - indexOffset;\n\n        graphicsBatch.attributeOffset = vertOffset;\n        graphicsBatch.attributeSize = (vertices.length / 2) - vertOffset;\n\n        graphicsBatch.baseColor = style.color;\n        graphicsBatch.alpha = style.alpha;\n\n        graphicsBatch.texture = texture;\n        graphicsBatch.geometryData = geometryData;\n\n        batches.push(graphicsBatch);\n    });\n}\n\nfunction getHoleArrays(shape: ShapePath)\n{\n    if (!shape) return [];\n\n    const holePrimitives = shape.shapePrimitives;\n\n    const holeArrays = [];\n\n    for (let k = 0; k < holePrimitives.length; k++)\n    {\n        const holePrimitive = holePrimitives[k].shape;\n\n        // TODO - need to transform the points via there transform here..\n        const holePoints: number[] = [];\n\n        const holeBuilder = shapeBuilders[holePrimitive.type] as ShapeBuildCommand;\n\n        holeBuilder.build(holePrimitive, holePoints);\n\n        holeArrays.push(holePoints);\n    }\n\n    return holeArrays;\n}\n","import { ExtensionType } from '../../../extensions/Extensions';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup';\nimport { DefaultBatcher } from '../../../rendering/batcher/shared/DefaultBatcher';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet';\nimport { deprecation, v8_3_4 } from '../../../utils/logging/deprecation';\nimport { BigPool } from '../../../utils/pool/PoolGroup';\nimport { buildContextBatches } from './utils/buildContextBatches';\n\nimport type { Batcher } from '../../../rendering/batcher/shared/Batcher';\nimport type { System } from '../../../rendering/renderers/shared/system/System';\nimport type { Renderer } from '../../../rendering/renderers/types';\nimport type { PoolItem } from '../../../utils/pool/Pool';\nimport type { BatchableGraphics } from './BatchableGraphics';\nimport type { GraphicsContext } from './GraphicsContext';\n\ninterface GeometryData\n{\n    vertices: number[];\n    uvs: number[];\n    indices: number[];\n}\n\n/**\n * A class that holds batchable graphics data for a GraphicsContext.\n * @memberof rendering\n * @ignore\n */\nexport class GpuGraphicsContext\n{\n    public isBatchable: boolean;\n    public context: GraphicsContext;\n\n    public batches: BatchableGraphics[] = [];\n    public geometryData: GeometryData = {\n        vertices: [],\n        uvs: [],\n        indices: [],\n    };\n    public graphicsData: GraphicsContextRenderData;\n}\n\n/**\n * A class that holds the render data for a GraphicsContext.\n * @memberof rendering\n * @ignore\n */\nexport class GraphicsContextRenderData\n{\n    public batcher: Batcher = new DefaultBatcher();\n    public instructions = new InstructionSet();\n\n    public init()\n    {\n        this.instructions.reset();\n    }\n\n    /**\n     * @deprecated since version 8.0.0\n     * Use `batcher.geometry` instead.\n     * @see {Batcher#geometry}\n     */\n    get geometry()\n    {\n        // eslint-disable-next-line max-len\n        deprecation(v8_3_4, 'GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead.');\n\n        return this.batcher.geometry;\n    }\n}\n\n/**\n * Options for the GraphicsContextSystem.\n * @memberof rendering\n */\nexport interface GraphicsContextSystemOptions\n{\n    /** A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother) */\n    bezierSmoothness?: number;\n}\n\n/**\n * A system that manages the rendering of GraphicsContexts.\n * @memberof rendering\n */\nexport class GraphicsContextSystem implements System<GraphicsContextSystemOptions>\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n            ExtensionType.CanvasSystem,\n        ],\n        name: 'graphicsContext'\n    } as const;\n\n    /** The default options for the GraphicsContextSystem. */\n    public static readonly defaultOptions: GraphicsContextSystemOptions = {\n        /**\n         * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n         * @default 0.5\n         */\n        bezierSmoothness: 0.5,\n    };\n\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    private _gpuContextHash: Record<number, GpuGraphicsContext> = {};\n    // used for non-batchable graphics\n    private _graphicsDataContextHash: Record<number, GraphicsContextRenderData> = Object.create(null);\n\n    constructor(renderer: Renderer)\n    {\n        renderer.renderableGC.addManagedHash(this, '_gpuContextHash');\n        renderer.renderableGC.addManagedHash(this, '_graphicsDataContextHash');\n    }\n\n    /**\n     * Runner init called, update the default options\n     * @ignore\n     */\n    public init(options?: GraphicsContextSystemOptions)\n    {\n        GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness\n            ?? GraphicsContextSystem.defaultOptions.bezierSmoothness;\n    }\n\n    public getContextRenderData(context: GraphicsContext): GraphicsContextRenderData\n    {\n        return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n    }\n\n    // Context management functions\n    public updateGpuContext(context: GraphicsContext)\n    {\n        let gpuContext: GpuGraphicsContext = this._gpuContextHash[context.uid]\n\n            || this._initContext(context);\n\n        if (context.dirty)\n        {\n            if (gpuContext)\n            {\n                this._cleanGraphicsContextData(context);\n            }\n            else\n            {\n                gpuContext = this._initContext(context);\n            }\n\n            buildContextBatches(context, gpuContext);\n\n            const batchMode = context.batchMode;\n\n            if (context.customShader || batchMode === 'no-batch')\n            {\n                gpuContext.isBatchable = false;\n            }\n            else if (batchMode === 'auto')\n            {\n                gpuContext.isBatchable = (gpuContext.geometryData.vertices.length < 400);\n            }\n\n            context.dirty = false;\n        }\n\n        return gpuContext;\n    }\n\n    public getGpuContext(context: GraphicsContext): GpuGraphicsContext\n    {\n        return this._gpuContextHash[context.uid] || this._initContext(context);\n    }\n\n    private _initContextRenderData(context: GraphicsContext): GraphicsContextRenderData\n    {\n        const graphicsData: GraphicsContextRenderData = BigPool.get(GraphicsContextRenderData);// ();\n\n        const { batches, geometryData } = this._gpuContextHash[context.uid];\n\n        const vertexSize = geometryData.vertices.length;\n        const indexSize = geometryData.indices.length;\n\n        for (let i = 0; i < batches.length; i++)\n        {\n            batches[i].applyTransform = false;\n        }\n\n        const batcher = graphicsData.batcher;\n\n        // TODO we can pool buffers here eventually..\n        batcher.ensureAttributeBuffer(vertexSize);\n        batcher.ensureIndexBuffer(indexSize);\n\n        batcher.begin();\n\n        for (let i = 0; i < batches.length; i++)\n        {\n            const batch = batches[i];\n\n            batcher.add(batch);\n        }\n\n        batcher.finish(graphicsData.instructions);\n\n        const geometry = batcher.geometry;\n\n        // not to self - this works as we are assigning the batchers array buffer\n        // once its up loaded - this buffer is then put back in the pool to be reused.\n        // this mean we don't have to creating new Batchers for each graphics items\n        geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n        geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n\n        const drawBatches = batcher.batches;\n\n        for (let i = 0; i < drawBatches.length; i++)\n        {\n            const batch = drawBatches[i];\n\n            batch.bindGroup = getTextureBatchBindGroup(batch.textures.textures, batch.textures.count);\n        }\n\n        this._graphicsDataContextHash[context.uid] = graphicsData;\n\n        return graphicsData;\n    }\n\n    private _initContext(context: GraphicsContext): GpuGraphicsContext\n    {\n        const gpuContext = new GpuGraphicsContext();\n\n        gpuContext.context = context;\n\n        this._gpuContextHash[context.uid] = gpuContext;\n\n        context.on('destroy', this.onGraphicsContextDestroy, this);\n\n        return this._gpuContextHash[context.uid];\n    }\n\n    protected onGraphicsContextDestroy(context: GraphicsContext)\n    {\n        this._cleanGraphicsContextData(context);\n\n        context.off('destroy', this.onGraphicsContextDestroy, this);\n\n        this._gpuContextHash[context.uid] = null;\n    }\n\n    private _cleanGraphicsContextData(context: GraphicsContext)\n    {\n        const gpuContext: GpuGraphicsContext = this._gpuContextHash[context.uid];\n\n        if (!gpuContext.isBatchable)\n        {\n            if (this._graphicsDataContextHash[context.uid])\n            {\n                BigPool.return(this.getContextRenderData(context) as PoolItem);\n\n                // we will rebuild this...\n                this._graphicsDataContextHash[context.uid] = null;\n            }\n        }\n\n        if (gpuContext.batches)\n        {\n            gpuContext.batches.forEach((batch) =>\n            {\n                BigPool.return(batch as PoolItem);\n            });\n        }\n    }\n\n    public destroy()\n    {\n        // Clean up all graphics contexts\n\n        for (const i in this._gpuContextHash)\n        {\n            if (this._gpuContextHash[i])\n            {\n                this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n            }\n        }\n    }\n}\n","import { Color } from '../../../../color/Color';\nimport { DOMAdapter } from '../../../../environment/adapter';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { uid } from '../../../../utils/data/uid';\n\nimport type { ColorSource } from '../../../../color/Color';\n\nexport type GradientType = 'linear' | 'radial';\n\n// export type GradientSource =\n//     string // CSS gradient string: 'linear-gradient(...)'\n//     | IGradientOptions // Gradient options: { x0, y0, x1, y1, ...}\n//     | Gradient; // class Gradient itself\n\nexport interface LinearGradientFillStyle\n{\n    x0: number;\n    y0: number;\n    x1: number;\n    y1: number;\n    colors: number[];\n    stops: number[];\n}\n\nexport class FillGradient implements CanvasGradient\n{\n    public static defaultTextureSize = 256;\n\n    /** unique id for this fill gradient */\n    public readonly uid: number = uid('fillGradient');\n    public readonly type: GradientType = 'linear';\n\n    public x0: number;\n    public y0: number;\n    public x1: number;\n    public y1: number;\n\n    public texture: Texture;\n    public transform: Matrix;\n    public gradientStops: Array<{ offset: number, color: string }> = [];\n\n    private _styleKey: string | null = null;\n\n    constructor(x0: number, y0: number, x1: number, y1: number)\n    {\n        this.x0 = x0;\n        this.y0 = y0;\n\n        this.x1 = x1;\n        this.y1 = y1;\n    }\n\n    public addColorStop(offset: number, color: ColorSource): this\n    {\n        this.gradientStops.push({ offset, color: Color.shared.setValue(color).toHexa() });\n        this._styleKey = null;\n\n        return this;\n    }\n\n    // TODO move to the system!\n    public buildLinearGradient(): void\n    {\n        const defaultSize = FillGradient.defaultTextureSize;\n\n        const { gradientStops } = this;\n\n        const canvas = DOMAdapter.get().createCanvas();\n\n        canvas.width = defaultSize;\n        canvas.height = defaultSize;\n\n        const ctx = canvas.getContext('2d');\n\n        const gradient = ctx.createLinearGradient(0, 0, FillGradient.defaultTextureSize, 1);\n\n        for (let i = 0; i < gradientStops.length; i++)\n        {\n            const stop = gradientStops[i];\n\n            gradient.addColorStop(stop.offset, stop.color);\n        }\n\n        ctx.fillStyle = gradient;\n        ctx.fillRect(0, 0, defaultSize, defaultSize);\n\n        this.texture = new Texture({\n            source: new ImageSource({\n                resource: canvas,\n                addressModeU: 'clamp-to-edge',\n                addressModeV: 'repeat',\n            }),\n        });\n\n        // generate some UVS based on the gradient direction sent\n\n        const { x0, y0, x1, y1 } = this;\n\n        const m = new Matrix();\n\n        // get angle\n        const dx = x1 - x0;\n        const dy = y1 - y0;\n\n        const dist = Math.sqrt((dx * dx) + (dy * dy));\n\n        const angle = Math.atan2(dy, dx);\n\n        m.translate(-x0, -y0);\n        m.scale(1 / defaultSize, 1 / defaultSize);\n        m.rotate(-angle);\n        m.scale(256 / dist, 1);\n\n        this.transform = m;\n        this._styleKey = null;\n    }\n\n    public get styleKey(): string\n    {\n        if (this._styleKey)\n        {\n            return this._styleKey;\n        }\n\n        const stops = this.gradientStops.map((stop) => `${stop.offset}-${stop.color}`).join('-');\n        const texture = this.texture.uid;\n        const transform = this.transform.toArray().join('-');\n\n        return `fill-gradient-${this.uid}-${stops}-${texture}-${transform}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`;\n    }\n}\n","import { Matrix } from '../../../../maths/matrix/Matrix';\nimport { uid } from '../../../../utils/data/uid';\n\nimport type { WRAP_MODE } from '../../../../rendering/renderers/shared/texture/const';\nimport type { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\n\nexport type PatternRepetition = 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat';\n\nconst repetitionMap = {\n    repeat: {\n        addressModeU: 'repeat',\n        addressModeV: 'repeat',\n    },\n    'repeat-x': {\n        addressModeU: 'repeat',\n        addressModeV: 'clamp-to-edge',\n    },\n    'repeat-y': {\n        addressModeU: 'clamp-to-edge',\n        addressModeV: 'repeat',\n    },\n    'no-repeat': {\n        addressModeU: 'clamp-to-edge',\n        addressModeV: 'clamp-to-edge',\n    },\n};\n\nexport class FillPattern implements CanvasPattern\n{\n    /** unique id for this fill pattern */\n    public readonly uid: number = uid('fillPattern');\n    public texture: Texture;\n    public transform = new Matrix();\n\n    private _styleKey: string | null = null;\n\n    constructor(texture: Texture, repetition?: PatternRepetition)\n    {\n        this.texture = texture;\n\n        this.transform.scale(\n            1 / texture.frame.width,\n            1 / texture.frame.height\n        );\n\n        if (repetition)\n        {\n            texture.source.style.addressModeU = repetitionMap[repetition].addressModeU as WRAP_MODE;\n            texture.source.style.addressModeV = repetitionMap[repetition].addressModeV as WRAP_MODE;\n        }\n    }\n\n    public setTransform(transform?: Matrix): void\n    {\n        const texture = this.texture;\n\n        this.transform.copyFrom(transform);\n        this.transform.invert();\n        //  transform.scale\n        this.transform.scale(\n            1 / texture.frame.width,\n            1 / texture.frame.height\n        );\n\n        this._styleKey = null;\n    }\n\n    public get styleKey(): string\n    {\n        if (this._styleKey) return this._styleKey;\n\n        this._styleKey = `fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join('-')}`;\n\n        return this._styleKey;\n    }\n}\n","import { Color } from '../../../../color/Color';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { FillGradient } from '../fill/FillGradient';\nimport { FillPattern } from '../fill/FillPattern';\n\nimport type { ColorSource } from '../../../../color/Color';\nimport type {\n    ConvertedFillStyle,\n    ConvertedStrokeStyle,\n    FillInput,\n    FillStyle,\n    StrokeInput,\n} from '../FillTypes';\n\nfunction isColorLike(value: unknown): value is ColorSource\n{\n    return Color.isColorLike(value as ColorSource);\n}\n\nfunction isFillPattern(value: unknown): value is FillPattern\n{\n    return value instanceof FillPattern;\n}\n\nfunction isFillGradient(value: unknown): value is FillGradient\n{\n    return value instanceof FillGradient;\n}\n\n/**\n * Handles the case where the value is a ColorLike\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(0xff0000)\n * graphics.fill(new Color(0xff0000))\n * graphics.fill({ r: 255, g: 0, b: 0 })\n */\nfunction handleColorLike(\n    fill: FillStyle,\n    value: ColorSource,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    const temp = Color.shared.setValue(value ?? 0);\n\n    fill.color = temp.toNumber();\n    fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n    fill.texture = Texture.WHITE;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is a FillPattern\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(new FillPattern(0xff0000))\n */\nfunction handleFillPattern(\n    fill: FillStyle,\n    value: FillPattern,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    fill.fill = value;\n    fill.color = 0xffffff;\n    fill.texture = value.texture;\n    fill.matrix = value.transform;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is a FillGradient\n * @param fill\n * @param value\n * @param defaultStyle\n * @example\n * graphics.fill(new FillGradient(0, 0, 200, 0))\n */\nfunction handleFillGradient(\n    fill: FillStyle,\n    value: FillGradient,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    value.buildLinearGradient();\n    fill.fill = value;\n    fill.color = 0xffffff;\n    fill.texture = value.texture;\n    fill.matrix = value.transform;\n\n    return { ...defaultStyle, ...fill } as ConvertedFillStyle;\n}\n\n/**\n * Handles the case where the value is not a direct Pixi Color, PatternFill, or GradientFill but instead\n * an object with potentially `color`\n * @example\n * {\n *   color: new Color(0xff0000)\n *   alpha: 0.5,\n *   texture?: null,\n *   matrix?: null,\n * }\n * @param value\n * @param defaultStyle\n */\nfunction handleFillObject(value: FillStyle, defaultStyle: ConvertedFillStyle): ConvertedFillStyle\n{\n    const style = { ...defaultStyle, ...(value as FillStyle) };\n\n    if (style.texture)\n    {\n        if (style.texture !== Texture.WHITE)\n        {\n            const m = style.matrix?.invert() || new Matrix();\n\n            m.translate(style.texture.frame.x, style.texture.frame.y);\n            m.scale(1 / style.texture.source.width, 1 / style.texture.source.height);\n\n            style.matrix = m;\n        }\n\n        const sourceStyle = style.texture.source.style;\n\n        if (sourceStyle.addressMode === 'clamp-to-edge')\n        {\n            sourceStyle.addressMode = 'repeat';\n            sourceStyle.update();\n        }\n    }\n\n    const color = Color.shared.setValue(style.color);\n\n    style.alpha *= color.alpha;\n    style.color = color.toNumber();\n    style.matrix = style.matrix ? style.matrix.clone() : null; // todo: lets optimise this!\n\n    return style as ConvertedFillStyle;\n}\n\n/**\n * Converts a value to a fill style, we do this as PixiJS has a number of ways to define a fill style\n * They can be a direct color, a texture, a gradient, or an object with these values in them\n * This function will take any of these input types and convert them into a single object\n * that PixiJS can understand and use internally.\n * @param value - The value to convert to a fill style\n * @param defaultStyle - The default fill style to use\n * @private\n */\nexport function toFillStyle<T extends FillInput>(\n    value: T,\n    defaultStyle: ConvertedFillStyle\n): ConvertedFillStyle\n{\n    if (value === undefined || value === null)\n    {\n        return null;\n    }\n\n    const fill: ConvertedFillStyle = {} as ConvertedFillStyle;\n    const objectStyle = value as FillStyle;\n\n    if (isColorLike(value))\n    {\n        return handleColorLike(fill, value, defaultStyle);\n    }\n    else if (isFillPattern(value))\n    {\n        return handleFillPattern(fill, value, defaultStyle);\n    }\n    else if (isFillGradient(value))\n    {\n        return handleFillGradient(fill, value, defaultStyle);\n    }\n    else if (objectStyle.fill && isFillPattern(objectStyle.fill))\n    {\n        return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n    }\n    else if (objectStyle.fill && isFillGradient(objectStyle.fill))\n    {\n        return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n    }\n\n    return handleFillObject(objectStyle, defaultStyle);\n}\n\n/**\n * Converts a value to a stroke style, similar to `toFillStyle` but for strokes\n * @param value - The value to convert to a stroke style\n * @param defaultStyle - The default stroke style to use\n * @private\n */\nexport function toStrokeStyle(value: StrokeInput, defaultStyle: ConvertedStrokeStyle): ConvertedStrokeStyle\n{\n    const { width, alignment, miterLimit, cap, join, ...rest } = defaultStyle;\n    const fill = toFillStyle(value, rest);\n\n    if (!fill)\n    {\n        return null;\n    }\n\n    return {\n        width,\n        alignment,\n        miterLimit,\n        cap,\n        join,\n        ...fill,\n    };\n}\n","import { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds';\nimport { ViewContainer } from '../view/ViewContainer';\n\nimport type { Size } from '../../maths/misc/Size';\nimport type { PointData } from '../../maths/point/PointData';\nimport type { TextureSourceLike } from '../../rendering/renderers/shared/texture/Texture';\nimport type { Bounds, BoundsData } from '../container/bounds/Bounds';\nimport type { ContainerOptions } from '../container/Container';\nimport type { Optional } from '../container/container-mixins/measureMixin';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * Options for the {@link scene.Sprite} constructor.\n * @memberof scene\n */\nexport interface SpriteOptions extends ContainerOptions\n{\n    /** The texture to use for the sprite. */\n    texture?: Texture;\n    /** The anchor point of the sprite. */\n    anchor?: PointData | number;\n    /** Whether or not to round the x/y position. */\n    roundPixels?: boolean;\n}\n\n/**\n * The Sprite object is one of the most important objects in PixiJS. It is a\n * drawing item that can be added to a scene and rendered to the screen.\n *\n * A sprite can be created directly from an image like this:\n *\n * ```js\n * import { Sprite } from 'pixi.js';\n *\n * const sprite = Sprite.from('assets/image.png');\n * ```\n *\n * The more efficient way to create sprites is using a {@link assets.Spritesheet},\n * as swapping base textures when rendering to the screen is inefficient.\n *\n * ```js\n * import { Assets, Sprite } from 'pixi.js';\n *\n * const sheet = await Assets.load('assets/spritesheet.json');\n * const sprite = new Sprite(sheet.textures['image.png']);\n * ```\n * @memberof scene\n * @extends scene.Container\n */\nexport class Sprite extends ViewContainer\n{\n    /**\n     * Helper function that creates a new sprite based on the source you provide.\n     * The source can be - frame id, image, video, canvas element, video element, texture\n     * @param source - Source to create texture from\n     * @param [skipCache] - Whether to skip the cache or not\n     * @returns The newly created sprite\n     */\n    public static from(source: Texture | TextureSourceLike, skipCache = false): Sprite\n    {\n        if (source instanceof Texture)\n        {\n            return new Sprite(source);\n        }\n\n        return new Sprite(Texture.from(source, skipCache));\n    }\n\n    public override readonly renderPipeId: string = 'sprite';\n\n    public batched = true;\n    public readonly _anchor: ObservablePoint;\n\n    // sprite specific..\n    public _texture: Texture;\n\n    private readonly _sourceBounds: BoundsData = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    private _sourceBoundsDirty = true;\n\n    private _width: number;\n    private _height: number;\n\n    /**\n     * @param options - The options for creating the sprite.\n     */\n    constructor(options: SpriteOptions | Texture = Texture.EMPTY)\n    {\n        if (options instanceof Texture)\n        {\n            options = { texture: options };\n        }\n\n        // split out\n        const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n\n        super({\n            label: 'Sprite',\n            ...rest\n        });\n\n        this._anchor = new ObservablePoint(\n            {\n                _onUpdate: () =>\n                {\n                    this.onViewUpdate();\n                }\n            },\n        );\n\n        if (anchor)\n        {\n            this.anchor = anchor;\n        }\n        else if (texture.defaultAnchor)\n        {\n            this.anchor = texture.defaultAnchor;\n        }\n\n        this.texture = texture;\n\n        this.allowChildren = false;\n        this.roundPixels = roundPixels ?? false;\n\n        // needs to be set after the container has initiated\n        if (width !== undefined) this.width = width;\n        if (height !== undefined) this.height = height;\n    }\n\n    set texture(value: Texture)\n    {\n        value ||= Texture.EMPTY;\n\n        const currentTexture = this._texture;\n\n        if (currentTexture === value) return;\n\n        if (currentTexture && currentTexture.dynamic) currentTexture.off('update', this.onViewUpdate, this);\n        if (value.dynamic) value.on('update', this.onViewUpdate, this);\n\n        this._texture = value;\n\n        if (this._width)\n        {\n            this._setWidth(this._width, this._texture.orig.width);\n        }\n\n        if (this._height)\n        {\n            this._setHeight(this._height, this._texture.orig.height);\n        }\n\n        this.onViewUpdate();\n    }\n\n    /** The texture that the sprite is using. */\n    get texture()\n    {\n        return this._texture;\n    }\n\n    /**\n     * The local bounds of the sprite.\n     * @type {rendering.Bounds}\n     */\n    get bounds()\n    {\n        if (this._boundsDirty)\n        {\n            this._updateBounds();\n            this._boundsDirty = false;\n        }\n\n        return this._bounds;\n    }\n\n    /**\n     * The bounds of the sprite, taking the texture's trim into account.\n     * @type {rendering.Bounds}\n     */\n    get sourceBounds()\n    {\n        if (this._sourceBoundsDirty)\n        {\n            this._updateSourceBounds();\n            this._sourceBoundsDirty = false;\n        }\n\n        return this._sourceBounds;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public override containsPoint(point: PointData)\n    {\n        const bounds = this.sourceBounds;\n\n        if (point.x >= bounds.maxX && point.x <= bounds.minX)\n        {\n            if (point.y >= bounds.maxY && point.y <= bounds.minY)\n            {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    /**\n     * Adds the bounds of this object to the bounds object.\n     * @param bounds - The output bounds object.\n     */\n    public addBounds(bounds: Bounds)\n    {\n        const _bounds = this._texture.trim ? this.sourceBounds : this.bounds;\n\n        bounds.addFrame(_bounds.minX, _bounds.minY, _bounds.maxX, _bounds.maxY);\n    }\n\n    protected override onViewUpdate()\n    {\n        this._sourceBoundsDirty = this._boundsDirty = true;\n        super.onViewUpdate();\n    }\n\n    protected override _updateBounds()\n    {\n        updateQuadBounds(this._bounds, this._anchor, this._texture, 0);\n    }\n\n    private _updateSourceBounds()\n    {\n        const anchor = this._anchor;\n        const texture = this._texture;\n\n        const sourceBounds = this._sourceBounds;\n\n        const { width, height } = texture.orig;\n\n        sourceBounds.maxX = -anchor._x * width;\n        sourceBounds.minX = sourceBounds.maxX + width;\n\n        sourceBounds.maxY = -anchor._y * height;\n        sourceBounds.minY = sourceBounds.maxY + height;\n    }\n\n    /**\n     * Destroys this sprite renderable and optionally its texture.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the current texture of the renderable as well\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the renderable as well\n     */\n    public override destroy(options: DestroyOptions = false)\n    {\n        super.destroy(options);\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            this._texture.destroy(destroyTextureSource);\n        }\n\n        this._texture = null;\n        (this._bounds as null) = null;\n        (this._sourceBounds as null) = null;\n        (this._anchor as null) = null;\n    }\n\n    /**\n     * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n     * and passed to the constructor.\n     *\n     * The default is `(0,0)`, this means the sprite's origin is the top left.\n     *\n     * Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n     *\n     * Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n     *\n     * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n     * @example\n     * import { Sprite } from 'pixi.js';\n     *\n     * const sprite = new Sprite({texture: Texture.WHITE});\n     * sprite.anchor.set(0.5); // This will set the origin to center. (0.5) is same as (0.5, 0.5).\n     */\n    get anchor(): ObservablePoint\n    {\n        return this._anchor;\n    }\n\n    set anchor(value: PointData | number)\n    {\n        typeof value === 'number' ? this._anchor.set(value) : this._anchor.copyFrom(value);\n    }\n\n    /** The width of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get width(): number\n    {\n        return Math.abs(this.scale.x) * this._texture.orig.width;\n    }\n\n    override set width(value: number)\n    {\n        this._setWidth(value, this._texture.orig.width);\n        this._width = value;\n    }\n\n    /** The height of the sprite, setting this will actually modify the scale to achieve the value set. */\n    override get height(): number\n    {\n        return Math.abs(this.scale.y) * this._texture.orig.height;\n    }\n\n    override set height(value: number)\n    {\n        this._setHeight(value, this._texture.orig.height);\n        this._height = value;\n    }\n\n    /**\n     * Retrieves the size of the Sprite as a [Size]{@link Size} object.\n     * This is faster than get the width and height separately.\n     * @param out - Optional object to store the size in.\n     * @returns - The size of the Sprite.\n     */\n    public override getSize(out?: Size): Size\n    {\n        out ||= {} as Size;\n        out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n        out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n\n        return out;\n    }\n\n    /**\n     * Sets the size of the Sprite to the specified width and height.\n     * This is faster than setting the width and height separately.\n     * @param value - This can be either a number or a [Size]{@link Size} object.\n     * @param height - The height to set. Defaults to the value of `width` if not provided.\n     */\n    public override setSize(value: number | Optional<Size, 'height'>, height?: number)\n    {\n        if (typeof value === 'object')\n        {\n            height = value.height ?? value.width;\n            value = value.width;\n        }\n        else\n        {\n            height ??= value;\n        }\n\n        value !== undefined && this._setWidth(value, this._texture.orig.width);\n        height !== undefined && this._setHeight(height, this._texture.orig.height);\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\n\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\n\n/** @memberof text */\nexport interface CharData\n{\n    /** Unique id of character */\n    id: number;\n    /** x-offset to apply when rendering character */\n    xOffset: number;\n    /** y-offset to apply when rendering character. */\n    yOffset: number;\n    /** Advancement to apply to next character. */\n    xAdvance: number;\n    /** The kerning values for this character. */\n    kerning: Record<string, number>;\n    /** The texture of the character. */\n    texture?: Texture;\n}\n\n/**\n * The raw data of a character in a bitmap font.\n * @memberof text\n */\nexport interface RawCharData extends Omit<CharData, 'texture'>\n{\n    /** The page of the font texture that the character is on. */\n    page: number;\n    /** The x position of the character in the page. */\n    x: number;\n    /** The y position of the character in the page. */\n    y: number;\n    /** The width of the character in the page. */\n    width: number;\n    /** The height of the character in the page. */\n    height: number;\n    /** The letter of the character. */\n    letter: string;\n}\n\n/**\n * The raw data of a bitmap font.\n * @memberof text\n */\nexport interface BitmapFontData\n{\n    /** The offset of the font face from the baseline. */\n    baseLineOffset: number;\n    /** The map of characters by character code. */\n    chars: Record<string, RawCharData>;\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    pages: {\n        /** Unique id for bitmap texture */\n        id: number;\n        /** File name */\n        file: string\n    }[];\n    /** The line-height of the font face in pixels. */\n    lineHeight: number;\n    /** The size of the font face in pixels. */\n    fontSize: number;\n    /** The name of the font face. */\n    fontFamily: string;\n    /** The range and type of the distance field for this font. */\n    distanceField?: {\n        /** Type of distance field */\n        type: 'sdf' | 'msdf' | 'none';\n        /** Range of the distance field in pixels */\n        range: number;\n    };\n}\n\ninterface BitmapFontEvents<Type>\n{\n    destroy: [Type];\n}\n\n/**\n * An abstract representation of a bitmap font.\n * @memberof text\n */\nexport abstract class AbstractBitmapFont<FontType>\n    extends EventEmitter<BitmapFontEvents<FontType>>\n    implements Omit<BitmapFontData, 'chars' | 'pages' | 'fontSize'>\n{\n    /** The map of characters by character code. */\n    public readonly chars: Record<string, CharData> = Object.create(null);\n\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    public readonly lineHeight: BitmapFontData['lineHeight'] = 0;\n\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    public readonly fontFamily: BitmapFontData['fontFamily'] = '';\n    /** The metrics of the font face. */\n    public readonly fontMetrics: FontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    public readonly baseLineOffset: BitmapFontData['baseLineOffset'] = 0;\n    /** The range and type of the distance field for this font. */\n    public readonly distanceField: BitmapFontData['distanceField'] = { type: 'none', range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    public readonly pages: { texture: Texture }[] = [];\n    /** should the fill for this font be applied as a tint to the text. */\n    public applyFillAsTint = true;\n\n    /** The size of the font face in pixels. */\n    public readonly baseMeasurementFontSize: number = 100;\n    protected baseRenderedFontSize = 100;\n\n    /**\n     * The name of the font face.\n     * @deprecated since 8.0.0 Use `fontFamily` instead.\n     */\n    public get font(): BitmapFontData['fontFamily']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.');\n        // #endif\n\n        return this.fontFamily;\n    }\n\n    /**\n     * The map of base page textures (i.e., sheets of glyphs).\n     * @deprecated since 8.0.0 Use `pages` instead.\n     */\n    public get pageTextures(): AbstractBitmapFont<FontType>['pages']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.');\n        // #endif\n\n        return this.pages;\n    }\n\n    /**\n     * The size of the font face in pixels.\n     * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n     */\n    public get size(): BitmapFontData['fontSize']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.');\n        // #endif\n\n        return this.fontMetrics.fontSize;\n    }\n\n    /**\n     * The kind of distance field for this font or \"none\".\n     * @deprecated since 8.0.0 Use `distanceField.type` instead.\n     */\n    public get distanceFieldRange(): NonNullable<BitmapFontData['distanceField']>['range']\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.');\n        // #endif\n\n        return this.distanceField.range;\n    }\n\n    /**\n     * The range of the distance field in pixels.\n     * @deprecated since 8.0.0 Use `distanceField.range` instead.\n     */\n    public get distanceFieldType(): NonNullable<BitmapFontData['distanceField']>['type']\n    {\n        // #if _DEBUG\n        // eslint-disable-next-line max-len\n        deprecation(v8_0_0, 'BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.');\n        // #endif\n\n        return this.distanceField.type;\n    }\n\n    public destroy(destroyTextures = false): void\n    {\n        this.emit('destroy', this as unknown as FontType);\n\n        this.removeAllListeners();\n\n        for (const i in this.chars)\n        {\n            // texture may not exist if the char is \" \", \\n, \\r, or \\t.\n            this.chars[i].texture?.destroy();\n        }\n\n        (this.chars as null) = null;\n\n        if (destroyTextures)\n        {\n            this.pages.forEach((page) => page.texture.destroy(true));\n            (this.pages as any) = null;\n        }\n    }\n}\n","/**\n * Processes the passed character set data and returns a flattened array of all the characters.\n *\n * Ignored because not directly exposed.\n * @ignore\n * @param {string | string[] | string[][] } chars\n * @returns {string[]} the flattened array of characters\n */\n\nexport function resolveCharacters(chars: string | (string | string[])[]): string[]\n{\n    // Skip unexpected 'empty set' check at end\n    if (chars === '')\n    {\n        return [];\n    }\n\n    // Split the chars string into individual characters\n    if (typeof chars === 'string')\n    {\n        chars = [chars];\n    }\n\n    // Handle an array of characters+ranges\n    const result: string[] = [];\n\n    for (let i = 0, j = chars.length; i < j; i++)\n    {\n        const item = chars[i];\n\n        // Handle range delimited by start/end chars\n        if (Array.isArray(item))\n        {\n            if (item.length !== 2)\n            {\n                throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n            }\n            if (item[0].length === 0 || item[1].length === 0)\n            {\n                throw new Error('[BitmapFont]: Invalid character delimiter.');\n            }\n\n            const startCode = item[0].charCodeAt(0);\n            const endCode = item[1].charCodeAt(0);\n\n            if (endCode < startCode)\n            {\n                throw new Error('[BitmapFont]: Invalid character range.');\n            }\n\n            for (let i = startCode, j = endCode; i <= j; i++)\n            {\n                result.push(String.fromCharCode(i));\n            }\n        }\n        else\n        {\n            result.push(...Array.from(item));\n        }\n    }\n\n    if (result.length === 0)\n    {\n        throw new Error('[BitmapFont]: Empty set when resolving characters.');\n    }\n\n    return result;\n}\n","import { Color } from '../../color/Color';\nimport { Rectangle } from '../../maths/shapes/Rectangle';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle';\nimport { TextStyle } from '../text/TextStyle';\nimport { AbstractBitmapFont } from './AbstractBitmapFont';\nimport { resolveCharacters } from './utils/resolveCharacters';\n\nimport type { ICanvasRenderingContext2D } from '../../environment/canvas/ICanvasRenderingContext2D';\nimport type { CanvasAndContext } from '../../rendering/renderers/shared/texture/CanvasPool';\nimport type { FontMetrics } from '../text/canvas/CanvasTextMetrics';\n\nexport interface DynamicBitmapFontOptions\n{\n    style: TextStyle\n    skipKerning?: boolean\n    resolution?: number\n    padding?: number\n    overrideFill?: boolean\n    overrideSize?: boolean\n    textureSize?: number\n    mipmap?: boolean\n}\n\n/**\n * A BitmapFont that generates its glyphs dynamically.\n * @memberof text\n * @ignore\n */\nexport class DynamicBitmapFont extends AbstractBitmapFont<DynamicBitmapFont>\n{\n    public static defaultOptions: DynamicBitmapFontOptions = {\n        textureSize: 512,\n        style: new TextStyle(),\n        mipmap: true,\n    };\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    public resolution = 1;\n    /** The pages of the font. */\n    public override readonly pages: {canvasAndContext?: CanvasAndContext, texture: Texture}[] = [];\n\n    private readonly _padding: number = 0;\n    private readonly _measureCache: Record<string, number> = Object.create(null);\n    private _currentChars: string[] = [];\n    private _currentX = 0;\n    private _currentY = 0;\n    private _currentPageIndex = -1;\n    private readonly _style: TextStyle;\n    private readonly _skipKerning: boolean = false;\n    private readonly _textureSize: number;\n    private readonly _mipmap: boolean;\n\n    /**\n     * @param options - The options for the dynamic bitmap font.\n     */\n    constructor(options: DynamicBitmapFontOptions)\n    {\n        super();\n\n        const dynamicOptions = { ...DynamicBitmapFont.defaultOptions, ...options };\n\n        this._textureSize = dynamicOptions.textureSize;\n        this._mipmap = dynamicOptions.mipmap;\n\n        const style = dynamicOptions.style.clone();\n\n        if (dynamicOptions.overrideFill)\n        {\n            // assuming no shape fill..\n            style._fill.color = 0xffffff;\n            style._fill.alpha = 1;\n            style._fill.texture = Texture.WHITE;\n            style._fill.fill = null;\n        }\n\n        this.applyFillAsTint = dynamicOptions.overrideFill;\n\n        const requestedFontSize = style.fontSize;\n\n        // adjust font size to match the base measurement size\n        style.fontSize = this.baseMeasurementFontSize;\n\n        const font = fontStringFromTextStyle(style);\n\n        if (dynamicOptions.overrideSize)\n        {\n            if (style._stroke)\n            {\n                // we want the stroke to fit the size of the requested text, so we need to scale it\n                // accordingly (eg font size 20, with stroke 10 - stroke is 50% of size,\n                // as dynamic font is size 100, the stroke should be adjusted to 50 to make it look right)\n                style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n            }\n        }\n        else\n        {\n            style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n        }\n\n        this._style = style;\n        this._skipKerning = dynamicOptions.skipKerning ?? false;\n        this.resolution = dynamicOptions.resolution ?? 1;\n        this._padding = dynamicOptions.padding ?? 4;\n\n        (this.fontMetrics as FontMetrics) = CanvasTextMetrics.measureFont(font);\n        (this.lineHeight as number) = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n    }\n\n    public ensureCharacters(chars: string): void\n    {\n        const charList = resolveCharacters(chars)\n            .filter((char) => !this._currentChars.includes(char))\n            .filter((char, index, self) => self.indexOf(char) === index);\n        // filter returns..\n\n        if (!charList.length) return;\n\n        this._currentChars = [...this._currentChars, ...charList];\n\n        let pageData;\n\n        if (this._currentPageIndex === -1)\n        {\n            pageData = this._nextPage();\n        }\n        else\n        {\n            pageData = this.pages[this._currentPageIndex];\n        }\n\n        let { canvas, context } = pageData.canvasAndContext;\n        let textureSource = pageData.texture.source;\n\n        const style = this._style;\n\n        let currentX = this._currentX;\n        let currentY = this._currentY;\n\n        const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n        const padding = this._padding * fontScale;\n\n        let maxCharHeight = 0;\n        let skipTexture = false;\n\n        for (let i = 0; i < charList.length; i++)\n        {\n            const char = charList[i];\n\n            const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n            // This is ugly - but italics are given more space so they don't overlap\n            const textureGlyphWidth = Math.ceil((style.fontStyle === 'italic' ? 2 : 1) * metrics.width);\n\n            // override the line height.. we want this to be the glyps height\n            // not the user specified one.\n            metrics.lineHeight = metrics.height;\n\n            const width = metrics.width * fontScale;\n            const height = (metrics.height) * fontScale;\n\n            const paddedWidth = textureGlyphWidth + (padding * 2);\n            const paddedHeight = height + (padding * 2);\n\n            skipTexture = false;\n            // don't let empty characters count towards the maxCharHeight\n            if (char !== '\\n' && char !== '\\r' && char !== '\\t' && char !== ' ')\n            {\n                skipTexture = true;\n                maxCharHeight = Math.ceil(Math.max(paddedHeight, maxCharHeight));// / 1.5;\n            }\n\n            if (currentX + paddedWidth > this._textureSize)\n            {\n                currentY += maxCharHeight;\n\n                // reset the line x and height..\n                maxCharHeight = paddedHeight;\n                currentX = 0;\n\n                if (currentY + maxCharHeight > this._textureSize)\n                {\n                    textureSource.update();\n\n                    const pageData = this._nextPage();\n\n                    canvas = pageData.canvasAndContext.canvas;\n                    context = pageData.canvasAndContext.context;\n                    textureSource = pageData.texture.source;\n\n                    currentY = 0;\n                }\n            }\n\n            const xAdvance = (width / fontScale)\n                - (style.dropShadow?.distance ?? 0)\n                - (style._stroke?.width ?? 0);\n\n            // This is in coord space of the measurements.. not the texture\n            this.chars[char] = {\n                id: char.codePointAt(0),\n                xOffset: -this._padding,\n                yOffset: -this._padding,\n                xAdvance,\n                kerning: {},\n            };\n\n            if (skipTexture)\n            {\n                this._drawGlyph(\n                    context,\n                    metrics,\n                    currentX + padding,\n                    currentY + padding,\n                    fontScale,\n                    style,\n                );\n\n                const px = textureSource.width * fontScale;\n                const py = textureSource.height * fontScale;\n\n                const frame = new Rectangle(\n                    ((currentX) / px) * textureSource.width,\n                    ((currentY) / py) * textureSource.height,\n                    ((paddedWidth) / px) * textureSource.width,\n                    ((paddedHeight) / py) * textureSource.height,\n                );\n\n                this.chars[char].texture = new Texture({\n                    source: textureSource,\n                    frame,\n                });\n\n                currentX += Math.ceil(paddedWidth);\n            }\n\n            // now add it to the font data..\n        }\n\n        textureSource.update();\n\n        this._currentX = currentX;\n        this._currentY = currentY;\n\n        // now apply kerning..\n        this._skipKerning && this._applyKerning(charList, context);\n    }\n\n    /**\n     * @deprecated since 8.0.0\n     * The map of base page textures (i.e., sheets of glyphs).\n     */\n    public override get pageTextures(): DynamicBitmapFont['pages']\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.');\n        // #endif\n\n        return this.pages;\n    }\n\n    private _applyKerning(newChars: string[], context: ICanvasRenderingContext2D): void\n    {\n        const measureCache = this._measureCache;\n\n        for (let i = 0; i < newChars.length; i++)\n        {\n            const first = newChars[i];\n\n            for (let j = 0; j < this._currentChars.length; j++)\n            {\n                // first go through new char being first\n                const second = this._currentChars[j];\n\n                let c1 = measureCache[first];\n\n                if (!c1) c1 = measureCache[first] = context.measureText(first).width;\n\n                let c2 = measureCache[second];\n\n                if (!c2) c2 = measureCache[second] = context.measureText(second).width;\n\n                let total = context.measureText(first + second).width;\n                let amount = total - (c1 + c2);\n\n                if (amount)\n                {\n                    this.chars[first].kerning[second] = amount;\n                }\n\n                // then go through new char being second\n                total = context.measureText(first + second).width;\n                amount = total - (c1 + c2);\n\n                if (amount)\n                {\n                    this.chars[second].kerning[first] = amount;\n                }\n            }\n        }\n    }\n\n    private _nextPage(): {canvasAndContext: CanvasAndContext, texture: Texture}\n    {\n        this._currentPageIndex++;\n\n        const textureResolution = this.resolution;\n        const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n            this._textureSize,\n            this._textureSize,\n            textureResolution\n        );\n\n        this._setupContext(canvasAndContext.context, this._style, textureResolution);\n\n        const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n        const texture = new Texture({\n            source: new ImageSource({\n                resource: canvasAndContext.canvas,\n                resolution,\n                alphaMode: 'premultiply-alpha-on-upload',\n                autoGenerateMipmaps: this._mipmap,\n            }),\n\n        });\n\n        const pageData = {\n            canvasAndContext,\n            texture,\n        };\n\n        this.pages[this._currentPageIndex] = pageData;\n\n        return pageData;\n    }\n\n    // canvas style!\n    private _setupContext(context: ICanvasRenderingContext2D, style: TextStyle, resolution: number): void\n    {\n        style.fontSize = this.baseRenderedFontSize;\n        context.scale(resolution, resolution);\n        context.font = fontStringFromTextStyle(style);\n        style.fontSize = this.baseMeasurementFontSize;\n        context.textBaseline = style.textBaseline;\n\n        const stroke = style._stroke;\n        const strokeThickness = stroke?.width ?? 0;\n\n        if (stroke)\n        {\n            context.lineWidth = strokeThickness;\n            context.lineJoin = stroke.join;\n            context.miterLimit = stroke.miterLimit;\n\n            // TODO prolly cache this??\n            context.strokeStyle = getCanvasFillStyle(stroke, context);\n        }\n\n        if (style._fill)\n        {\n            // set canvas text styles\n            context.fillStyle = getCanvasFillStyle(style._fill, context);\n        }\n\n        if (style.dropShadow)\n        {\n            const shadowOptions = style.dropShadow;\n            const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n\n            const dropShadowBlur = shadowOptions.blur * resolution;\n            const dropShadowDistance = shadowOptions.distance * resolution;\n\n            context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n            context.shadowBlur = dropShadowBlur;\n            context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n            context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n        }\n        else\n        {\n            context.shadowColor = 'black';\n            context.shadowBlur = 0;\n            context.shadowOffsetX = 0;\n            context.shadowOffsetY = 0;\n        }\n    }\n\n    private _drawGlyph(\n        context: ICanvasRenderingContext2D,\n        metrics: CanvasTextMetrics,\n        x: number,\n        y: number,\n        fontScale: number,\n        style: TextStyle\n    ): void\n    {\n        const char = metrics.text;\n        const fontProperties = metrics.fontProperties;\n        const stroke = style._stroke;\n\n        const strokeThickness = (stroke?.width ?? 0) * fontScale;\n\n        const tx = x + (strokeThickness / 2);\n        const ty = y - (strokeThickness / 2);\n\n        const descent = fontProperties.descent * fontScale;\n        const lineHeight = metrics.lineHeight * fontScale;\n\n        if (style.stroke && strokeThickness)\n        {\n            context.strokeText(char, tx, ty + lineHeight - descent);\n        }\n\n        if (style._fill)\n        {\n            context.fillText(char, tx, ty + lineHeight - descent);\n        }\n    }\n\n    public override destroy(): void\n    {\n        super.destroy();\n\n        for (let i = 0; i < this.pages.length; i++)\n        {\n            const { canvasAndContext, texture } = this.pages[i];\n\n            CanvasPool.returnCanvasAndContext(canvasAndContext);\n            texture.destroy(true);\n        }\n\n        (this.pages as null) = null;\n    }\n}\n","import { Cache } from '../../assets/cache/Cache';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { warn } from '../../utils/logging/warn';\nimport { TextStyle } from '../text/TextStyle';\nimport { DynamicBitmapFont } from './DynamicBitmapFont';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout';\nimport { resolveCharacters } from './utils/resolveCharacters';\n\nimport type { TextStyleOptions } from '../text/TextStyle';\nimport type { BitmapFont } from './BitmapFont';\nimport type { BitmapTextLayoutData } from './utils/getBitmapTextLayout';\n\nlet fontCount = 0;\n\n/**\n *\n * The options for installing a new BitmapFont. Once installed the font will be available for use in the BitmapText.\n * It can be accessed by the `fontFamily` property of the TextStyle.\n *\n * Install a new BitmapFont will create the characters provided for the font and store them in the cache.\n * But don't worry, if a character is requested that hasn't been generated yet, it will be created on the fly.\n * @memberof text\n */\nexport interface BitmapFontInstallOptions\n{\n    /** the name of the font, this will be the name you use in the fontFamily of text style to access this font */\n    name?: string;\n    /**\n     * Characters included in the font set. You can also use ranges.\n     * For example, `[['a', 'z'], ['A', 'Z'], \"!@#$%^&*()~{}[] \"]`.\n     * Don't forget to include spaces ' ' in your character set!\n     * @default BitmapFont.ALPHANUMERIC\n     */\n    chars?: string | (string | string[])[];\n    /**\n     * Render resolution for glyphs.\n     * @default 1\n     */\n    resolution?: number;\n    /**\n     * Padding between glyphs on texture atlas. Lower values could mean more visual artifacts\n     * and bleeding from other glyphs, larger values increase the space required on the texture.\n     * @default 4\n     */\n    padding?: number;\n    /**\n     * Skip generation of kerning information for the BitmapFont.\n     * If true, this could potentially increase the performance, but may impact the rendered text appearance.\n     * @default false\n     */\n    skipKerning?: boolean;\n    /** Style options to render with BitmapFont. */\n    style?: TextStyle | TextStyleOptions;\n}\n\n/**\n * The BitmapFontManager is a helper that exists to install and uninstall fonts\n * into the cache for BitmapText objects.\n * @memberof text\n * @name BitmapFontManager\n * @example\n * import { BitmapFontManager, BitmapText } from 'pixi.js';\n *\n * BitmapFontManager.install({\n *   name: 'TitleFont',\n *   style: {}\n * });\n *\n * const title = new BitmapText({ text: 'This is the title', style: { fontFamily: 'TitleFont' }});\n */\nclass BitmapFontManagerClass\n{\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    public readonly ALPHA = [['a', 'z'], ['A', 'Z'], ' '];\n\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    public readonly NUMERIC = [['0', '9']];\n\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    public readonly ALPHANUMERIC = [['a', 'z'], ['A', 'Z'], ['0', '9'], ' '];\n\n    /**\n     * This character set consists of all the ASCII table.\n     * @member {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    public readonly ASCII = [[' ', '~']];\n\n    /** Default options for installing a new BitmapFont. */\n    public defaultOptions: Omit<BitmapFontInstallOptions, 'style'> = {\n        chars: this.ALPHANUMERIC,\n        resolution: 1,\n        padding: 4,\n        skipKerning: false,\n    };\n\n    /**\n     * Get a font for the specified text and style.\n     * @param text - The text to get the font for\n     * @param style - The style to use\n     */\n    public getFont(text: string, style: TextStyle): BitmapFont\n    {\n        let fontFamilyKey = `${style.fontFamily as string}-bitmap`;\n        let overrideFill = true;\n\n        // assuming there is no texture we can use a tint!\n        if (style._fill.fill && !style._stroke)\n        {\n            fontFamilyKey += style._fill.fill.styleKey;\n            overrideFill = false;\n        }\n        else if (style._stroke || style.dropShadow)\n        {\n            // if there is a stoke, we need to use the style key as this the font generated cannot be tinted\n            // due to the fact the font has at least two colors.\n            let key = style.styleKey;\n\n            // remove the font size..\n            key = key.substring(0, key.lastIndexOf('-'));\n\n            fontFamilyKey = `${key}-bitmap`;\n            overrideFill = false;\n        }\n\n        // first get us the the right font...\n        if (!Cache.has(fontFamilyKey))\n        {\n            const fnt = new DynamicBitmapFont({\n                style,\n                overrideFill,\n                overrideSize: true,\n                ...this.defaultOptions,\n            });\n\n            fontCount++;\n\n            // warn users if they have created too many dynamic fonts\n            if (fontCount > 50)\n            {\n                // eslint-disable-next-line max-len\n                warn('BitmapText', `You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \\`BitmapFont.install({name:\"style1\", style})\\``);\n            }\n\n            fnt.once('destroy', () =>\n            {\n                fontCount--;\n                Cache.remove(fontFamilyKey);\n            });\n\n            Cache.set(\n                fontFamilyKey as string,\n                fnt\n            );\n        }\n\n        const dynamicFont = Cache.get(fontFamilyKey);\n\n        (dynamicFont as DynamicBitmapFont).ensureCharacters?.(text);\n\n        return dynamicFont;\n    }\n\n    /**\n     * Get the layout of a text for the specified style.\n     * @param text - The text to get the layout for\n     * @param style - The style to use\n     * @param trimEnd - Whether to ignore whitespaces at the end of each line\n     */\n    public getLayout(text: string, style: TextStyle, trimEnd: boolean = true): BitmapTextLayoutData\n    {\n        const bitmapFont = this.getFont(text, style);\n\n        return getBitmapTextLayout([...text], style, bitmapFont, trimEnd);\n    }\n\n    /**\n     * Measure the text using the specified style.\n     * @param text - The text to measure\n     * @param style - The style to use\n     * @param trimEnd - Whether to ignore whitespaces at the end of each line\n     */\n    public measureText(\n        text: string,\n        style: TextStyle,\n        trimEnd: boolean = true\n    ): { width: number; height: number; scale: number; offsetY: number }\n    {\n        return this.getLayout(text, style, trimEnd);\n    }\n\n    /**\n     * Generates a bitmap-font for the given style and character set\n     * @param options - Setup options for font generation.\n     * @returns Font generated by style options.\n     * @example\n     * import { BitmapFontManager, BitmapText } from 'pixi.js';\n     *\n     * BitmapFontManager.install('TitleFont', {\n     *     fontFamily: 'Arial',\n     *     fontSize: 12,\n     *     strokeThickness: 2,\n     *     fill: 'purple',\n     * });\n     *\n     * const title = new BitmapText({ text: 'This is the title', fontFamily: 'TitleFont' });\n     */\n    public install(options: BitmapFontInstallOptions): BitmapFont;\n    /** @deprecated since 7.0.0 */\n    public install(name: string, style?: TextStyle | TextStyleOptions, options?: BitmapFontInstallOptions): BitmapFont;\n    // eslint-disable-next-line max-len\n    public install(...args: [string | BitmapFontInstallOptions, (TextStyle | TextStyleOptions)?, BitmapFontInstallOptions?]): BitmapFont\n    {\n        let options = args[0] as BitmapFontInstallOptions;\n\n        if (typeof options === 'string')\n        {\n            options = {\n                name: options,\n                style: args[1],\n                chars: args[2]?.chars,\n                resolution: args[2]?.resolution,\n                padding: args[2]?.padding,\n                skipKerning: args[2]?.skipKerning,\n            } as BitmapFontInstallOptions;\n\n            // #if _DEBUG\n            // eslint-disable-next-line max-len\n            deprecation(v8_0_0, 'BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})');\n            // #endif\n        }\n\n        const name = options?.name;\n\n        if (!name)\n        {\n            throw new Error('[BitmapFontManager] Property `name` is required.');\n        }\n\n        options = { ...this.defaultOptions, ...options };\n\n        const textStyle = options.style;\n\n        const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n        const overrideFill = style._fill.fill !== null && style._fill.fill !== undefined;\n        const font = new DynamicBitmapFont({\n            style,\n            overrideFill,\n            skipKerning: options.skipKerning,\n            padding: options.padding,\n            resolution: options.resolution,\n            overrideSize: false\n        });\n\n        const flatChars = resolveCharacters(options.chars);\n\n        font.ensureCharacters(flatChars.join(''));\n\n        Cache.set(`${name}-bitmap`, font);\n\n        font.once('destroy', () => Cache.remove(`${name}-bitmap`));\n\n        return font;\n    }\n\n    /**\n     * Uninstalls a bitmap font from the cache.\n     * @param {string} name - The name of the bitmap font to uninstall.\n     */\n    public uninstall(name: string)\n    {\n        const cacheKey = `${name}-bitmap`;\n        const font = Cache.get<BitmapFont>(cacheKey);\n\n        if (font)\n        {\n            font.destroy();\n        }\n    }\n}\n\nexport const BitmapFontManager = new BitmapFontManagerClass();\n","import type { TextStyle } from '../../text/TextStyle';\nimport type { AbstractBitmapFont } from '../AbstractBitmapFont';\n\nexport interface BitmapTextLayoutData\n{\n    width: number;\n    height: number;\n    scale: number;\n    offsetY: number;\n    lines: {\n        width: number\n        charPositions: number[],\n        chars: string[],\n        // / spaces: number\n        spaceWidth: number\n        spacesIndex: number[]\n    }[];\n}\n\nexport function getBitmapTextLayout(\n    chars: string[],\n    style: TextStyle,\n    font: AbstractBitmapFont<any>,\n    trimEnd: boolean\n): BitmapTextLayoutData\n{\n    const layoutData: BitmapTextLayoutData = {\n        width: 0,\n        height: 0,\n        offsetY: 0,\n        scale: style.fontSize / font.baseMeasurementFontSize,\n        lines: [{\n            width: 0,\n            charPositions: [] as number[],\n            spaceWidth: 0,\n            spacesIndex: [],\n            chars: [],\n        }]\n    };\n\n    layoutData.offsetY = font.baseLineOffset;\n\n    let currentLine = layoutData.lines[0];\n\n    let previousChar: string = null;\n    let firstWord = true;\n    //    let spaceCount = 0;\n\n    const currentWord = {\n        spaceWord: false,\n        width: 0,\n        start: 0,\n        index: 0, // use index to not modify the array as we use it a lot!\n        positions: [] as number[],\n        chars: [] as string[],\n    };\n\n    const nextWord = (word: typeof currentWord) =>\n    {\n        const start = currentLine.width;\n\n        for (let j = 0; j < currentWord.index; j++)\n        {\n            const position = word.positions[j];\n\n            currentLine.chars.push(word.chars[j]);\n            currentLine.charPositions.push(position + start);\n        }\n\n        currentLine.width += word.width;\n\n        firstWord = false;\n\n        // reset the word..\n        currentWord.width = 0;\n        currentWord.index = 0;\n        currentWord.chars.length = 0;\n\n        // spaceCount = 0;\n    };\n\n    const nextLine = () =>\n    {\n        let index = currentLine.chars.length - 1;\n\n        if (trimEnd)\n        {\n            let lastChar = currentLine.chars[index];\n\n            while (lastChar === ' ')\n            {\n                currentLine.width -= font.chars[lastChar].xAdvance;\n                lastChar = currentLine.chars[--index];\n            }\n        }\n\n        layoutData.width = Math.max(layoutData.width, currentLine.width);\n\n        currentLine = {\n            width: 0,\n            charPositions: [],\n            chars: [],\n            spaceWidth: 0,\n            spacesIndex: [],\n        };\n\n        firstWord = true;\n        layoutData.lines.push(currentLine);\n        layoutData.height += font.lineHeight;\n    };\n\n    const scale = font.baseMeasurementFontSize / style.fontSize;\n\n    const adjustedLetterSpacing = style.letterSpacing * scale;\n    const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n\n    // loop an extra time to force a line break..\n    for (let i = 0; i < chars.length + 1; i++)\n    {\n        let char: string;\n\n        const isEnd = i === chars.length;\n\n        if (!isEnd)\n        {\n            char = chars[i];\n        }\n\n        const charData = font.chars[char] || font.chars[' '];\n\n        const isSpace = (/(?:\\s)/).test(char);\n        const isWordBreak = isSpace || char === '\\r' || char === '\\n' || isEnd;\n\n        // spaceCount++;\n        // wasSpace = isSpace;\n\n        if (isWordBreak)\n        {\n            const addWordToNextLine = !firstWord\n                && style.wordWrap\n                && (currentLine.width + currentWord.width - adjustedLetterSpacing) > adjustedWordWrapWidth;\n\n            if (addWordToNextLine)\n            {\n                nextLine();\n\n                nextWord(currentWord);\n\n                if (!isEnd)\n                {\n                    currentLine.charPositions.push(0);\n                }\n            }\n            else\n            {\n                currentWord.start = currentLine.width;\n\n                nextWord(currentWord);\n\n                if (!isEnd)\n                {\n                    currentLine.charPositions.push(0);\n                }\n            }\n\n            if (char === '\\r' || char === '\\n')\n            {\n                if (currentLine.width !== 0)\n                {\n                    nextLine();\n                }\n            }\n            else if (!isEnd)\n            {\n                const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n\n                currentLine.width += spaceWidth;\n\n                currentLine.spaceWidth = spaceWidth;\n                currentLine.spacesIndex.push(currentLine.charPositions.length);\n                currentLine.chars.push(char);\n\n                // spaceCount++;\n            }\n        }\n        else\n        {\n            const kerning = charData.kerning[previousChar] || 0;\n\n            const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n\n            currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n            currentWord.chars.push(char);\n\n            currentWord.width += nextCharWidth;\n        }\n\n        previousChar = char;\n        // lastChar = char;\n    }\n\n    nextLine();\n\n    if (style.align === 'center')\n    {\n        alignCenter(layoutData);\n    }\n    else if (style.align === 'right')\n    {\n        alignRight(layoutData);\n    }\n    else if (style.align === 'justify')\n    {\n        alignJustify(layoutData);\n    }\n\n    return layoutData;\n}\n\nfunction alignCenter(measurementData: BitmapTextLayoutData)\n{\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n        const offset = ((measurementData.width / 2) - (line.width / 2));\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            line.charPositions[j] += offset;\n        }\n    }\n}\n\nfunction alignRight(measurementData: BitmapTextLayoutData)\n{\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n        const offset = ((measurementData.width) - (line.width));\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            line.charPositions[j] += offset;\n        }\n    }\n}\n\nfunction alignJustify(measurementData: BitmapTextLayoutData)\n{\n    const width = measurementData.width;\n\n    for (let i = 0; i < measurementData.lines.length; i++)\n    {\n        const line = measurementData.lines[i];\n\n        let indy = 0;\n        let spaceIndex = line.spacesIndex[indy++];\n\n        let offset = 0;\n\n        const totalSpaces = line.spacesIndex.length;\n\n        const newSpaceWidth = (width - line.width) / totalSpaces;\n\n        const spaceWidth = newSpaceWidth;\n\n        for (let j = 0; j < line.charPositions.length; j++)\n        {\n            if (j === spaceIndex)\n            {\n                spaceIndex = line.spacesIndex[indy++];\n\n                offset += spaceWidth;\n            }\n\n            line.charPositions[j] += offset;\n        }\n    }\n}\n","import EventEmitter from 'eventemitter3';\nimport { Color, type ColorSource } from '../../color/Color';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext';\nimport {\n    toFillStyle,\n    toStrokeStyle\n} from '../graphics/shared/utils/convertFillInputToFillStyle';\nimport { generateTextStyleKey } from './utils/generateTextStyleKey';\n\nimport type { TextureDestroyOptions, TypeOrBool } from '../container/destroyTypes';\nimport type {\n    ConvertedFillStyle,\n    ConvertedStrokeStyle,\n    FillInput,\n    FillStyle,\n    StrokeInput,\n    StrokeStyle\n} from '../graphics/shared/FillTypes';\n\nexport type TextStyleAlign = 'left' | 'center' | 'right' | 'justify';\nexport type TextStyleFill = string | string[] | number | number[] | CanvasGradient | CanvasPattern;\nexport type TextStyleFontStyle = 'normal' | 'italic' | 'oblique';\nexport type TextStyleFontVariant = 'normal' | 'small-caps';\n// eslint-disable-next-line max-len\nexport type TextStyleFontWeight = 'normal' | 'bold' | 'bolder' | 'lighter' | '100' | '200' | '300' | '400' | '500' | '600' | '700' | '800' | '900';\nexport type TextStyleLineJoin = 'miter' | 'round' | 'bevel';\nexport type TextStyleTextBaseline = 'alphabetic' | 'top' | 'hanging' | 'middle' | 'ideographic' | 'bottom';\nexport type TextStyleWhiteSpace = 'normal' | 'pre' | 'pre-line';\n\n/**\n * A collection of text related classes.\n * @namespace text\n */\n\n/**\n * A drop shadow effect.\n * @memberof text\n */\nexport type TextDropShadow = {\n    /** Set alpha for the drop shadow  */\n    alpha: number;\n    /** Set a angle of the drop shadow */\n    angle: number;\n    /** Set a shadow blur radius */\n    blur: number;\n    /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n    color: ColorSource;\n    /** Set a distance of the drop shadow */\n    distance: number;\n};\n\n/**\n * Constructor options used for `TextStyle` instances.\n * ```js\n * const textStyle = new TextStyle({\n *    fontSize: 12,\n *    fill: 'black',\n * });\n * ```\n * @see {@link text.TextStyle}\n * @memberof text\n */\nexport interface TextStyleOptions\n{\n    /**\n     * Alignment for multiline text, does not affect single line text\n     * @type {'left'|'center'|'right'|'justify'}\n     */\n    align?: TextStyleAlign;\n    /** Indicates if lines can be wrapped within words, it needs `wordWrap` to be set to `true` */\n    breakWords?: boolean;\n    /** Set a drop shadow for the text */\n    dropShadow?: boolean | Partial<TextDropShadow>;\n    /**\n     * A canvas fillstyle that will be used on the text e.g., 'red', '#00FF00'.\n     * Can be an array to create a gradient, e.g., `['#000000','#FFFFFF']`\n     * {@link https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/fillStyle|MDN}\n     * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n     */\n    fill?: FillInput;\n    /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n    fontFamily?: string | string[];\n    /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n    fontSize?: number | string;\n    /**\n     * The font style.\n     * @type {'normal'|'italic'|'oblique'}\n     */\n    fontStyle?: TextStyleFontStyle;\n    /**\n     * The font variant.\n     * @type {'normal'|'small-caps'}\n     */\n    fontVariant?: TextStyleFontVariant;\n    /**\n     * The font weight.\n     * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n     */\n    fontWeight?: TextStyleFontWeight;\n    /** The height of the line, a number that represents the vertical space that a letter uses. */\n    leading?: number;\n    /** The amount of spacing between letters, default is 0 */\n    letterSpacing?: number;\n    /** The line height, a number that represents the vertical space that a letter uses */\n    lineHeight?: number;\n    /**\n     * Occasionally some fonts are cropped. Adding some padding will prevent this from\n     * happening by adding padding to all sides of the text.\n     */\n    padding?: number;\n    /** A canvas fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00' */\n    stroke?: StrokeInput;\n    /**\n     * The baseline of the text that is rendered.\n     * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n     */\n    textBaseline?: TextStyleTextBaseline;\n    trim?: boolean,\n    /**\n     * Determines whether newlines & spaces are collapsed or preserved \"normal\"\n     * (collapse, collapse), \"pre\" (preserve, preserve) | \"pre-line\" (preserve,\n     * collapse). It needs wordWrap to be set to true.\n     * @type {'normal'|'pre'|'pre-line'}\n     */\n    whiteSpace?: TextStyleWhiteSpace;\n    /** Indicates if word wrap should be used */\n    wordWrap?: boolean;\n    /** The width at which text will wrap, it needs wordWrap to be set to true */\n    wordWrapWidth?: number;\n}\n\n/**\n * A TextStyle Object contains information to decorate a Text objects.\n *\n * An instance can be shared between multiple Text objects; then changing the style will update all text objects using it.\n * @memberof text\n * @example\n * import { TextStyle } from 'pixi.js';\n * const style = new TextStyle({\n *   fontFamily: ['Helvetica', 'Arial', 'sans-serif'],\n *   fontSize: 36,\n * });\n */\nexport class TextStyle extends EventEmitter<{\n    update: TextDropShadow\n}>\n{\n    /** The default drop shadow settings */\n    public static defaultDropShadow: TextDropShadow = {\n        /** Set alpha for the drop shadow */\n        alpha: 1,\n        /** Set a angle of the drop shadow */\n        angle: Math.PI / 6,\n        /** Set a shadow blur radius */\n        blur: 0,\n        /** A fill style to be used on the  e.g., 'red', '#00FF00' */\n        color: 'black',\n        /** Set a distance of the drop shadow */\n        distance: 5,\n    };\n\n    /** The default text style settings */\n    public static defaultTextStyle: TextStyleOptions = {\n        /**\n         * See {@link TextStyle.align}\n         * @type {'left'|'center'|'right'|'justify'}\n         */\n        align: 'left',\n        /** See {@link TextStyle.breakWords} */\n        breakWords: false,\n        /** See {@link TextStyle.dropShadow} */\n        dropShadow:  null,\n        /**\n         * See {@link TextStyle.fill}\n         * @type {string|string[]|number|number[]|CanvasGradient|CanvasPattern}\n         */\n        fill: 'black',\n        /**\n         * See {@link TextStyle.fontFamily}\n         * @type {string|string[]}\n         */\n        fontFamily: 'Arial',\n        /**\n         * See {@link TextStyle.fontSize}\n         * @type {number|string}\n         */\n        fontSize: 26,\n        /**\n         * See {@link TextStyle.fontStyle}\n         * @type {'normal'|'italic'|'oblique'}\n         */\n        fontStyle: 'normal',\n        /**\n         * See {@link TextStyle.fontVariant}\n         * @type {'normal'|'small-caps'}\n         */\n        fontVariant: 'normal',\n        /**\n         * See {@link TextStyle.fontWeight}\n         * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n         */\n        fontWeight: 'normal',\n        /** See {@link TextStyle.leading} */\n        leading: 0,\n        /** See {@link TextStyle.letterSpacing} */\n        letterSpacing: 0,\n        /** See {@link TextStyle.lineHeight} */\n        lineHeight: 0,\n        /** See {@link TextStyle.padding} */\n        padding: 0,\n        /**\n         * See {@link TextStyle.stroke}\n         * @type {string|number}\n         */\n        stroke: null,\n        /**\n         * See {@link TextStyle.textBaseline}\n         * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n         */\n        textBaseline: 'alphabetic',\n        /** See {@link TextStyle.trim} */\n        trim: false,\n        /**\n         * See {@link TextStyle.whiteSpace}\n         * @type {'normal'|'pre'|'pre-line'}\n         */\n        whiteSpace: 'pre',\n        /** See {@link TextStyle.wordWrap} */\n        wordWrap: false,\n        /** See {@link TextStyle.wordWrapWidth} */\n        wordWrapWidth: 100,\n    };\n\n    // colors!!\n    public _fill: ConvertedFillStyle;\n    private _originalFill: FillInput;\n\n    public _stroke: ConvertedStrokeStyle;\n    private _originalStroke: StrokeInput;\n\n    private _dropShadow: TextDropShadow;\n\n    private _fontFamily: string | string[];\n    private _fontSize: number;\n    private _fontStyle: TextStyleFontStyle;\n    private _fontVariant: TextStyleFontVariant;\n    private _fontWeight: TextStyleFontWeight;\n\n    private _breakWords: boolean;\n    private _align: TextStyleAlign;\n    private _leading: number;\n    private _letterSpacing: number;\n    private _lineHeight: number;\n\n    private _textBaseline: TextStyleTextBaseline;\n    private _whiteSpace: TextStyleWhiteSpace;\n    private _wordWrap: boolean;\n    private _wordWrapWidth: number;\n\n    private _padding: number;\n\n    protected _styleKey: string;\n    private _trim: boolean;\n\n    constructor(style: Partial<TextStyleOptions> = {})\n    {\n        super();\n\n        convertV7Tov8Style(style);\n\n        const fullStyle = { ...TextStyle.defaultTextStyle, ...style };\n\n        for (const key in fullStyle)\n        {\n            const thisKey = key as keyof typeof this;\n\n            this[thisKey] = fullStyle[key as keyof TextStyleOptions] as any;\n        }\n\n        this.update();\n    }\n\n    /**\n     * Alignment for multiline text, does not affect single line text.\n     * @member {'left'|'center'|'right'|'justify'}\n     */\n    get align(): TextStyleAlign { return this._align; }\n    set align(value: TextStyleAlign) { this._align = value; this.update(); }\n    /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n    get breakWords(): boolean { return this._breakWords; }\n    set breakWords(value: boolean) { this._breakWords = value; this.update(); }\n    /** Set a drop shadow for the text. */\n    get dropShadow(): TextDropShadow { return this._dropShadow; }\n    set dropShadow(value: boolean | TextDropShadow)\n    {\n        if (value !== null && typeof value === 'object')\n        {\n            this._dropShadow = this._createProxy({ ...TextStyle.defaultDropShadow, ...value });\n        }\n        else\n        {\n            this._dropShadow = value ? this._createProxy({ ...TextStyle.defaultDropShadow }) : null;\n        }\n\n        this.update();\n    }\n    /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n    get fontFamily(): string | string[] { return this._fontFamily; }\n    set fontFamily(value: string | string[]) { this._fontFamily = value; this.update(); }\n    /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n    get fontSize(): number { return this._fontSize; }\n    set fontSize(value: string | number)\n    {\n        if (typeof value === 'string')\n        {\n            // eg '34px' to number\n            this._fontSize = parseInt(value as string, 10);\n        }\n        else\n        {\n            this._fontSize = value as number;\n        }\n        this.update();\n    }\n    /**\n     * The font style.\n     * @member {'normal'|'italic'|'oblique'}\n     */\n    get fontStyle(): TextStyleFontStyle { return this._fontStyle; }\n    set fontStyle(value: TextStyleFontStyle)\n    {\n        this._fontStyle = value.toLowerCase() as TextStyleFontStyle;\n        this.update();\n    }\n    /**\n     * The font variant.\n     * @member {'normal'|'small-caps'}\n     */\n    get fontVariant(): TextStyleFontVariant { return this._fontVariant; }\n    set fontVariant(value: TextStyleFontVariant) { this._fontVariant = value; this.update(); }\n    /**\n     * The font weight.\n     * @member {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n     */\n    get fontWeight(): TextStyleFontWeight { return this._fontWeight; }\n    set fontWeight(value: TextStyleFontWeight) { this._fontWeight = value; this.update(); }\n    /** The space between lines. */\n    get leading(): number { return this._leading; }\n    set leading(value: number) { this._leading = value; this.update(); }\n    /** The amount of spacing between letters, default is 0. */\n    get letterSpacing(): number { return this._letterSpacing; }\n    set letterSpacing(value: number) { this._letterSpacing = value; this.update(); }\n    /** The line height, a number that represents the vertical space that a letter uses. */\n    get lineHeight(): number { return this._lineHeight; }\n    set lineHeight(value: number) { this._lineHeight = value; this.update(); }\n    /**\n     * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n     * by adding padding to all sides of the text.\n     */\n    get padding(): number { return this._padding; }\n    set padding(value: number) { this._padding = value; this.update(); }\n\n    /** Trim transparent borders. This is an expensive operation so only use this if you have to! */\n    get trim(): boolean { return this._trim; }\n    set trim(value: boolean) { this._trim = value; this.update(); }\n    /**\n     * The baseline of the text that is rendered.\n     * @member {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n     */\n    get textBaseline(): TextStyleTextBaseline { return this._textBaseline; }\n    set textBaseline(value: TextStyleTextBaseline) { this._textBaseline = value; this.update(); }\n    /**\n     * How newlines and spaces should be handled.\n     * Default is 'pre' (preserve, preserve).\n     *\n     *  value       | New lines     |   Spaces\n     *  ---         | ---           |   ---\n     * 'normal'     | Collapse      |   Collapse\n     * 'pre'        | Preserve      |   Preserve\n     * 'pre-line'   | Preserve      |   Collapse\n     * @member {'normal'|'pre'|'pre-line'}\n     */\n    get whiteSpace(): TextStyleWhiteSpace { return this._whiteSpace; }\n    set whiteSpace(value: TextStyleWhiteSpace) { this._whiteSpace = value; this.update(); }\n    /** Indicates if word wrap should be used. */\n    get wordWrap(): boolean { return this._wordWrap; }\n    set wordWrap(value: boolean) { this._wordWrap = value; this.update(); }\n    /** The width at which text will wrap, it needs wordWrap to be set to true. */\n    get wordWrapWidth(): number { return this._wordWrapWidth; }\n    set wordWrapWidth(value: number) { this._wordWrapWidth = value; this.update(); }\n\n    /** A fillstyle that will be used on the text e.g., 'red', '#00FF00'. */\n    get fill(): FillInput\n    {\n        return this._originalFill;\n    }\n\n    set fill(value: FillInput)\n    {\n        if (value === this._originalFill) return;\n\n        this._originalFill = value;\n\n        if (this._isFillStyle(value))\n        {\n            this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () =>\n            {\n                this._fill = toFillStyle(\n                    { ...this._originalFill as FillStyle },\n                    GraphicsContext.defaultFillStyle\n                );\n            });\n        }\n\n        this._fill = toFillStyle(\n            value === 0x0 ? 'black' : value,\n            GraphicsContext.defaultFillStyle\n        );\n        this.update();\n    }\n\n    /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n    get stroke(): StrokeInput\n    {\n        return this._originalStroke;\n    }\n\n    set stroke(value: StrokeInput)\n    {\n        if (value === this._originalStroke) return;\n\n        this._originalStroke = value;\n\n        if (this._isFillStyle(value))\n        {\n            this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () =>\n            {\n                this._stroke = toStrokeStyle(\n                    { ...this._originalStroke as StrokeStyle },\n                    GraphicsContext.defaultStrokeStyle\n                );\n            });\n        }\n\n        this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n        this.update();\n    }\n\n    protected _generateKey(): string\n    {\n        this._styleKey = generateTextStyleKey(this);\n\n        return this._styleKey;\n    }\n\n    public update()\n    {\n        this._styleKey = null;\n        this.emit('update', this);\n    }\n\n    /** Resets all properties to the default values */\n    public reset()\n    {\n        const defaultStyle = TextStyle.defaultTextStyle;\n\n        for (const key in defaultStyle)\n        {\n            this[key as keyof typeof this] = defaultStyle[key as keyof TextStyleOptions] as any;\n        }\n    }\n\n    get styleKey()\n    {\n        return this._styleKey || this._generateKey();\n    }\n\n    /**\n     * Creates a new TextStyle object with the same values as this one.\n     * @returns New cloned TextStyle object\n     */\n    public clone(): TextStyle\n    {\n        return new TextStyle({\n            align: this.align,\n            breakWords: this.breakWords,\n            dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n            fill: this._fill,\n            fontFamily: this.fontFamily,\n            fontSize: this.fontSize,\n            fontStyle: this.fontStyle,\n            fontVariant: this.fontVariant,\n            fontWeight: this.fontWeight,\n            leading: this.leading,\n            letterSpacing: this.letterSpacing,\n            lineHeight: this.lineHeight,\n            padding: this.padding,\n            stroke: this._stroke,\n            textBaseline: this.textBaseline,\n            whiteSpace: this.whiteSpace,\n            wordWrap: this.wordWrap,\n            wordWrapWidth: this.wordWrapWidth,\n        });\n    }\n\n    /**\n     * Destroys this text style.\n     * @param options - Options parameter. A boolean will act as if all options\n     *  have been set to that value\n     * @param {boolean} [options.texture=false] - Should it destroy the texture of the this style\n     * @param {boolean} [options.textureSource=false] - Should it destroy the textureSource of the this style\n     */\n    public destroy(options: TypeOrBool<TextureDestroyOptions> = false)\n    {\n        this.removeAllListeners();\n\n        const destroyTexture = typeof options === 'boolean' ? options : options?.texture;\n\n        if (destroyTexture)\n        {\n            const destroyTextureSource = typeof options === 'boolean' ? options : options?.textureSource;\n\n            if (this._fill?.texture)\n            {\n                this._fill.texture.destroy(destroyTextureSource);\n            }\n\n            if ((this._originalFill as FillStyle)?.texture)\n            {\n                (this._originalFill as FillStyle).texture.destroy(destroyTextureSource);\n            }\n\n            if (this._stroke?.texture)\n            {\n                this._stroke.texture.destroy(destroyTextureSource);\n            }\n\n            if ((this._originalStroke as FillStyle)?.texture)\n            {\n                (this._originalStroke as FillStyle).texture.destroy(destroyTextureSource);\n            }\n        }\n\n        this._fill = null;\n        this._stroke = null;\n        this.dropShadow = null;\n        this._originalStroke = null;\n        this._originalFill = null;\n    }\n\n    private _createProxy<T extends object>(value: T, cb?: (property: string, newValue: any) => void): T\n    {\n        return new Proxy<T>(value, {\n            set: (target, property, newValue) =>\n            {\n                target[property as keyof T] = newValue;\n                cb?.(property as string, newValue);\n                this.update();\n\n                return true;\n            }\n        });\n    }\n\n    private _isFillStyle(value: FillInput): value is FillStyle\n    {\n        return ((value ?? null) !== null\n            && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern));\n    }\n}\n\nfunction convertV7Tov8Style(style: TextStyleOptions)\n{\n    const oldStyle = style as TextStyleOptions & {\n        dropShadowAlpha?: number;\n        dropShadowAngle?: number;\n        dropShadowBlur?: number;\n        dropShadowColor?: number;\n        dropShadowDistance?: number;\n        fillGradientStops?: number[];\n        strokeThickness?: number;\n    };\n\n    if (typeof oldStyle.dropShadow === 'boolean' && oldStyle.dropShadow)\n    {\n        const defaults = TextStyle.defaultDropShadow;\n\n        style.dropShadow = {\n            alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n            angle: oldStyle.dropShadowAngle ?? defaults.angle,\n            blur: oldStyle.dropShadowBlur ?? defaults.blur,\n            color: oldStyle.dropShadowColor ?? defaults.color,\n            distance:   oldStyle.dropShadowDistance ?? defaults.distance,\n        };\n    }\n\n    if (oldStyle.strokeThickness !== undefined)\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'strokeThickness is now a part of stroke');\n        // #endif\n\n        const color = oldStyle.stroke;\n        let obj: FillStyle = {};\n\n        // handles stroke: 0x0, stroke: { r: 0, g: 0, b: 0, a: 0 } stroke: new Color(0x0)\n        if (Color.isColorLike(color as ColorSource))\n        {\n            obj.color = color as ColorSource;\n        }\n        // handles stroke: new FillGradient()\n        else if (color instanceof FillGradient || color instanceof FillPattern)\n        {\n            obj.fill = color as FillGradient | FillPattern;\n        }\n        // handles stroke: { color: 0x0 } or stroke: { fill: new FillGradient() }\n        else if (Object.hasOwnProperty.call(color, 'color') || Object.hasOwnProperty.call(color, 'fill'))\n        {\n            obj = color as FillStyle;\n        }\n        else\n        {\n            throw new Error('Invalid stroke value.');\n        }\n\n        style.stroke = {\n            ...obj,\n            width: oldStyle.strokeThickness\n        };\n    }\n\n    if (Array.isArray(oldStyle.fillGradientStops))\n    {\n        // #if _DEBUG\n        deprecation(v8_0_0, 'gradient fill is now a fill pattern: `new FillGradient(...)`');\n        // #endif\n\n        let fontSize: number;\n\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        if (style.fontSize == null)\n        {\n            style.fontSize = TextStyle.defaultTextStyle.fontSize;\n        }\n        else if (typeof style.fontSize === 'string')\n        {\n            // eg '34px' to number\n            fontSize = parseInt(style.fontSize as string, 10);\n        }\n        else\n        {\n            fontSize = style.fontSize as number;\n        }\n\n        const gradientFill = new FillGradient(0, 0, 0, fontSize * 1.7);\n\n        const fills: number[] = oldStyle.fillGradientStops\n            .map((color: ColorSource) => Color.shared.setValue(color).toNumber());\n\n        fills.forEach((number, index) =>\n        {\n            const ratio = index / (fills.length - 1);\n\n            gradientFill.addColorStop(ratio, number);\n        });\n\n        style.fill = {\n            fill: gradientFill\n        };\n    }\n}\n\n","import { DOMAdapter } from '../../../environment/adapter';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle';\n\nimport type { ICanvas, ICanvasRenderingContext2DSettings } from '../../../environment/canvas/ICanvas';\nimport type { ICanvasRenderingContext2D } from '../../../environment/canvas/ICanvasRenderingContext2D';\nimport type { TextStyle, TextStyleWhiteSpace } from '../TextStyle';\n\n// The type for Intl.Segmenter is only available since TypeScript 4.7.2, so let's make a polyfill for it.\ninterface ISegmentData\n{\n    segment: string;\n}\ninterface ISegments\n{\n    [Symbol.iterator](): IterableIterator<ISegmentData>;\n}\ninterface ISegmenter\n{\n    segment(input: string): ISegments;\n}\ninterface IIntl\n{\n    Segmenter?: {\n        prototype: ISegmenter;\n        new(): ISegmenter;\n    };\n}\n\n/**\n * A number, or a string containing a number.\n * @memberof text\n * @typedef {object} FontMetrics\n * @property {number} ascent - Font ascent\n * @property {number} descent - Font descent\n * @property {number} fontSize - Font size\n */\nexport interface FontMetrics\n{\n    ascent: number;\n    descent: number;\n    fontSize: number;\n}\n\ntype CharacterWidthCache = Record<string, number>;\n\n// Default settings used for all getContext calls\nconst contextSettings: ICanvasRenderingContext2DSettings = {\n    // TextMetrics requires getImageData readback for measuring fonts.\n    willReadFrequently: true,\n};\n\n/**\n * The TextMetrics object represents the measurement of a block of text with a specified style.\n * @example\n * import { TextMetrics, TextStyle } from 'pixi.js';\n *\n * const style = new TextStyle({\n *     fontFamily: 'Arial',\n *     fontSize: 24,\n *     fill: 0xff1010,\n *     align: 'center',\n * });\n * const textMetrics = TextMetrics.measureText('Your text', style);\n * @memberof text\n */\nexport class CanvasTextMetrics\n{\n    /** The text that was measured. */\n    public text: string;\n\n    /** The style that was measured. */\n    public style: TextStyle;\n\n    /** The measured width of the text. */\n    public width: number;\n\n    /** The measured height of the text. */\n    public height: number;\n\n    /** An array of lines of the text broken by new lines and wrapping is specified in style. */\n    public lines: string[];\n\n    /** An array of the line widths for each line matched to `lines`. */\n    public lineWidths: number[];\n\n    /** The measured line height for this style. */\n    public lineHeight: number;\n\n    /** The maximum line width for all measured lines. */\n    public maxLineWidth: number;\n\n    /** The font properties object from TextMetrics.measureFont. */\n    public fontProperties: FontMetrics;\n\n    /**\n     * String used for calculate font metrics.\n     * These characters are all tall to help calculate the height required for text.\n     */\n    public static METRICS_STRING = '|q';\n\n    /** Baseline symbol for calculate font metrics. */\n    public static BASELINE_SYMBOL = 'M';\n\n    /** Baseline multiplier for calculate font metrics. */\n    public static BASELINE_MULTIPLIER = 1.4;\n\n    /** Height multiplier for setting height of canvas to calculate font metrics. */\n    public static HEIGHT_MULTIPLIER = 2.0;\n\n    /**\n     * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n     * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n     * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n     * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n     * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n     * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n     * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n     * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n     * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n     */\n    public static graphemeSegmenter: (s: string) => string[] = (() =>\n    {\n        if (typeof (Intl as IIntl)?.Segmenter === 'function')\n        {\n            const segmenter = new (Intl as IIntl).Segmenter();\n\n            return (s: string) => [...segmenter.segment(s)].map((x) => x.segment);\n        }\n\n        return (s: string) => [...s];\n    })();\n\n    public static _experimentalLetterSpacingSupported?: boolean;\n\n    /**\n     * Checking that we can use modern canvas 2D API.\n     *\n     * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n     * @see TextMetrics.experimentalLetterSpacing\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n     * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n     */\n    public static get experimentalLetterSpacingSupported(): boolean\n    {\n        let result = CanvasTextMetrics._experimentalLetterSpacingSupported;\n\n        if (result !== undefined)\n        {\n            const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n\n            result\n                = CanvasTextMetrics._experimentalLetterSpacingSupported\n                = 'letterSpacing' in proto || 'textLetterSpacing' in proto;\n        }\n\n        return result;\n    }\n\n    /**\n     * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n     * lead to more accurate letter-spacing results because it does not try to manually draw\n     * each character. However, this Chrome API is experimental and may not serve all cases yet.\n     * @see TextMetrics.experimentalLetterSpacingSupported\n     */\n    public static experimentalLetterSpacing = false;\n\n    /** Cache of {@see TextMetrics.FontMetrics} objects. */\n    private static _fonts: Record<string, FontMetrics> = {};\n\n    /** Cache of new line chars. */\n    private static readonly _newlines: number[] = [\n        0x000A, // line feed\n        0x000D, // carriage return\n    ];\n\n    /** Cache of breaking spaces. */\n    private static readonly _breakingSpaces: number[] = [\n        0x0009, // character tabulation\n        0x0020, // space\n        0x2000, // en quad\n        0x2001, // em quad\n        0x2002, // en space\n        0x2003, // em space\n        0x2004, // three-per-em space\n        0x2005, // four-per-em space\n        0x2006, // six-per-em space\n        0x2008, // punctuation space\n        0x2009, // thin space\n        0x200A, // hair space\n        0x205F, // medium mathematical space\n        0x3000, // ideographic space\n    ];\n\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static __canvas: ICanvas;\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    private static __context: ICanvasRenderingContext2D;\n\n    private static readonly _measurementCache: Record<string, CanvasTextMetrics> = {};\n\n    /**\n     * @param text - the text that was measured\n     * @param style - the style that was measured\n     * @param width - the measured width of the text\n     * @param height - the measured height of the text\n     * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n     * @param lineWidths - an array of the line widths for each line matched to `lines`\n     * @param lineHeight - the measured line height for this style\n     * @param maxLineWidth - the maximum line width for all measured lines\n     * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n     */\n    constructor(text: string, style: TextStyle, width: number, height: number, lines: string[], lineWidths: number[],\n        lineHeight: number, maxLineWidth: number, fontProperties: FontMetrics)\n    {\n        this.text = text;\n        this.style = style;\n        this.width = width;\n        this.height = height;\n        this.lines = lines;\n        this.lineWidths = lineWidths;\n        this.lineHeight = lineHeight;\n        this.maxLineWidth = maxLineWidth;\n        this.fontProperties = fontProperties;\n    }\n\n    /**\n     * Measures the supplied string of text and returns a Rectangle.\n     * @param text - The text to measure.\n     * @param style - The text style to use for measuring\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @param wordWrap\n     * @returns Measured width and height of the text.\n     */\n    public static measureText(\n        text = ' ',\n        style: TextStyle,\n        canvas: ICanvas = CanvasTextMetrics._canvas,\n        wordWrap: boolean = style.wordWrap,\n    ): CanvasTextMetrics\n    {\n        const textKey = `${text}:${style.styleKey}`;\n\n        // TODO - if we find this starts to go nuts with memory, we can remove the cache\n        // or instead just stick a usage tick that we increment each time we return it.\n        // if some are not used, we can just tidy them up!\n        if (CanvasTextMetrics._measurementCache[textKey]) return CanvasTextMetrics._measurementCache[textKey];\n\n        const font = fontStringFromTextStyle(style);\n        const fontProperties = CanvasTextMetrics.measureFont(font);\n\n        // fallback in case UA disallow canvas data extraction\n        if (fontProperties.fontSize === 0)\n        {\n            fontProperties.fontSize = style.fontSize as number;\n            fontProperties.ascent = style.fontSize as number;\n        }\n\n        const context = CanvasTextMetrics.__context; // canvas.getContext('2d', contextSettings);\n\n        context.font = font;\n\n        const outputText = wordWrap ? CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n        const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n        const lineWidths = new Array<number>(lines.length);\n        let maxLineWidth = 0;\n\n        for (let i = 0; i < lines.length; i++)\n        {\n            const lineWidth = CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n\n            lineWidths[i] = lineWidth;\n            maxLineWidth = Math.max(maxLineWidth, lineWidth);\n        }\n\n        const strokeWidth = style._stroke?.width || 0;\n\n        let width = maxLineWidth + strokeWidth;\n\n        if (style.dropShadow)\n        {\n            width += style.dropShadow.distance;\n        }\n\n        const lineHeight = style.lineHeight || fontProperties.fontSize;\n\n        let height = Math.max(lineHeight, fontProperties.fontSize + (strokeWidth))\n            + ((lines.length - 1) * (lineHeight + style.leading));\n\n        if (style.dropShadow)\n        {\n            height += style.dropShadow.distance;\n        }\n\n        const measurements = new CanvasTextMetrics(\n            text,\n            style,\n            width,\n            height,\n            lines,\n            lineWidths,\n            lineHeight + style.leading,\n            maxLineWidth,\n            fontProperties\n        );\n\n        // CanvasTextMetrics._measurementCache[textKey] = measurements;\n\n        return measurements;\n    }\n\n    private static _measureText(\n        text: string,\n        letterSpacing: number,\n        context: ICanvasRenderingContext2D\n    )\n    {\n        let useExperimentalLetterSpacing = false;\n\n        if (CanvasTextMetrics.experimentalLetterSpacingSupported)\n        {\n            if (CanvasTextMetrics.experimentalLetterSpacing)\n            {\n                context.letterSpacing = `${letterSpacing}px`;\n                context.textLetterSpacing = `${letterSpacing}px`;\n                useExperimentalLetterSpacing = true;\n            }\n            else\n            {\n                context.letterSpacing = '0px';\n                context.textLetterSpacing = '0px';\n            }\n        }\n\n        const metrics = context.measureText(text);\n        let metricWidth = metrics.width;\n        const actualBoundingBoxLeft = -metrics.actualBoundingBoxLeft;\n        const actualBoundingBoxRight = metrics.actualBoundingBoxRight;\n        let boundsWidth = actualBoundingBoxRight - actualBoundingBoxLeft;\n\n        if (metricWidth > 0)\n        {\n            if (useExperimentalLetterSpacing)\n            {\n                metricWidth -= letterSpacing;\n                boundsWidth -= letterSpacing;\n            }\n            else\n            {\n                const val = (CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n\n                metricWidth += val;\n                boundsWidth += val;\n            }\n        }\n\n        // NOTE: this is a bit of a hack as metrics.width and the bounding box width do not measure the same thing\n        // We can't seem to exclusively use one or the other, so are taking the largest of the two\n        return Math.max(metricWidth, boundsWidth);\n    }\n\n    /**\n     * Applies newlines to a string to have it optimally fit into the horizontal\n     * bounds set by the Text object's wordWrapWidth property.\n     * @param text - String to apply word wrapping to\n     * @param style - the style to use when wrapping\n     * @param canvas - optional specification of the canvas to use for measuring.\n     * @returns New string with new lines applied where required\n     */\n    private static _wordWrap(\n        text: string,\n        style: TextStyle,\n        canvas: ICanvas = CanvasTextMetrics._canvas\n    ): string\n    {\n        const context = canvas.getContext('2d', contextSettings);\n\n        let width = 0;\n        let line = '';\n        let lines = '';\n\n        const cache: CharacterWidthCache = Object.create(null);\n        const { letterSpacing, whiteSpace } = style;\n\n        // How to handle whitespaces\n        const collapseSpaces = CanvasTextMetrics._collapseSpaces(whiteSpace);\n        const collapseNewlines = CanvasTextMetrics._collapseNewlines(whiteSpace);\n\n        // whether or not spaces may be added to the beginning of lines\n        let canPrependSpaces = !collapseSpaces;\n\n        // There is letterSpacing after every char except the last one\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!\n        // so for convenience the above needs to be compared to width + 1 extra letterSpace\n        // t_h_i_s_' '_i_s_' '_a_n_' '_e_x_a_m_p_l_e_' '_!_\n        // ________________________________________________\n        // And then the final space is simply no appended to each line\n        const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n\n        // break text into words, spaces and newline chars\n        const tokens = CanvasTextMetrics._tokenize(text);\n\n        for (let i = 0; i < tokens.length; i++)\n        {\n            // get the word, space or newlineChar\n            let token = tokens[i];\n\n            // if word is a new line\n            if (CanvasTextMetrics._isNewline(token))\n            {\n                // keep the new line\n                if (!collapseNewlines)\n                {\n                    lines += CanvasTextMetrics._addLine(line);\n                    canPrependSpaces = !collapseSpaces;\n                    line = '';\n                    width = 0;\n                    continue;\n                }\n\n                // if we should collapse new lines\n                // we simply convert it into a space\n                token = ' ';\n            }\n\n            // if we should collapse repeated whitespaces\n            if (collapseSpaces)\n            {\n                // check both this and the last tokens for spaces\n                const currIsBreakingSpace = CanvasTextMetrics.isBreakingSpace(token);\n                const lastIsBreakingSpace = CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n\n                if (currIsBreakingSpace && lastIsBreakingSpace)\n                {\n                    continue;\n                }\n            }\n\n            // get word width from cache if possible\n            const tokenWidth = CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n\n            // word is longer than desired bounds\n            if (tokenWidth > wordWrapWidth)\n            {\n                // if we are not already at the beginning of a line\n                if (line !== '')\n                {\n                    // start newlines for overflow words\n                    lines += CanvasTextMetrics._addLine(line);\n                    line = '';\n                    width = 0;\n                }\n\n                // break large word over multiple lines\n                if (CanvasTextMetrics.canBreakWords(token, style.breakWords))\n                {\n                    // break word into characters\n                    const characters = CanvasTextMetrics.wordWrapSplit(token);\n\n                    // loop the characters\n                    for (let j = 0; j < characters.length; j++)\n                    {\n                        let char = characters[j];\n                        let lastChar = char;\n\n                        let k = 1;\n\n                        // we are not at the end of the token\n                        while (characters[j + k])\n                        {\n                            const nextChar = characters[j + k];\n\n                            // should not split chars\n                            if (!CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords))\n                            {\n                                // combine chars & move forward one\n                                char += nextChar;\n                            }\n                            else\n                            {\n                                break;\n                            }\n\n                            lastChar = nextChar;\n                            k++;\n                        }\n\n                        j += k - 1;\n\n                        const characterWidth = CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n\n                        if (characterWidth + width > wordWrapWidth)\n                        {\n                            lines += CanvasTextMetrics._addLine(line);\n                            canPrependSpaces = false;\n                            line = '';\n                            width = 0;\n                        }\n\n                        line += char;\n                        width += characterWidth;\n                    }\n                }\n\n                // run word out of the bounds\n                else\n                {\n                    // if there are words in this line already\n                    // finish that line and start a new one\n                    if (line.length > 0)\n                    {\n                        lines += CanvasTextMetrics._addLine(line);\n                        line = '';\n                        width = 0;\n                    }\n\n                    const isLastToken = i === tokens.length - 1;\n\n                    // give it its own line if it's not the end\n                    lines += CanvasTextMetrics._addLine(token, !isLastToken);\n                    canPrependSpaces = false;\n                    line = '';\n                    width = 0;\n                }\n            }\n\n            // word could fit\n            else\n            {\n                // word won't fit because of existing words\n                // start a new line\n                if (tokenWidth + width > wordWrapWidth)\n                {\n                    // if its a space we don't want it\n                    canPrependSpaces = false;\n\n                    // add a new line\n                    lines += CanvasTextMetrics._addLine(line);\n\n                    // start a new line\n                    line = '';\n                    width = 0;\n                }\n\n                // don't add spaces to the beginning of lines\n                if (line.length > 0 || !CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces)\n                {\n                    // add the word to the current line\n                    line += token;\n\n                    // update width counter\n                    width += tokenWidth;\n                }\n            }\n        }\n\n        lines += CanvasTextMetrics._addLine(line, false);\n\n        return lines;\n    }\n\n    /**\n     * Convenience function for logging each line added during the wordWrap method.\n     * @param line    - The line of text to add\n     * @param newLine - Add new line character to end\n     * @returns A formatted line\n     */\n    private static _addLine(line: string, newLine = true): string\n    {\n        line = CanvasTextMetrics._trimRight(line);\n\n        line = (newLine) ? `${line}\\n` : line;\n\n        return line;\n    }\n\n    /**\n     * Gets & sets the widths of calculated characters in a cache object\n     * @param key            - The key\n     * @param letterSpacing  - The letter spacing\n     * @param cache          - The cache\n     * @param context        - The canvas context\n     * @returns The from cache.\n     */\n    private static _getFromCache(key: string, letterSpacing: number, cache: CharacterWidthCache,\n        context: ICanvasRenderingContext2D): number\n    {\n        let width = cache[key];\n\n        if (typeof width !== 'number')\n        {\n            width = CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n            cache[key] = width;\n        }\n\n        return width;\n    }\n\n    /**\n     * Determines whether we should collapse breaking spaces.\n     * @param whiteSpace - The TextStyle property whiteSpace\n     * @returns Should collapse\n     */\n    private static _collapseSpaces(whiteSpace: TextStyleWhiteSpace): boolean\n    {\n        return (whiteSpace === 'normal' || whiteSpace === 'pre-line');\n    }\n\n    /**\n     * Determines whether we should collapse newLine chars.\n     * @param whiteSpace - The white space\n     * @returns should collapse\n     */\n    private static _collapseNewlines(whiteSpace: TextStyleWhiteSpace): boolean\n    {\n        return (whiteSpace === 'normal');\n    }\n\n    /**\n     * Trims breaking whitespaces from string.\n     * @param text - The text\n     * @returns Trimmed string\n     */\n    private static _trimRight(text: string): string\n    {\n        if (typeof text !== 'string')\n        {\n            return '';\n        }\n\n        for (let i = text.length - 1; i >= 0; i--)\n        {\n            const char = text[i];\n\n            if (!CanvasTextMetrics.isBreakingSpace(char))\n            {\n                break;\n            }\n\n            text = text.slice(0, -1);\n        }\n\n        return text;\n    }\n\n    /**\n     * Determines if char is a newline.\n     * @param char - The character\n     * @returns True if newline, False otherwise.\n     */\n    private static _isNewline(char: string): boolean\n    {\n        if (typeof char !== 'string')\n        {\n            return false;\n        }\n\n        return CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n    }\n\n    /**\n     * Determines if char is a breaking whitespace.\n     *\n     * It allows one to determine whether char should be a breaking whitespace\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param char - The character\n     * @param [_nextChar] - The next character\n     * @returns True if whitespace, False otherwise.\n     */\n    public static isBreakingSpace(char: string, _nextChar?: string): boolean\n    {\n        if (typeof char !== 'string')\n        {\n            return false;\n        }\n\n        return CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n    }\n\n    /**\n     * Splits a string into words, breaking-spaces and newLine characters\n     * @param text - The text\n     * @returns A tokenized array\n     */\n    private static _tokenize(text: string): string[]\n    {\n        const tokens: string[] = [];\n        let token = '';\n\n        if (typeof text !== 'string')\n        {\n            return tokens;\n        }\n\n        for (let i = 0; i < text.length; i++)\n        {\n            const char = text[i];\n            const nextChar = text[i + 1];\n\n            if (CanvasTextMetrics.isBreakingSpace(char, nextChar) || CanvasTextMetrics._isNewline(char))\n            {\n                if (token !== '')\n                {\n                    tokens.push(token);\n                    token = '';\n                }\n\n                tokens.push(char);\n\n                continue;\n            }\n\n            token += char;\n        }\n\n        if (token !== '')\n        {\n            tokens.push(token);\n        }\n\n        return tokens;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to customise which words should break\n     * Examples are if the token is CJK or numbers.\n     * It must return a boolean.\n     * @param _token - The token\n     * @param breakWords - The style attr break words\n     * @returns Whether to break word or not\n     */\n    public static canBreakWords(_token: string, breakWords: boolean): boolean\n    {\n        return breakWords;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It allows one to determine whether a pair of characters\n     * should be broken by newlines\n     * For example certain characters in CJK langs or numbers.\n     * It must return a boolean.\n     * @param _char - The character\n     * @param _nextChar - The next character\n     * @param _token - The token/word the characters are from\n     * @param _index - The index in the token of the char\n     * @param _breakWords - The style attr break words\n     * @returns whether to break word or not\n     */\n    public static canBreakChars(_char: string, _nextChar: string, _token: string, _index: number,\n        _breakWords: boolean): boolean\n    {\n        return true;\n    }\n\n    /**\n     * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n     *\n     * It is called when a token (usually a word) has to be split into separate pieces\n     * in order to determine the point to break a word.\n     * It must return an array of characters.\n     * @param token - The token to split\n     * @returns The characters of the token\n     * @see CanvasTextMetrics.graphemeSegmenter\n     */\n    public static wordWrapSplit(token: string): string[]\n    {\n        return CanvasTextMetrics.graphemeSegmenter(token);\n    }\n\n    /**\n     * Calculates the ascent, descent and fontSize of a given font-style\n     * @param font - String representing the style of the font\n     * @returns Font properties object\n     */\n    public static measureFont(font: string): FontMetrics\n    {\n        // as this method is used for preparing assets, don't recalculate things if we don't need to\n        if (CanvasTextMetrics._fonts[font])\n        {\n            return CanvasTextMetrics._fonts[font];\n        }\n\n        const context = CanvasTextMetrics._context;\n\n        context.font = font;\n        const metrics = context.measureText(CanvasTextMetrics.METRICS_STRING + CanvasTextMetrics.BASELINE_SYMBOL);\n\n        const properties = {\n            ascent: metrics.actualBoundingBoxAscent,\n            descent: metrics.actualBoundingBoxDescent,\n            fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n        };\n\n        CanvasTextMetrics._fonts[font] = properties;\n\n        return properties;\n    }\n\n    /**\n     * Clear font metrics in metrics cache.\n     * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n     */\n    public static clearMetrics(font = ''): void\n    {\n        if (font)\n        {\n            delete CanvasTextMetrics._fonts[font];\n        }\n        else\n        {\n            CanvasTextMetrics._fonts = {};\n        }\n    }\n\n    /**\n     * Cached canvas element for measuring text\n     * TODO: this should be private, but isn't because of backward compat, will fix later.\n     * @ignore\n     */\n    public static get _canvas(): ICanvas\n    {\n        if (!CanvasTextMetrics.__canvas)\n        {\n            let canvas: ICanvas;\n\n            try\n            {\n                // OffscreenCanvas2D measureText can be up to 40% faster.\n                const c = new OffscreenCanvas(0, 0);\n                const context = c.getContext('2d', contextSettings);\n\n                if (context?.measureText)\n                {\n                    CanvasTextMetrics.__canvas = c as ICanvas;\n\n                    return c as ICanvas;\n                }\n\n                canvas = DOMAdapter.get().createCanvas();\n            }\n            catch (ex)\n            {\n                canvas = DOMAdapter.get().createCanvas();\n            }\n            canvas.width = canvas.height = 10;\n            CanvasTextMetrics.__canvas = canvas;\n        }\n\n        return CanvasTextMetrics.__canvas;\n    }\n\n    /**\n     * TODO: this should be private, but isn't because of backward compat, will fix later.\n     * @ignore\n     */\n    public static get _context(): ICanvasRenderingContext2D\n    {\n        if (!CanvasTextMetrics.__context)\n        {\n            CanvasTextMetrics.__context = CanvasTextMetrics._canvas.getContext('2d', contextSettings);\n        }\n\n        return CanvasTextMetrics.__context;\n    }\n}\n","import type { TextStyle } from '../../TextStyle';\n\nconst genericFontFamilies = [\n    'serif',\n    'sans-serif',\n    'monospace',\n    'cursive',\n    'fantasy',\n    'system-ui',\n];\n\n/**\n * Generates a font style string to use for `TextMetrics.measureFont()`.\n * @param style\n * @returns Font style string, for passing to `TextMetrics.measureFont()`\n */\nexport function fontStringFromTextStyle(style: TextStyle): string\n{\n    // build canvas api font setting from individual components. Convert a numeric style.fontSize to px\n    const fontSizeString = (typeof style.fontSize === 'number') ? `${style.fontSize}px` : style.fontSize;\n\n    // Clean-up fontFamily property by quoting each font name\n    // this will support font names with spaces\n    let fontFamilies: string | string[] = style.fontFamily;\n\n    if (!Array.isArray(style.fontFamily))\n    {\n        fontFamilies = style.fontFamily.split(',');\n    }\n\n    for (let i = fontFamilies.length - 1; i >= 0; i--)\n    {\n        // Trim any extra white-space\n        let fontFamily = fontFamilies[i].trim();\n\n        // Check if font already contains strings\n        if (!(/([\\\"\\'])[^\\'\\\"]+\\1/).test(fontFamily) && !genericFontFamilies.includes(fontFamily))\n        {\n            fontFamily = `\"${fontFamily}\"`;\n        }\n        (fontFamilies as string[])[i] = fontFamily;\n    }\n\n    // eslint-disable-next-line max-len\n    return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${(fontFamilies as string[]).join(',')}`;\n}\n","import { Color } from '../../../../color/Color';\nimport { Matrix } from '../../../../maths/matrix/Matrix';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture';\nimport { warn } from '../../../../utils/logging/warn';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern';\n\nimport type { ICanvasRenderingContext2D } from '../../../../environment/canvas/ICanvasRenderingContext2D';\nimport type { ConvertedFillStyle } from '../../../graphics/shared/FillTypes';\n\nexport function getCanvasFillStyle(\n    fillStyle: ConvertedFillStyle,\n    context: ICanvasRenderingContext2D): string | CanvasGradient | CanvasPattern\n{\n    if (fillStyle.texture === Texture.WHITE && !fillStyle.fill)\n    {\n        return Color.shared.setValue(fillStyle.color).setAlpha(fillStyle.alpha ?? 1).toHexa();\n    }\n    else if (!fillStyle.fill)\n    {\n        // fancy set up...\n        const pattern = context.createPattern(fillStyle.texture.source.resource, 'repeat');\n\n        // create an inverted scale matrix..\n        const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n\n        tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n\n        pattern.setTransform(tempMatrix);\n\n        return pattern;\n    }\n    else if (fillStyle.fill instanceof FillPattern)\n    {\n        const fillPattern = fillStyle.fill;\n\n        const pattern = context.createPattern(fillPattern.texture.source.resource, 'repeat');\n\n        const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n\n        tempMatrix.scale(\n            fillPattern.texture.frame.width,\n            fillPattern.texture.frame.height\n        );\n\n        pattern.setTransform(tempMatrix);\n\n        return pattern;\n    }\n    else if (fillStyle.fill instanceof FillGradient)\n    {\n        const fillGradient = fillStyle.fill;\n\n        if (fillGradient.type === 'linear')\n        {\n            const gradient = context.createLinearGradient(\n                fillGradient.x0,\n                fillGradient.y0,\n                fillGradient.x1,\n                fillGradient.y1\n            );\n\n            fillGradient.gradientStops.forEach((stop) =>\n            {\n                gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n            });\n\n            return gradient;\n        }\n    }\n\n    // #if _DEBUG\n    warn('FillStyle not recognised', fillStyle);\n    // #endif\n\n    return 'red';\n}\n","import { Color } from '../../../color/Color';\n\nimport type { ConvertedFillStyle, ConvertedStrokeStyle } from '../../graphics/shared/FillTypes';\nimport type { HTMLTextStyle } from '../../text-html/HtmlTextStyle';\nimport type { TextStyle } from '../TextStyle';\n\nconst valuesToIterateForKeys: Partial<keyof TextStyle | keyof HTMLTextStyle>[] = [\n    'align',\n    'breakWords',\n    'cssOverrides',\n    'fontVariant',\n    'fontWeight',\n    'leading',\n    'letterSpacing',\n    'lineHeight',\n    'padding',\n    'textBaseline',\n    'trim',\n    'whiteSpace',\n    'wordWrap',\n    'wordWrapWidth',\n    'fontFamily',\n    'fontStyle',\n    'fontSize',\n] as const;\n\n/**\n * Generates a unique key for the text style.\n * @param style - The style to generate a key for.\n * @returns the key for the style.\n */\nexport function generateTextStyleKey(style: TextStyle): string\n{\n    const key = [];\n\n    let index = 0;\n\n    for (let i = 0; i < valuesToIterateForKeys.length; i++)\n    {\n        const prop = `_${valuesToIterateForKeys[i]}`;\n\n        key[index++] = style[prop as keyof typeof style];\n    }\n\n    index = addFillStyleKey(style._fill, key as string[], index);\n    index = addStokeStyleKey(style._stroke, key as string[], index);\n    index = addDropShadowKey(style.dropShadow, key as string[], index);\n\n    return key.join('-');\n}\n\nfunction addFillStyleKey(fillStyle: ConvertedFillStyle, key: (number | string)[], index: number)\n{\n    if (!fillStyle) return index;\n\n    key[index++] = fillStyle.color;\n    key[index++] = fillStyle.alpha;\n    key[index++] = fillStyle.fill?.styleKey;\n\n    return index;\n}\n\nfunction addStokeStyleKey(strokeStyle: ConvertedStrokeStyle, key: (number | string)[], index: number)\n{\n    if (!strokeStyle) return index;\n\n    index = addFillStyleKey(strokeStyle, key, index);\n\n    key[index++] = strokeStyle.width;\n    key[index++] = strokeStyle.alignment;\n    key[index++] = strokeStyle.cap;\n    key[index++] = strokeStyle.join;\n    key[index++] = strokeStyle.miterLimit;\n\n    return index;\n}\n\nfunction addDropShadowKey(dropShadow: TextStyle['dropShadow'], key: (number | string)[], index: number)\n{\n    if (!dropShadow) return index;\n\n    key[index++] = dropShadow.alpha;\n    key[index++] = dropShadow.angle;\n    key[index++] = dropShadow.blur;\n    key[index++] = dropShadow.distance;\n    key[index++] = Color.shared.setValue(dropShadow.color).toNumber();\n\n    return index;\n}\n","import { Bounds } from '../container/bounds/Bounds';\nimport { Container } from '../container/Container';\n\nimport type { PointData } from '../../maths/point/PointData';\nimport type { View } from '../../rendering/renderers/shared/view/View';\nimport type { BoundsData } from '../container/bounds/Bounds';\nimport type { DestroyOptions } from '../container/destroyTypes';\n\n/**\n * A ViewContainer is a type of container that represents a view.\n * This view can be a Sprite, a Graphics object, or any other object that can be rendered.\n * This class is abstract and should not be used directly.\n * @memberof scene\n */\nexport abstract class ViewContainer extends Container implements View\n{\n    /** @private */\n    public override readonly renderPipeId: string;\n    /** @private */\n    public readonly canBundle = true;\n    /** @private */\n    public override allowChildren = false;\n\n    /** @private */\n    public _roundPixels: 0 | 1 = 0;\n    /** @private */\n    public _lastUsed = 0;\n    /** @private */\n    public _lastInstructionTick = -1;\n\n    protected _bounds: Bounds = new Bounds(0, 1, 0, 0);\n    protected _boundsDirty = true;\n\n    /**\n     * The local bounds of the view.\n     * @type {rendering.Bounds}\n     */\n    public abstract get bounds(): BoundsData;\n    /** @private */\n    public abstract addBounds(bounds: Bounds): void;\n    /** @private */\n    protected _updateBounds(): void\n    {\n        // override this\n    }\n\n    /**\n     * Whether or not to round the x/y position of the sprite.\n     * @type {boolean}\n     */\n    get roundPixels()\n    {\n        return !!this._roundPixels;\n    }\n\n    set roundPixels(value: boolean)\n    {\n        this._roundPixels = value ? 1 : 0;\n    }\n\n    /**\n     * Checks if the object contains the given point.\n     * @param point - The point to check\n     */\n    public containsPoint(point: PointData)\n    {\n        const bounds = this.bounds;\n        const { x, y } = point;\n\n        return (x >= bounds.minX\n            && x <= bounds.maxX\n            && y >= bounds.minY\n            && y <= bounds.maxY);\n    }\n\n    /** @private */\n    public abstract batched: boolean;\n\n    /** @private */\n    protected onViewUpdate()\n    {\n        this._didViewChangeTick++;\n\n        if (this.didViewUpdate) return;\n        this.didViewUpdate = true;\n\n        const renderGroup = this.renderGroup || this.parentRenderGroup;\n\n        if (renderGroup)\n        {\n            renderGroup.onChildViewUpdate(this);\n        }\n    }\n\n    public override destroy(options?: DestroyOptions): void\n    {\n        super.destroy(options);\n\n        this._bounds = null;\n    }\n}\n","import { Rectangle } from '../maths/shapes/Rectangle';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\n\nimport type { PointData } from '../maths/point/PointData';\nimport type { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource';\nimport type { BindableTexture, TextureBorders } from '../rendering/renderers/shared/texture/Texture';\nimport type { Dict } from '../utils/types';\n\n/**\n * Represents the JSON data for a spritesheet atlas.\n * @memberof assets\n */\nexport interface SpritesheetFrameData\n{\n    /** The frame rectangle of the texture. */\n    frame: {\n        x: number;\n        y: number;\n        w: number;\n        h: number;\n    };\n    /** Whether the texture is trimmed. */\n    trimmed?: boolean;\n    /** Whether the texture is rotated. */\n    rotated?: boolean;\n    /** The source size of the texture. */\n    sourceSize?: {\n        w: number;\n        h: number;\n    };\n    /** The sprite source size. */\n    spriteSourceSize?: {\n        h?: number;\n        w?: number;\n        x: number;\n        y: number;\n    };\n    /** The anchor point of the texture. */\n    anchor?: PointData;\n    /** The 9-slice borders of the texture. */\n    borders?: TextureBorders\n}\n\n/**\n * Atlas format.\n * @memberof assets\n */\nexport interface SpritesheetData\n{\n    /** The frames of the atlas. */\n    frames: Dict<SpritesheetFrameData>;\n    /** The animations of the atlas. */\n    animations?: Dict<string[]>;\n    /** The meta data of the atlas. */\n    meta: {\n        app?: string;\n        format?: string;\n        frameTags?: {\n            from: number;\n            name: string;\n            to: number;\n            direction: string;\n        }[];\n        image?: string;\n        layers?: {\n            blendMode: string;\n            name: string;\n            opacity: number;\n        }[];\n        scale: number | string;\n        size?: {\n            h: number;\n            w: number;\n        };\n        slices?: {\n            color: string;\n            name: string;\n            keys: {\n                frame: number,\n                bounds: {\n                    x: number;\n                    y: number;\n                    w: number;\n                    h: number;\n                };\n            }[];\n        }[];\n        // eslint-disable-next-line camelcase\n        related_multi_packs?: string[];\n        version?: string;\n    };\n}\n\n/**\n * Utility class for maintaining reference to a collection\n * of Textures on a single Spritesheet.\n *\n * To access a sprite sheet from your code you may pass its JSON data file to Pixi's loader:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * const sheet = await Assets.load('images/spritesheet.json');\n * ```\n *\n * Alternately, you may circumvent the loader by instantiating the Spritesheet directly:\n *\n * ```js\n * import { Spritesheet } from 'pixi.js';\n *\n * const sheet = new Spritesheet(texture, spritesheetData);\n * await sheet.parse();\n * console.log('Spritesheet ready to use!');\n * ```\n *\n * With the `sheet.textures` you can create Sprite objects, and `sheet.animations` can be used to create an AnimatedSprite.\n *\n * Here's an example of a sprite sheet JSON data file:\n * ```json\n * {\n *     \"frames\": {\n *         \"enemy1.png\":\n *         {\n *             \"frame\": {\"x\":103,\"y\":1,\"w\":32,\"h\":32},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":32,\"h\":32},\n *             \"sourceSize\": {\"w\":32,\"h\":32},\n *             \"anchor\": {\"x\":16,\"y\":16}\n *         },\n *         \"enemy2.png\":\n *         {\n *             \"frame\": {\"x\":103,\"y\":35,\"w\":32,\"h\":32},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":32,\"h\":32},\n *             \"sourceSize\": {\"w\":32,\"h\":32},\n *             \"anchor\": {\"x\":16,\"y\":16}\n *         },\n *         \"button.png\":\n *         {\n *             \"frame\": {\"x\":1,\"y\":1,\"w\":100,\"h\":100},\n *             \"spriteSourceSize\": {\"x\":0,\"y\":0,\"w\":100,\"h\":100},\n *             \"sourceSize\": {\"w\":100,\"h\":100},\n *             \"anchor\": {\"x\":0,\"y\":0},\n *             \"borders\": {\"left\":35,\"top\":35,\"right\":35,\"bottom\":35}\n *         }\n *     },\n *\n *     \"animations\": {\n *         \"enemy\": [\"enemy1.png\",\"enemy2.png\"]\n *     },\n *\n *     \"meta\": {\n *         \"image\": \"sheet.png\",\n *         \"format\": \"RGBA8888\",\n *         \"size\": {\"w\":136,\"h\":102},\n *         \"scale\": \"1\"\n *     }\n * }\n * ```\n * Sprite sheets can be packed using tools like {@link https://codeandweb.com/texturepacker|TexturePacker},\n * {@link https://renderhjs.net/shoebox/|Shoebox} or {@link https://github.com/krzysztof-o/spritesheet.js|Spritesheet.js}.\n * Default anchor points (see {@link Texture#defaultAnchor}), default 9-slice borders\n * (see {@link Texture#defaultBorders}) and grouping of animation sprites are currently only\n * supported by TexturePacker.\n *\n * Alternative ways for loading spritesheet image if you need more control:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * const sheetTexture = await Assets.load('images/spritesheet.png');\n * Assets.add({\n *     alias: 'atlas',\n *     src: 'images/spritesheet.json',\n *     data: {texture: sheetTexture} // using of preloaded texture\n * });\n * const sheet = await Assets.load('atlas')\n * ```\n *\n * or:\n *\n * ```js\n * import { Assets } from 'pixi.js';\n *\n * Assets.add({\n *     alias: 'atlas',\n *     src: 'images/spritesheet.json',\n *     data: {imageFilename: 'my-spritesheet.2x.avif'} // using of custom filename located in \"images/my-spritesheet.2x.avif\"\n * });\n * const sheet = await Assets.load('atlas')\n * ```\n * @memberof assets\n */\nexport class Spritesheet<S extends SpritesheetData = SpritesheetData>\n{\n    /** The maximum number of Textures to build per process. */\n    public static readonly BATCH_SIZE = 1000;\n\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    public linkedSheets: Spritesheet<S>[] = [];\n\n    /** Reference to the source texture. */\n    public textureSource: TextureSource;\n\n    /**\n     * A map containing all textures of the sprite sheet.\n     * Can be used to create a {@link Sprite|Sprite}:\n     * @example\n     * import { Sprite } from 'pixi.js';\n     *\n     * new Sprite(sheet.textures['image.png']);\n     */\n    public textures: Record<keyof S['frames'], Texture>;\n\n    /**\n     * A map containing the textures for each animation.\n     * Can be used to create an {@link AnimatedSprite|AnimatedSprite}:\n     * @example\n     * import { AnimatedSprite } from 'pixi.js';\n     *\n     * new AnimatedSprite(sheet.animations['anim_name']);\n     */\n    public animations: Record<keyof NonNullable<S['animations']>, Texture[]>;\n\n    /**\n     * Reference to the original JSON data.\n     * @type {object}\n     */\n    public data: S;\n\n    /** The resolution of the spritesheet. */\n    public resolution: number;\n\n    /**\n     * Reference to original source image from the Loader. This reference is retained so we\n     * can destroy the Texture later on. It is never used internally.\n     */\n    private _texture: Texture;\n\n    /**\n     * Map of spritesheet frames.\n     * @type {object}\n     */\n    private _frames: S['frames'];\n\n    /** Collection of frame names. */\n    private _frameKeys: (keyof S['frames'])[];\n\n    /** Current batch index being processed. */\n    private _batchIndex: number;\n\n    /**\n     * Callback when parse is completed.\n     * @type {Function}\n     */\n    private _callback: (textures: Dict<Texture>) => void;\n\n    /**\n     * @param texture - Reference to the source BaseTexture object.\n     * @param {object} data - Spritesheet image data.\n     */\n    constructor(texture: BindableTexture, data: S)\n    {\n        this._texture = texture instanceof Texture ? texture : null;\n        this.textureSource = texture.source;\n        this.textures = {} as Record<keyof S['frames'], Texture>;\n        this.animations = {} as Record<keyof NonNullable<S['animations']>, Texture[]>;\n        this.data = data;\n\n        const metaResolution = parseFloat(data.meta.scale as string);\n\n        if (metaResolution)\n        {\n            this.resolution = metaResolution;\n            texture.source.resolution = this.resolution;\n        }\n        else\n        {\n            this.resolution = texture.source._resolution;\n        }\n\n        this._frames = this.data.frames;\n        this._frameKeys = Object.keys(this._frames);\n        this._batchIndex = 0;\n        this._callback = null;\n    }\n\n    /**\n     * Parser spritesheet from loaded data. This is done asynchronously\n     * to prevent creating too many Texture within a single process.\n     */\n    public parse(): Promise<Record<string, Texture>>\n    {\n        return new Promise((resolve) =>\n        {\n            this._callback = resolve;\n            this._batchIndex = 0;\n\n            if (this._frameKeys.length <= Spritesheet.BATCH_SIZE)\n            {\n                this._processFrames(0);\n                this._processAnimations();\n                this._parseComplete();\n            }\n            else\n            {\n                this._nextBatch();\n            }\n        });\n    }\n\n    /**\n     * Process a batch of frames\n     * @param initialFrameIndex - The index of frame to start.\n     */\n    private _processFrames(initialFrameIndex: number): void\n    {\n        let frameIndex = initialFrameIndex;\n        const maxFrames = Spritesheet.BATCH_SIZE;\n\n        while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length)\n        {\n            const i = this._frameKeys[frameIndex];\n            const data = this._frames[i];\n            const rect = data.frame;\n\n            if (rect)\n            {\n                let frame = null;\n                let trim = null;\n                const sourceSize = data.trimmed !== false && data.sourceSize\n                    ? data.sourceSize : data.frame;\n\n                const orig = new Rectangle(\n                    0,\n                    0,\n                    Math.floor(sourceSize.w) / this.resolution,\n                    Math.floor(sourceSize.h) / this.resolution\n                );\n\n                if (data.rotated)\n                {\n                    frame = new Rectangle(\n                        Math.floor(rect.x) / this.resolution,\n                        Math.floor(rect.y) / this.resolution,\n                        Math.floor(rect.h) / this.resolution,\n                        Math.floor(rect.w) / this.resolution\n                    );\n                }\n                else\n                {\n                    frame = new Rectangle(\n                        Math.floor(rect.x) / this.resolution,\n                        Math.floor(rect.y) / this.resolution,\n                        Math.floor(rect.w) / this.resolution,\n                        Math.floor(rect.h) / this.resolution\n                    );\n                }\n\n                //  Check to see if the sprite is trimmed\n                if (data.trimmed !== false && data.spriteSourceSize)\n                {\n                    trim = new Rectangle(\n                        Math.floor(data.spriteSourceSize.x) / this.resolution,\n                        Math.floor(data.spriteSourceSize.y) / this.resolution,\n                        Math.floor(rect.w) / this.resolution,\n                        Math.floor(rect.h) / this.resolution\n                    );\n                }\n\n                this.textures[i] = new Texture({\n                    source: this.textureSource,\n\n                    frame,\n                    orig,\n                    trim,\n                    rotate: data.rotated ? 2 : 0,\n                    defaultAnchor: data.anchor,\n                    defaultBorders: data.borders,\n\n                    label: i.toString(),\n                });\n            }\n\n            frameIndex++;\n        }\n    }\n\n    /** Parse animations config. */\n    private _processAnimations(): void\n    {\n        const animations = this.data.animations || {};\n\n        for (const animName in animations)\n        {\n            this.animations[animName as keyof S['animations']] = [];\n            for (let i = 0; i < animations[animName].length; i++)\n            {\n                const frameName = animations[animName][i];\n\n                this.animations[animName].push(this.textures[frameName]);\n            }\n        }\n    }\n\n    /** The parse has completed. */\n    private _parseComplete(): void\n    {\n        const callback = this._callback;\n\n        this._callback = null;\n        this._batchIndex = 0;\n        callback.call(this, this.textures);\n    }\n\n    /** Begin the next batch of textures. */\n    private _nextBatch(): void\n    {\n        this._processFrames(this._batchIndex * Spritesheet.BATCH_SIZE);\n        this._batchIndex++;\n        setTimeout(() =>\n        {\n            if (this._batchIndex * Spritesheet.BATCH_SIZE < this._frameKeys.length)\n            {\n                this._nextBatch();\n            }\n            else\n            {\n                this._processAnimations();\n                this._parseComplete();\n            }\n        }, 0);\n    }\n\n    /**\n     * Destroy Spritesheet and don't use after this.\n     * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n     */\n    public destroy(destroyBase = false): void\n    {\n        for (const i in this.textures)\n        {\n            this.textures[i].destroy();\n        }\n        this._frames = null;\n        this._frameKeys = null;\n        this.data = null;\n        this.textures = null;\n        if (destroyBase)\n        {\n            this._texture?.destroy();\n            this.textureSource.destroy();\n        }\n        this._texture = null;\n        this.textureSource = null;\n        this.linkedSheets = [];\n    }\n}\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser';\nimport { Resolver } from '../assets/resolver/Resolver';\nimport { copySearchParams } from '../assets/utils/copySearchParams';\nimport { ExtensionType } from '../extensions/Extensions';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture';\nimport { path } from '../utils/path';\nimport { Spritesheet } from './Spritesheet';\n\nimport type { AssetExtensionAdvanced } from '../assets/AssetExtension';\nimport type { Loader } from '../assets/loader/Loader';\nimport type { ResolvedAsset } from '../assets/types';\nimport type { SpritesheetData } from './Spritesheet';\n\nexport interface SpriteSheetJson extends SpritesheetData\n{\n    meta: {\n        image: string;\n        scale: string;\n        // eslint-disable-next-line camelcase\n        related_multi_packs?: string[];\n    };\n}\n\nconst validImages = ['jpg', 'png', 'jpeg', 'avif', 'webp',\n    'basis', 'etc2', 'bc7', 'bc6h', 'bc5', 'bc4', 'bc3', 'bc2', 'bc1', 'eac', 'astc'];\n\nfunction getCacheableAssets(keys: string[], asset: Spritesheet, ignoreMultiPack: boolean)\n{\n    const out: Record<string, any> = {};\n\n    keys.forEach((key: string) =>\n    {\n        out[key] = asset;\n    });\n\n    Object.keys(asset.textures).forEach((key) =>\n    {\n        out[key] = asset.textures[key];\n    });\n\n    if (!ignoreMultiPack)\n    {\n        const basePath = path.dirname(keys[0]);\n\n        asset.linkedSheets.forEach((item: Spritesheet, i) =>\n        {\n            const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n\n            Object.assign(out, out2);\n        });\n    }\n\n    return out;\n}\n\n/**\n * Asset extension for loading spritesheets\n * @example\n * import { Assets } from 'pixi.js';\n *\n * Assets.load({\n *     alias: 'spritesheet',\n *     src: 'path/to/spritesheet.json',\n *     data: {\n *         ignoreMultiPack: true,\n *     }\n * })\n * @type {AssetExtension}\n * @memberof assets\n */\nexport const spritesheetAsset = {\n    extension: ExtensionType.Asset,\n    /** Handle the caching of the related Spritesheet Textures */\n    cache: {\n        test: (asset: Spritesheet) => asset instanceof Spritesheet,\n        getCacheableAssets: (keys: string[], asset: Spritesheet) => getCacheableAssets(keys, asset, false),\n    },\n    /** Resolve the resolution of the asset. */\n    resolver: {\n        extension: {\n            type: ExtensionType.ResolveParser,\n            name: 'resolveSpritesheet',\n        },\n        test: (value: string): boolean =>\n        {\n            const tempURL = value.split('?')[0];\n            const split = tempURL.split('.');\n            const extension = split.pop();\n            const format = split.pop();\n\n            return extension === 'json' && validImages.includes(format);\n        },\n        parse: (value: string) =>\n        {\n            const split = value.split('.');\n\n            return {\n                resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n                format: split[split.length - 2],\n                src: value,\n            };\n        },\n    },\n    /**\n     * Loader plugin that parses sprite sheets!\n     * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n     * If it is, we load the spritesheets image and parse the data into Spritesheet\n     * All textures in the sprite sheet are then added to the cache\n     */\n    loader: {\n        name: 'spritesheetLoader',\n\n        extension: {\n            type: ExtensionType.LoadParser,\n            priority: LoaderParserPriority.Normal,\n            name: 'spritesheetLoader',\n        },\n\n        async testParse(asset: SpriteSheetJson, options: ResolvedAsset): Promise<boolean>\n        {\n            return (path.extname(options.src).toLowerCase() === '.json' && !!asset.frames);\n        },\n\n        async parse(\n            asset: SpriteSheetJson,\n            options: ResolvedAsset<{texture?: Texture, imageFilename?: string, ignoreMultiPack?: boolean}>,\n            loader?: Loader\n        ): Promise<Spritesheet>\n        {\n            const {\n                texture: imageTexture, // if user need to use preloaded texture\n                imageFilename // if user need to use custom filename (not from jsonFile.meta.image)\n            } = options?.data ?? {};\n\n            let basePath = path.dirname(options.src);\n\n            if (basePath && basePath.lastIndexOf('/') !== (basePath.length - 1))\n            {\n                basePath += '/';\n            }\n\n            let texture: Texture;\n\n            if (imageTexture instanceof Texture)\n            {\n                texture = imageTexture;\n            }\n            else\n            {\n                const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n\n                const assets = await loader.load<Texture>([imagePath]);\n\n                texture = assets[imagePath];\n            }\n\n            const spritesheet = new Spritesheet(\n                texture.source,\n                asset,\n            );\n\n            await spritesheet.parse();\n\n            // Check and add the multi atlas\n            // Heavily influenced and based on https://github.com/rocket-ua/pixi-tps-loader/blob/master/src/ResourceLoader.js\n            // eslint-disable-next-line camelcase\n            const multiPacks = asset?.meta?.related_multi_packs;\n\n            if (Array.isArray(multiPacks))\n            {\n                const promises: Promise<Spritesheet<SpriteSheetJson>>[] = [];\n\n                for (const item of multiPacks)\n                {\n                    if (typeof item !== 'string')\n                    {\n                        continue;\n                    }\n\n                    let itemUrl = basePath + item;\n\n                    // Check if the file wasn't already added as multipack\n                    if (options.data?.ignoreMultiPack)\n                    {\n                        continue;\n                    }\n\n                    itemUrl = copySearchParams(itemUrl, options.src);\n\n                    promises.push(loader.load<Spritesheet<SpriteSheetJson>>({\n                        src: itemUrl,\n                        data: {\n                            ignoreMultiPack: true,\n                        }\n                    }));\n                }\n\n                const res = await Promise.all(promises);\n\n                spritesheet.linkedSheets = res;\n                res.forEach((item) =>\n                {\n                    item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => (sp !== item)));\n                });\n            }\n\n            return spritesheet;\n        },\n\n        async unload(spritesheet: Spritesheet, _resolvedAsset, loader)\n        {\n            await loader.unload(spritesheet.textureSource._sourceOrigin);\n\n            spritesheet.destroy(false);\n        },\n    }\n} satisfies AssetExtensionAdvanced<SpriteSheetJson, Spritesheet, Spritesheet, Spritesheet>;\n","import { extensions } from '../extensions/Extensions';\nimport { spritesheetAsset } from './spritesheetAsset';\n\nextensions.add(spritesheetAsset);\n","import type { Ticker, TickerCallback } from './Ticker';\n\n/**\n * Internal class for handling the priority sorting of ticker handlers.\n * @private\n * @class\n */\nexport class TickerListener<T = any>\n{\n    /** The current priority. */\n    public priority: number;\n    /** The next item in chain. */\n    public next: TickerListener = null;\n    /** The previous item in chain. */\n    public previous: TickerListener = null;\n\n    /** The handler function to execute. */\n    private _fn: TickerCallback<T>;\n    /** The calling to execute. */\n    private _context: T;\n    /** If this should only execute once. */\n    private readonly _once: boolean;\n    /** `true` if this listener has been destroyed already. */\n    private _destroyed = false;\n\n    /**\n     * Constructor\n     * @private\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @param priority - The priority for emitting\n     * @param once - If the handler should fire once\n     */\n    constructor(fn: TickerCallback<T>, context: T = null, priority = 0, once = false)\n    {\n        this._fn = fn;\n        this._context = context;\n        this.priority = priority;\n        this._once = once;\n    }\n\n    /**\n     * Simple compare function to figure out if a function and context match.\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @returns `true` if the listener match the arguments\n     */\n    public match(fn: TickerCallback<T>, context: any = null): boolean\n    {\n        return this._fn === fn && this._context === context;\n    }\n\n    /**\n     * Emit by calling the current function.\n     * @param ticker - The ticker emitting.\n     * @returns Next ticker\n     */\n    public emit(ticker: Ticker): TickerListener\n    {\n        if (this._fn)\n        {\n            if (this._context)\n            {\n                this._fn.call(this._context, ticker);\n            }\n            else\n            {\n                (this as TickerListener<any>)._fn(ticker);\n            }\n        }\n\n        const redirect = this.next;\n\n        if (this._once)\n        {\n            this.destroy(true);\n        }\n\n        // Soft-destroying should remove\n        // the next reference\n        if (this._destroyed)\n        {\n            this.next = null;\n        }\n\n        return redirect;\n    }\n\n    /**\n     * Connect to the list.\n     * @param previous - Input node, previous listener\n     */\n    public connect(previous: TickerListener): void\n    {\n        this.previous = previous;\n        if (previous.next)\n        {\n            previous.next.previous = this;\n        }\n        this.next = previous.next;\n        previous.next = this;\n    }\n\n    /**\n     * Destroy and don't use after this.\n     * @param hard - `true` to remove the `next` reference, this\n     *        is considered a hard destroy. Soft destroy maintains the next reference.\n     * @returns The listener to redirect while emitting or removing.\n     */\n    public destroy(hard = false): TickerListener\n    {\n        this._destroyed = true;\n        this._fn = null;\n        this._context = null;\n\n        // Disconnect, hook up next and previous\n        if (this.previous)\n        {\n            this.previous.next = this.next;\n        }\n\n        if (this.next)\n        {\n            this.next.previous = this.previous;\n        }\n\n        // Redirect to the next item\n        const redirect = this.next;\n\n        // Remove references\n        this.next = hard ? null : redirect;\n        this.previous = null;\n\n        return redirect;\n    }\n}\n","import { UPDATE_PRIORITY } from './const';\nimport { TickerListener } from './TickerListener';\n\n/**\n * A callback which can be added to a ticker.\n * ```js\n * ticker.add(() => {\n *    // do something every frame\n * });\n * ```\n * @memberof ticker\n */\nexport type TickerCallback<T> = (this: T, ticker: Ticker) => any;\n\n/**\n * {@link ticker.Ticker|Tickers} provide periodic callbacks based on the system clock.\n * Your game update logic will generally be run in response to a tick once per frame.\n * You can have multiple tickers in use at one time.\n * ```js\n * import { Ticker } from 'pixi.js';\n *\n * const callback = (ticker: Ticker) => {\n *    // do something on the next animation frame\n * };\n *\n * // create a ticker\n * const ticker = new Ticker();\n *\n * // register the callback and start the ticker\n * ticker.add(callback);\n * ticker.start();\n * ```\n *\n * You can always use the {@link ticker.Ticker.shared|shared} ticker that Pixi renders with by default.\n * ```js\n * Ticker.shared.add(callback);\n * ```\n * @namespace ticker\n */\n\n/**\n * A Ticker class that runs an update loop that other objects listen to.\n *\n * This class is composed around listeners meant for execution on the next requested animation frame.\n * Animation frames are requested only when necessary, e.g. When the ticker is started and the emitter has listeners.\n * @class\n * @memberof ticker\n */\nexport class Ticker\n{\n    /**\n     * Target frames per millisecond.\n     * @static\n     */\n    public static targetFPMS = 0.06;\n\n    /** The private shared ticker instance */\n    private static _shared: Ticker;\n    /** The private system ticker instance  */\n    private static _system: Ticker;\n\n    /**\n     * Whether or not this ticker should invoke the method\n     * {@link ticker.Ticker#start|start} automatically when a listener is added.\n     */\n    public autoStart = false;\n    /**\n     * Scalar time value from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     */\n    public deltaTime = 1;\n    /**\n     * Scalar time elapsed in milliseconds from last frame to this frame.\n     * This value is capped by setting {@link ticker.Ticker#minFPS|minFPS}\n     * and is scaled with {@link ticker.Ticker#speed|speed}.\n     * **Note:** The cap may be exceeded by scaling.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     * Defaults to target frame time\n     * @default 16.66\n     */\n    public deltaMS: number;\n    /**\n     * Time elapsed in milliseconds from last frame to this frame.\n     * Opposed to what the scalar {@link ticker.Ticker#deltaTime|deltaTime}\n     * is based, this value is neither capped nor scaled.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     * Defaults to target frame time\n     * @default 16.66\n     */\n    public elapsedMS: number;\n    /**\n     * The last time {@link ticker.Ticker#update|update} was invoked.\n     * This value is also reset internally outside of invoking\n     * update, but only when a new animation frame is requested.\n     * If the platform supports DOMHighResTimeStamp,\n     * this value will have a precision of 1 s.\n     */\n    public lastTime = -1;\n    /**\n     * Factor of current {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @example\n     * // Scales ticker.deltaTime to what would be\n     * // the equivalent of approximately 120 FPS\n     * ticker.speed = 2;\n     */\n    public speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     * `true` if {@link ticker.Ticker#start|start} has been called.\n     * `false` if {@link ticker.Ticker#stop|Stop} has been called.\n     * While `false`, this value may change to `true` in the\n     * event of {@link ticker.Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     */\n    public started = false;\n\n    /** The first listener. All new listeners added are chained on this. */\n    private _head: TickerListener;\n    /** Internal current frame request ID */\n    private _requestId: number = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    private _maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    private _minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    private _protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    private _lastFrame = -1;\n    /**\n     * Internal tick method bound to ticker instance.\n     * This is because in early 2015, Function.bind\n     * is still 60% slower in high performance scenarios.\n     * Also separating frame requests from update method\n     * so listeners may be called at any time and with\n     * any animation API, just invoke ticker.update(time).\n     * @param time - Time since last tick.\n     */\n    private readonly _tick: (time: number) => any;\n\n    constructor()\n    {\n        this._head = new TickerListener(null, null, Infinity);\n        this.deltaMS = 1 / Ticker.targetFPMS;\n        this.elapsedMS = 1 / Ticker.targetFPMS;\n\n        this._tick = (time: number): void =>\n        {\n            this._requestId = null;\n\n            if (this.started)\n            {\n                // Invoke listeners now\n                this.update(time);\n                // Listener side effects may have modified ticker state.\n                if (this.started && this._requestId === null && this._head.next)\n                {\n                    this._requestId = requestAnimationFrame(this._tick);\n                }\n            }\n        };\n    }\n\n    /**\n     * Conditionally requests a new animation frame.\n     * If a frame has not already been requested, and if the internal\n     * emitter has listeners, a new frame is requested.\n     * @private\n     */\n    private _requestIfNeeded(): void\n    {\n        if (this._requestId === null && this._head.next)\n        {\n            // ensure callbacks get correct delta\n            this.lastTime = performance.now();\n            this._lastFrame = this.lastTime;\n            this._requestId = requestAnimationFrame(this._tick);\n        }\n    }\n\n    /**\n     * Conditionally cancels a pending animation frame.\n     * @private\n     */\n    private _cancelIfNeeded(): void\n    {\n        if (this._requestId !== null)\n        {\n            cancelAnimationFrame(this._requestId);\n            this._requestId = null;\n        }\n    }\n\n    /**\n     * Conditionally requests a new animation frame.\n     * If the ticker has been started it checks if a frame has not already\n     * been requested, and if the internal emitter has listeners. If these\n     * conditions are met, a new frame is requested. If the ticker has not\n     * been started, but autoStart is `true`, then the ticker starts now,\n     * and continues with the previous conditions to request a new frame.\n     * @private\n     */\n    private _startIfPossible(): void\n    {\n        if (this.started)\n        {\n            this._requestIfNeeded();\n        }\n        else if (this.autoStart)\n        {\n            this.start();\n        }\n    }\n\n    /**\n     * Register a handler for tick events. Calls continuously unless\n     * it is removed or the ticker is stopped.\n     * @param fn - The listener function to be added for updates\n     * @param context - The listener context\n     * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n     * @returns This instance of a ticker\n     */\n    public add<T = any>(fn: TickerCallback<T>, context?: T, priority: number = UPDATE_PRIORITY.NORMAL): this\n    {\n        return this._addListener(new TickerListener(fn, context, priority));\n    }\n\n    /**\n     * Add a handler for the tick event which is only execute once.\n     * @param fn - The listener function to be added for one update\n     * @param context - The listener context\n     * @param {number} [priority=UPDATE_PRIORITY.NORMAL] - The priority for emitting\n     * @returns This instance of a ticker\n     */\n    public addOnce<T = any>(fn: TickerCallback<T>, context?: T, priority: number = UPDATE_PRIORITY.NORMAL): this\n    {\n        return this._addListener(new TickerListener(fn, context, priority, true));\n    }\n\n    /**\n     * Internally adds the event handler so that it can be sorted by priority.\n     * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n     * before the rendering.\n     * @private\n     * @param listener - Current listener being added.\n     * @returns This instance of a ticker\n     */\n    private _addListener(listener: TickerListener): this\n    {\n        // For attaching to head\n        let current = this._head.next;\n        let previous = this._head;\n\n        // Add the first item\n        if (!current)\n        {\n            listener.connect(previous);\n        }\n        else\n        {\n            // Go from highest to lowest priority\n            while (current)\n            {\n                if (listener.priority > current.priority)\n                {\n                    listener.connect(previous);\n                    break;\n                }\n                previous = current;\n                current = current.next;\n            }\n\n            // Not yet connected\n            if (!listener.previous)\n            {\n                listener.connect(previous);\n            }\n        }\n\n        this._startIfPossible();\n\n        return this;\n    }\n\n    /**\n     * Removes any handlers matching the function and context parameters.\n     * If no handlers are left after removing, then it cancels the animation frame.\n     * @param fn - The listener function to be removed\n     * @param context - The listener context to be removed\n     * @returns This instance of a ticker\n     */\n    public remove<T = any>(fn: TickerCallback<T>, context?: T): this\n    {\n        let listener = this._head.next;\n\n        while (listener)\n        {\n            // We found a match, lets remove it\n            // no break to delete all possible matches\n            // incase a listener was added 2+ times\n            if (listener.match(fn, context))\n            {\n                listener = listener.destroy();\n            }\n            else\n            {\n                listener = listener.next;\n            }\n        }\n\n        if (!this._head.next)\n        {\n            this._cancelIfNeeded();\n        }\n\n        return this;\n    }\n\n    /**\n     * The number of listeners on this ticker, calculated by walking through linked list\n     * @readonly\n     * @member {number}\n     */\n    get count(): number\n    {\n        if (!this._head)\n        {\n            return 0;\n        }\n\n        let count = 0;\n        let current = this._head;\n\n        while ((current = current.next))\n        {\n            count++;\n        }\n\n        return count;\n    }\n\n    /** Starts the ticker. If the ticker has listeners a new animation frame is requested at this point. */\n    public start(): void\n    {\n        if (!this.started)\n        {\n            this.started = true;\n            this._requestIfNeeded();\n        }\n    }\n\n    /** Stops the ticker. If the ticker has requested an animation frame it is canceled at this point. */\n    public stop(): void\n    {\n        if (this.started)\n        {\n            this.started = false;\n            this._cancelIfNeeded();\n        }\n    }\n\n    /** Destroy the ticker and don't use after this. Calling this method removes all references to internal events. */\n    public destroy(): void\n    {\n        if (!this._protected)\n        {\n            this.stop();\n\n            let listener = this._head.next;\n\n            while (listener)\n            {\n                listener = listener.destroy(true);\n            }\n\n            this._head.destroy();\n            this._head = null;\n        }\n    }\n\n    /**\n     * Triggers an update. An update entails setting the\n     * current {@link ticker.Ticker#elapsedMS|elapsedMS},\n     * the current {@link ticker.Ticker#deltaTime|deltaTime},\n     * invoking all listeners with current deltaTime,\n     * and then finally setting {@link ticker.Ticker#lastTime|lastTime}\n     * with the value of currentTime that was provided.\n     * This method will be called automatically by animation\n     * frame callbacks if the ticker instance has been started\n     * and listeners are added.\n     * @param {number} [currentTime=performance.now()] - the current time of execution\n     */\n    public update(currentTime: number = performance.now()): void\n    {\n        let elapsedMS;\n\n        // If the difference in time is zero or negative, we ignore most of the work done here.\n        // If there is no valid difference, then should be no reason to let anyone know about it.\n        // A zero delta, is exactly that, nothing should update.\n        //\n        // The difference in time can be negative, and no this does not mean time traveling.\n        // This can be the result of a race condition between when an animation frame is requested\n        // on the current JavaScript engine event loop, and when the ticker's start method is invoked\n        // (which invokes the internal _requestIfNeeded method). If a frame is requested before\n        // _requestIfNeeded is invoked, then the callback for the animation frame the ticker requests,\n        // can receive a time argument that can be less than the lastTime value that was set within\n        // _requestIfNeeded. This difference is in microseconds, but this is enough to cause problems.\n        //\n        // This check covers this browser engine timing issue, as well as if consumers pass an invalid\n        // currentTime value. This may happen if consumers opt-out of the autoStart, and update themselves.\n\n        if (currentTime > this.lastTime)\n        {\n            // Save uncapped elapsedMS for measurement\n            elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n\n            // cap the milliseconds elapsed used for deltaTime\n            if (elapsedMS > this._maxElapsedMS)\n            {\n                elapsedMS = this._maxElapsedMS;\n            }\n\n            elapsedMS *= this.speed;\n\n            // If not enough time has passed, exit the function.\n            // Get ready for next frame by setting _lastFrame, but based on _minElapsedMS\n            // adjustment to ensure a relatively stable interval.\n            if (this._minElapsedMS)\n            {\n                const delta = currentTime - this._lastFrame | 0;\n\n                if (delta < this._minElapsedMS)\n                {\n                    return;\n                }\n\n                this._lastFrame = currentTime - (delta % this._minElapsedMS);\n            }\n\n            this.deltaMS = elapsedMS;\n            this.deltaTime = this.deltaMS * Ticker.targetFPMS;\n\n            // Cache a local reference, in-case ticker is destroyed\n            // during the emit, we can still check for head.next\n            const head = this._head;\n\n            // Invoke listeners added to internal emitter\n            let listener = head.next;\n\n            while (listener)\n            {\n                listener = listener.emit(this);\n            }\n\n            if (!head.next)\n            {\n                this._cancelIfNeeded();\n            }\n        }\n        else\n        {\n            this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n        }\n\n        this.lastTime = currentTime;\n    }\n\n    /**\n     * The frames per second at which this ticker is running.\n     * The default is approximately 60 in most modern browsers.\n     * **Note:** This does not factor in the value of\n     * {@link ticker.Ticker#speed|speed}, which is specific\n     * to scaling {@link ticker.Ticker#deltaTime|deltaTime}.\n     * @member {number}\n     * @readonly\n     */\n    get FPS(): number\n    {\n        return 1000 / this.elapsedMS;\n    }\n\n    /**\n     * Manages the maximum amount of milliseconds allowed to\n     * elapse between invoking {@link ticker.Ticker#update|update}.\n     * This value is used to cap {@link ticker.Ticker#deltaTime|deltaTime},\n     * but does not effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n     * When setting this property it is clamped to a value between\n     * `0` and `Ticker.targetFPMS * 1000`.\n     * @member {number}\n     * @default 10\n     */\n    get minFPS(): number\n    {\n        return 1000 / this._maxElapsedMS;\n    }\n\n    set minFPS(fps: number)\n    {\n        // Minimum must be below the maxFPS\n        const minFPS = Math.min(this.maxFPS, fps);\n\n        // Must be at least 0, but below 1 / Ticker.targetFPMS\n        const minFPMS = Math.min(Math.max(0, minFPS) / 1000, Ticker.targetFPMS);\n\n        this._maxElapsedMS = 1 / minFPMS;\n    }\n\n    /**\n     * Manages the minimum amount of milliseconds required to\n     * elapse between invoking {@link ticker.Ticker#update|update}.\n     * This will effect the measured value of {@link ticker.Ticker#FPS|FPS}.\n     * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n     * Otherwise it will be at least `minFPS`\n     * @member {number}\n     * @default 0\n     */\n    get maxFPS(): number\n    {\n        if (this._minElapsedMS)\n        {\n            return Math.round(1000 / this._minElapsedMS);\n        }\n\n        return 0;\n    }\n\n    set maxFPS(fps: number)\n    {\n        if (fps === 0)\n        {\n            this._minElapsedMS = 0;\n        }\n        else\n        {\n            // Max must be at least the minFPS\n            const maxFPS = Math.max(this.minFPS, fps);\n\n            this._minElapsedMS = 1 / (maxFPS / 1000);\n        }\n    }\n\n    /**\n     * The shared ticker instance used by {@link AnimatedSprite} and by\n     * {@link VideoResource} to update animation frames / video textures.\n     *\n     * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n     *\n     * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n     * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n     * @example\n     * import { Ticker } from 'pixi.js';\n     *\n     * const ticker = Ticker.shared;\n     * // Set this to prevent starting this ticker when listeners are added.\n     * // By default this is true only for the Ticker.shared instance.\n     * ticker.autoStart = false;\n     *\n     * // FYI, call this to ensure the ticker is stopped. It should be stopped\n     * // if you have not attempted to render anything yet.\n     * ticker.stop();\n     *\n     * // Call this when you are ready for a running shared ticker.\n     * ticker.start();\n     * @example\n     * import { autoDetectRenderer, Container } from 'pixi.js';\n     *\n     * // You may use the shared ticker to render...\n     * const renderer = autoDetectRenderer();\n     * const stage = new Container();\n     * document.body.appendChild(renderer.view);\n     * ticker.add((time) => renderer.render(stage));\n     *\n     * // Or you can just update it manually.\n     * ticker.autoStart = false;\n     * ticker.stop();\n     * const animate = (time) => {\n     *     ticker.update(time);\n     *     renderer.render(stage);\n     *     requestAnimationFrame(animate);\n     * };\n     * animate(performance.now());\n     * @member {ticker.Ticker}\n     * @readonly\n     * @static\n     */\n    static get shared(): Ticker\n    {\n        if (!Ticker._shared)\n        {\n            const shared = Ticker._shared = new Ticker();\n\n            shared.autoStart = true;\n            shared._protected = true;\n        }\n\n        return Ticker._shared;\n    }\n\n    /**\n     * The system ticker instance used by {@link BasePrepare} for core timing\n     * functionality that shouldn't usually need to be paused, unlike the `shared`\n     * ticker which drives visual animations and rendering which may want to be paused.\n     *\n     * The property {@link ticker.Ticker#autoStart|autoStart} is set to `true` for this instance.\n     * @member {ticker.Ticker}\n     * @readonly\n     * @static\n     */\n    static get system(): Ticker\n    {\n        if (!Ticker._system)\n        {\n            const system = Ticker._system = new Ticker();\n\n            system.autoStart = true;\n            system._protected = true;\n        }\n\n        return Ticker._system;\n    }\n}\n","/**\n * Represents the update priorities used by internal Pixi classes when registered with\n * the {@link ticker.Ticker} object. Higher priority items are updated first and lower\n * priority items, such as render, should go later.\n * @static\n * @enum {number}\n * @memberof ticker\n */\nexport enum UPDATE_PRIORITY\n// eslint-disable-next-line @typescript-eslint/indent\n{\n    /**\n     * Highest priority used for interaction events in {@link EventSystem}\n     * @default 50\n     */\n    INTERACTION = 50,\n    /**\n     * High priority updating, used by {@link AnimatedSprite}\n     * @default 25\n     */\n    HIGH = 25,\n    /**\n     * Default priority for ticker events, see {@link Ticker#add}.\n     * @default 0\n     */\n    NORMAL = 0,\n    /**\n     * Low priority used for {@link Application} rendering.\n     * @default -25\n     */\n    LOW = -25,\n    /**\n     * Lowest priority used for {@link BasePrepare} utility.\n     * @default -50\n     */\n    UTILITY = -50,\n}\n","import type { ALPHA_MODES } from '../../rendering/renderers/shared/texture/const';\n\nlet promise: Promise<ALPHA_MODES> | undefined;\n\n/**\n * Helper for detecting the correct alpha mode for video textures.\n * For some reason, some browsers/devices/WebGL implementations premultiply the alpha\n * of a video before and then a second time if `UNPACK_PREMULTIPLY_ALPHA_WEBGL`\n * is true. So the video is premultiplied twice if the alpha mode is `UNPACK`.\n * In this case we need the alpha mode to be `PMA`. This function detects\n * the upload behavior by uploading a white 2x2 webm with 50% alpha\n * without `UNPACK_PREMULTIPLY_ALPHA_WEBGL` and then checking whether\n * the uploaded pixels are premultiplied.\n * @memberof utils\n * @function detectVideoAlphaMode\n * @returns {Promise<ALPHA_MODES>} The correct alpha mode for video textures.\n */\nexport async function detectVideoAlphaMode(): Promise<ALPHA_MODES>\n{\n    promise ??= (async () =>\n    {\n        const canvas = document.createElement('canvas');\n        const gl = canvas.getContext('webgl');\n\n        if (!gl)\n        {\n            return 'premultiply-alpha-on-upload';\n        }\n\n        const video = await new Promise<HTMLVideoElement | null>((resolve) =>\n        {\n            const video = document.createElement('video');\n\n            video.onloadeddata = () => resolve(video);\n            video.onerror = () => resolve(null);\n            video.autoplay = false;\n            video.crossOrigin = 'anonymous';\n            video.preload = 'auto';\n            // eslint-disable-next-line max-len\n            video.src = 'data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=';\n            video.load();\n        });\n\n        if (!video)\n        {\n            return 'premultiply-alpha-on-upload';\n        }\n\n        const texture = gl.createTexture();\n\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n\n        const framebuffer = gl.createFramebuffer();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n        gl.framebufferTexture2D(\n            gl.FRAMEBUFFER,\n            gl.COLOR_ATTACHMENT0,\n            gl.TEXTURE_2D,\n            texture,\n            0\n        );\n\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n        gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n\n        const pixel = new Uint8Array(4);\n\n        gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n\n        gl.deleteFramebuffer(framebuffer);\n        gl.deleteTexture(texture);\n        gl.getExtension('WEBGL_lose_context')?.loseContext();\n\n        return pixel[0] <= pixel[3] ? 'premultiplied-alpha' : 'premultiply-alpha-on-upload';\n    })();\n\n    return promise;\n}\n","// Cache the result to prevent running this over and over\nlet unsafeEval: boolean;\n\n/**\n * Not all platforms allow to generate function code (e.g., `new Function`).\n * this provides the platform-level detection.\n * @private\n * @returns {boolean} `true` if `new Function` is supported.\n */\nexport function unsafeEvalSupported(): boolean\n{\n    if (typeof unsafeEval === 'boolean')\n    {\n        return unsafeEval;\n    }\n\n    try\n    {\n        /* eslint-disable no-new-func */\n        const func = new Function('param1', 'param2', 'param3', 'return param1[param2] === param3;');\n        /* eslint-enable no-new-func */\n\n        unsafeEval = func({ a: 'b' }, 'a', 'b') === true;\n    }\n    catch (e)\n    {\n        unsafeEval = false;\n    }\n\n    return unsafeEval;\n}\n","import EventEmitter from 'eventemitter3';\n\n/**\n * Regexp for data URI.\n * Based on: {@link https://github.com/ragingwind/data-uri-regex}\n * @static\n * @type {RegExp}\n * @default /(?:^data:image\\/([\\w+]+);(?:[\\w=]+|charset=[\\w-]+)?(?:;base64)?,)/i\n * @example\n * import { DATA_URI } from 'pixi.js';\n *\n * DATA_URI.test('data:image/png;base64,foobar'); // => true\n * @memberof utils\n */\nexport const DATA_URI = /^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;charset=([\\w-]+))?(?:;(base64))?,(.*)/i;\n\n// export the event emitter so we can use it in external modules\nexport { EventEmitter };\n\n/** The current version of PixiJS. This is automatically replaced by the build process. */\nexport const VERSION = '$_VERSION';\n","type TypedArray = Float32Array | Uint32Array | Int32Array | Uint8Array;\n\n/**\n * Flexible wrapper around `ArrayBuffer` that also provides typed array views on demand.\n * @memberof utils\n */\nexport class ViewableBuffer\n{\n    /** The size of the buffer in bytes. */\n    public size: number;\n\n    /** Underlying `ArrayBuffer` that holds all the data and is of capacity `this.size`. */\n    public rawBinaryData: ArrayBuffer;\n\n    /** View on the raw binary data as a `Uint32Array`. */\n    public uint32View: Uint32Array;\n\n    /** View on the raw binary data as a `Float32Array`. */\n    public float32View: Float32Array;\n    public uint16View: Uint16Array;\n\n    private _int8View: Int8Array;\n    private _uint8View: Uint8Array;\n    private _int16View: Int16Array;\n    private _int32View: Int32Array;\n    private _float64Array: Float64Array;\n    private _bigUint64Array: BigUint64Array;\n\n    /**\n     * @param length - The size of the buffer in bytes.\n     */\n    constructor(length: number);\n\n    /**\n     * @param arrayBuffer - The source array buffer.\n     */\n    constructor(arrayBuffer: ArrayBuffer);\n\n    constructor(sizeOrBuffer: number | ArrayBuffer | Uint8Array)\n    {\n        if (typeof sizeOrBuffer === 'number')\n        {\n            this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n        }\n        else if (sizeOrBuffer instanceof Uint8Array)\n        {\n            this.rawBinaryData = sizeOrBuffer.buffer;\n        }\n        else\n        {\n            this.rawBinaryData = sizeOrBuffer;\n        }\n\n        this.uint32View = new Uint32Array(this.rawBinaryData);\n        this.float32View = new Float32Array(this.rawBinaryData);\n\n        this.size = this.rawBinaryData.byteLength;\n    }\n\n    /** View on the raw binary data as a `Int8Array`. */\n    get int8View(): Int8Array\n    {\n        if (!this._int8View)\n        {\n            this._int8View = new Int8Array(this.rawBinaryData);\n        }\n\n        return this._int8View;\n    }\n\n    /** View on the raw binary data as a `Uint8Array`. */\n    get uint8View(): Uint8Array\n    {\n        if (!this._uint8View)\n        {\n            this._uint8View = new Uint8Array(this.rawBinaryData);\n        }\n\n        return this._uint8View;\n    }\n\n    /**  View on the raw binary data as a `Int16Array`. */\n    get int16View(): Int16Array\n    {\n        if (!this._int16View)\n        {\n            this._int16View = new Int16Array(this.rawBinaryData);\n        }\n\n        return this._int16View;\n    }\n\n    /** View on the raw binary data as a `Int32Array`. */\n    get int32View(): Int32Array\n    {\n        if (!this._int32View)\n        {\n            this._int32View = new Int32Array(this.rawBinaryData);\n        }\n\n        return this._int32View;\n    }\n\n    /** View on the raw binary data as a `Float64Array`. */\n    get float64View(): Float64Array\n    {\n        if (!this._float64Array)\n        {\n            this._float64Array = new Float64Array(this.rawBinaryData);\n        }\n\n        return this._float64Array;\n    }\n\n    /** View on the raw binary data as a `BigUint64Array`. */\n    get bigUint64View(): BigUint64Array\n    {\n        if (!this._bigUint64Array)\n        {\n            this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n        }\n\n        return this._bigUint64Array;\n    }\n\n    /**\n     * Returns the view of the given type.\n     * @param type - One of `int8`, `uint8`, `int16`,\n     *    `uint16`, `int32`, `uint32`, and `float32`.\n     * @returns - typed array of given type\n     */\n    public view(type: string): TypedArray\n    {\n        return (this as any)[`${type}View`];\n    }\n\n    /** Destroys all buffer references. Do not use after calling this. */\n    public destroy(): void\n    {\n        this.rawBinaryData = null;\n        this._int8View = null;\n        this._uint8View = null;\n        this._int16View = null;\n        this.uint16View = null;\n        this._int32View = null;\n        this.uint32View = null;\n        this.float32View = null;\n    }\n\n    /**\n     * Returns the size of the given type in bytes.\n     * @param type - One of `int8`, `uint8`, `int16`,\n     *   `uint16`, `int32`, `uint32`, and `float32`.\n     * @returns - size of the type in bytes\n     */\n    public static sizeOf(type: string): number\n    {\n        switch (type)\n        {\n            case 'int8':\n            case 'uint8':\n                return 1;\n            case 'int16':\n            case 'uint16':\n                return 2;\n            case 'int32':\n            case 'uint32':\n            case 'float32':\n                return 4;\n            default:\n                throw new Error(`${type} isn't a valid view type`);\n        }\n    }\n}\n","/**\n * Remove items from a javascript array without generating garbage\n * @function removeItems\n * @memberof utils\n * @param {Array<any>} arr - Array to remove elements from\n * @param {number} startIdx - starting index\n * @param {number} removeCount - how many to remove\n */\nexport function removeItems(arr: any[], startIdx: number, removeCount: number): void\n{\n    const length = arr.length;\n    let i;\n\n    if (startIdx >= length || removeCount === 0)\n    {\n        return;\n    }\n\n    removeCount = (startIdx + removeCount > length ? length - startIdx : removeCount);\n\n    const len = length - removeCount;\n\n    for (i = startIdx; i < len; ++i)\n    {\n        arr[i] = arr[i + removeCount];\n    }\n\n    arr.length = len;\n}\n","const uidCache: Record<string, number> = {\n    default: -1,\n};\n\ntype UIDNames =\n    | 'default'\n    | 'resource'\n    | 'texture'\n    | 'textureSource'\n    | 'textureResource'\n    | 'batcher' //\n    | 'graphicsContext' //\n    | 'graphicsView' //\n    | 'graphicsPath' //\n    | 'fillGradient' //\n    | 'fillPattern' //\n    | 'meshView' //\n    | 'renderable' //\n    | 'buffer' //\n    | 'bufferResource' //\n    | 'geometry'\n    | 'instructionSet' //\n    | 'renderTarget' //\n    | 'uniform' //\n    | 'spriteView' //\n    | 'textView' //\n    | 'tilingSpriteView'; // ;\n\n/**\n * Gets the next unique identifier\n * @param name - The name of the identifier.\n * @function uid\n * @returns {number} The next unique identifier to use.\n * @memberof utils\n */\nexport function uid(name: UIDNames = 'default'): number\n{\n    if (uidCache[name] === undefined)\n    {\n        uidCache[name] = -1;\n    }\n\n    return ++uidCache[name];\n}\n\n/** Resets the next unique identifier to 0. This is used for some tests, dont touch or things WILL explode :) */\nexport function resetUids(): void\n{\n    for (const key in uidCache)\n    {\n        delete uidCache[key];\n    }\n}\n","import type { ObservablePoint } from '../../maths/point/ObservablePoint';\nimport type { Texture } from '../../rendering/renderers/shared/texture/Texture';\nimport type { BoundsData } from '../../scene/container/bounds/Bounds';\n\nexport function updateQuadBounds(\n    bounds: BoundsData,\n    anchor: ObservablePoint,\n    texture: Texture,\n    padding: number\n)\n{\n    const { width, height } = texture.orig;\n    const trim = texture.trim;\n\n    if (trim)\n    {\n        const sourceWidth = trim.width;\n        const sourceHeight = trim.height;\n\n        bounds.minX = (trim.x) - (anchor._x * width) - padding;\n        bounds.maxX = bounds.minX + sourceWidth;\n\n        bounds.minY = (trim.y) - (anchor._y * height) - padding;\n        bounds.maxY = bounds.minY + sourceHeight;\n    }\n\n    else\n    {\n        bounds.minX = (-anchor._x * width) - padding;\n        bounds.maxX = bounds.minX + width;\n\n        bounds.minY = (-anchor._y * height) - padding;\n        bounds.maxY = bounds.minY + height;\n    }\n\n    return;\n}\n","import { type ExtensionMetadata, ExtensionType } from '../../extensions/Extensions';\nimport { VERSION } from '../const';\n\nimport type { Application } from '../../app/Application';\nimport type { System } from '../../rendering/renderers/shared/system/System';\nimport type { Renderer } from '../../rendering/renderers/types';\n\ndeclare global\n{\n    /* eslint-disable no-var */\n    var __PIXI_APP_INIT__: undefined | ((arg: Application | Renderer, version: string) => void);\n    var __PIXI_RENDERER_INIT__: undefined | ((arg: Application | Renderer, version: string) => void);\n    /* eslint-enable no-var */\n}\n\n/**\n * Calls global __PIXI_APP_INIT__ hook with the application instance, after the application is initialized.\n * @memberof app\n */\nexport class ApplicationInitHook\n{\n    /** @ignore */\n    public static extension: ExtensionMetadata = ExtensionType.Application;\n    public static init(): void\n    {\n        globalThis.__PIXI_APP_INIT__?.(this as unknown as Application, VERSION);\n    }\n    public static destroy(): void\n    {\n        // nothing to do\n    }\n}\n\n/**\n * Calls global __PIXI_RENDERER_INIT__ hook with the renderer instance, after the renderer is initialized.\n * @memberof rendering\n */\nexport class RendererInitHook implements System\n{\n    /** @ignore */\n    public static extension = {\n        type: [\n            ExtensionType.WebGLSystem,\n            ExtensionType.WebGPUSystem,\n        ],\n        name: 'initHook',\n        priority: -10,\n    } as const;\n\n    private _renderer: Renderer;\n\n    constructor(renderer: Renderer)\n    {\n        this._renderer = renderer;\n    }\n    public init(): void\n    {\n        globalThis.__PIXI_RENDERER_INIT__?.(this._renderer, VERSION);\n    }\n    public destroy(): void\n    {\n        this._renderer = null;\n    }\n}\n","import type { Dict } from '../types';\n\n// A map of warning messages already fired\nconst warnings: Dict<boolean> = {};\n\n/**\n * deprecation name for version 8.0.0\n * @ignore\n */\nexport const v8_0_0 = '8.0.0';\nexport const v8_3_4 = '8.3.4';\n\n/**\n * Helper for warning developers about deprecated features & settings.\n * A stack track for warnings is given; useful for tracking-down where\n * deprecated methods/properties/classes are being used within the code.\n * @memberof utils\n * @ignore\n * @function deprecation\n * @param {string} version - The version where the feature became deprecated\n * @param {string} message - Message should include what is deprecated, where, and the new solution\n * @param {number} [ignoreDepth=3] - The number of steps to ignore at the top of the error stack\n *        this is mostly to ignore internal deprecation calls.\n */\nexport function deprecation(version: string, message: string, ignoreDepth = 3): void\n{\n    // Ignore duplicate\n    if (warnings[message])\n    {\n        return;\n    }\n\n    /* eslint-disable no-console */\n    let stack = new Error().stack;\n\n    // Handle IE < 10 and Safari < 6\n    if (typeof stack === 'undefined')\n    {\n        console.warn('PixiJS Deprecation Warning: ', `${message}\\nDeprecated since v${version}`);\n    }\n    else\n    {\n        // chop off the stack trace which includes PixiJS internal calls\n        stack = stack.split('\\n').splice(ignoreDepth).join('\\n');\n\n        if (console.groupCollapsed)\n        {\n            console.groupCollapsed(\n                '%cPixiJS Deprecation Warning: %c%s',\n                'color:#614108;background:#fffbe6',\n                'font-weight:normal;color:#614108;background:#fffbe6',\n                `${message}\\nDeprecated since v${version}`\n            );\n            console.warn(stack);\n            console.groupEnd();\n        }\n        else\n        {\n            console.warn('PixiJS Deprecation Warning: ', `${message}\\nDeprecated since v${version}`);\n            console.warn(stack);\n        }\n    }\n    /* eslint-enable no-console */\n\n    warnings[message] = true;\n}\n","let warnCount = 0;\nconst maxWarnings = 500;\n\n/**\n * Logs a PixiJS warning message to the console. Stops logging after 500 warnings have been logged.\n * @param args - The warning message(s) to log\n * @returns {void}\n * @memberof utils\n * @ignore\n */\nexport function warn(...args: any[])\n{\n    if (warnCount === maxWarnings) return;\n\n    warnCount++;\n\n    if (warnCount === maxWarnings)\n    {\n        console.warn('PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.');\n    }\n    else\n    {\n        console.warn('PixiJS Warning: ', ...args);\n    }\n}\n","import { DOMAdapter } from '../environment/adapter';\n\nfunction assertPath(path: string)\n{\n    if (typeof path !== 'string')\n    {\n        throw new TypeError(`Path must be a string. Received ${JSON.stringify(path)}`);\n    }\n}\n\nfunction removeUrlParams(url: string): string\n{\n    const re = url.split('?')[0];\n\n    return re.split('#')[0];\n}\n\nfunction escapeRegExp(string: string)\n{\n    return string.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&'); // $& means the whole matched string\n}\n\nfunction replaceAll(str: string, find: string, replace: string)\n{\n    return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path: string, allowAboveRoot: boolean)\n{\n    let res = '';\n    let lastSegmentLength = 0;\n    let lastSlash = -1;\n    let dots = 0;\n    let code = -1;\n\n    for (let i = 0; i <= path.length; ++i)\n    {\n        if (i < path.length)\n        {\n            code = path.charCodeAt(i);\n        }\n        else if (code === 47)\n        {\n            break;\n        }\n        else\n        {\n            code = 47;\n        }\n        if (code === 47)\n        {\n            if (lastSlash === i - 1 || dots === 1)\n            {\n                // NOOP\n            }\n            else if (lastSlash !== i - 1 && dots === 2)\n            {\n                if (\n                    res.length < 2\n                    || lastSegmentLength !== 2\n                    || res.charCodeAt(res.length - 1) !== 46\n                    || res.charCodeAt(res.length - 2) !== 46\n                )\n                {\n                    if (res.length > 2)\n                    {\n                        const lastSlashIndex = res.lastIndexOf('/');\n\n                        if (lastSlashIndex !== res.length - 1)\n                        {\n                            if (lastSlashIndex === -1)\n                            {\n                                res = '';\n                                lastSegmentLength = 0;\n                            }\n                            else\n                            {\n                                res = res.slice(0, lastSlashIndex);\n                                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n                            }\n                            lastSlash = i;\n                            dots = 0;\n                            continue;\n                        }\n                    }\n                    else if (res.length === 2 || res.length === 1)\n                    {\n                        res = '';\n                        lastSegmentLength = 0;\n                        lastSlash = i;\n                        dots = 0;\n                        continue;\n                    }\n                }\n                if (allowAboveRoot)\n                {\n                    if (res.length > 0)\n                    { res += '/..'; }\n                    else\n                    { res = '..'; }\n                    lastSegmentLength = 2;\n                }\n            }\n            else\n            {\n                if (res.length > 0)\n                {\n                    res += `/${path.slice(lastSlash + 1, i)}`;\n                }\n                else\n                {\n                    res = path.slice(lastSlash + 1, i);\n                }\n                lastSegmentLength = i - lastSlash - 1;\n            }\n            lastSlash = i;\n            dots = 0;\n        }\n        else if (code === 46 && dots !== -1)\n        {\n            ++dots;\n        }\n        else\n        {\n            dots = -1;\n        }\n    }\n\n    return res;\n}\n\n/**\n * Path utilities for working with URLs and file paths in a cross-platform way.\n * All paths that are passed in will become normalized to have posix separators.\n * ```js\n * import { path } from 'pixi.js';\n *\n * path.normalize('http://www.example.com/foo/bar/../baz'); // http://www.example.com/foo/baz\n * ```\n * @memberof utils\n */\nexport interface Path\n{\n    /**\n     * Converts a path to posix format.\n     * @param path - The path to convert to posix\n     */\n    toPosix: (path: string) => string;\n    /**\n     * Checks if the path is a URL e.g. http://, https://\n     * @param path - The path to check\n     */\n    isUrl: (path: string) => boolean;\n    /**\n     * Checks if the path is a data URL\n     * @param path - The path to check\n     */\n    isDataUrl: (path: string) => boolean;\n    /**\n     * Checks if the path is a blob URL\n     * @param path - The path to check\n     */\n    isBlobUrl: (path: string) => boolean;\n    /**\n     * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n     * This will return true for windows file paths\n     * @param path - The path to check\n     */\n    hasProtocol: (path: string) => boolean;\n    /**\n     * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n     * @param path - The path to get the protocol from\n     */\n    getProtocol: (path: string) => string;\n    /**\n     * Converts URL to an absolute path.\n     * When loading from a Web Worker, we must use absolute paths.\n     * If the URL is already absolute we return it as is\n     * If it's not, we convert it\n     * @param url - The URL to test\n     * @param customBaseUrl - The base URL to use\n     * @param customRootUrl - The root URL to use\n     */\n    toAbsolute: (url: string, baseUrl?: string, rootUrl?: string) => string;\n    /**\n     * Normalizes the given path, resolving '..' and '.' segments\n     * @param path - The path to normalize\n     */\n    normalize: (path: string) => string;\n    /**\n     * Determines if path is an absolute path.\n     * Absolute paths can be urls, data urls, or paths on disk\n     * @param path - The path to test\n     */\n    isAbsolute: (path: string) => boolean;\n    /**\n     * Joins all given path segments together using the platform-specific separator as a delimiter,\n     * then normalizes the resulting path\n     * @param segments - The segments of the path to join\n     */\n    join: (...paths: string[]) => string;\n    /**\n     * Returns the directory name of a path\n     * @param path - The path to parse\n     */\n    dirname: (path: string) => string;\n    /**\n     * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n     * @param path - The path to parse\n     */\n    rootname: (path: string) => string;\n    /**\n     * Returns the last portion of a path\n     * @param path - The path to test\n     * @param ext - Optional extension to remove\n     */\n    basename: (path: string, ext?: string) => string;\n    /**\n     * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n     * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n     * the first character of the basename of path, an empty string is returned.\n     * @param path - The path to parse\n     */\n    extname: (path: string) => string;\n    /**\n     * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n     * @param path - The path to parse\n     */\n    parse: (path: string) => { root?: string, dir?: string, base?: string, ext?: string, name?: string };\n    sep: string,\n    delimiter: string,\n    joinExtensions: string[],\n}\n\n/**\n * Path utilities for working with URLs and file paths in a cross-platform way.\n * All paths that are passed in will become normalized to have posix separators.\n * ```js\n * import { path } from 'pixi.js';\n *\n * path.normalize('http://www.example.com/foo/bar/../baz'); // http://www.example.com/foo/baz\n * ```\n * @see {@link utils.Path}\n * @memberof utils\n */\nexport const path: Path = {\n    /**\n     * Converts a path to posix format.\n     * @param path - The path to convert to posix\n     */\n    toPosix(path: string) { return replaceAll(path, '\\\\', '/'); },\n    /**\n     * Checks if the path is a URL e.g. http://, https://\n     * @param path - The path to check\n     */\n    isUrl(path: string) { return (/^https?:/).test(this.toPosix(path)); },\n    /**\n     * Checks if the path is a data URL\n     * @param path - The path to check\n     */\n    isDataUrl(path: string)\n    {\n        // eslint-disable-next-line max-len\n        return (/^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i)\n            .test(path);\n    },\n    /**\n     * Checks if the path is a blob URL\n     * @param path - The path to check\n     */\n    isBlobUrl(path: string)\n    {\n        // Not necessary to have an exact regex to match the blob URLs\n        return path.startsWith('blob:');\n    },\n    /**\n     * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n     * This will return true for windows file paths\n     * @param path - The path to check\n     */\n    hasProtocol(path: string) { return (/^[^/:]+:/).test(this.toPosix(path)); },\n    /**\n     * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n     * @param path - The path to get the protocol from\n     */\n    getProtocol(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        const matchFile = (/^file:\\/\\/\\//).exec(path);\n\n        if (matchFile)\n        {\n            return matchFile[0];\n        }\n\n        const matchProtocol = (/^[^/:]+:\\/{0,2}/).exec(path);\n\n        if (matchProtocol)\n        {\n            return matchProtocol[0];\n        }\n\n        return '';\n    },\n\n    /**\n     * Converts URL to an absolute path.\n     * When loading from a Web Worker, we must use absolute paths.\n     * If the URL is already absolute we return it as is\n     * If it's not, we convert it\n     * @param url - The URL to test\n     * @param customBaseUrl - The base URL to use\n     * @param customRootUrl - The root URL to use\n     */\n    toAbsolute(url: string, customBaseUrl?: string, customRootUrl?: string)\n    {\n        assertPath(url);\n\n        if (this.isDataUrl(url) || this.isBlobUrl(url)) return url;\n\n        const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n        const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n\n        url = this.toPosix(url);\n\n        // root relative url\n        if (url.startsWith('/'))\n        {\n            return path.join(rootUrl, url.slice(1));\n        }\n\n        const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n\n        return absolutePath;\n    },\n\n    /**\n     * Normalizes the given path, resolving '..' and '.' segments\n     * @param path - The path to normalize\n     */\n    normalize(path: string)\n    {\n        assertPath(path);\n\n        if (path.length === 0) return '.';\n        if (this.isDataUrl(path) || this.isBlobUrl(path)) return path;\n\n        path = this.toPosix(path);\n\n        let protocol = '';\n        const isAbsolute = path.startsWith('/');\n\n        if (this.hasProtocol(path))\n        {\n            protocol = this.rootname(path);\n            path = path.slice(protocol.length);\n        }\n\n        const trailingSeparator = path.endsWith('/');\n\n        // Normalize the path\n        path = normalizeStringPosix(path, false);\n\n        if (path.length > 0 && trailingSeparator) path += '/';\n        if (isAbsolute) return `/${path}`;\n\n        return protocol + path;\n    },\n\n    /**\n     * Determines if path is an absolute path.\n     * Absolute paths can be urls, data urls, or paths on disk\n     * @param path - The path to test\n     */\n    isAbsolute(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        if (this.hasProtocol(path)) return true;\n\n        return path.startsWith('/');\n    },\n\n    /**\n     * Joins all given path segments together using the platform-specific separator as a delimiter,\n     * then normalizes the resulting path\n     * @param segments - The segments of the path to join\n     */\n    join(...segments: string[])\n    {\n        if (segments.length === 0)\n        { return '.'; }\n        let joined;\n\n        for (let i = 0; i < segments.length; ++i)\n        {\n            const arg = segments[i];\n\n            assertPath(arg);\n            if (arg.length > 0)\n            {\n                if (joined === undefined) joined = arg;\n                else\n                {\n                    const prevArg = segments[i - 1] ?? '';\n\n                    if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase()))\n                    {\n                        joined += `/../${arg}`;\n                    }\n                    else\n                    {\n                        joined += `/${arg}`;\n                    }\n                }\n            }\n        }\n        if (joined === undefined) { return '.'; }\n\n        return this.normalize(joined);\n    },\n\n    /**\n     * Returns the directory name of a path\n     * @param path - The path to parse\n     */\n    dirname(path: string)\n    {\n        assertPath(path);\n        if (path.length === 0) return '.';\n        path = this.toPosix(path);\n        let code = path.charCodeAt(0);\n        const hasRoot = code === 47;\n        let end = -1;\n        let matchedSlash = true;\n\n        const proto = this.getProtocol(path);\n        const origpath = path;\n\n        path = path.slice(proto.length);\n\n        for (let i = path.length - 1; i >= 1; --i)\n        {\n            code = path.charCodeAt(i);\n            if (code === 47)\n            {\n                if (!matchedSlash)\n                {\n                    end = i;\n                    break;\n                }\n            }\n            else\n            {\n                // We saw the first non-path separator\n                matchedSlash = false;\n            }\n        }\n\n        // if end is -1 and its a url then we need to add the path back\n        // eslint-disable-next-line no-nested-ternary\n        if (end === -1) return hasRoot ? '/' : this.isUrl(origpath) ? proto + path : proto;\n        if (hasRoot && end === 1) return '//';\n\n        return proto + path.slice(0, end);\n    },\n\n    /**\n     * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n     * @param path - The path to parse\n     */\n    rootname(path: string)\n    {\n        assertPath(path);\n        path = this.toPosix(path);\n\n        let root = '';\n\n        if (path.startsWith('/')) root = '/';\n        else\n        {\n            root = this.getProtocol(path);\n        }\n\n        if (this.isUrl(path))\n        {\n            // need to find the first path separator\n            const index = path.indexOf('/', root.length);\n\n            if (index !== -1)\n            {\n                root = path.slice(0, index);\n            }\n            else root = path;\n\n            if (!root.endsWith('/')) root += '/';\n        }\n\n        return root;\n    },\n\n    /**\n     * Returns the last portion of a path\n     * @param path - The path to test\n     * @param ext - Optional extension to remove\n     */\n    basename(path: string, ext?: string)\n    {\n        assertPath(path);\n        if (ext) assertPath(ext);\n\n        path = removeUrlParams(this.toPosix(path));\n\n        let start = 0;\n        let end = -1;\n        let matchedSlash = true;\n        let i: number;\n\n        if (ext !== undefined && ext.length > 0 && ext.length <= path.length)\n        {\n            if (ext.length === path.length && ext === path) return '';\n            let extIdx = ext.length - 1;\n            let firstNonSlashEnd = -1;\n\n            for (i = path.length - 1; i >= 0; --i)\n            {\n                const code = path.charCodeAt(i);\n\n                if (code === 47)\n                {\n                    // If we reached a path separator that was not part of a set of path\n                    // separators at the end of the string, stop now\n                    if (!matchedSlash)\n                    {\n                        start = i + 1;\n                        break;\n                    }\n                }\n                else\n                {\n                    if (firstNonSlashEnd === -1)\n                    {\n                        // We saw the first non-path separator, remember this index in case\n                        // we need it if the extension ends up not matching\n                        matchedSlash = false;\n                        firstNonSlashEnd = i + 1;\n                    }\n                    if (extIdx >= 0)\n                    {\n                        // Try to match the explicit extension\n                        if (code === ext.charCodeAt(extIdx))\n                        {\n                            if (--extIdx === -1)\n                            {\n                                // We matched the extension, so mark this as the end of our path\n                                // component\n                                end = i;\n                            }\n                        }\n                        else\n                        {\n                            // Extension does not match, so our result is the entire path\n                            // component\n                            extIdx = -1;\n                            end = firstNonSlashEnd;\n                        }\n                    }\n                }\n            }\n\n            if (start === end) end = firstNonSlashEnd; else if (end === -1) end = path.length;\n\n            return path.slice(start, end);\n        }\n        for (i = path.length - 1; i >= 0; --i)\n        {\n            if (path.charCodeAt(i) === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    start = i + 1;\n                    break;\n                }\n            }\n            else if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // path component\n                matchedSlash = false;\n                end = i + 1;\n            }\n        }\n\n        if (end === -1) return '';\n\n        return path.slice(start, end);\n    },\n\n    /**\n     * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n     * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n     * the first character of the basename of path, an empty string is returned.\n     * @param path - The path to parse\n     */\n    extname(path: string)\n    {\n        assertPath(path);\n        path = removeUrlParams(this.toPosix(path));\n\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n\n        for (let i = path.length - 1; i >= 0; --i)\n        {\n            const code = path.charCodeAt(i);\n\n            if (code === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if (code === 46)\n            {\n                // If this is our first dot, mark it as the start of our extension\n                if (startDot === -1) startDot = i;\n                else if (preDotState !== 1) preDotState = 1;\n            }\n            else if (startDot !== -1)\n            {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if (\n            startDot === -1 || end === -1\n            // We saw a non-dot character immediately before the dot\n            || preDotState === 0\n            // The (right-most) trimmed path component is exactly '..'\n            // eslint-disable-next-line no-mixed-operators, no-mixed-operators/no-mixed-operators\n            || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1\n        )\n        {\n            return '';\n        }\n\n        return path.slice(startDot, end);\n    },\n\n    /**\n     * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n     * @param path - The path to parse\n     */\n    parse(path: string)\n    {\n        assertPath(path);\n\n        const ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\n        if (path.length === 0) return ret;\n        path = removeUrlParams(this.toPosix(path));\n\n        let code = path.charCodeAt(0);\n        const isAbsolute = this.isAbsolute(path);\n        let start: number;\n        const protocol = '';\n\n        ret.root = this.rootname(path);\n\n        if (isAbsolute || this.hasProtocol(path))\n        {\n            start = 1;\n        }\n        else\n        {\n            start = 0;\n        }\n        let startDot = -1;\n        let startPart = 0;\n        let end = -1;\n        let matchedSlash = true;\n        let i = path.length - 1;\n\n        // Track the state of characters (if any) we see before our first dot and\n        // after any path separator we find\n        let preDotState = 0;\n\n        // Get non-dir info\n        for (; i >= start; --i)\n        {\n            code = path.charCodeAt(i);\n            if (code === 47)\n            {\n                // If we reached a path separator that was not part of a set of path\n                // separators at the end of the string, stop now\n                if (!matchedSlash)\n                {\n                    startPart = i + 1;\n                    break;\n                }\n                continue;\n            }\n            if (end === -1)\n            {\n                // We saw the first non-path separator, mark this as the end of our\n                // extension\n                matchedSlash = false;\n                end = i + 1;\n            }\n            if (code === 46)\n            {\n                // If this is our first dot, mark it as the start of our extension\n                if (startDot === -1) startDot = i;\n                else if (preDotState !== 1) preDotState = 1;\n            }\n            else if (startDot !== -1)\n            {\n                // We saw a non-dot and non-path separator before our dot, so we should\n                // have a good chance at having a non-empty extension\n                preDotState = -1;\n            }\n        }\n\n        if (\n            startDot === -1 || end === -1\n            // We saw a non-dot character immediately before the dot\n            || preDotState === 0\n            // The (right-most) trimmed path component is exactly '..'\n            // eslint-disable-next-line no-mixed-operators, no-mixed-operators/no-mixed-operators\n            || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1\n        )\n        {\n            if (end !== -1)\n            {\n                if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);\n                else ret.base = ret.name = path.slice(startPart, end);\n            }\n        }\n        else\n        {\n            if (startPart === 0 && isAbsolute)\n            {\n                ret.name = path.slice(1, startDot);\n                ret.base = path.slice(1, end);\n            }\n            else\n            {\n                ret.name = path.slice(startPart, startDot);\n                ret.base = path.slice(startPart, end);\n            }\n            ret.ext = path.slice(startDot, end);\n        }\n\n        ret.dir = this.dirname(path);\n        if (protocol) ret.dir = protocol + ret.dir;\n\n        return ret;\n    },\n\n    sep: '/',\n    delimiter: ':',\n    joinExtensions: ['.html'],\n} as Path;\n","/**\n * A generic class for managing a pool of items.\n * @template T The type of items in the pool. Must implement {@link utils.PoolItem}.\n * @memberof utils\n */\nexport class Pool<T extends PoolItem>\n{\n    public readonly _classType: PoolItemConstructor<T>;\n    private readonly _pool: T[] = [];\n    private _count = 0;\n    private _index = 0;\n\n    /**\n     * Constructs a new Pool.\n     * @param ClassType - The constructor of the items in the pool.\n     * @param {number} [initialSize] - The initial size of the pool.\n     */\n    constructor(ClassType: PoolItemConstructor<T>, initialSize?: number)\n    {\n        this._classType = ClassType;\n\n        if (initialSize)\n        {\n            this.prepopulate(initialSize);\n        }\n    }\n\n    /**\n     * Prepopulates the pool with a given number of items.\n     * @param total - The number of items to add to the pool.\n     */\n    public prepopulate(total: number): void\n    {\n        for (let i = 0; i < total; i++)\n        {\n            this._pool[this._index++] = new this._classType();\n        }\n\n        this._count += total;\n    }\n\n    /**\n     * Gets an item from the pool. Calls the item's `init` method if it exists.\n     * If there are no items left in the pool, a new one will be created.\n     * @param {unknown} [data] - Optional data to pass to the item's constructor.\n     * @returns {T} The item from the pool.\n     */\n    public get(data?: unknown): T\n    {\n        let item;\n\n        if (this._index > 0)\n        {\n            item = this._pool[--this._index];\n        }\n        else\n        {\n            item = new this._classType();\n        }\n\n        item.init?.(data);\n\n        return item;\n    }\n\n    /**\n     * Returns an item to the pool. Calls the item's `reset` method if it exists.\n     * @param {T} item - The item to return to the pool.\n     */\n    public return(item: T): void\n    {\n        item.reset?.();\n\n        this._pool[this._index++] = item;\n    }\n\n    /**\n     * Gets the number of items in the pool.\n     * @readonly\n     * @member {number}\n     */\n    get totalSize(): number\n    {\n        return this._count;\n    }\n\n    /**\n     * Gets the number of items in the pool that are free to use without needing to create more.\n     * @readonly\n     * @member {number}\n     */\n    get totalFree(): number\n    {\n        return this._index;\n    }\n\n    /**\n     * Gets the number of items in the pool that are currently in use.\n     * @readonly\n     * @member {number}\n     */\n    get totalUsed(): number\n    {\n        return this._count - this._index;\n    }\n\n    /** clears the pool - mainly used for debugging! */\n    public clear()\n    {\n        this._pool.length = 0;\n        this._index = 0;\n    }\n}\n\n/**\n * An object that can be stored in a {@link utils.Pool}.\n * @memberof utils\n */\nexport type PoolItem = {\n    init?: (data?: any) => void;\n    reset?: () => void;\n    [key: string]: any;\n};\n\n/**\n * The constructor of an object that can be stored in a {@link utils.Pool}.\n * @typeParam K - The type of the object that can be stored in a {@link utils.Pool}.\n * @memberof utils\n */\nexport type PoolItemConstructor<K extends PoolItem> = new () => K;\n","import { Pool } from './Pool';\n\nimport type { PoolItem, PoolItemConstructor } from './Pool';\n\n/**\n * A type alias for a constructor of a Pool.\n * @template T The type of items in the pool. Must extend PoolItem.\n * @memberof utils\n */\nexport type PoolConstructor<T extends PoolItem> = new () => Pool<T>;\n\n/**\n * A group of pools that can be used to store objects of different types.\n * @memberof utils\n */\nexport class PoolGroupClass\n{\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    private readonly _poolsByClass: Map<PoolItemConstructor<PoolItem>, Pool<PoolItem>> = new Map();\n\n    /**\n     * Prepopulates a specific pool with a given number of items.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n     * @param {number} total - The number of items to add to the pool.\n     */\n    public prepopulate<T extends PoolItem>(Class: PoolItemConstructor<T>, total: number): void\n    {\n        const classPool = this.getPool(Class);\n\n        classPool.prepopulate(total);\n    }\n\n    /**\n     * Gets an item from a specific pool.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n     * @param {unknown} [data] - Optional data to pass to the item's constructor.\n     * @returns {T} The item from the pool.\n     */\n    public get<T extends PoolItem>(Class: PoolItemConstructor<T>, data?: unknown): T\n    {\n        const pool = this.getPool(Class);\n\n        return pool.get(data) as T;\n    }\n\n    /**\n     * Returns an item to its respective pool.\n     * @param {PoolItem} item - The item to return to the pool.\n     */\n    public return(item: PoolItem): void\n    {\n        const pool = this.getPool(item.constructor as PoolItemConstructor<PoolItem>);\n\n        pool.return(item);\n    }\n\n    /**\n     * Gets a specific pool based on the class type.\n     * @template T The type of items in the pool. Must extend PoolItem.\n     * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n     * @returns {Pool<T>} The pool of the given class type.\n     */\n    public getPool<T extends PoolItem>(ClassType: PoolItemConstructor<T>): Pool<T>\n    {\n        if (!this._poolsByClass.has(ClassType))\n        {\n            this._poolsByClass.set(ClassType, new Pool(ClassType));\n        }\n\n        return this._poolsByClass.get(ClassType) as Pool<T>;\n    }\n\n    /** gets the usage stats of each pool in the system */\n    public stats(): Record<string, {free: number; used: number; size: number}>\n    {\n        const stats = {} as Record<string, {free: number; used: number; size: number}>;\n\n        this._poolsByClass.forEach((pool) =>\n        {\n            // TODO: maybe we should allow the name to be set when `createEntity` is called\n            const name = stats[pool._classType.name]\n                ? pool._classType.name + (pool._classType as any).ID : pool._classType.name;\n\n            stats[name] = {\n                free: pool.totalFree,\n                used: pool.totalUsed,\n                size: pool.totalSize,\n            };\n        });\n\n        return stats;\n    }\n}\n\nexport const BigPool = new PoolGroupClass();\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n"],"names":["render","_vm","this","_c","_self","ref","staticRenderFns","mounted","$nextTick","init","methods","app","Application","$refs","container","appendChild","canvas","texture","Assets","load","require","bunny","Sprite","x","renderer","width","y","height","anchor","stage","addChild","ticker","add","rotation","component","earcut","data","holeIndices","dim","minX","minY","maxX","maxY","invSize","hasHoles","length","outerLen","outerNode","linkedList","triangles","next","prev","eliminateHoles","i","Math","max","earcutLinked","start","end","clockwise","last","signedArea","insertNode","equals","removeNode","filterPoints","again","p","steiner","area","ear","pass","indexCurve","stop","isEarHashed","isEar","push","cureLocalIntersections","splitEarcut","a","b","c","ax","bx","cx","ay","by","cy","x0","y0","x1","y1","pointInTriangle","minZ","zOrder","maxZ","prevZ","n","nextZ","z","intersects","locallyInside","isValidDiagonal","splitPolygon","len","list","queue","getLeftmost","sort","compareX","eliminateHole","hole","bridge","findHoleBridge","bridgeReverse","m","hx","hy","qx","Infinity","tan","mx","my","tanMin","abs","sectorContainsSector","sortLinked","q","e","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","r","p1","p2","q1","q2","o1","sign","o2","o3","o4","onSegment","min","num","inside","a2","Node","b2","an","bp","sum","j","module","exports","deviation","polygonArea","trianglesArea","flatten","result","vertices","holes","dimensions","holeIndex","d","parse","h","l","s","t","v","segment","path","replace","_","command","args","type","toLowerCase","parseValues","concat","splice","unshift","Error","number","numbers","match","map","Number","has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","addListener","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","listeners","handlers","ee","Array","listenerCount","emit","a1","a3","a4","a5","arguments","removeListener","undefined","apply","on","removeAllListeners","off","prefixed","isPossiblePrototype","$String","String","$TypeError","argument","ArrayBuffer","DataView","globalThis","uncurryThisAccessor","classof","O","byteLength","uncurryThis","arrayBufferByteLength","ArrayBufferPrototype","error","isDetached","it","toIndex","notDetached","detachTransferable","PROPER_STRUCTURED_CLONE_TRANSFER","structuredClone","DataViewPrototype","isResizable","maxByteLength","getInt8","setInt8","arrayBuffer","newLength","preserveResizability","newBuffer","newByteLength","fixedLength","transfer","options","copyLength","NAME","Constructor","Prototype","NATIVE_ARRAY_BUFFER","DESCRIPTORS","isCallable","isObject","hasOwn","tryToString","createNonEnumerableProperty","defineBuiltIn","defineBuiltInAccessor","isPrototypeOf","getPrototypeOf","setPrototypeOf","wellKnownSymbol","uid","InternalStateModule","enforceInternalState","enforce","getInternalState","get","Int8Array","Int8ArrayPrototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","isView","klass","getTypedArrayConstructor","proto","state","isTypedArray","aTypedArray","aTypedArrayConstructor","C","exportTypedArrayMethod","KEY","property","forced","ARRAY","TypedArrayConstructor","error2","exportTypedArrayStaticMethod","Function","configurable","lengthOfArrayLike","$length","index","A","k","toIntegerOrInfinity","$RangeError","RangeError","value","relativeIndex","actualIndex","TO_STRING_TAG_SUPPORT","classofRaw","$Object","CORRECT_ARGUMENTS","tryGet","key","tag","callee","fails","F","constructor","makeBuiltIn","defineProperty","target","descriptor","getter","set","setter","f","WorkerThreads","channel","buffer","$detach","getBuiltInNodeModule","$ArrayBuffer","$MessageChannel","MessageChannel","detach","transferable","port1","postMessage","IS_NODE","process","getBuiltinModule","toObject","sharedKey","CORRECT_PROTOTYPE_GETTER","IE_PROTO","object","requireObjectCoercible","aPossiblePrototype","CORRECT_SETTER","test","V8","ENVIRONMENT","clone","toPrimitive","prim","BigInt","toLength","$","$transfer","transferToFixedLength","arrayToReversed","ArrayBufferViewCore","aCallable","arrayFromConstructorAndList","compareFn","arrayWith","isBigIntArray","toBigInt","PROPER_ORDER","valueOf","actualValue","toString","validateArgumentsLength","$URLSearchParams","URLSearchParams","URLSearchParamsPrototype","append","$delete","forEach","params","$value","entries","entry","dindex","found","entriesLength","enumerable","unsafe","getAll","$has","values","count","CacheClass","_parsers","_cache","Map","_cacheMap","reset","clear","warn","keys","convertToList","cacheableAssets","parsers","parser","getCacheableAssets","cacheableMap","key2","cacheKeys","cachedAssets","val","remove","cacheMap","delete","Cache","LoaderParserPriority","LoaderParserPriority2","processX","base","ids","depth","tags","id","createStringVariations","string","regex","vars","split","substring","Resolver","_defaultBundleIdentifierOptions","connector","createBundleAssetId","bundleId","assetId","_bundleIdConnector","extractAssetIdFromBundle","assetBundleId","_createBundleAssetId","_extractAssetIdFromBundle","_assetMap","_preferredOrder","_resolverHash","_bundles","setBundleIdentifier","bundleIdentifier","prefer","preferOrders","priority","basePath","_basePath","rootPath","_rootPath","_manifest","_defaultSearchParams","setDefaultSearchParams","searchParams","queryValues","encodeURIComponent","join","getAlias","asset","alias","src","aliasesToUse","isArray","addManifest","manifest","bundles","bundle","addBundle","assets","assetNames","convertedAssets","srcs","aliases","bundleAssetId","bundleIds","keyCheck","hasKey","assetArray","format","loadParser","srcsToUse","src2","resolvedAssets","formattedAsset","_buildResolvedAsset","resolveBundle","singleAsset","isSingleItem","out","results","resolve","resolveUrl","preferredOrder","_getPreferredOrder","priorityKey","filteredAssets","filter","hasBundle","preferred","find","preference","includes","_appendDefaultSearchParams","url","paramConnector","assetData","toAbsolute","getUrlExtension","pop","shift","RETINA_PREFIX","input","transform","forceTransform","item","copySearchParams","targetUrl","sourceUrl","grad","turn","rad","PI","pow","round","u","isFinite","g","o","floor","exec","parseInt","substr","N","trim","M","H","parsed","rgba","isValid","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","invert","w","saturate","desaturate","grayscale","lighten","darken","rotate","hue","alpha","isEqual","S","indexOf","white","bisque","blue","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","black","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","gray","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","magenta","green","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","red","yellow","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","extend","namesPlugin","_Color","_value","_components","fill","_int","setValue","_cloneSource","_isSourceEqual","_normalize","value1","value2","type1","type2","every","keys1","keys2","toRgba","toRgbaString","toUint8RgbArray","_arrayRgb","toArray","_arrayRgba","toRgbArray","toNumber","toBgrNumber","toLittleEndianNumber","multiply","_temp","_refreshInt","premultiply","applyToRGB","toPremultiplied","hexString","toHexa","alphaValue","alphaString","setAlpha","_clamp","int","HEX_PATTERN","color","colord","isColorLike","shared","Color","BrowserAdapter","createCanvas","document","createElement","getCanvasRenderingContext2D","CanvasRenderingContext2D","getWebGLRenderingContext","WebGLRenderingContext","getNavigator","navigator","getBaseUrl","baseURI","window","location","href","getFontFaceSet","fonts","fetch","parseXML","xml","DOMParser","parseFromString","currentAdapter","DOMAdapter","adapter","ExtensionType","ExtensionType2","normalizeExtension","ext","extension","metadata","normalizeExtensionPriority","defaultPriority","extensions","_addHandlers","_removeHandlers","_queue","extensions2","handle","onAdd","onRemove","addHandlers","removeHandlers","handleByMap","handleByNamedList","findIndex","handleByList","FilterEffect","pipe","destroy","filters","filterArea","browserExt","Environment","async","webworkerExt","self","WorkerGlobalScope","_isWebGLSupported","_isWebGPUSupported","isWebGLSupported","failIfMajorPerformanceCaveat","contextOptions","stencil","AbstractRenderer","defaultOptions","gl","getContext","success","getContextAttributes","loseContext","getExtension","isWebGPUSupported","gpu","requestAdapter","requestDevice","renderPriority","autoDetectRenderer","RendererClass","finalOptions","rendererType","WebGPURenderer","webgpu","WebGLRenderer","webgl","_Application","Container","deprecation","v8_0_0","_plugins","plugin","view","screen","rendererDestroyOptions","plugins","reverse","ApplicationInitHook","BitmapFont","AbstractBitmapFont","textures","pages","pageData","chars","charData","frame","textureFrame","source","textureSource","page","frameReal","Rectangle","Texture","codePointAt","xOffset","yOffset","xAdvance","kerning","baseRenderedFontSize","fontSize","baseMeasurementFontSize","fontMetrics","ascent","descent","baseLineOffset","lineHeight","fontFamily","distanceField","range","super","install","BitmapFontManager","uninstall","bitmapFontTextParser","startsWith","txt","items","rawData","info","common","char","kernings","attributeList","itemData","i2","strValue","floatValue","parseFloat","isNaN","font","distanceRange","fieldType","size","face","file","charNode","letter","fromCharCode","xoffset","yoffset","xadvance","first","second","amount","bitmapFontXMLParser","getElementsByTagName","getAttribute","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","CacheParser","loadBitmapFont","LoadParser","Normal","extname","testParse","loader","bitmapFontData","textureUrls","textureOptions","scaleMode","alphaMode","autoGenerateMipmaps","resolution","pageFile","imagePath","dirname","loadedTextures","bitmapFont","_options","response","text","unload","_resolvedAsset","Promise","all","_sourceOrigin","BackgroundLoader","verbose","_loader","_assetList","_isLoading","_maxConcurrent","assetUrls","console","log","_isActive","_next","toLoad","toLoadAmount","active","cacheTextureArray","testImageFormat","imageData","image","Image","onload","onerror","blob","createImageBitmap","detectAvif","DetectionParser","formats","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","video","canPlayType","detectMp4","detectOgv","detectWebm","detectWebp","Loader","_parsersValidated","Proxy","promiseCache","_getLoadPromiseAndParser","promise","_parserHash","parserX","parser2","assetsToLoadIn","onProgress","_validateParsers","assetsToLoad","total","promises","assetsToUnloadIn","assetsToUnload","loadPromise","loadedAsset","reduce","hash","checkDataUrl","mimes","mime","checkExtension","tempURL","validJSONExtension","validJSONMIME","loadJson","Low","json","validTXTExtension","validTXTMIME","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","getFontFamilyName","basename","nameWithSpaces","nameTokens","word","charAt","toUpperCase","valid","token","fontFamilyName","validURICharactersRegex","encodeURIWhenNeeded","uri","encodeURI","loadWebFont","fontFaces","family","weights","weight","FontFace","getResolutionOfUrl","defaultValue","createTexture","label","destroyed","validSVGExtension","validSVGMIME","loadSvg","config","crossOrigin","parseAsGraphicsContext","loadAsGraphics","loadAsTexture","blobUrl","URL","createObjectURL","decode","revokeObjectURL","drawImage","_p","rest","ImageSource","resource","svgSource","GraphicsContext","svg","MAX_WORKERS","UUID","WorkerManagerClass","_initialized","_createdWorkers","_workerPool","_resolveHash","isImageBitmapSupported","_isImageBitmapSupported","worker","WorkerInstance","addEventListener","terminate","loadImageBitmap","_run","_initWorkers","_getWorker","hardwareConcurrency","WorkerInstance$1","_complete","_returnWorker","uuid","reject","toDo","WorkerManager","validImageExtensions","validImageMIMEs","ok","status","statusText","imageBlob","premultiplyAlpha","loadTextures","High","preferWorkers","preferCreateImageBitmap","complete","validVideoExtensions","validVideoMIMEs","element","crossorigin","determineCrossOrigin","preloadVideo","loaded","cleanup","err","removeEventListener","loc","parsedUrl","hostname","port","protocol","loadVideoTextures","isValidDataUrl","isValidExtension","VideoSource","detectVideoAlphaMode","videoElement","attributeMap","preload","autoLoad","playsinline","muted","loop","autoplay","autoPlay","setAttribute","sourceElement","lastIndexOf","MIME_TYPES","onCanPlay","resolveTextureUrl","ResolveParser","resolveJsonUrl","endsWith","AssetsClass","_detections","resolver","cache","_backgroundLoader","defaultSearchParams","resolutionPref","texturePreference","_detectFormats","preferredFormats","skipDetections","detections","preferences","setPreferences","urls","urlArray","some","resolveResults","_mapLoadToResolve","loadBundle","_onProgress","resolveResult","then","resolveResult2","backgroundLoad","backgroundLoadBundle","resolveArray","Set","loadedAssets","_unloadFromResolved","unloadBundle","detection","assetKeyMap","Asset","assign","Matrix","tx","ty","array","fromArray","transpose","pos","newPos","Point","applyInverse","translate","scale","angle","cos","sin","c1","tx1","matrix","b1","d1","appendFrom","c2","d2","setTransform","pivotX","pivotY","scaleX","scaleY","skewX","skewY","prepend","decompose","pivot","atan2","delta","PI_2","skew","sqrt","position","isIdentity","identity","copyTo","copyFrom","IDENTITY","identityMatrix","tempMatrix","RAD_TO_DEG","DEG_TO_RAD","nextPow2","isPow2","ObservablePoint","observer","_x","_y","_observer","_onUpdate","tempPoint","tempPoints","left","right","top","bottom","isEmpty","EMPTY","copyFromBounds","bounds","rectangle","contains","strokeContains","strokeWidth","outerLeft","outerRight","outerTop","outerBottom","innerLeft","innerRight","innerTop","innerBottom","other","x02","x12","y02","y12","lt","lb","rt","rb","nx","ny","n00","n10","n01","n11","m00","m10","m01","m11","pad","paddingX","paddingY","fit","x2","y2","ceil","eps","enlarge","getBounds","fragTemplate","generateIfTestSrc","maxIfs","checkMaxIfStatementsInShader","shader","createShader","FRAGMENT_SHADER","fragmentSrc","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","maxTexturesPerBatchCache","getMaxTexturesPerBatch","getTestContext","getParameter","MAX_TEXTURE_IMAGE_UNITS","cachedGroups","getTextureBatchBindGroup","imul","generateTextureBatchBindGroup","maxTextures","bindGroupResources","bindIndex","style","bindGroup","BindGroup","BatchTextureArray","Batch","renderPipeId","action","blendMode","canBundle","gpuBindGroup","batcher","batchPool","batchPoolIndex","getBatchFromPool","returnBatchToPool","batch","BATCH_TICK","_Batcher","dirty","batchIndex","batches","_elements","attributesInitialSize","indicesInitialSize","attributeBuffer","ViewableBuffer","indexBuffer","begin","elementSize","elementStart","indexSize","attributeSize","_batchIndexStart","_batchIndexSize","batchableObject","_indexStart","_attributeStart","_batcher","vertexSize","checkAndUpdateTexture","textureId","_batch","_source","_textureId","updateElement","packAsQuad","packQuadAttributes","float32View","uint32View","packAttributes","break","instructionSet","elements","textureBatch","firstElement","getAdjustedBlendModeBlend","_resizeAttributeBuffer","_resizeIndexBuffer","f32","u32","adjustedBlendMode","breakRequired","_batchTick","_finishBatch","_textureBindLocation","packQuadIndex","packIndex","indexStart","finish","ensureAttributeBuffer","ensureIndexBuffer","newSize","newArrayBuffer","fastCopy","rawBinaryData","newIndexBuffer","BYTES_PER_ELEMENT","indicesOffset","indices","indexOffset","attributeOffset","Batcher","placeHolderBufferData","placeHolderIndexData","BatchGeometry","Geometry","Buffer","usage","BufferUsage","VERTEX","COPY_DST","shrinkToFit","INDEX","stride","attributes","aPosition","offset","aUV","aColor","aTextureIdAndRound","DefaultShader","Shader","glProgram","compileHighShaderGlProgram","bits","colorBitGl","generateTextureBatchBitGl","roundPixelsBitGl","gpuProgram","compileHighShaderGpuProgram","colorBit","generateTextureBatchBit","roundPixelsBit","resources","batchSamplers","getBatchSamplersUniformGroup","defaultShader","_DefaultBatcher","geometry","textureIdAndRound","roundPixels","wt","positions","uvs","argb","w0","w1","h0","h1","x3","y3","DefaultBatcher","addBits","srcParts","parts","toLocaleLowerCase","part","sanitisedPart","findHooksRx","compileHooks","programSrc","partMatches","hook","extractInputs","fragmentSource","compileInputs","fragments","template","fragment","header","mainInput","finalString","inValue","cleanedString","extractOutputs","extractVariableName","stripVariable","compileOutputs","mainStruct","mainStart","mainEnd","compiledCode","injectBits","templateSrc","fragmentParts","toInject","bitCacheMap","CACHE_UID","compileHighShader","cacheId","generateCacheId","vertex","compileInputsAndOutputs","compileBits","compileHighShaderGl","vertexFragments","shaderBit","fragmentFragments","compiledVertex","compiledFragment","highFragment","vertexParts","vertexGPUTemplate","fragmentGPUTemplate","vertexGlTemplate","fragmentGlTemplate","globalUniformsBit","globalUniformsBitGl","GpuProgram","from","entryPoint","GlProgram","main","textureBatchBitGpuCache","generateBindingSrc","bindingIndex","generateSampleSrc","textureBatchBitGlCache","generateSampleGlSrc","tempBounds","Bounds","addMaskBounds","mask","skipUpdateTransform","boundsToMask","measurable","getGlobalBounds","addBoundsMask","addMaskLocalBounds","localRoot","boundsPool","matrixPool","relativeMask","getMatrixRelativeToParent","getLocalBounds","return","root","parent","updateLocalTransform","localTransform","AlphaMask","inverse","renderMaskToTexture","renderable","includeInBuild","addBounds","addLocalBounds","containsPoint","point","hitTestFn","MaskEffect","ColorMask","StencilMask","CanvasSource","BufferImageSource","CLEAR","CLEAR2","maxFragmentPrecision","getMaxFragmentPrecision","getShaderPrecisionFormat","shaderFragment","HIGH_FLOAT","precision","addProgramDefines","isES300","isFragment","ensurePrecision","maxSupportedPrecision","maxSupportedFragmentPrecision","maxSupportedVertexPrecision","requestedFragmentPrecision","requestedVertexPrecision","insertVersion","fragmentNameCache","VertexNameCache","setProgramName","nameCache","shaderName","stripVersion","processes","programCache","_GlProgram","preprocessorOptions","preferredFragmentPrecision","preferredVertexPrecision","processKey","processOptions","_key","createIdFromString","_attributeData","_uniformData","_uniformBlockData","transformFeedbackVaryings","batchSamplersUniformGroupHash","batchSamplersUniformGroup","sampleValues","UniformGroup","uTextures","isStatic","isContextLost","_dirty","setResource","_updateKey","keyParts","_resourceId","currentResource","onResourceChange","getResource","_touch","tick","_touched","WGSL_TO_VERTEX_TYPES","vec2f","vec3f","vec4f","i32","bool","extractAttributesFromGpuProgram","mainVertStart","arrowFunctionStart","functionArgsSubstring","inputsRegex","getAttributeInfoFromFormat","instance","extractStructAndGroups","wgsl","linePattern","groupPattern","bindingPattern","namePattern","typePattern","structPattern","structMemberPattern","structName","groups","group","binding","isUniform","structs","struct","members","acc","member","name2","ShaderStage","ShaderStage2","generateGpuLayoutGroups","layout","visibility","FRAGMENT","sampler","sampleType","viewDimension","multisampled","generateLayoutHash","removeStructAndGroupDuplicates","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","dupeGroupKeySet","_layoutKey","_attributeLocationsKey","gpuLayout","structsAndGroups","autoAssignGlobalUniforms","globalUniforms","autoAssignLocalUniforms","localUniforms","_generateProgramKey","bigKey","attributeData","_resourceType","_updateID","_data","mappedAtCreation","setDataWithSize","static","STATIC","syncGPU","_updateSize","oldData","update","sizeInBytes","BufferUsage2","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","destinationFloat64View","remainingBytes","sourceUint8View","destinationUint8View","ensureIsBuffer","getGeometryBounds","attributeId","attribute","byteSize","ensureIsAttribute","instanceCount","_bounds","_boundsDirty","topology","buffers","addAttribute","addIndex","onBufferUpdate","getIndex","getBuffer","getSize","attributeOption","bufferIndex","destroyBuffers","attributeFormatData","uint8x2","normalised","uint8x4","sint8x2","sint8x4","unorm8x2","unorm8x4","snorm8x2","snorm8x4","uint16x2","uint16x4","sint16x2","sint16x4","unorm16x2","unorm16x4","snorm16x2","snorm16x4","float16x2","float16x4","float32","float32x2","float32x3","float32x4","uint32","uint32x2","uint32x3","uint32x4","sint32","sint32x2","sint32x3","sint32x4","_tick","InstructionSet","instructions","instructionSize","renderables","instruction","table","_uniformBindMap","_ownedBindGroups","compatibleRenderers","groupMap","RendererType","WEBGPU","WEBGL","nameHash","uniformName","groupData","bindTick","_buildResourceAccessor","addResource","groupIndex","_a","_b","uniformsOut","destroyPrograms","UNIFORM_TYPES_VALUES","UNIFORM_TYPES_MAP","getDefaultUniformValue","_UniformGroup","uniformStructures","isUniformGroup","_dirtyId","uniforms","uniformData","ubo","_signature","BLEND_TO_NPM","normal","STENCIL_MODES","STENCIL_MODES2","environments","loadEnvironmentExtensions","skip","env","defaultRunners","_AbstractRenderer","runners","renderPipes","_initOptions","_systemsHash","combinedRunners","_addRunners","_unsafeEvalCheck","skipExtensionImports","manageImports","_addSystems","systems","_addPipes","renderPipeAdaptors","systemName","system","defaultSystemOptions","_roundPixels","deprecated","renderTexture","renderTarget","_lastObjectRendered","clearColor","background","colorRgba","isRGBAArray","prerender","renderStart","renderEnd","postrender","resize","desiredScreenWidth","desiredScreenHeight","previousResolution","resolutionChange","ALL","lastObjectRendered","renderingToScreen","runnerIds","runnerId","SystemRunner","_addSystem","ClassRef","pipes","pipeAdaptors","adaptors","adaptor","PipeClass","Adaptor","runner","generateTexture","textureGenerator","unsafeEvalSupported","_name","a0","a6","a7","removeAll","empty","CanvasPoolClass","canvasOptions","_canvasPool","enableFullScreen","_createCanvasAndContext","pixelWidth","pixelHeight","getOptimalCanvasAndContext","minWidth","minHeight","canvasAndContext","returnCanvasAndContext","clearRect","CanvasPool","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","row","_ux","_uy","_vx","_vy","mat","groupD8","E","SE","SW","W","NW","NE","MIRROR_VERTICAL","MAIN_DIAGONAL","MIRROR_HORIZONTAL","REVERSE_DIAGONAL","uX","ind","uY","vX","vY","inv","rotationSecond","rotationFirst","sub","rotate180","isVertical","byDirection","dx","dy","matrixAppendRotationInv","NOOP","orig","defaultAnchor","defaultBorders","dynamic","noFrame","isTexture","TextureSource","updateUvs","textureMatrix","_textureMatrix","TextureMatrix","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","baseTexture","WHITE","tempMat","clampMargin","mapCoord","uClampFrame","uClampOffset","_textureID","clampOffset","isSimple","_texture","multiplyUvs","tex","texBase","margin","_resolution","idHash","createResourceIdFromString","_TextureStyle","_maxAnisotropy","addressMode","addressModeU","addressModeV","addressModeW","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","wrapMode","_sharedResourceId","_generateResourceId","TextureStyle","uploadMethodId","autoDensity","resizeCanvas","transparent","didResize","HTMLCanvasElement","OffscreenCanvas","context2D","_context2D","HTMLImageElement","autoGarbageCollect","ImageBitmap","VideoFrame","definedProps","obj","_TextureSource","sampleCount","mipLevelCount","dimension","antialias","resourceWidth","resourceHeight","_refreshPOT","_style","_onStyleChange","repeatMode","naturalWidth","videoWidth","displayWidth","naturalHeight","videoHeight","displayHeight","newPixelWidth","newPixelHeight","updateMipmaps","isPowerOfTwo","_resource","_VideoSource","isReady","_autoUpdate","_isConnectedToTicker","_updateFPS","updateFPS","_msToNextUpdate","_videoFrameRequestCallback","bind","_videoFrameRequestCallbackHandle","_load","_resolve","_reject","_onCanPlay","_onCanPlayThrough","_onError","_onPlayStart","_onPlayStop","_onSeeked","updateFrame","elapsedMS","Ticker","playbackRate","requestVideoFrameCallback","readyState","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","_isSourceReady","_mediaReady","preloadTimeoutMs","_preloadTimeout","setTimeout","ErrorEvent","_isSourcePlaying","paused","ended","_configureAutoUpdate","clearTimeout","play","pause","autoUpdate","cancelVideoFrameCallback","HTMLVideoElement","ogv","mov","m4v","sources","textureSourceFrom","hasResource","res","opts","Source","resourceToTexture","skipCache","textureFrom","idCounts","groupId","RendererType2","cullingMixin","cullArea","cullable","cullableChildren","childrenHelperMixin","allowChildren","removeChildren","beginIndex","endIndex","children","removed","child","removeItems","renderGroup","parentRenderGroup","removeChildAt","getChildAt","removeChild","setChildIndex","getChildIndex","addChildAt","currentIndex","didChange","_updateFlags","sortableChildren","sortDirty","swapChildren","child2","index1","index2","structureDidChange","_didContainerChangeTick","removeFromParent","reparentChild","reparentChildAt","childMat","worldTransform","newMatrix","setFromMatrix","MaskEffectManagerClass","_effectClasses","_tests","maskClass","getMaskEffect","BigPool","returnMaskEffect","effect","MaskEffectManager","effectsMixin","_maskEffect","_maskOptions","_filterEffect","effects","addEffect","_updateIsSimple","removeEffect","setMask","hasFilters","hadFilters","freeze","findMixin","getChildByName","deep","getChildByLabel","RegExp","getChildrenByLabel","checkChildrenDidChange","previousData","_didViewChangeTick","measureMixin","_localBoundsCacheId","_localBoundsCacheData","_setWidth","localWidth","_setHeight","localHeight","localBounds","localBoundsCacheData","skipUpdate","onRenderMixin","_onRender","onRender","func","removeOnRender","addOnRender","sortMixin","_zIndex","zIndex","depthOfChildModified","sortChildren","toLocalGlobalMixin","getGlobalPosition","toGlobal","_position","globalMatrix","updateTransformBackwards","toLocal","RenderGroup","renderGroupParent","renderGroupChildren","worldColorAlpha","worldColor","worldAlpha","childrenToUpdate","updateTick","childrenRenderablesToUpdate","_onRenderContainers","childrenAtDepth","addRenderGroupChild","renderGroupChild","_removeRenderGroupChild","relativeRenderGroupDepth","onChildUpdate","updateRenderable","globalDisplayStatus","didViewUpdate","onChildViewUpdate","isRenderable","localDisplayStatus","runOnRender","getChildren","_getChildren","assignWithIgnore","ignore","defaultSkew","defaultPivot","defaultScale","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","parentRenderGroupIndex","relativeGroupTransform","groupTransform","_scale","_pivot","_skew","_cx","_sx","_cy","_sy","_rotation","localColor","localAlpha","groupAlpha","groupColor","groupColorAlpha","localBlendMode","groupBlendMode","_didLocalTransformChangeId","mixin","defineProperties","getOwnPropertyDescriptors","_didChangeId","_updateSkew","isRenderGroup","enableRenderGroup","disableRenderGroup","_worldTransform","setSize","updateTransform","localTransformChangeId","sx","sy","tint","tempColor","bgr","visible","valueNumber","culled","oldChildren","destroyChildren","defaultMatrix","_rectangle","addFrame","addRect","rect","applyMatrix","fitBounds","isPositive","addVertexData","vertexData","beginOffset","endOffset","localX","localY","parentTransform","pooledMatrix","_getGlobalBounds","parentBounds","preserveBounds","boundsArea","relativeMatrix","_getLocalBounds","rootContainer","isRoot","relativeTransform","Pool","multiplyHexColors","color1","color2","r1","g1","r2","g2","BatchableGraphics","batcherName","applyTransform","geometryData","rgb","baseColor","gpuBuffer","SVGToGraphicsPath","svgPath","commands","subpaths","currentSubPath","lastX","lastY","moveTo","lineTo","bezierCurveTo","bezierCurveToShort","quadraticCurveTo","quadraticCurveToShort","arcToSvg","closePath","startX","startY","Circle","radius","distance","circle","Ellipse","halfWidth","halfHeight","normx","normy","halfStrokeWidth","innerA","innerB","outerA","outerB","normalizedX","normalizedY","innerEllipse","outerEllipse","ellipse","squaredDistanceToLineSegment","dot","lenSq","xx","yy","param","Polygon","points","flat","il","polygon","xi","yi","xj","yj","intersect","halfStrokeWidthSqrd","iterationLength","distanceSqrd","pointsDesc","currentPoint","isCornerWithinStroke","pX","pY","cornerX","cornerY","RoundedRectangle","radius2","innerX","innerY","innerWidth","innerHeight","rightBound","bottomBound","RECURSION_LIMIT","FLT_EPSILON","PATH_DISTANCE_EPSILON","curveAngleToleranceEpsilon","mAngleTolerance","mCuspLimit","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","smoothing","GraphicsContextSystem","bezierSmoothness","distanceTolerance","recursive","x4","y4","level","pi","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d3","da1","da2","a23","buildAdaptiveQuadratic","da","buildArc","steps","dist","cs","sn","buildArcTo","fromX","fromY","mm","dd","cc","tt","k1","k2","j1","j2","qy","startAngle","endAngle","TAU","centerX","centerY","ang1","ang2","mapToEllipse","rx","ry","cosPhi","sinPhi","out2","xp","yp","approxUnitArc","vectorAngle","acos","getArcCenter","largeArcFlag","sweepFlag","pxp","pyp","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","buildArcToSvg","xAxisRotation","lambda","ratio","segments","outCurvePoint","curve","roundedShapeArc","vecFrom","pp","sharpCorner","pRadius","p3","v1","v2","asin","radDirection","drawDirection","halfAngle","cRadius","lenOut","arc","roundedShapeQuadraticCurve","pointLerp","numPoints","thisPoint","lastPoint","nextPoint","lastEdgeLength","lastOffsetDistance","nextEdgeLength","nextOffsetDistance","tempRectangle","ShapePath","graphicsPath2D","shapePrimitives","_currentPoly","_graphicsPath2D","startPoly","_ensurePoly","counterclockwise","arcTo","currentPoly","endPoly","addPath","drawShape","poly","close","regularPoly","sides","roundPoly","corner","sideLength","internalAngle","roundShape","useQuadratic","filletRect","fillet","maxFillet","inset","dir","chamferRect","chamfer","radiusX","radiusY","roundRect","shape","lastShape","lx","ly","tempX","buildPath","shapePrimitive","boundsRect","GraphicsPath","shapePath","_shapePath","getLastPoint","currentX","currentY","cpx1","cpy1","star","innerRadius","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","SVGParser","graphicsContext","div","innerHTML","querySelector","session","renderChildren","fillStyle","strokeStyle","f1","s1","parseStyle","pointsString","graphicsPath","nodeName","stroke","parseFloatAttribute","beginPath","useFill","useStroke","styleParts","stylePart","tmpPoint","_GraphicsContext","batchMode","_activePath","_transform","_fillStyle","defaultFillStyle","_strokeStyle","defaultStrokeStyle","_stateStack","toFillStyle","toStrokeStyle","setFillStyle","setStrokeStyle","dw","dh","onUpdate","_initNextPathLocation","cut","holePath","transformedX","transformedY","cpx","cpy","restore","save","getTransform","resetTransform","padding","hasHit","shapes","transformedPoint","holeShapes","destroyTexture","destroyTextureSource","customShader","alignment","miterLimit","cap","buildUvs","verticesStride","verticesOffset","uvsOffset","uvsStride","buildSimpleUvs","transformVertices","buildCircle","ShapeBuilder","build","roundedRect","j3","j4","y22","x22","triangulate","centerIndex","buildEllipse","buildRoundedRectangle","closePointEps","curveEps","getOrientationOfPoints","square","innerWeight","outerWeight","verts","ix","iy","ox","oy","exx","eyy","eix","eiy","eox","eoy","ex","ey","cx2p0x","cy2p0y","angle0","angle1","angleDiff","absAngleDiff","segCount","angleInc","buildLine","lineStyle","flipAlignment","closed","_verticesStride","_verticesOffset","_indicesOffset","orientation","firstPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dx0","dy0","dx1","dy1","cross","pDist","imx","imy","omx","omy","smallerInsideSegmentSq","insideWeight","smallerInsideDiagonalSq","insideMiterOk","eps2","triangulateWithHoles","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","shapeBuilders","tempRect","buildContextBatches","gpuContext","addTextureToGeometryData","isStroke","addShapePathToGeometryData","vertOffset","textureUvs","graphicsBatch","lastIndex","otherPoints","holeArrays","getHoleArrays","holePoints","holePrimitives","holePrimitive","holeBuilder","GpuGraphicsContext","GraphicsContextRenderData","v8_3_4","_GraphicsContextSystem","_gpuContextHash","_graphicsDataContextHash","renderableGC","addManagedHash","getContextRenderData","_initContextRenderData","updateGpuContext","_initContext","_cleanGraphicsContextData","isBatchable","getGpuContext","graphicsData","drawBatches","onGraphicsContextDestroy","WebGLSystem","WebGPUSystem","CanvasSystem","_FillGradient","gradientStops","_styleKey","addColorStop","buildLinearGradient","defaultSize","defaultTextureSize","ctx","gradient","createLinearGradient","fillRect","styleKey","stops","FillGradient","repetitionMap","repeat","FillPattern","repetition","isFillPattern","isFillGradient","handleColorLike","defaultStyle","temp","handleFillPattern","handleFillGradient","handleFillObject","sourceStyle","objectStyle","ViewContainer","batched","_sourceBounds","_sourceBoundsDirty","_anchor","onViewUpdate","currentTexture","_width","_height","_updateBounds","sourceBounds","_updateSourceBounds","updateQuadBounds","applyFillAsTint","pageTextures","distanceFieldRange","distanceFieldType","destroyTextures","resolveCharacters","startCode","charCodeAt","endCode","_DynamicBitmapFont","_padding","_measureCache","_currentChars","_currentX","_currentY","_currentPageIndex","_skipKerning","dynamicOptions","_textureSize","textureSize","_mipmap","mipmap","overrideFill","_fill","requestedFontSize","fontStringFromTextStyle","overrideSize","_stroke","skipKerning","CanvasTextMetrics","measureFont","ensureCharacters","charList","_nextPage","fontScale","maxCharHeight","skipTexture","metrics","measureText","textureGlyphWidth","fontStyle","paddedWidth","paddedHeight","pageData2","dropShadow","_drawGlyph","_applyKerning","newChars","measureCache","textureResolution","_setupContext","textBaseline","strokeThickness","lineWidth","lineJoin","getCanvasFillStyle","shadowOptions","dropShadowBlur","blur","dropShadowDistance","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","fontProperties","strokeText","fillText","TextStyle","DynamicBitmapFont","fontCount","BitmapFontManagerClass","ALPHA","NUMERIC","ALPHANUMERIC","ASCII","getFont","fontFamilyKey","fnt","dynamicFont","getLayout","trimEnd","getBitmapTextLayout","textStyle","flatChars","cacheKey","layoutData","offsetY","lines","charPositions","spaceWidth","spacesIndex","currentLine","previousChar","firstWord","currentWord","spaceWord","nextWord","nextLine","lastChar","adjustedLetterSpacing","letterSpacing","adjustedWordWrapWidth","wordWrapWidth","isEnd","isSpace","isWordBreak","addWordToNextLine","wordWrap","nextCharWidth","align","alignCenter","alignRight","alignJustify","measurementData","line","indy","spaceIndex","totalSpaces","newSpaceWidth","_TextStyle","convertV7Tov8Style","fullStyle","defaultTextStyle","thisKey","_align","breakWords","_breakWords","_dropShadow","_createProxy","defaultDropShadow","_fontFamily","_fontSize","_fontStyle","fontVariant","_fontVariant","fontWeight","_fontWeight","leading","_leading","_letterSpacing","_lineHeight","_trim","_textBaseline","whiteSpace","_whiteSpace","_wordWrap","_wordWrapWidth","_originalFill","_isFillStyle","_originalStroke","_generateKey","generateTextStyleKey","cb","newValue","oldStyle","defaults","dropShadowAlpha","dropShadowAngle","dropShadowColor","fillGradientStops","gradientFill","fills","contextSettings","willReadFrequently","_CanvasTextMetrics","experimentalLetterSpacingSupported","_experimentalLetterSpacingSupported","lineWidths","maxLineWidth","_canvas","textKey","_measurementCache","__context","outputText","_measureText","measurements","useExperimentalLetterSpacing","experimentalLetterSpacing","textLetterSpacing","metricWidth","actualBoundingBoxLeft","actualBoundingBoxRight","boundsWidth","graphemeSegmenter","collapseSpaces","_collapseSpaces","collapseNewlines","_collapseNewlines","canPrependSpaces","tokens","_tokenize","_isNewline","_addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","_getFromCache","canBreakWords","characters","wordWrapSplit","nextChar","canBreakChars","characterWidth","isLastToken","newLine","_trimRight","_newlines","_nextChar","_breakingSpaces","_token","_char","_index","_fonts","_context","METRICS_STRING","BASELINE_SYMBOL","properties","actualBoundingBoxAscent","actualBoundingBoxDescent","clearMetrics","__canvas","BASELINE_MULTIPLIER","HEIGHT_MULTIPLIER","Intl","Segmenter","segmenter","genericFontFamilies","fontSizeString","fontFamilies","pattern","createPattern","fillPattern","fillGradient","valuesToIterateForKeys","prop","addFillStyleKey","addStokeStyleKey","addDropShadowKey","_lastUsed","_lastInstructionTick","_Spritesheet","linkedSheets","animations","metaResolution","meta","_frames","frames","_frameKeys","_batchIndex","_callback","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","sourceSize","trimmed","rotated","spriteSourceSize","borders","animName","frameName","callback","destroyBase","Spritesheet","validImages","ignoreMultiPack","related_multi_packs","spritesheetAsset","imageTexture","imageFilename","spritesheet","multiPacks","itemUrl","sp","TickerListener","previous","_destroyed","_fn","_once","redirect","connect","hard","_Ticker","autoStart","deltaTime","lastTime","speed","started","_requestId","_maxElapsedMS","_minElapsedMS","_protected","_lastFrame","_head","deltaMS","targetFPMS","time","requestAnimationFrame","_requestIfNeeded","performance","now","_cancelIfNeeded","cancelAnimationFrame","_startIfPossible","UPDATE_PRIORITY","NORMAL","_addListener","addOnce","current","currentTime","head","FPS","minFPS","fps","maxFPS","minFPMS","_shared","_system","UPDATE_PRIORITY2","video2","onloadeddata","bindTexture","TEXTURE_2D","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","NONE","texImage2D","RGBA","UNSIGNED_BYTE","pixel","readPixels","deleteFramebuffer","deleteTexture","unsafeEval","VERSION","sizeOrBuffer","int8View","_int8View","uint8View","_uint8View","int16View","_int16View","int32View","_int32View","float64View","_float64Array","bigUint64View","_bigUint64Array","uint16View","sizeOf","arr","startIdx","removeCount","uidCache","default","sourceWidth","sourceHeight","__PIXI_APP_INIT__","RendererInitHook","_renderer","__PIXI_RENDERER_INIT__","warnings","version","message","ignoreDepth","stack","groupCollapsed","groupEnd","warnCount","maxWarnings","assertPath","path2","JSON","stringify","removeUrlParams","re","escapeRegExp","replaceAll","str","normalizeStringPosix","allowAboveRoot","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","toPosix","isUrl","isDataUrl","isBlobUrl","hasProtocol","getProtocol","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","rootname","absolutePath","isAbsolute","normalize","trailingSeparator","joined","arg","prevArg","joinExtensions","hasRoot","matchedSlash","origpath","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","ret","sep","delimiter","ClassType","initialSize","_pool","_count","_classType","prepopulate","totalSize","totalFree","totalUsed","PoolGroupClass","_poolsByClass","Class","classPool","getPool","pool","stats","ID","free","used"],"sourceRoot":""}